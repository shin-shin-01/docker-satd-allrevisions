,CommitID,Dockerfile,Comment
0,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# explicitly set user/group IDs
#RUN adduser -S -G postgres -u 999 postgres

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
7,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
8,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
9,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
12,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
21,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
22,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
23,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
24,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
25,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile," # backwards compat
"
26,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# vim:set ft=dockerfile:
"
27,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# explicitly set user/group IDs
"
28,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
29,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
30,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# grab gosu for easy step-down from root
"
31,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
32,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
33,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
34,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
35,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
36,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# arches officialy built by upstream
"
37,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
38,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
39,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
40,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
41,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
42,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
43,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
44,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
45,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
46,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
47,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
48,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
49,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
50,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile," # backwards compat
"
51,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
52,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
53,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
54,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
55,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
56,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
57,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
58,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
59,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
60,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
61,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
62,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# arches officialy built by upstream
"
63,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
64,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
65,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
66,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417
"
67,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
68,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
69,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
70,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
71,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
72,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
73,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
74,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
75,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
76,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
77,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/Dockerfile-debian.template," # backwards compat
"
78,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
79,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
80,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
81,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
82,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
83,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
84,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
85,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
86,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
87,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
88,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
89,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
90,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
91,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
92,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
93,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
94,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
95,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
96,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
97,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
98,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile," # backwards compat
"
99,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
100,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
101,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
102,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
103,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
104,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
105,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
106,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
107,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
108,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
109,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
110,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
111,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
112,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
113,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
114,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
115,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
116,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
117,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
118,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile," # backwards compat
"
119,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
120,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
121,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
122,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
123,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
124,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
125,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
126,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
127,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
128,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
129,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
130,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
131,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
132,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
133,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
134,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
135,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
136,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
137,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
138,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
139,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
140,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
141,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile," # backwards compat
"
142,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
143,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
144,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
145,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
146,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
147,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
148,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
149,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
150,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
151,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
152,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
153,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
154,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
155,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
156,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
157,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
158,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
159,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
160,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
161,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
162,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile," # backwards compat
"
163,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
164,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# explicitly set user/group IDs
"
165,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
166,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
167,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
168,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
169,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
170,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
171,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
172,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# see note below about ""*.pyc"" files
"
173,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# arches officialy built by upstream
"
174,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
175,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
176,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
177,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
178,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
179,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
180,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
181,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
182,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
183,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
184,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
185,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
186,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
187,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile," # backwards compat
"
188,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
189,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# explicitly set user/group IDs
"
190,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
191,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
192,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
193,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
194,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
195,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
196,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
197,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile," # backwards compat
"
198,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
199,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
200,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
201,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
202,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
203,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
204,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# explicitly set user/group IDs
"
205,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
206,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
207,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
208,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# arches officialy built by upstream
"
209,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
210,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
211,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
212,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
213,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
214,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
215,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
216,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
217,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
218,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
219,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
220,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile," # backwards compat
"
221,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# vim:set ft=dockerfile:
"
222,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# explicitly set user/group IDs
"
223,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
224,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
225,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# grab gosu for easy step-down from root
"
226,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
227,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
228,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
229,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
230,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
231,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# arches officialy built by upstream
"
232,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
233,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
234,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
235,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
236,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
237,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
238,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
239,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
240,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
241,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
242,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
243,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
244,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
245,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile," # backwards compat
"
246,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
247,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# explicitly set user/group IDs
"
248,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
249,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
250,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
251,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# arches officialy built by upstream
"
252,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
253,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
254,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
255,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
256,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
257,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
258,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
259,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
260,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
261,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
262,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
263,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile," # backwards compat
"
264,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
265,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
266,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
267,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
268,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
269,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
270,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# explicitly set user/group IDs
"
271,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
272,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
273,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
274,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
275,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
276,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
277,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
278,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
279,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# arches officialy built by upstream
"
280,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
281,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
282,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
283,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
284,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
285,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
286,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
287,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
288,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
289,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
290,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
291,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
292,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
293,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile," # backwards compat
"
294,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
295,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
296,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
297,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#		krb5-dev \
"
298,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#		openldap-dev \
"
299,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# configure: error: prove not found
"
300,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
301,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
302,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
303,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
304,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
305,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
306,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
307,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
308,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
309,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
310,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
311,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
312,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
313,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
314,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile," # backwards compat
"
315,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
316,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
317,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
318,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
319,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
320,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
321,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
322,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
323,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
324,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
325,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
326,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
327,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
328,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
329,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
330,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
331,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
332,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
333,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
334,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
335,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile," # backwards compat
"
336,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
337,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
338,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
339,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
340,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
341,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
342,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
343,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
344,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
345,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
346,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
347,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
348,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
349,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
350,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
351,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
352,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
353,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
354,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
355,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
356,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile," # backwards compat
"
357,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# vim:set ft=dockerfile:
"
358,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# explicitly set user/group IDs
"
359,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
360,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
361,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# grab gosu for easy step-down from root
"
362,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
363,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
364,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
365,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
366,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
367,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# arches officialy built by upstream
"
368,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
369,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
370,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
371,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
372,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
373,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
374,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
375,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
376,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
377,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
378,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
379,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
380,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
381,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile," # backwards compat
"
382,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
383,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
384,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
385,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"#		krb5-dev \
"
386,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"#		openldap-dev \
"
387,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# configure: error: prove not found
"
388,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
389,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
390,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
391,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
392,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
393,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
394,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
395,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
396,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
397,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
398,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
399,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
400,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
401,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
402,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-alpine.template," # backwards compat
"
403,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
404,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
405,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
406,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
407,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
408,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,"# vim:set ft=dockerfile:
"
409,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
410,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,"# grab gosu for easy step-down from root
"
411,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
412,981ac750a3ef6160aab69509a9e8a56304366eb2,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
413,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
414,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"# explicitly set user/group IDs
"
415,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
416,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
417,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
418,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
419,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
420,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
421,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
422,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
423,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#		krb5-dev \
"
424,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#		openldap-dev \
"
425,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# configure: error: prove not found
"
426,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
427,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
428,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
429,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
430,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
431,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
432,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
433,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
434,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
435,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
436,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
437,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
438,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
439,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
440,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile," # backwards compat
"
441,6b7b3bd6ca3a032f393d52ce72a419235804496f,/Dockerfile.template,"# vim:set ft=dockerfile:
"
442,6b7b3bd6ca3a032f393d52ce72a419235804496f,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
443,6b7b3bd6ca3a032f393d52ce72a419235804496f,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
444,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
445,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"# explicitly set user/group IDs
"
446,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
447,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
448,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
449,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
450,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
451,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,"# vim:set ft=dockerfile:
"
452,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
453,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,"# grab gosu for easy step-down from root
"
454,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
455,d74b69598c835fe15eac39a26b5c61058f99c3db,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
456,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
457,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
458,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
459,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
460,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
461,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
462,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
463,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
464,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
465,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
466,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
467,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
468,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
469,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
470,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
471,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile," # backwards compat
"
472,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
473,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# explicitly set user/group IDs
"
474,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
475,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
476,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
477,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
478,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
479,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
480,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
481,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
482,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# arches officialy built by upstream
"
483,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
484,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
485,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
486,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
487,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
488,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
489,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
490,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
491,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
492,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
493,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
494,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
495,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
496,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile," # backwards compat
"
497,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
498,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
499,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
500,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#		krb5-dev \
"
501,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#		openldap-dev \
"
502,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# configure: error: prove not found
"
503,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
504,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
505,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
506,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
507,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
508,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
509,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
510,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
511,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
512,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
513,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
514,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
515,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
516,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
517,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-alpine.template," # backwards compat
"
518,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,"# vim:set ft=dockerfile:
"
519,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,"# explicitly set user/group IDs
"
520,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,"# grab gosu for easy step-down from root
"
521,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
522,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
523,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# vim:set ft=dockerfile:
"
524,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# explicitly set user/group IDs
"
525,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
526,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
527,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# grab gosu for easy step-down from root
"
528,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
529,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
530,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
531,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
532,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
533,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# arches officialy built by upstream
"
534,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
535,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
536,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
537,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
538,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
539,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
540,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
541,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
542,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
543,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
544,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
545,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
546,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
547,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile," # backwards compat
"
548,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
549,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# explicitly set user/group IDs
"
550,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
551,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
552,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
553,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
554,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
555,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
556,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,"# explicitly set user/group IDs
"
557,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
558,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
559,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
560,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
561,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# explicitly set user/group IDs
"
562,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
563,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
564,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
565,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
566,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
567,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
568,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
569,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
570,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# arches officialy built by upstream
"
571,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
572,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
573,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
574,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
575,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
576,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
577,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
578,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
579,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
580,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
581,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
582,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
583,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
584,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile," # backwards compat
"
585,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# vim:set ft=dockerfile:
"
586,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# explicitly set user/group IDs
"
587,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
588,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
589,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
590,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
591,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
592,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
593,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
594,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
595,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# see note below about ""*.pyc"" files
"
596,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# arches officialy built by upstream
"
597,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
598,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
599,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
600,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417
"
601,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
602,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
603,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
604,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
605,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
606,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
607,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
608,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
609,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
610,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
611,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile," # backwards compat
"
612,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
613,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
614,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
615,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#		krb5-dev \
"
616,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#		openldap-dev \
"
617,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# configure: error: prove not found
"
618,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
619,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
620,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
621,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
622,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
623,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
624,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
625,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
626,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
627,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
628,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
629,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
630,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
631,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
632,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
633,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
634,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
635,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
636,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
637,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
638,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
639,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
640,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
641,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
642,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
643,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
644,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
645,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
646,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
647,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
648,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
649,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
650,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
651,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
652,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile," # backwards compat
"
653,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
654,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
655,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
656,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
657,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
658,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
659,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
660,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
661,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
662,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
663,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
664,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
665,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
666,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
667,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
668,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
669,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
670,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
671,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
672,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
673,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
674,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
675,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile," # backwards compat
"
676,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
677,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# explicitly set user/group IDs
"
678,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
679,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
680,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
681,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
682,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
683,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
684,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
685,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile," # backwards compat
"
686,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
687,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
688,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"#		krb5-dev \
"
689,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"#		openldap-dev \
"
690,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
691,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
692,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
693,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
694,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
695,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
696,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
697,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
698,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
699,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
700,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
701,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
702,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
703,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
704,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
705,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
706,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
707,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
708,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
709,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
710,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
711,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
712,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
713,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
714,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
715,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
716,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
717,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile," # backwards compat
"
718,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
719,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
720,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
721,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
722,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
723,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
724,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
725,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
726,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
727,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# arches officialy built by upstream
"
728,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
729,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
730,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
731,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
732,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
733,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
734,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
735,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
736,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
737,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
738,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
739,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/Dockerfile-debian.template," # backwards compat
"
740,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
741,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# explicitly set user/group IDs
"
742,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
743,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
744,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
745,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
746,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
747,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
748,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
749,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
750,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# arches officialy built by upstream
"
751,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
752,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
753,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
754,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
755,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
756,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
757,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
758,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
759,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
760,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
761,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
762,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
763,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
764,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile," # backwards compat
"
765,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
766,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# explicitly set user/group IDs
"
767,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
768,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
769,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
770,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
771,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# arches officialy built by upstream
"
772,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
773,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
774,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
775,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
776,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
777,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
778,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
779,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
780,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
781,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
782,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
783,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile," # backwards compat
"
784,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
785,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
786,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
787,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#		krb5-dev \
"
788,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#		openldap-dev \
"
789,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# configure: error: prove not found
"
790,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
791,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
792,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
793,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
794,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
795,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
796,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
797,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
798,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
799,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
800,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
801,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
802,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
803,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
804,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile," # backwards compat
"
805,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
806,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
807,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
808,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#		krb5-dev \
"
809,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#		openldap-dev \
"
810,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# configure: error: prove not found
"
811,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
812,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
813,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
814,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
815,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
816,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
817,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
818,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
819,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
820,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
821,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
822,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
823,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
824,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
825,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile," # backwards compat
"
826,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
827,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
828,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
829,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
830,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
831,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
832,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
833,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
834,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
835,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
836,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
837,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
838,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
839,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
840,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# vim:set ft=dockerfile:
"
841,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# explicitly set user/group IDs
"
842,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# grab gosu for easy step-down from root
"
843,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
844,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
845,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# arches officialy built by upstream
"
846,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
847,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
848,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
849,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
850,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
851,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
852,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
853,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
854,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
855,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
856,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
857,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile," # backwards compat
"
858,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
859,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# explicitly set user/group IDs
"
860,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
861,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
862,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
863,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
864,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
865,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
866,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
867,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
868,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
869,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
870,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
871,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
872,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
873,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
874,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
875,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
876,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
877,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
878,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
879,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
880,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
881,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
882,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
883,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
884,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
885,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
886,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
887,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile," # backwards compat
"
888,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
889,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
890,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
891,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
892,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
893,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
894,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
895,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
896,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
897,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
898,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
899,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
900,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
901,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
902,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
903,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
904,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
905,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
906,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
907,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
908,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile," # backwards compat
"
909,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
910,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
911,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
912,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"#		krb5-dev \
"
913,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"#		openldap-dev \
"
914,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# configure: error: prove not found
"
915,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
916,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
917,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
918,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
919,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
920,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
921,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
922,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
923,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
924,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
925,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
926,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
927,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-alpine.template," # backwards compat
"
928,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
929,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
930,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"#		krb5-dev \
"
931,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"#		openldap-dev \
"
932,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
933,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
934,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
935,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
936,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
937,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
938,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
939,d2b38544770a63fed430694a7aed33de3ad8b808,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
940,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# vim:set ft=dockerfile:
"
941,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# explicitly set user/group IDs
"
942,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
943,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
944,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# grab gosu for easy step-down from root
"
945,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
946,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
947,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
948,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
949,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
950,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# arches officialy built by upstream
"
951,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
952,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
953,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
954,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
955,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
956,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
957,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
958,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
959,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
960,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
961,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
962,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
963,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
964,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile," # backwards compat
"
965,6abeb8590f35c5251b9f100a667024febaeee06b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
966,6abeb8590f35c5251b9f100a667024febaeee06b,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
967,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
968,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# explicitly set user/group IDs
"
969,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
970,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
971,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
972,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
973,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
974,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
975,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
976,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
977,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# arches officialy built by upstream
"
978,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
979,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
980,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
981,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
982,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
983,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
984,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
985,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
986,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
987,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
988,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
989,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
990,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
991,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile," # backwards compat
"
992,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
993,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# explicitly set user/group IDs
"
994,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
995,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
996,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
997,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# arches officialy built by upstream
"
998,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
999,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1000,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1001,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1002,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1003,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1004,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1005,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1006,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1007,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1008,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1009,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile," # backwards compat
"
1010,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# vim:set ft=dockerfile:
"
1011,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# explicitly set user/group IDs
"
1012,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# grab gosu for easy step-down from root
"
1013,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1014,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1015,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1016,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# arches officialy built by upstream
"
1017,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1018,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1019,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1020,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1021,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1022,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1023,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1024,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1025,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1026,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1027,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1028,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile," # backwards compat
"
1029,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# vim:set ft=dockerfile:
"
1030,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# explicitly set user/group IDs
"
1031,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1032,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1033,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# grab gosu for easy step-down from root
"
1034,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1035,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1036,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1037,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
1038,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1039,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
1040,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# arches officialy built by upstream
"
1041,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1042,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1043,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1044,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1045,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1046,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1047,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1048,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1049,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1050,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1051,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1052,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1053,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1054,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile," # backwards compat
"
1055,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# vim:set ft=dockerfile:
"
1056,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# explicitly set user/group IDs
"
1057,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1058,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1059,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# grab gosu for easy step-down from root
"
1060,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1061,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1062,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1063,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1064,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
1065,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# arches officialy built by upstream
"
1066,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1067,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1068,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1069,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1070,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1071,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1072,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1073,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1074,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1075,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1076,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1077,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1078,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1079,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile," # backwards compat
"
1080,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1081,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1082,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
1083,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
1084,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1085,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1086,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1087,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1088,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1089,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
1090,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1091,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1092,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# vim:set ft=dockerfile:
"
1093,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# explicitly set user/group IDs
"
1094,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# grab gosu for easy step-down from root
"
1095,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1096,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1097,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1098,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1099,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# arches officialy built by upstream
"
1100,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1101,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1102,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1103,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1104,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1105,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1106,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1107,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1108,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1109,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1110,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1111,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile," # backwards compat
"
1112,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1113,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
1114,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1115,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#		krb5-dev \
"
1116,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#		openldap-dev \
"
1117,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# configure: error: prove not found
"
1118,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1119,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1120,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1121,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1122,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1123,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1124,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1125,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1126,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1127,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1128,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1129,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1130,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1131,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1132,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile," # backwards compat
"
1133,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# vim:set ft=dockerfile:
"
1134,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# explicitly set user/group IDs
"
1135,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1136,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1137,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
1138,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1139,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1140,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1141,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
1142,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1143,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
1144,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# arches officialy built by upstream
"
1145,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1146,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1147,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1148,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1149,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1150,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1151,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1152,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1153,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1154,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1155,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1156,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1157,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1158,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile," # backwards compat
"
1159,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,"# vim:set ft=dockerfile:
"
1160,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
1161,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,"# grab gosu for easy step-down from root
"
1162,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1163,51e5166d69320581cb707d6fb102d3ba04803400,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1164,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
1165,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# explicitly set user/group IDs
"
1166,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
1167,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1168,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1169,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1170,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1171,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1172,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1173,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1174,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#		krb5-dev \
"
1175,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#		openldap-dev \
"
1176,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# configure: error: prove not found
"
1177,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1178,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1179,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1180,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1181,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1182,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1183,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1184,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1185,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1186,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1187,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1188,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1189,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1190,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1191,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile," # backwards compat
"
1192,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1193,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1194,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1195,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
1196,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
1197,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1198,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1199,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1200,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1201,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1202,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1203,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1204,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1205,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1206,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1207,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1208,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1209,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile," # backwards compat
"
1210,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
1211,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1212,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"#		krb5-dev \
"
1213,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"#		openldap-dev \
"
1214,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1215,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1216,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1217,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1218,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1219,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1220,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1221,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1222,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
1223,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1224,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1225,6e1d6d682519cabd49e33f720f3cdeda426745c6,/Dockerfile-alpine.template," # backwards compat
"
1226,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1227,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1228,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
1229,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
1230,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1231,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1232,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1233,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1234,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1235,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1236,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1237,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1238,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1239,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1240,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
1241,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
1242,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1243,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1244,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
1245,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1246,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1247,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1248,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
1249,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1250,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
1251,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# arches officialy built by upstream
"
1252,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1253,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1254,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1255,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1256,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1257,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1258,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1259,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1260,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1261,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1262,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
1263,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1264,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1265,4f70bf2b811bcdb4ab1a015ef703373226452157,/Dockerfile-debian.template," # backwards compat
"
1266,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# vim:set ft=dockerfile:
"
1267,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# explicitly set user/group IDs
"
1268,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1269,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1270,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# grab gosu for easy step-down from root
"
1271,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1272,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1273,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1274,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1275,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
1276,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# arches officialy built by upstream
"
1277,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1278,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1279,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1280,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1281,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1282,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1283,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1284,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1285,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1286,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1287,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1288,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1289,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1290,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile," # backwards compat
"
1291,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# vim:set ft=dockerfile:
"
1292,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# explicitly set user/group IDs
"
1293,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1294,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1295,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# grab gosu for easy step-down from root
"
1296,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1297,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1298,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1299,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
1300,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1301,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
1302,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# arches officialy built by upstream
"
1303,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1304,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1305,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1306,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1307,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1308,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1309,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1310,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1311,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1312,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1313,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1314,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1315,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1316,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile," # backwards compat
"
1317,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
1318,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
1319,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
1320,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1321,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1322,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1323,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
1324,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1325,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1326,972294a377463156c8d61297320c872fc7d370a9,/Dockerfile-debian.template," # backwards compat
"
1327,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
1328,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,"# explicitly set user/group IDs
"
1329,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
1330,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1331,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1332,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
1333,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
1334,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
1335,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1336,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1337,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1338,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1339,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1340,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#		krb5-dev \
"
1341,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#		openldap-dev \
"
1342,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# configure: error: prove not found
"
1343,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1344,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1345,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1346,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1347,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1348,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1349,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1350,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1351,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1352,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1353,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1354,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1355,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1356,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile," # backwards compat
"
1357,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# vim:set ft=dockerfile:
"
1358,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# explicitly set user/group IDs
"
1359,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1360,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1361,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
1362,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1363,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1364,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1365,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
1366,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1367,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
1368,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# arches officialy built by upstream
"
1369,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1370,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1371,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1372,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1373,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1374,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1375,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1376,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1377,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1378,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1379,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1380,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1381,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1382,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile," # backwards compat
"
1383,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
1384,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# explicitly set user/group IDs
"
1385,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
1386,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1387,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1388,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# arches officialy built by upstream
"
1389,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1390,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1391,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1392,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1393,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1394,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1395,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1396,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1397,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1398,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1399,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1400,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile," # backwards compat
"
1401,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
1402,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# explicitly set user/group IDs
"
1403,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
1404,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1405,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1406,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1407,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1408,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1409,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
1410,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,"# explicitly set user/group IDs
"
1411,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
1412,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1413,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1414,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
1415,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
1416,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
1417,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1418,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1419,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
1420,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1421,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"#		krb5-dev \
"
1422,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"#		openldap-dev \
"
1423,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1424,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1425,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1426,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1427,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1428,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1429,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1430,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1431,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
1432,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1433,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1434,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1435,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1436,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
1437,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
1438,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
1439,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1440,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1441,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1442,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1443,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1444,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1445,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1446,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1447,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1448,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1449,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1450,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1451,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1452,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1453,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile," # backwards compat
"
1454,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1455,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1456,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1457,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
1458,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
1459,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
1460,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1461,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1462,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1463,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1464,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1465,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1466,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1467,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1468,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1469,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1470,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1471,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1472,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1473,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile," # backwards compat
"
1474,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1475,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1476,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1477,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
1478,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
1479,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1480,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1481,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1482,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1483,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1484,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1485,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1486,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1487,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1488,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1489,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1490,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile," # backwards compat
"
1491,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1492,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1493,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
1494,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
1495,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1496,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1497,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1498,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1499,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1500,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1501,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1502,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1503,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1504,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1505,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1506,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile," # backwards compat
"
1507,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1508,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
1509,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1510,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
1511,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
1512,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
1513,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1514,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1515,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1516,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1517,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1518,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1519,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1520,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1521,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1522,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1523,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1524,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1525,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1526,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1527,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile," # backwards compat
"
1528,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
1529,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
1530,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
1531,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1532,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1533,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
1534,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# explicitly set user/group IDs
"
1535,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1536,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1537,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
1538,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1539,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1540,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1541,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1542,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
1543,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# arches officialy built by upstream
"
1544,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1545,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1546,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1547,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1548,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1549,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1550,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1551,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1552,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1553,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1554,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1555,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1556,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1557,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile," # backwards compat
"
1558,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
1559,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# explicitly set user/group IDs
"
1560,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
1561,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1562,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1563,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1564,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1565,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1566,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1567,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile," # backwards compat
"
1568,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1569,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1570,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
1571,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
1572,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1573,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1574,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1575,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1576,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1577,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1578,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1579,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1580,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# vim:set ft=dockerfile:
"
1581,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# explicitly set user/group IDs
"
1582,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1583,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1584,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# grab gosu for easy step-down from root
"
1585,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1586,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1587,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1588,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1589,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
1590,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# arches officialy built by upstream
"
1591,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1592,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1593,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1594,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1595,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1596,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1597,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1598,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1599,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1600,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1601,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1602,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1603,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1604,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile," # backwards compat
"
1605,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
1606,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# explicitly set user/group IDs
"
1607,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
1608,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1609,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1610,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1611,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1612,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1613,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1614,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile," # backwards compat
"
1615,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
1616,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# explicitly set user/group IDs
"
1617,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1618,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1619,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
1620,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1621,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1622,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1623,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1624,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
1625,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# arches officialy built by upstream
"
1626,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1627,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1628,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1629,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1630,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1631,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1632,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1633,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1634,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1635,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1636,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1637,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1638,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1639,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile," # backwards compat
"
1640,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
1641,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# explicitly set user/group IDs
"
1642,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
1643,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1644,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1645,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# arches officialy built by upstream
"
1646,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1647,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1648,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1649,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1650,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1651,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1652,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1653,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1654,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1655,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1656,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1657,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile," # backwards compat
"
1658,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
1659,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# explicitly set user/group IDs
"
1660,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
1661,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1662,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1663,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1664,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1665,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1666,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1667,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1668,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1669,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#		krb5-dev \
"
1670,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#		openldap-dev \
"
1671,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1672,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1673,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1674,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1675,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1676,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1677,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1678,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1679,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1680,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1681,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1682,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1683,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile," # backwards compat
"
1684,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1685,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1686,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1687,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#		krb5-dev \
"
1688,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#		openldap-dev \
"
1689,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# configure: error: prove not found
"
1690,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1691,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1692,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1693,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1694,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1695,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1696,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1697,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1698,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1699,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1700,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1701,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1702,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1703,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1704,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile," # backwards compat
"
1705,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
1706,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
1707,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
1708,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1709,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1710,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
1711,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# explicitly set user/group IDs
"
1712,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
1713,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1714,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1715,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1716,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1717,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# arches officialy built by upstream
"
1718,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1719,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1720,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1721,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1722,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1723,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1724,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1725,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1726,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1727,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1728,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1729,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile," # backwards compat
"
1730,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
1731,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
1732,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
1733,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1734,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1735,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
1736,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
1737,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
1738,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1739,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1740,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
1741,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
1742,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
1743,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1744,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1745,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1746,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1747,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# arches officialy built by upstream
"
1748,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1749,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1750,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1751,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1752,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1753,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1754,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1755,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1756,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
1757,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1758,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1759,635fd0bcb3ababc96871c9da52f10743fbae4742,/Dockerfile-debian.template," # backwards compat
"
1760,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
1761,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# explicitly set user/group IDs
"
1762,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1763,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1764,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
1765,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1766,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1767,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1768,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
1769,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1770,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
1771,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# arches officialy built by upstream
"
1772,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1773,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1774,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1775,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1776,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1777,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1778,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1779,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1780,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1781,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1782,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1783,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1784,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1785,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile," # backwards compat
"
1786,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1787,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
1788,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1789,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#		krb5-dev \
"
1790,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#		openldap-dev \
"
1791,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# configure: error: prove not found
"
1792,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1793,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1794,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1795,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1796,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1797,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1798,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1799,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1800,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1801,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1802,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1803,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1804,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1805,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1806,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
1807,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# explicitly set user/group IDs
"
1808,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
1809,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1810,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1811,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# arches officialy built by upstream
"
1812,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1813,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1814,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1815,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1816,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1817,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1818,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1819,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1820,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1821,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1822,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1823,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile," # backwards compat
"
1824,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
1825,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
1826,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
1827,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1828,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1829,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
1830,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# explicitly set user/group IDs
"
1831,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
1832,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1833,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1834,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1835,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1836,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1837,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1838,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile," # backwards compat
"
1839,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
1840,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# explicitly set user/group IDs
"
1841,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
1842,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1843,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1844,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1845,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1846,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
1847,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# explicitly set user/group IDs
"
1848,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
1849,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1850,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1851,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1852,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1853,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# arches officialy built by upstream
"
1854,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1855,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1856,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1857,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1858,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1859,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1860,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1861,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1862,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1863,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1864,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1865,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile," # backwards compat
"
1866,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1867,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
1868,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1869,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
1870,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
1871,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
1872,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1873,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1874,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1875,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1876,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1877,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1878,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1879,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1880,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1881,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1882,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1883,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1884,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1885,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1886,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile," # backwards compat
"
1887,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1888,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
1889,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1890,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#		krb5-dev \
"
1891,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#		openldap-dev \
"
1892,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# configure: error: prove not found
"
1893,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1894,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1895,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1896,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
1897,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1898,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1899,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1900,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1901,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1902,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1903,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1904,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1905,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1906,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1907,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
1908,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
1909,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1910,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1911,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
1912,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1913,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1914,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1915,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1916,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
1917,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# arches officialy built by upstream
"
1918,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1919,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1920,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1921,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1922,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1923,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1924,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1925,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1926,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1927,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1928,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
1929,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1930,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1931,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/Dockerfile-debian.template," # backwards compat
"
1932,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# vim:set ft=dockerfile:
"
1933,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# explicitly set user/group IDs
"
1934,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
1935,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
1936,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# grab gosu for easy step-down from root
"
1937,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1938,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
1939,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
1940,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1941,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
1942,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# arches officialy built by upstream
"
1943,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
1944,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
1945,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
1946,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
1947,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
1948,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
1949,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
1950,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
1951,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
1952,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
1953,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1954,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
1955,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1956,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile," # backwards compat
"
1957,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
1958,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
1959,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
1960,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
1961,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
1962,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
1963,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
1964,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
1965,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
1966,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
1967,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
1968,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
1969,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
1970,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
1971,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
1972,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
1973,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
1974,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1975,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
1976,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1977,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile," # backwards compat
"
1978,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
1979,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# explicitly set user/group IDs
"
1980,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
1981,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1982,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1983,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1984,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1985,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1986,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1987,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile," # backwards compat
"
1988,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
1989,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# explicitly set user/group IDs
"
1990,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
1991,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
1992,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
1993,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
1994,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
1995,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
1996,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
1997,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile," # backwards compat
"
1998,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# vim:set ft=dockerfile:
"
1999,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# explicitly set user/group IDs
"
2000,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# grab gosu for easy step-down from root
"
2001,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2002,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2003,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2004,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2005,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# arches officialy built by upstream
"
2006,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2007,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2008,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2009,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2010,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2011,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2012,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2013,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2014,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2015,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2016,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2017,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile," # backwards compat
"
2018,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2019,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
2020,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2021,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#		krb5-dev \
"
2022,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#		openldap-dev \
"
2023,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# configure: error: prove not found
"
2024,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2025,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2026,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2027,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2028,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2029,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2030,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2031,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2032,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2033,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2034,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2035,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2036,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2037,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2038,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile," # backwards compat
"
2039,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2040,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2041,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
2042,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
2043,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2044,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2045,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2046,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2047,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2048,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2049,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2050,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2051,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2052,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2053,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2054,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2055,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2056,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
2057,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
2058,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2059,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2060,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2061,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2062,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2063,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2064,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2065,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2066,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
2067,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2068,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
2069,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2070,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2071,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
2072,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# explicitly set user/group IDs
"
2073,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
2074,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2075,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2076,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2077,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2078,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
2079,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2080,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
2081,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2082,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2083,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
2084,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,"# explicitly set user/group IDs
"
2085,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
2086,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2087,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2088,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
2089,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2090,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
2091,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2092,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2093,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
2094,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# explicitly set user/group IDs
"
2095,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
2096,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2097,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2098,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2099,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2100,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2101,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2102,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile," # backwards compat
"
2103,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2104,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2105,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2106,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
2107,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
2108,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
2109,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2110,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2111,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2112,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2113,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2114,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2115,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2116,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2117,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2118,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2119,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2120,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2121,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2122,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2123,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile," # backwards compat
"
2124,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
2125,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,"# explicitly set user/group IDs
"
2126,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
2127,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2128,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2129,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
2130,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,"# explicitly set user/group IDs
"
2131,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
2132,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2133,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2134,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2135,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2136,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
2137,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
2138,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2139,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2140,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2141,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2142,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2143,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2144,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2145,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2146,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
2147,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# explicitly set user/group IDs
"
2148,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2149,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2150,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
2151,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2152,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2153,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2154,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2155,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
2156,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# arches officialy built by upstream
"
2157,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2158,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
2159,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2160,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2161,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2162,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2163,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2164,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2165,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2166,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
2167,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2168,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2169,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2170,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile," # backwards compat
"
2171,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
2172,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# explicitly set user/group IDs
"
2173,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
2174,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2175,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2176,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2177,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2178,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2179,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2180,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
2181,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
2182,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2183,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2184,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2185,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2186,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2187,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2188,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2189,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2190,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2191,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2192,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2193,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile," # backwards compat
"
2194,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
2195,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# explicitly set user/group IDs
"
2196,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
2197,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2198,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2199,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2200,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2201,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2202,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2203,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2204,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#		krb5-dev \
"
2205,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#		openldap-dev \
"
2206,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# configure: error: prove not found
"
2207,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2208,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2209,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2210,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2211,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2212,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2213,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2214,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2215,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2216,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2217,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2218,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2219,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2220,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2221,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile," # backwards compat
"
2222,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
2223,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2224,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
2225,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2226,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2227,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2228,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2229,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2230,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#		krb5-dev \
"
2231,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#		openldap-dev \
"
2232,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# configure: error: prove not found
"
2233,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2234,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2235,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2236,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2237,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2238,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2239,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2240,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2241,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2242,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2243,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2244,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2245,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2246,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2247,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2248,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2249,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
2250,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
2251,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2252,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2253,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2254,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2255,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2256,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2257,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2258,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2259,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2260,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2261,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2262,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile," # backwards compat
"
2263,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
2264,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# explicitly set user/group IDs
"
2265,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2266,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2267,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
2268,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2269,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2270,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2271,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
2272,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2273,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
2274,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# arches officialy built by upstream
"
2275,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2276,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
2277,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2278,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2279,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2280,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2281,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2282,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2283,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2284,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
2285,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2286,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
2287,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2288,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile," # backwards compat
"
2289,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
2290,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2291,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
2292,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2293,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2294,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2295,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2296,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2297,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
2298,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
2299,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
2300,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2301,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2302,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2303,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2304,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2305,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2306,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2307,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2308,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2309,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2310,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2311,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2312,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2313,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2314,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile," # backwards compat
"
2315,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,"# vim:set ft=dockerfile:
"
2316,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2317,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,"# grab gosu for easy step-down from root
"
2318,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2319,73d73760957c7038dd3c07212b5b9daf86a2cb38,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2320,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
2321,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2322,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
2323,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2324,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2325,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# vim:set ft=dockerfile:
"
2326,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# explicitly set user/group IDs
"
2327,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2328,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2329,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# grab gosu for easy step-down from root
"
2330,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2331,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2332,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2333,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2334,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
2335,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# arches officialy built by upstream
"
2336,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2337,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
2338,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2339,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2340,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2341,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2342,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2343,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2344,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2345,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
2346,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2347,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
2348,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2349,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile," # backwards compat
"
2350,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
2351,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2352,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
2353,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2354,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2355,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2356,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
2357,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2358,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#		krb5-dev \
"
2359,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#		openldap-dev \
"
2360,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# configure: error: prove not found
"
2361,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2362,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2363,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2364,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2365,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2366,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2367,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2368,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2369,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2370,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2371,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2372,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2373,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2374,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2375,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
2376,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,"# explicitly set user/group IDs
"
2377,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
2378,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2379,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2380,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
2381,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2382,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
2383,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2384,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2385,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
2386,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,"# explicitly set user/group IDs
"
2387,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
2388,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2389,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2390,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
2391,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# explicitly set user/group IDs
"
2392,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2393,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2394,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
2395,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2396,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2397,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2398,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2399,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# arches officialy built by upstream
"
2400,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2401,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2402,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2403,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2404,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2405,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2406,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2407,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2408,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2409,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2410,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2411,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile," # backwards compat
"
2412,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2413,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2414,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2415,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
2416,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
2417,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
2418,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2419,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2420,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2421,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2422,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2423,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2424,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2425,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2426,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2427,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2428,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2429,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2430,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2431,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile," # backwards compat
"
2432,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
2433,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2434,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"#		krb5-dev \
"
2435,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"#		openldap-dev \
"
2436,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2437,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2438,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2439,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2440,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2441,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2442,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
2443,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2444,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
2445,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# explicitly set user/group IDs
"
2446,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
2447,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2448,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2449,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2450,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2451,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
2452,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,"# explicitly set user/group IDs
"
2453,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
2454,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2455,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2456,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2457,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2458,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
2459,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
2460,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2461,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2462,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2463,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2464,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2465,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2466,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2467,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2468,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2469,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2470,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2471,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile," # backwards compat
"
2472,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
2473,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2474,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
2475,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2476,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2477,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
2478,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
2479,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
2480,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2481,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2482,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2483,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
2484,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2485,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2486,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-debian.template," # backwards compat
"
2487,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
2488,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# explicitly set user/group IDs
"
2489,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
2490,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2491,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2492,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2493,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2494,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2495,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
2496,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# explicitly set user/group IDs
"
2497,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
2498,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2499,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2500,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2501,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# arches officialy built by upstream
"
2502,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2503,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2504,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2505,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2506,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2507,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2508,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2509,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2510,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2511,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2512,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2513,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile," # backwards compat
"
2514,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
2515,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2516,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2517,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2518,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2519,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2520,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#		krb5-dev \
"
2521,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#		openldap-dev \
"
2522,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# configure: error: prove not found
"
2523,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2524,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2525,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2526,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2527,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2528,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2529,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2530,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2531,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2532,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2533,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2534,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2535,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2536,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2537,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile," # backwards compat
"
2538,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2539,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2540,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2541,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#		krb5-dev \
"
2542,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#		openldap-dev \
"
2543,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# configure: error: prove not found
"
2544,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2545,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2546,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2547,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2548,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2549,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2550,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2551,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2552,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2553,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2554,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2555,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2556,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2557,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2558,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile," # backwards compat
"
2559,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
2560,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# explicitly set user/group IDs
"
2561,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
2562,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2563,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2564,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# arches officialy built by upstream
"
2565,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2566,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2567,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2568,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2569,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2570,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2571,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2572,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2573,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2574,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2575,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2576,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile," # backwards compat
"
2577,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# vim:set ft=dockerfile:
"
2578,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# explicitly set user/group IDs
"
2579,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# grab gosu for easy step-down from root
"
2580,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2581,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2582,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2583,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2584,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# arches officialy built by upstream
"
2585,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2586,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2587,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2588,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2589,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2590,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2591,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2592,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2593,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2594,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2595,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2596,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile," # backwards compat
"
2597,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# vim:set ft=dockerfile:
"
2598,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# explicitly set user/group IDs
"
2599,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2600,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2601,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# grab gosu for easy step-down from root
"
2602,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2603,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2604,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2605,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2606,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
2607,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# arches officialy built by upstream
"
2608,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2609,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
2610,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2611,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2612,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2613,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2614,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2615,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2616,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2617,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
2618,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2619,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
2620,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2621,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile," # backwards compat
"
2622,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
2623,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# explicitly set user/group IDs
"
2624,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
2625,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2626,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2627,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2628,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2629,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2630,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2631,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile," # backwards compat
"
2632,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
2633,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2634,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
2635,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2636,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2637,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
2638,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2639,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2640,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"#		krb5-dev \
"
2641,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"#		openldap-dev \
"
2642,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2643,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2644,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2645,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2646,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2647,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2648,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2649,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2650,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2651,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
2652,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2653,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2654,76858f0957b5f9e1a871770cf4b984d44edc80c7,/Dockerfile-alpine.template," # backwards compat
"
2655,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# vim:set ft=dockerfile:
"
2656,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# explicitly set user/group IDs
"
2657,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# grab gosu for easy step-down from root
"
2658,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2659,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2660,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2661,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2662,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2663,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2664,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile," # backwards compat
"
2665,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2666,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2667,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
2668,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
2669,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2670,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2671,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2672,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2673,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2674,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2675,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2676,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2677,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
2678,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# explicitly set user/group IDs
"
2679,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2680,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2681,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
2682,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2683,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2684,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2685,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2686,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
2687,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# arches officialy built by upstream
"
2688,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2689,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
2690,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2691,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2692,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2693,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2694,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2695,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2696,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2697,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
2698,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2699,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
2700,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2701,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile," # backwards compat
"
2702,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
2703,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# explicitly set user/group IDs
"
2704,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
2705,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2706,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2707,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2708,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2709,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2710,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2711,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile," # backwards compat
"
2712,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# vim:set ft=dockerfile:
"
2713,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# explicitly set user/group IDs
"
2714,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2715,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2716,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# grab gosu for easy step-down from root
"
2717,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2718,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2719,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2720,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2721,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
2722,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# arches officialy built by upstream
"
2723,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2724,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
2725,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2726,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2727,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2728,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2729,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2730,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2731,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2732,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
2733,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2734,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
2735,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2736,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile," # backwards compat
"
2737,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2738,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2739,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
2740,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
2741,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2742,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2743,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2744,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2745,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2746,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2747,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2748,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2749,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
2750,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2751,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"#		krb5-dev \
"
2752,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"#		openldap-dev \
"
2753,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2754,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2755,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2756,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2757,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2758,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2759,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2760,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2761,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
2762,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2763,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2764,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/Dockerfile-alpine.template," # backwards compat
"
2765,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
2766,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2767,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
2768,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2769,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2770,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
2771,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# explicitly set user/group IDs
"
2772,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
2773,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2774,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2775,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# arches officialy built by upstream
"
2776,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2777,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2778,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2779,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2780,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2781,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2782,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2783,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2784,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2785,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2786,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2787,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile," # backwards compat
"
2788,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# vim:set ft=dockerfile:
"
2789,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# explicitly set user/group IDs
"
2790,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# grab gosu for easy step-down from root
"
2791,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2792,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2793,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2794,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2795,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# arches officialy built by upstream
"
2796,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2797,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2798,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2799,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2800,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2801,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2802,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2803,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2804,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2805,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2806,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2807,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile," # backwards compat
"
2808,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
2809,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2810,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"#		krb5-dev \
"
2811,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"#		openldap-dev \
"
2812,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2813,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2814,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2815,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2816,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2817,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2818,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2819,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2820,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
2821,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2822,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2823,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
2824,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2825,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
2826,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2827,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2828,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
2829,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# explicitly set user/group IDs
"
2830,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
2831,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2832,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2833,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2834,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2835,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# arches officialy built by upstream
"
2836,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2837,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2838,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2839,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2840,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2841,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2842,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2843,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2844,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2845,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2846,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2847,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile," # backwards compat
"
2848,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
2849,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# explicitly set user/group IDs
"
2850,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
2851,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2852,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2853,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2854,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2855,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
2856,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# explicitly set user/group IDs
"
2857,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2858,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2859,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
2860,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2861,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2862,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2863,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2864,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
2865,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# arches officialy built by upstream
"
2866,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2867,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
2868,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2869,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2870,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2871,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2872,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2873,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2874,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2875,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
2876,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2877,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
2878,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2879,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile," # backwards compat
"
2880,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2881,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2882,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
2883,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
2884,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2885,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2886,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2887,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2888,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2889,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2890,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2891,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2892,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2893,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2894,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
2895,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
2896,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2897,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2898,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2899,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2900,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2901,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2902,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2903,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2904,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2905,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2906,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2907,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# vim:set ft=dockerfile:
"
2908,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# explicitly set user/group IDs
"
2909,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2910,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2911,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# grab gosu for easy step-down from root
"
2912,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2913,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2914,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2915,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2916,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# arches officialy built by upstream
"
2917,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2918,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2919,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2920,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2921,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2922,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2923,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2924,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2925,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2926,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2927,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2928,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile," # backwards compat
"
2929,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
2930,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
2931,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
2932,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2933,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2934,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
2935,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# explicitly set user/group IDs
"
2936,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2937,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2938,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
2939,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2940,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
2941,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
2942,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2943,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
2944,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# arches officialy built by upstream
"
2945,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
2946,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
2947,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
2948,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
2949,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
2950,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
2951,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
2952,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
2953,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
2954,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
2955,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2956,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
2957,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2958,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile," # backwards compat
"
2959,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
2960,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# explicitly set user/group IDs
"
2961,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
2962,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2963,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2964,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2965,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2966,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
2967,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
2968,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
2969,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
2970,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
2971,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
2972,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
2973,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
2974,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
2975,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
2976,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
2977,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#		krb5-dev \
"
2978,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#		openldap-dev \
"
2979,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# configure: error: prove not found
"
2980,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
2981,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
2982,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
2983,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
2984,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
2985,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
2986,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
2987,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
2988,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
2989,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
2990,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
2991,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
2992,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
2993,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
2994,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile," # backwards compat
"
2995,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
2996,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# explicitly set user/group IDs
"
2997,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
2998,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
2999,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3000,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3001,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3002,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3003,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
3004,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3005,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
3006,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# arches officialy built by upstream
"
3007,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3008,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3009,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3010,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3011,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3012,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3013,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3014,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3015,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3016,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3017,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3018,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
3019,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3020,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile," # backwards compat
"
3021,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
3022,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# explicitly set user/group IDs
"
3023,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
3024,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3025,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3026,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3027,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3028,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3029,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3030,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile," # backwards compat
"
3031,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3032,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
3033,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3034,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
3035,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
3036,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
3037,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3038,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3039,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3040,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3041,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3042,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3043,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3044,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3045,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3046,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
3047,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3048,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3049,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3050,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3051,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile," # backwards compat
"
3052,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3053,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3054,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3055,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
3056,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
3057,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
3058,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3059,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3060,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3061,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3062,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3063,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3064,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3065,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3066,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3067,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
3068,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3069,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3070,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3071,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3072,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile," # backwards compat
"
3073,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# vim:set ft=dockerfile:
"
3074,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# explicitly set user/group IDs
"
3075,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# grab gosu for easy step-down from root
"
3076,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3077,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3078,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3079,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3080,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# arches officialy built by upstream
"
3081,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3082,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3083,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3084,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3085,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3086,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3087,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3088,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3089,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3090,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3091,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3092,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile," # backwards compat
"
3093,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3094,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# explicitly set user/group IDs
"
3095,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
3096,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3097,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3098,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3099,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3100,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# arches officialy built by upstream
"
3101,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3102,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3103,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3104,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3105,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3106,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3107,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3108,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3109,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3110,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3111,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3112,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile," # backwards compat
"
3113,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
3114,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3115,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
3116,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3117,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3118,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# vim:set ft=dockerfile:
"
3119,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# explicitly set user/group IDs
"
3120,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# grab gosu for easy step-down from root
"
3121,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3122,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3123,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# arches officialy built by upstream
"
3124,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3125,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3126,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3127,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3128,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3129,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3130,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3131,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3132,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3133,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3134,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3135,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile," # backwards compat
"
3136,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# vim:set ft=dockerfile:
"
3137,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# explicitly set user/group IDs
"
3138,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
3139,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
3140,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# grab gosu for easy step-down from root
"
3141,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3142,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3143,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3144,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3145,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
3146,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# arches officialy built by upstream
"
3147,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3148,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3149,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3150,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3151,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3152,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3153,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3154,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3155,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3156,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3157,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3158,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
3159,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3160,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile," # backwards compat
"
3161,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3162,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3163,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3164,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3165,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
3166,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3167,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3168,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#		krb5-dev \
"
3169,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#		openldap-dev \
"
3170,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# configure: error: prove not found
"
3171,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3172,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3173,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3174,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3175,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3176,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3177,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3178,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3179,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3180,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
3181,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3182,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
3183,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3184,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3185,03db72ffa66b8662d50585537c90ceea8f72dfc9,/Dockerfile-alpine.template," # backwards compat
"
3186,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3187,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3188,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3189,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# explicitly set user/group IDs
"
3190,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
3191,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3192,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3193,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3194,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3195,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3196,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3197,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,"# vim:set ft=dockerfile:
"
3198,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3199,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,"# grab gosu for easy step-down from root
"
3200,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3201,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3202,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3203,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3204,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
3205,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
3206,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3207,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3208,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3209,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3210,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3211,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3212,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3213,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3214,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
3215,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# explicitly set user/group IDs
"
3216,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
3217,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3218,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3219,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3220,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3221,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3222,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3223,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile," # backwards compat
"
3224,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3225,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3226,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
3227,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
3228,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3229,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3230,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3231,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3232,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3233,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3234,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3235,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3236,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3237,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3238,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3239,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile," # backwards compat
"
3240,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# vim:set ft=dockerfile:
"
3241,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# explicitly set user/group IDs
"
3242,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
3243,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
3244,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# grab gosu for easy step-down from root
"
3245,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3246,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3247,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3248,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
3249,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3250,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
3251,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# arches officialy built by upstream
"
3252,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3253,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3254,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3255,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3256,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3257,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3258,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3259,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3260,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3261,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3262,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3263,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
3264,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3265,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile," # backwards compat
"
3266,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3267,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
3268,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3269,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#		krb5-dev \
"
3270,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#		openldap-dev \
"
3271,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# configure: error: prove not found
"
3272,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3273,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3274,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3275,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
3276,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3277,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3278,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3279,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3280,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3281,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
3282,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3283,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3284,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3285,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3286,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile," # backwards compat
"
3287,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3288,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3289,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3290,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"#		krb5-dev \
"
3291,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"#		openldap-dev \
"
3292,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# configure: error: prove not found
"
3293,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3294,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3295,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3296,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3297,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3298,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3299,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3300,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3301,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3302,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3303,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3304,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3305,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3306,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile," # backwards compat
"
3307,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
3308,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# explicitly set user/group IDs
"
3309,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3310,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3311,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3312,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# arches officialy built by upstream
"
3313,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3314,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3315,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3316,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3317,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3318,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3319,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3320,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3321,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3322,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3323,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3324,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile," # backwards compat
"
3325,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# vim:set ft=dockerfile:
"
3326,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# explicitly set user/group IDs
"
3327,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# grab gosu for easy step-down from root
"
3328,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3329,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3330,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3331,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3332,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# arches officialy built by upstream
"
3333,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3334,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3335,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3336,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3337,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3338,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3339,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3340,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3341,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3342,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3343,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3344,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile," # backwards compat
"
3345,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,"# vim:set ft=dockerfile:
"
3346,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,"# explicitly set user/group IDs
"
3347,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,"# grab gosu for easy step-down from root
"
3348,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3349,9737ce4eeb7d580de8bd6831d8144ba08c316197,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3350,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
3351,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# explicitly set user/group IDs
"
3352,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3353,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3354,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3355,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3356,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3357,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3358,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3359,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile," # backwards compat
"
3360,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3361,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3362,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
3363,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
3364,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3365,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3366,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3367,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3368,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3369,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3370,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3371,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3372,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3373,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3374,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3375,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
3376,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# explicitly set user/group IDs
"
3377,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
3378,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3379,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3380,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3381,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3382,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3383,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# explicitly set user/group IDs
"
3384,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
3385,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
3386,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
3387,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3388,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3389,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3390,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3391,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# see note below about ""*.pyc"" files
"
3392,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# arches officialy built by upstream
"
3393,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3394,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3395,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3396,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3397,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3398,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3399,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3400,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3401,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3402,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3403,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3404,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3405,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3406,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile," # backwards compat
"
3407,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
3408,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3409,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
3410,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3411,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3412,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
3413,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3414,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3415,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#		krb5-dev \
"
3416,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#		openldap-dev \
"
3417,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# configure: error: prove not found
"
3418,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3419,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3420,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3421,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3422,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3423,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3424,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3425,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3426,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3427,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
3428,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3429,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
3430,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3431,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3432,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-alpine.template," # backwards compat
"
3433,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3434,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3435,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3436,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
3437,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
3438,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
3439,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3440,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3441,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3442,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3443,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3444,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3445,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3446,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3447,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3448,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
3449,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3450,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3451,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3452,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3453,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile," # backwards compat
"
3454,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
3455,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# explicitly set user/group IDs
"
3456,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3457,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3458,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3459,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3460,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3461,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3462,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3463,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
3464,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3465,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3466,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
3467,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# explicitly set user/group IDs
"
3468,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
3469,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
3470,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3471,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3472,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3473,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3474,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3475,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
3476,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# arches officialy built by upstream
"
3477,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3478,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3479,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3480,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3481,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3482,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3483,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3484,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3485,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3486,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3487,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3488,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3489,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3490,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile," # backwards compat
"
3491,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3492,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# explicitly set user/group IDs
"
3493,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
3494,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3495,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3496,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3497,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# arches officialy built by upstream
"
3498,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3499,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3500,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3501,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3502,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3503,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3504,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3505,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3506,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3507,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3508,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3509,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile," # backwards compat
"
3510,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
3511,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# explicitly set user/group IDs
"
3512,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3513,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3514,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3515,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3516,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3517,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3518,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3519,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3520,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3521,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
3522,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
3523,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3524,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
3525,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3526,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3527,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3528,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3529,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3530,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3531,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3532,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3533,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3534,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3535,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile," # backwards compat
"
3536,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
3537,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3538,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
3539,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3540,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3541,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3542,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3543,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3544,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
3545,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
3546,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
3547,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3548,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3549,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
3550,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3551,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3552,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3553,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3554,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3555,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3556,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3557,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3558,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3559,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3560,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3561,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3562,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile," # backwards compat
"
3563,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# vim:set ft=dockerfile:
"
3564,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# explicitly set user/group IDs
"
3565,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
3566,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
3567,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# grab gosu for easy step-down from root
"
3568,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3569,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3570,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3571,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
3572,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3573,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
3574,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# arches officialy built by upstream
"
3575,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3576,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3577,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3578,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3579,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3580,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3581,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3582,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3583,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3584,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3585,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3586,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
3587,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3588,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile," # backwards compat
"
3589,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3590,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3591,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3592,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#		krb5-dev \
"
3593,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#		openldap-dev \
"
3594,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# configure: error: prove not found
"
3595,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3596,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3597,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3598,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3599,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3600,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3601,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3602,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3603,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3604,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3605,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3606,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3607,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3608,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile," # backwards compat
"
3609,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3610,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3611,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3612,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
3613,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
3614,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
3615,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3616,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3617,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
3618,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3619,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3620,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3621,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3622,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3623,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3624,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3625,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3626,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
3627,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3628,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3629,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3630,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3631,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile," # backwards compat
"
3632,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
3633,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3634,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
3635,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3636,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3637,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
3638,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3639,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
3640,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3641,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3642,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3643,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# explicitly set user/group IDs
"
3644,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
3645,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3646,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3647,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3648,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3649,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3650,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3651,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
3652,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3653,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3654,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3655,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
3656,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3657,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#		krb5-dev \
"
3658,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#		openldap-dev \
"
3659,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# configure: error: prove not found
"
3660,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3661,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3662,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3663,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
3664,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3665,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3666,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3667,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3668,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3669,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
3670,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3671,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3672,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3673,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3674,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
3675,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
3676,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
3677,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3678,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3679,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3680,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
3681,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3682,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3683,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-debian.template," # backwards compat
"
3684,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3685,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3686,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3687,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
3688,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
3689,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3690,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
3691,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3692,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3693,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3694,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3695,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3696,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3697,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3698,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3699,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3700,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3701,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3702,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3703,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile," # backwards compat
"
3704,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
3705,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# explicitly set user/group IDs
"
3706,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
3707,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3708,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3709,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3710,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3711,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3712,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3713,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile," # backwards compat
"
3714,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3715,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3716,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3717,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
3718,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
3719,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
3720,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3721,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3722,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3723,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3724,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3725,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3726,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3727,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3728,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3729,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
3730,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3731,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3732,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3733,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3734,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile," # backwards compat
"
3735,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3736,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# explicitly set user/group IDs
"
3737,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
3738,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3739,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3740,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3741,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3742,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3743,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3744,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile," # backwards compat
"
3745,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3746,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3747,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3748,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3749,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3750,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
3751,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# explicitly set user/group IDs
"
3752,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3753,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3754,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3755,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# arches officialy built by upstream
"
3756,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3757,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3758,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3759,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3760,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3761,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3762,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3763,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3764,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3765,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3766,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3767,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile," # backwards compat
"
3768,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
3769,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3770,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
3771,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3772,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3773,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3774,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3775,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
3776,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
3777,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3778,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3779,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3780,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3781,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3782,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3783,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3784,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3785,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3786,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3787,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3788,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
3789,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# explicitly set user/group IDs
"
3790,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3791,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3792,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3793,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3794,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3795,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# arches officialy built by upstream
"
3796,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3797,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3798,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3799,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3800,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3801,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3802,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3803,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3804,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3805,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3806,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3807,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile," # backwards compat
"
3808,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# vim:set ft=dockerfile:
"
3809,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# explicitly set user/group IDs
"
3810,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# grab gosu for easy step-down from root
"
3811,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3812,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3813,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3814,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3815,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3816,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3817,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile," # backwards compat
"
3818,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
3819,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# explicitly set user/group IDs
"
3820,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
3821,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
3822,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
3823,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3824,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3825,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3826,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3827,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
3828,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# arches officialy built by upstream
"
3829,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3830,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3831,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3832,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3833,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3834,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3835,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3836,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3837,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3838,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3839,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3840,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
3841,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3842,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile," # backwards compat
"
3843,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
3844,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# explicitly set user/group IDs
"
3845,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
3846,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
3847,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
3848,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3849,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3850,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3851,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3852,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
3853,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# arches officialy built by upstream
"
3854,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3855,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3856,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3857,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3858,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3859,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3860,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3861,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3862,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3863,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3864,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3865,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
3866,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3867,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile," # backwards compat
"
3868,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3869,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3870,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
3871,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
3872,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3873,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3874,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3875,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3876,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3877,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
3878,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3879,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3880,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3881,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3882,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3883,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
3884,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
3885,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
3886,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3887,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3888,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3889,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3890,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3891,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3892,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3893,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3894,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3895,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3896,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3897,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3898,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile," # backwards compat
"
3899,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3900,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
3901,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3902,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
3903,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
3904,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
3905,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
3906,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
3907,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
3908,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
3909,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
3910,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
3911,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
3912,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
3913,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
3914,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
3915,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
3916,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3917,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
3918,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3919,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile," # backwards compat
"
3920,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
3921,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# explicitly set user/group IDs
"
3922,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
3923,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3924,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3925,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# arches officialy built by upstream
"
3926,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3927,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3928,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3929,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3930,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3931,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3932,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3933,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3934,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3935,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3936,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3937,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile," # backwards compat
"
3938,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
3939,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,"# explicitly set user/group IDs
"
3940,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
3941,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3942,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3943,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
3944,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# explicitly set user/group IDs
"
3945,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
3946,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3947,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3948,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3949,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3950,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# arches officialy built by upstream
"
3951,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3952,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3953,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3954,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3955,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3956,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3957,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3958,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3959,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3960,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
3961,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3962,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile," # backwards compat
"
3963,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
3964,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
3965,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
3966,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3967,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
3968,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# vim:set ft=dockerfile:
"
3969,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# explicitly set user/group IDs
"
3970,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
3971,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
3972,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# grab gosu for easy step-down from root
"
3973,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
3974,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
3975,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
3976,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
3977,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
3978,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
3979,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# arches officialy built by upstream
"
3980,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
3981,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
3982,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
3983,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
3984,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
3985,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
3986,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
3987,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
3988,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
3989,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
3990,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
3991,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
3992,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
3993,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile," # backwards compat
"
3994,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
3995,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
3996,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
3997,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#		krb5-dev \
"
3998,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#		openldap-dev \
"
3999,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# configure: error: prove not found
"
4000,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4001,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4002,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4003,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
4004,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4005,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4006,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4007,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4008,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4009,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4010,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4011,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4012,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4013,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4014,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile," # backwards compat
"
4015,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4016,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
4017,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4018,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
4019,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
4020,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
4021,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4022,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4023,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4024,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4025,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4026,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4027,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4028,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4029,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4030,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4031,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4032,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4033,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4034,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4035,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile," # backwards compat
"
4036,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4037,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4038,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
4039,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
4040,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4041,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4042,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4043,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4044,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4045,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4046,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4047,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4048,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# vim:set ft=dockerfile:
"
4049,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# explicitly set user/group IDs
"
4050,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4051,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4052,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
4053,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4054,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4055,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4056,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
4057,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4058,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
4059,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# arches officialy built by upstream
"
4060,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4061,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4062,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4063,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4064,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4065,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4066,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4067,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4068,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4069,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4070,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4071,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4072,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4073,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile," # backwards compat
"
4074,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4075,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4076,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
4077,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
4078,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4079,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4080,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4081,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4082,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4083,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4084,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4085,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4086,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4087,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
4088,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4089,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#		krb5-dev \
"
4090,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#		openldap-dev \
"
4091,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# configure: error: prove not found
"
4092,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4093,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4094,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4095,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4096,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4097,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4098,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4099,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4100,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4101,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4102,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4103,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4104,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4105,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4106,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile," # backwards compat
"
4107,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4108,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4109,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4110,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#		krb5-dev \
"
4111,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#		openldap-dev \
"
4112,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# configure: error: prove not found
"
4113,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4114,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4115,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4116,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4117,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4118,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4119,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4120,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4121,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4122,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4123,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4124,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4125,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4126,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4127,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile," # backwards compat
"
4128,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
4129,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
4130,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4131,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4132,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
4133,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4134,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4135,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4136,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4137,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
4138,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# arches officialy built by upstream
"
4139,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4140,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4141,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4142,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4143,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4144,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4145,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4146,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4147,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4148,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4149,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
4150,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4151,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4152,040949af1595f49f2242f6d1f9c42fb042b3eaed,/Dockerfile-debian.template," # backwards compat
"
4153,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
4154,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# explicitly set user/group IDs
"
4155,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4156,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4157,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
4158,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4159,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4160,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4161,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4162,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
4163,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# arches officialy built by upstream
"
4164,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4165,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4166,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4167,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4168,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4169,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4170,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4171,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4172,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4173,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4174,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4175,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4176,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4177,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile," # backwards compat
"
4178,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4179,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4180,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4181,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
4182,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
4183,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
4184,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4185,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4186,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
4187,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4188,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4189,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4190,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4191,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4192,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4193,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4194,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4195,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4196,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4197,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4198,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4199,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4200,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile," # backwards compat
"
4201,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/Dockerfile.template,"# vim:set ft=dockerfile:
"
4202,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
4203,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4204,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
4205,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
4206,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
4207,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4208,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4209,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4210,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4211,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4212,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
4213,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
4214,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
4215,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4216,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4217,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4218,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4219,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4220,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4221,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4222,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4223,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4224,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4225,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4226,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4227,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4228,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4229,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile," # backwards compat
"
4230,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
4231,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# explicitly set user/group IDs
"
4232,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4233,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4234,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
4235,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4236,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4237,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4238,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4239,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# arches officialy built by upstream
"
4240,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4241,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4242,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4243,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4244,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4245,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4246,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4247,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4248,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4249,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4250,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4251,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile," # backwards compat
"
4252,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4253,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4254,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
4255,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
4256,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4257,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4258,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4259,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4260,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4261,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4262,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4263,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4264,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4265,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4266,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4267,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
4268,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4269,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#		krb5-dev \
"
4270,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#		openldap-dev \
"
4271,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# configure: error: prove not found
"
4272,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4273,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4274,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4275,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4276,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4277,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4278,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4279,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4280,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4281,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4282,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4283,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4284,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4285,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4286,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile," # backwards compat
"
4287,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
4288,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# explicitly set user/group IDs
"
4289,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4290,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4291,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
4292,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4293,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4294,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4295,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4296,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
4297,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# arches officialy built by upstream
"
4298,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4299,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4300,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4301,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4302,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4303,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4304,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4305,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4306,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4307,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4308,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4309,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4310,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4311,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile," # backwards compat
"
4312,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
4313,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# explicitly set user/group IDs
"
4314,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
4315,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4316,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4317,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# arches officialy built by upstream
"
4318,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4319,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4320,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4321,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4322,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4323,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4324,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4325,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4326,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4327,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4328,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4329,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile," # backwards compat
"
4330,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4331,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4332,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4333,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
4334,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
4335,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4336,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4337,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4338,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4339,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4340,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4341,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4342,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4343,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4344,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4345,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4346,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4347,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile," # backwards compat
"
4348,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
4349,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
4350,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4351,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4352,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
4353,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4354,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4355,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4356,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
4357,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4358,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
4359,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# arches officialy built by upstream
"
4360,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4361,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4362,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4363,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4364,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4365,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4366,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4367,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4368,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4369,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4370,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
4371,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4372,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4373,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/Dockerfile-debian.template," # backwards compat
"
4374,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
4375,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
4376,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
4377,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4378,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4379,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4380,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
4381,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4382,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#		krb5-dev \
"
4383,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#		openldap-dev \
"
4384,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# configure: error: prove not found
"
4385,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4386,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4387,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4388,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4389,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4390,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4391,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4392,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4393,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4394,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4395,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4396,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4397,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4398,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4399,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile," # backwards compat
"
4400,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
4401,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# explicitly set user/group IDs
"
4402,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
4403,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4404,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4405,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4406,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4407,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4408,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4409,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4410,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4411,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
4412,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
4413,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
4414,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4415,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4416,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
4417,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4418,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4419,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4420,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4421,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4422,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4423,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4424,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4425,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4426,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4427,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4428,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4429,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile," # backwards compat
"
4430,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
4431,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
4432,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4433,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4434,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
4435,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4436,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4437,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4438,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4439,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
4440,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# arches officialy built by upstream
"
4441,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4442,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4443,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4444,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4445,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4446,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4447,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4448,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4449,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4450,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4451,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
4452,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4453,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4454,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/Dockerfile-debian.template," # backwards compat
"
4455,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
4456,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
4457,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
4458,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4459,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4460,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
4461,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
4462,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
4463,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4464,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4465,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4466,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
4467,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4468,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4469,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-debian.template," # backwards compat
"
4470,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
4471,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# explicitly set user/group IDs
"
4472,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
4473,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4474,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4475,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4476,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4477,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
4478,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# explicitly set user/group IDs
"
4479,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
4480,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4481,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4482,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4483,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4484,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4485,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4486,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile," # backwards compat
"
4487,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
4488,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4489,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"#		krb5-dev \
"
4490,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"#		openldap-dev \
"
4491,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4492,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4493,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4494,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4495,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4496,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4497,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
4498,069acf6f69adb67e956ceb374fff4cfe50c6180d,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4499,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4500,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
4501,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4502,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
4503,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
4504,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
4505,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4506,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4507,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4508,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
4509,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4510,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4511,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4512,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4513,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4514,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4515,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4516,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4517,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4518,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4519,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile," # backwards compat
"
4520,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4521,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4522,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
4523,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
4524,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4525,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
4526,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4527,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4528,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4529,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4530,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4531,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4532,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4533,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4534,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4535,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4536,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile," # backwards compat
"
4537,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4538,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4539,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4540,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#		krb5-dev \
"
4541,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#		openldap-dev \
"
4542,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# configure: error: prove not found
"
4543,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4544,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4545,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4546,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4547,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4548,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4549,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4550,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4551,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4552,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4553,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4554,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4555,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4556,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4557,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile," # backwards compat
"
4558,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4559,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
4560,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4561,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#		krb5-dev \
"
4562,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#		openldap-dev \
"
4563,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# configure: error: prove not found
"
4564,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4565,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4566,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4567,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4568,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4569,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4570,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4571,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4572,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4573,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4574,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4575,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4576,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4577,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4578,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
4579,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4580,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4581,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"#		krb5-dev \
"
4582,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"#		openldap-dev \
"
4583,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4584,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4585,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4586,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4587,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4588,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4589,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4590,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4591,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4592,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
4593,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4594,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4595,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-alpine.template," # backwards compat
"
4596,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4597,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4598,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4599,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
4600,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
4601,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4602,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4603,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4604,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4605,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4606,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4607,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4608,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4609,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4610,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4611,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4612,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile," # backwards compat
"
4613,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4614,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4615,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
4616,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
4617,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4618,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4619,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4620,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4621,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4622,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4623,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4624,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4625,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4626,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4627,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4628,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile," # backwards compat
"
4629,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
4630,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# explicitly set user/group IDs
"
4631,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4632,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4633,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
4634,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4635,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4636,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4637,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4638,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
4639,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# arches officialy built by upstream
"
4640,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4641,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4642,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4643,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4644,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4645,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4646,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4647,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4648,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4649,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4650,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4651,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4652,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4653,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile," # backwards compat
"
4654,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4655,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4656,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4657,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
4658,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
4659,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
4660,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4661,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4662,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
4663,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4664,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4665,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4666,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4667,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4668,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4669,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4670,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4671,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4672,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4673,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4674,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4675,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4676,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile," # backwards compat
"
4677,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4678,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4679,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4680,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#		krb5-dev \
"
4681,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#		openldap-dev \
"
4682,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# configure: error: prove not found
"
4683,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4684,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4685,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4686,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4687,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4688,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4689,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4690,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4691,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4692,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4693,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4694,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4695,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4696,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4697,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile," # backwards compat
"
4698,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# vim:set ft=dockerfile:
"
4699,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# explicitly set user/group IDs
"
4700,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# grab gosu for easy step-down from root
"
4701,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4702,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4703,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4704,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4705,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4706,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4707,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile," # backwards compat
"
4708,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4709,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4710,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4711,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
4712,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
4713,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4714,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4715,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4716,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4717,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4718,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4719,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4720,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4721,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4722,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4723,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4724,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4725,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile," # backwards compat
"
4726,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4727,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4728,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4729,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
4730,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
4731,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4732,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4733,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4734,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4735,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4736,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4737,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4738,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4739,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4740,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4741,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4742,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4743,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile," # backwards compat
"
4744,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
4745,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# explicitly set user/group IDs
"
4746,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
4747,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4748,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4749,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4750,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4751,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4752,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4753,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile," # backwards compat
"
4754,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
4755,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,"# explicitly set user/group IDs
"
4756,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
4757,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4758,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4759,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
4760,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# explicitly set user/group IDs
"
4761,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
4762,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4763,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4764,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# arches officialy built by upstream
"
4765,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4766,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4767,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4768,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4769,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4770,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4771,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4772,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4773,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4774,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4775,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4776,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile," # backwards compat
"
4777,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
4778,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# explicitly set user/group IDs
"
4779,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4780,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4781,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
4782,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4783,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4784,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4785,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
4786,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4787,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
4788,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# arches officialy built by upstream
"
4789,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4790,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4791,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4792,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4793,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4794,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4795,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4796,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4797,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4798,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4799,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4800,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4801,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4802,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile," # backwards compat
"
4803,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4804,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4805,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4806,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
4807,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
4808,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4809,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
4810,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4811,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4812,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4813,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4814,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4815,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4816,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4817,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4818,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4819,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4820,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile," # backwards compat
"
4821,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# vim:set ft=dockerfile:
"
4822,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# explicitly set user/group IDs
"
4823,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4824,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4825,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# grab gosu for easy step-down from root
"
4826,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4827,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4828,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4829,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4830,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
4831,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# arches officialy built by upstream
"
4832,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4833,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4834,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4835,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4836,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4837,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4838,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4839,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4840,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4841,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4842,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4843,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4844,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4845,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile," # backwards compat
"
4846,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4847,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4848,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4849,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
4850,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
4851,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4852,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4853,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4854,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4855,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4856,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4857,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4858,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4859,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4860,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4861,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4862,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4863,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile," # backwards compat
"
4864,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4865,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4866,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4867,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
4868,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
4869,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4870,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
4871,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4872,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4873,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4874,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4875,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4876,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4877,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4878,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4879,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4880,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4881,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4882,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4883,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile," # backwards compat
"
4884,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
4885,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# explicitly set user/group IDs
"
4886,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
4887,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4888,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4889,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4890,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4891,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# arches officialy built by upstream
"
4892,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4893,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4894,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4895,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4896,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4897,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4898,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4899,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4900,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4901,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4902,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4903,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile," # backwards compat
"
4904,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
4905,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,"# explicitly set user/group IDs
"
4906,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
4907,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4908,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4909,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
4910,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# explicitly set user/group IDs
"
4911,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
4912,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4913,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4914,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4915,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4916,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4917,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4918,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4919,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
4920,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
4921,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
4922,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4923,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4924,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4925,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4926,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4927,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4928,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4929,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4930,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4931,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4932,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4933,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4934,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4935,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4936,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile," # backwards compat
"
4937,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4938,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4939,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4940,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
4941,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
4942,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
4943,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
4944,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4945,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
4946,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
4947,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
4948,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
4949,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
4950,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
4951,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
4952,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
4953,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
4954,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4955,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
4956,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4957,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile," # backwards compat
"
4958,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# vim:set ft=dockerfile:
"
4959,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# explicitly set user/group IDs
"
4960,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
4961,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
4962,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# grab gosu for easy step-down from root
"
4963,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4964,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
4965,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
4966,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
4967,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4968,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
4969,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# arches officialy built by upstream
"
4970,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
4971,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
4972,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
4973,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
4974,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
4975,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
4976,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
4977,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
4978,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
4979,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
4980,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
4981,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
4982,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4983,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile," # backwards compat
"
4984,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
4985,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
4986,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
4987,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
4988,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
4989,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
4990,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
4991,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
4992,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
4993,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
4994,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
4995,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
4996,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
4997,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
4998,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
4999,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
5000,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5001,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5002,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5003,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5004,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5005,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5006,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5007,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5008,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5009,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5010,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5011,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5012,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile," # backwards compat
"
5013,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
5014,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# explicitly set user/group IDs
"
5015,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5016,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5017,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
5018,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5019,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5020,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5021,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5022,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# arches officialy built by upstream
"
5023,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5024,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5025,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5026,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5027,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5028,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5029,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5030,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5031,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5032,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5033,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5034,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile," # backwards compat
"
5035,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# vim:set ft=dockerfile:
"
5036,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# explicitly set user/group IDs
"
5037,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5038,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5039,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# grab gosu for easy step-down from root
"
5040,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5041,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5042,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5043,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
5044,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5045,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
5046,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# arches officialy built by upstream
"
5047,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5048,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5049,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5050,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5051,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5052,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5053,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5054,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5055,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5056,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5057,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5058,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5059,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5060,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile," # backwards compat
"
5061,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
5062,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# explicitly set user/group IDs
"
5063,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5064,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5065,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
5066,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5067,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5068,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5069,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
5070,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5071,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
5072,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# arches officialy built by upstream
"
5073,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5074,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5075,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5076,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5077,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5078,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5079,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5080,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5081,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5082,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5083,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5084,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5085,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5086,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile," # backwards compat
"
5087,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
5088,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
5089,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
5090,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5091,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5092,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5093,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5094,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5095,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
5096,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
5097,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5098,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5099,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5100,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5101,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5102,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5103,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5104,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5105,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5106,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5107,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5108,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5109,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile," # backwards compat
"
5110,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5111,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5112,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5113,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#		krb5-dev \
"
5114,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#		openldap-dev \
"
5115,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# configure: error: prove not found
"
5116,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5117,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5118,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5119,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5120,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5121,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5122,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5123,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5124,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5125,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5126,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5127,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5128,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile," # backwards compat
"
5129,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5130,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
5131,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5132,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
5133,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
5134,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
5135,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5136,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5137,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5138,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5139,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5140,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5141,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5142,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5143,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5144,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5145,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5146,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5147,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5148,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5149,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile," # backwards compat
"
5150,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# vim:set ft=dockerfile:
"
5151,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# explicitly set user/group IDs
"
5152,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5153,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5154,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
5155,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5156,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5157,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5158,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
5159,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5160,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
5161,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# arches officialy built by upstream
"
5162,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5163,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5164,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5165,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5166,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5167,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5168,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5169,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5170,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5171,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5172,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5173,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5174,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5175,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile," # backwards compat
"
5176,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# vim:set ft=dockerfile:
"
5177,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# explicitly set user/group IDs
"
5178,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5179,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5180,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# grab gosu for easy step-down from root
"
5181,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5182,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5183,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5184,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5185,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
5186,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# arches officialy built by upstream
"
5187,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5188,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5189,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5190,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5191,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5192,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5193,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5194,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5195,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5196,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5197,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5198,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5199,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5200,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile," # backwards compat
"
5201,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
5202,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# explicitly set user/group IDs
"
5203,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5204,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5205,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
5206,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5207,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5208,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5209,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5210,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
5211,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# arches officialy built by upstream
"
5212,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5213,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5214,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5215,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5216,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5217,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5218,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5219,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5220,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5221,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5222,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5223,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5224,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5225,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile," # backwards compat
"
5226,6abeb8590f35c5251b9f100a667024febaeee06b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
5227,6abeb8590f35c5251b9f100a667024febaeee06b,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5228,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
5229,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5230,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# vim:set ft=dockerfile:
"
5231,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# explicitly set user/group IDs
"
5232,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5233,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5234,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# grab gosu for easy step-down from root
"
5235,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5236,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5237,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5238,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5239,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
5240,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# arches officialy built by upstream
"
5241,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5242,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5243,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5244,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5245,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5246,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5247,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5248,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5249,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5250,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5251,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5252,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5253,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5254,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile," # backwards compat
"
5255,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
5256,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5257,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"#		krb5-dev \
"
5258,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"#		openldap-dev \
"
5259,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5260,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5261,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5262,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5263,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5264,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5265,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5266,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5267,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
5268,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5269,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5270,fc676766b4c4b1a7afb857342b9adef78b09f28b,/Dockerfile-alpine.template," # backwards compat
"
5271,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5272,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5273,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5274,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
5275,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
5276,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
5277,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5278,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5279,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5280,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5281,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5282,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5283,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5284,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5285,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5286,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5287,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5288,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5289,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5290,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile," # backwards compat
"
5291,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# vim:set ft=dockerfile:
"
5292,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# explicitly set user/group IDs
"
5293,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5294,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5295,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# grab gosu for easy step-down from root
"
5296,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5297,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5298,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5299,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
5300,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5301,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
5302,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# arches officialy built by upstream
"
5303,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5304,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5305,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5306,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5307,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5308,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5309,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5310,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5311,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5312,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5313,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5314,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5315,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5316,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile," # backwards compat
"
5317,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5318,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5319,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5320,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
5321,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
5322,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
5323,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5324,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5325,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5326,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5327,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5328,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5329,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5330,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5331,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5332,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5333,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5334,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5335,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5336,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5337,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile," # backwards compat
"
5338,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
5339,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# explicitly set user/group IDs
"
5340,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
5341,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5342,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5343,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# arches officialy built by upstream
"
5344,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5345,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5346,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5347,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5348,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5349,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5350,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5351,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5352,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5353,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5354,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5355,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile," # backwards compat
"
5356,6abeb8590f35c5251b9f100a667024febaeee06b,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
5357,6abeb8590f35c5251b9f100a667024febaeee06b,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5358,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
5359,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5360,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"#		krb5-dev \
"
5361,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"#		openldap-dev \
"
5362,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5363,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5364,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5365,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5366,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5367,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
5368,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
5369,03f4064a045114f56fa445eb602339faaf79eeec,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5370,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5371,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5372,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5373,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#		krb5-dev \
"
5374,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#		openldap-dev \
"
5375,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# configure: error: prove not found
"
5376,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5377,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5378,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5379,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5380,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5381,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5382,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5383,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5384,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5385,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5386,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5387,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5388,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5389,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5390,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
5391,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
5392,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5393,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#		krb5-dev \
"
5394,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#		openldap-dev \
"
5395,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# configure: error: prove not found
"
5396,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5397,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5398,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5399,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5400,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5401,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5402,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5403,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5404,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5405,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
5406,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5407,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
5408,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5409,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5410,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/Dockerfile-alpine.template," # backwards compat
"
5411,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# vim:set ft=dockerfile:
"
5412,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# explicitly set user/group IDs
"
5413,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5414,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5415,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# grab gosu for easy step-down from root
"
5416,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5417,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5418,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5419,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5420,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
5421,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# arches officialy built by upstream
"
5422,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5423,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5424,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5425,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5426,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5427,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5428,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5429,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5430,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5431,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5432,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5433,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5434,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5435,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile," # backwards compat
"
5436,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5437,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5438,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5439,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
5440,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
5441,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5442,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5443,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5444,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5445,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5446,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5447,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5448,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5449,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5450,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5451,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5452,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile," # backwards compat
"
5453,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
5454,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# explicitly set user/group IDs
"
5455,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
5456,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5457,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5458,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5459,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5460,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5461,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5462,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
5463,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# explicitly set user/group IDs
"
5464,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
5465,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5466,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5467,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5468,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5469,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# arches officialy built by upstream
"
5470,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5471,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5472,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5473,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5474,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5475,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5476,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5477,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5478,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5479,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5480,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5481,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile," # backwards compat
"
5482,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5483,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5484,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5485,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
5486,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
5487,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
5488,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5489,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5490,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5491,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5492,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5493,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5494,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5495,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5496,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5497,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5498,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5499,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5500,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5501,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5502,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile," # backwards compat
"
5503,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
5504,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# explicitly set user/group IDs
"
5505,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5506,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5507,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
5508,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5509,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5510,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5511,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5512,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
5513,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# arches officialy built by upstream
"
5514,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5515,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5516,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5517,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5518,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5519,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5520,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5521,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5522,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5523,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5524,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5525,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5526,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5527,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile," # backwards compat
"
5528,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
5529,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# explicitly set user/group IDs
"
5530,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5531,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5532,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
5533,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5534,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5535,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5536,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5537,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
5538,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# arches officialy built by upstream
"
5539,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5540,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5541,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5542,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5543,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5544,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5545,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5546,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5547,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5548,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5549,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5550,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5551,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5552,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile," # backwards compat
"
5553,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
5554,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# explicitly set user/group IDs
"
5555,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5556,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5557,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
5558,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5559,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5560,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5561,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5562,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
5563,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# arches officialy built by upstream
"
5564,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5565,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5566,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5567,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5568,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5569,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5570,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5571,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5572,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5573,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5574,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5575,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5576,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5577,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile," # backwards compat
"
5578,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,"# vim:set ft=dockerfile:
"
5579,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
5580,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,"# grab gosu for easy step-down from root
"
5581,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5582,b36f03d03593858497e1dda862c732cd1eb2ce86,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5583,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# vim:set ft=dockerfile:
"
5584,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# explicitly set user/group IDs
"
5585,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5586,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5587,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# grab gosu for easy step-down from root
"
5588,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5589,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5590,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5591,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5592,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
5593,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# arches officialy built by upstream
"
5594,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5595,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5596,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5597,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5598,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5599,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5600,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5601,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5602,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5603,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5604,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5605,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5606,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5607,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile," # backwards compat
"
5608,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
5609,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,"# explicitly set user/group IDs
"
5610,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
5611,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5612,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5613,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
5614,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# explicitly set user/group IDs
"
5615,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
5616,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5617,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5618,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5619,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5620,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
5621,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# explicitly set user/group IDs
"
5622,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
5623,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5624,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5625,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5626,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5627,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
5628,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# explicitly set user/group IDs
"
5629,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5630,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5631,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
5632,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5633,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5634,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5635,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5636,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
5637,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# arches officialy built by upstream
"
5638,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5639,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5640,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5641,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5642,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5643,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5644,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5645,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5646,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5647,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5648,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5649,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5650,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5651,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile," # backwards compat
"
5652,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5653,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5654,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
5655,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
5656,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5657,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5658,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5659,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5660,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5661,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5662,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5663,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5664,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
5665,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# explicitly set user/group IDs
"
5666,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5667,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5668,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
5669,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5670,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5671,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5672,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5673,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
5674,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# arches officialy built by upstream
"
5675,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5676,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5677,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5678,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5679,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5680,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5681,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5682,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5683,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5684,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5685,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5686,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5687,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5688,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile," # backwards compat
"
5689,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5690,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5691,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
5692,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
5693,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5694,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5695,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5696,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5697,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5698,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5699,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5700,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5701,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
5702,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# explicitly set user/group IDs
"
5703,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
5704,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5705,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5706,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5707,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5708,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5709,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5710,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile," # backwards compat
"
5711,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
5712,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,"# explicitly set user/group IDs
"
5713,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
5714,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5715,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5716,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5717,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5718,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5719,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
5720,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
5721,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
5722,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5723,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5724,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5725,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5726,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5727,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5728,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5729,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5730,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5731,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5732,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5733,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5734,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5735,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5736,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile," # backwards compat
"
5737,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5738,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5739,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5740,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#		krb5-dev \
"
5741,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#		openldap-dev \
"
5742,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# configure: error: prove not found
"
5743,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5744,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5745,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5746,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5747,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5748,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5749,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5750,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5751,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5752,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5753,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5754,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5755,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5756,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5757,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile," # backwards compat
"
5758,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
5759,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# explicitly set user/group IDs
"
5760,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
5761,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5762,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5763,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5764,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5765,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5766,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5767,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5768,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
5769,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
5770,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5771,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5772,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5773,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5774,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5775,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5776,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5777,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5778,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5779,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5780,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5781,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5782,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile," # backwards compat
"
5783,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
5784,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
5785,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
5786,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5787,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5788,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5789,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5790,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# arches officialy built by upstream
"
5791,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5792,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5793,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5794,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5795,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5796,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5797,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5798,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5799,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
5800,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5801,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5802,639f83fb14161c8be60119b97bb9f88796776058,/Dockerfile-debian.template," # backwards compat
"
5803,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5804,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5805,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
5806,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
5807,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5808,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5809,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5810,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5811,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5812,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1
"
5813,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5814,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5815,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5816,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
5817,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5818,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#		krb5-dev \
"
5819,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#		openldap-dev \
"
5820,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# configure: error: prove not found
"
5821,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5822,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5823,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5824,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5825,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5826,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5827,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5828,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5829,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5830,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5831,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5832,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5833,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5834,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5835,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# vim:set ft=dockerfile:
"
5836,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# explicitly set user/group IDs
"
5837,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5838,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5839,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
5840,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5841,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5842,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5843,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
5844,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5845,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
5846,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# arches officialy built by upstream
"
5847,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5848,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5849,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5850,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5851,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5852,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5853,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5854,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5855,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5856,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5857,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5858,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5859,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5860,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile," # backwards compat
"
5861,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5862,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5863,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5864,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
5865,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
5866,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
5867,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5868,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5869,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
5870,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5871,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5872,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5873,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5874,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5875,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5876,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5877,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5878,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5879,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5880,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5881,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5882,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5883,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile," # backwards compat
"
5884,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5885,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5886,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5887,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
5888,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
5889,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
5890,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5891,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5892,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5893,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5894,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5895,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5896,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5897,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5898,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5899,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5900,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5901,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5902,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5903,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5904,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile," # backwards compat
"
5905,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
5906,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# explicitly set user/group IDs
"
5907,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
5908,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5909,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5910,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5911,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5912,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5913,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5914,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile," # backwards compat
"
5915,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5916,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
5917,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5918,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
5919,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
5920,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
5921,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
5922,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
5923,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
5924,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
5925,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
5926,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
5927,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
5928,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
5929,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
5930,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
5931,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
5932,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5933,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
5934,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5935,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile," # backwards compat
"
5936,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
5937,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"# explicitly set user/group IDs
"
5938,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
5939,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5940,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
5941,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5942,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
5943,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
5944,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# explicitly set user/group IDs
"
5945,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5946,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5947,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
5948,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5949,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5950,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5951,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
5952,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5953,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
5954,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# arches officialy built by upstream
"
5955,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5956,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5957,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5958,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5959,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5960,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5961,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5962,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5963,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5964,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5965,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5966,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5967,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5968,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile," # backwards compat
"
5969,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
5970,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# explicitly set user/group IDs
"
5971,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
5972,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
5973,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
5974,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
5975,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
5976,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
5977,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
5978,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
5979,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# arches officialy built by upstream
"
5980,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
5981,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
5982,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
5983,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
5984,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
5985,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
5986,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
5987,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
5988,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
5989,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
5990,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
5991,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
5992,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
5993,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile," # backwards compat
"
5994,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
5995,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
5996,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
5997,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
5998,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
5999,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6000,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6001,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6002,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6003,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6004,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6005,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6006,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6007,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6008,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6009,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6010,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6011,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile," # backwards compat
"
6012,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6013,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6014,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
6015,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
6016,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6017,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6018,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6019,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6020,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6021,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6022,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6023,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6024,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6025,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6026,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
6027,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6028,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"#		krb5-dev \
"
6029,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"#		openldap-dev \
"
6030,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6031,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6032,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6033,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6034,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6035,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6036,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6037,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6038,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
6039,b68154ed7975480d26e65344dcda09cce0ac1ac9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6040,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6041,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6042,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
6043,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
6044,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6045,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6046,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6047,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6048,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6049,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6050,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6051,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6052,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6053,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6054,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6055,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile," # backwards compat
"
6056,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6057,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6058,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6059,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
6060,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
6061,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
6062,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6063,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6064,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6065,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6066,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6067,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6068,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6069,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6070,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6071,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6072,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6073,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6074,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6075,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6076,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile," # backwards compat
"
6077,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6078,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6079,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6080,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#		krb5-dev \
"
6081,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#		openldap-dev \
"
6082,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# configure: error: prove not found
"
6083,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6084,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6085,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6086,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6087,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6088,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6089,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6090,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6091,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6092,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6093,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6094,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6095,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6096,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6097,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile," # backwards compat
"
6098,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
6099,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6100,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
6101,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6102,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6103,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
6104,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# explicitly set user/group IDs
"
6105,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
6106,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6107,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6108,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6109,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6110,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6111,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
6112,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6113,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
6114,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6115,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6116,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6117,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6118,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6119,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
6120,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
6121,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
6122,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6123,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6124,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6125,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6126,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6127,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6128,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6129,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6130,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6131,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6132,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6133,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6134,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile," # backwards compat
"
6135,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6136,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6137,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6138,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#		krb5-dev \
"
6139,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#		openldap-dev \
"
6140,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# configure: error: prove not found
"
6141,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6142,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6143,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6144,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6145,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6146,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6147,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6148,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6149,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6150,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6151,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6152,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6153,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6154,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6155,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile," # backwards compat
"
6156,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
6157,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6158,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6159,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"#		krb5-dev \
"
6160,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"#		openldap-dev \
"
6161,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6162,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6163,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6164,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6165,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6166,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6167,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6168,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6169,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6170,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
6171,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6172,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6173,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/Dockerfile-alpine.template," # backwards compat
"
6174,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6175,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6176,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
6177,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
6178,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6179,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6180,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6181,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6182,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6183,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6184,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6185,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6186,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6187,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6188,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6189,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
6190,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6191,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
6192,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6193,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6194,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6195,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
6196,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6197,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
6198,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
6199,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
6200,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6201,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6202,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6203,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6204,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6205,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6206,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6207,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6208,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6209,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6210,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6211,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6212,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6213,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6214,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile," # backwards compat
"
6215,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# vim:set ft=dockerfile:
"
6216,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# explicitly set user/group IDs
"
6217,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
6218,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
6219,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# grab gosu for easy step-down from root
"
6220,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6221,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6222,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6223,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6224,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
6225,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# arches officialy built by upstream
"
6226,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6227,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
6228,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6229,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6230,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6231,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6232,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6233,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6234,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6235,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
6236,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6237,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
6238,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6239,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile," # backwards compat
"
6240,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# vim:set ft=dockerfile:
"
6241,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# explicitly set user/group IDs
"
6242,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
6243,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
6244,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# grab gosu for easy step-down from root
"
6245,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6246,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6247,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6248,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6249,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
6250,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# arches officialy built by upstream
"
6251,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6252,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
6253,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6254,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6255,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6256,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6257,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6258,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6259,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6260,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
6261,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6262,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
6263,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6264,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile," # backwards compat
"
6265,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6266,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
6267,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6268,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#		krb5-dev \
"
6269,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#		openldap-dev \
"
6270,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# configure: error: prove not found
"
6271,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6272,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6273,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6274,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6275,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6276,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6277,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6278,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6279,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6280,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6281,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6282,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6283,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6284,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6285,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
6286,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# explicitly set user/group IDs
"
6287,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
6288,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
6289,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
6290,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6291,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6292,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6293,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
6294,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6295,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
6296,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# arches officialy built by upstream
"
6297,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6298,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
6299,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6300,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6301,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6302,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6303,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6304,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6305,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6306,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
6307,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6308,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
6309,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6310,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile," # backwards compat
"
6311,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
6312,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
6313,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6314,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#		krb5-dev \
"
6315,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#		openldap-dev \
"
6316,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# configure: error: prove not found
"
6317,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6318,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6319,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6320,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6321,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6322,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6323,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6324,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6325,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6326,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
6327,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6328,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
6329,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6330,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6331,c4b019526a25d1300de77b9699d53ad187cf0dcf,/Dockerfile-alpine.template," # backwards compat
"
6332,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6333,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6334,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6335,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
6336,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
6337,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
6338,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6339,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
6340,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6341,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6342,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6343,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6344,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6345,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6346,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6347,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6348,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6349,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6350,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6351,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6352,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile," # backwards compat
"
6353,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
6354,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6355,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
6356,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6357,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6358,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
6359,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6360,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6361,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"#		krb5-dev \
"
6362,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"#		openldap-dev \
"
6363,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6364,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6365,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6366,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6367,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6368,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6369,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6370,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6371,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6372,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
6373,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6374,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6375,975f6a2705d981f865a2cb0536a86a46e5839534,/Dockerfile-alpine.template," # backwards compat
"
6376,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
6377,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6378,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
6379,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6380,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6381,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6382,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6383,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6384,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
6385,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
6386,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6387,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
6388,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6389,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6390,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6391,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6392,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6393,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6394,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6395,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6396,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6397,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6398,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6399,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6400,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile," # backwards compat
"
6401,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6402,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6403,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
6404,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
6405,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6406,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6407,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6408,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6409,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6410,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6411,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6412,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6413,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6414,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6415,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6416,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile," # backwards compat
"
6417,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
6418,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6419,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
6420,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6421,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6422,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
6423,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,"# explicitly set user/group IDs
"
6424,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
6425,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6426,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6427,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
6428,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6429,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
6430,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6431,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6432,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
6433,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6434,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
6435,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6436,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6437,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6438,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6439,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
6440,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
6441,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6442,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6443,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6444,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6445,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6446,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6447,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6448,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6449,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6450,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6451,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6452,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
6453,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6454,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
6455,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6456,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6457,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
6458,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6459,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
6460,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6461,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6462,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
6463,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# explicitly set user/group IDs
"
6464,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
6465,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
6466,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
6467,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6468,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6469,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6470,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6471,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
6472,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# arches officialy built by upstream
"
6473,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6474,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
6475,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6476,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6477,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6478,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6479,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6480,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6481,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6482,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
6483,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6484,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6485,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6486,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile," # backwards compat
"
6487,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6488,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6489,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6490,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#		krb5-dev \
"
6491,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#		openldap-dev \
"
6492,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# configure: error: prove not found
"
6493,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6494,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6495,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6496,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6497,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6498,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6499,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6500,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6501,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6502,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6503,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6504,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6505,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6506,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6507,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6508,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
6509,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6510,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
6511,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
6512,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
6513,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6514,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6515,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6516,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6517,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6518,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6519,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6520,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6521,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6522,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6523,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6524,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6525,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6526,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6527,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile," # backwards compat
"
6528,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6529,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6530,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6531,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
6532,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
6533,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6534,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6535,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6536,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6537,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6538,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6539,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6540,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6541,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6542,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6543,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6544,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile," # backwards compat
"
6545,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6546,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6547,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6548,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
6549,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
6550,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
6551,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6552,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6553,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6554,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6555,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6556,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6557,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6558,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6559,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6560,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6561,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6562,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6563,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6564,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6565,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile," # backwards compat
"
6566,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,"# vim:set ft=dockerfile:
"
6567,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,"# explicitly set user/group IDs
"
6568,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,"# grab gosu for easy step-down from root
"
6569,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6570,09b09edbea4339a008ef81f00475330172fe7630,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6571,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# vim:set ft=dockerfile:
"
6572,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# explicitly set user/group IDs
"
6573,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# grab gosu for easy step-down from root
"
6574,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6575,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6576,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6577,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# arches officialy built by upstream
"
6578,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6579,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6580,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6581,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6582,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6583,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6584,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6585,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6586,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6587,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6588,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6589,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile," # backwards compat
"
6590,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6591,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6592,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6593,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
6594,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
6595,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
6596,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6597,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6598,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6599,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6600,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6601,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6602,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6603,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6604,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6605,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6606,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6607,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6608,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6609,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile," # backwards compat
"
6610,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
6611,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# explicitly set user/group IDs
"
6612,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
6613,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6614,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6615,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6616,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6617,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# arches officialy built by upstream
"
6618,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6619,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6620,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6621,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6622,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6623,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6624,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6625,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6626,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6627,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6628,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6629,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile," # backwards compat
"
6630,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
6631,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6632,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
6633,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6634,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6635,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
6636,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6637,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
6638,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6639,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6640,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6641,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6642,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
6643,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
6644,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6645,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6646,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6647,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6648,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6649,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
6650,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
6651,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
6652,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6653,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6654,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6655,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6656,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# arches officialy built by upstream
"
6657,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6658,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6659,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6660,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6661,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6662,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6663,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6664,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6665,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
6666,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6667,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6668,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/Dockerfile-debian.template," # backwards compat
"
6669,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
6670,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6671,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6672,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"#		krb5-dev \
"
6673,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"#		openldap-dev \
"
6674,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# configure: error: prove not found
"
6675,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6676,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6677,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6678,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6679,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6680,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6681,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6682,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6683,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6684,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
6685,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6686,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6687,0f55625d25faf7ad6adf821e91612d7df53d9a11,/Dockerfile-alpine.template," # backwards compat
"
6688,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
6689,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6690,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6691,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# vim:set ft=dockerfile:
"
6692,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# explicitly set user/group IDs
"
6693,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
6694,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
6695,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# grab gosu for easy step-down from root
"
6696,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6697,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6698,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6699,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6700,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
6701,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# arches officialy built by upstream
"
6702,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6703,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
6704,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6705,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6706,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6707,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6708,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6709,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6710,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6711,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
6712,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6713,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
6714,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6715,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile," # backwards compat
"
6716,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
6717,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# explicitly set user/group IDs
"
6718,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
6719,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6720,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6721,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6722,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# arches officialy built by upstream
"
6723,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6724,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6725,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6726,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6727,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6728,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6729,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6730,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6731,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6732,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6733,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6734,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile," # backwards compat
"
6735,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6736,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6737,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6738,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
6739,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
6740,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
6741,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6742,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6743,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
6744,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6745,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6746,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6747,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6748,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6749,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6750,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6751,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6752,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6753,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6754,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6755,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6756,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6757,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile," # backwards compat
"
6758,9375cde5569bcfbe814a2788d97c1f8f9590e514,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6759,9375cde5569bcfbe814a2788d97c1f8f9590e514,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6760,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6761,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
6762,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6763,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#		krb5-dev \
"
6764,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#		openldap-dev \
"
6765,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# configure: error: prove not found
"
6766,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6767,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6768,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6769,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6770,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6771,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6772,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6773,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6774,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6775,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6776,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6777,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6778,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6779,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6780,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile," # backwards compat
"
6781,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
6782,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6783,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
6784,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6785,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6786,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# vim:set ft=dockerfile:
"
6787,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# explicitly set user/group IDs
"
6788,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
6789,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
6790,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
6791,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6792,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6793,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6794,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
6795,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6796,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
6797,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# arches officialy built by upstream
"
6798,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6799,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
6800,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6801,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6802,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6803,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6804,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6805,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6806,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6807,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
6808,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6809,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
6810,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6811,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile," # backwards compat
"
6812,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
6813,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,"# explicitly set user/group IDs
"
6814,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
6815,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6816,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6817,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
6818,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6819,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"#		krb5-dev \
"
6820,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"#		openldap-dev \
"
6821,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6822,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6823,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6824,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6825,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6826,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1
"
6827,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
6828,b031aa800308c595624b8d2e43707dbb2861d2f1,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6829,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
6830,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# explicitly set user/group IDs
"
6831,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
6832,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
6833,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
6834,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6835,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6836,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6837,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6838,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# arches officialy built by upstream
"
6839,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6840,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6841,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6842,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6843,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6844,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6845,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6846,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6847,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6848,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6849,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6850,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile," # backwards compat
"
6851,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
6852,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
6853,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
6854,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6855,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6856,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
6857,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,"# explicitly set user/group IDs
"
6858,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
6859,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6860,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6861,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
6862,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
6863,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
6864,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6865,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6866,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6867,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
6868,a7a6cdf9d4c3e540447509327d1ba89053b07170,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6869,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
6870,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# explicitly set user/group IDs
"
6871,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
6872,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6873,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6874,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6875,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6876,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6877,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6878,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile," # backwards compat
"
6879,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
6880,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# explicitly set user/group IDs
"
6881,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
6882,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6883,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6884,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6885,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6886,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6887,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6888,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile," # backwards compat
"
6889,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
6890,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# explicitly set user/group IDs
"
6891,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
6892,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6893,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6894,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
6895,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6896,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
6897,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6898,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile," # backwards compat
"
6899,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
6900,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# explicitly set user/group IDs
"
6901,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
6902,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
6903,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
6904,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
6905,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
6906,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
6907,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
6908,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
6909,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# arches officialy built by upstream
"
6910,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
6911,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
6912,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
6913,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
6914,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
6915,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
6916,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
6917,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
6918,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
6919,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
6920,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6921,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
6922,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6923,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile," # backwards compat
"
6924,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6925,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6926,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6927,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#		krb5-dev \
"
6928,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#		openldap-dev \
"
6929,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# configure: error: prove not found
"
6930,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6931,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6932,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6933,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6934,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6935,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6936,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6937,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6938,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6939,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6940,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6941,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6942,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6943,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6944,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile," # backwards compat
"
6945,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6946,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
6947,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6948,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
6949,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
6950,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
6951,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6952,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6953,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6954,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6955,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6956,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6957,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6958,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6959,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6960,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6961,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6962,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6963,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6964,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6965,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile," # backwards compat
"
6966,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6967,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
6968,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6969,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
6970,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
6971,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
6972,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6973,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6974,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6975,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
6976,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6977,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6978,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
6979,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
6980,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
6981,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
6982,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
6983,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
6984,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
6985,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
6986,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile," # backwards compat
"
6987,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
6988,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
6989,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
6990,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#		krb5-dev \
"
6991,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#		openldap-dev \
"
6992,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# configure: error: prove not found
"
6993,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
6994,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
6995,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
6996,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
6997,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
6998,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
6999,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7000,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7001,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7002,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7003,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7004,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7005,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7006,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7007,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile," # backwards compat
"
7008,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
7009,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# explicitly set user/group IDs
"
7010,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
7011,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7012,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7013,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7014,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7015,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# arches officialy built by upstream
"
7016,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7017,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7018,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7019,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7020,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7021,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7022,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7023,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7024,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7025,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7026,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7027,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile," # backwards compat
"
7028,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
7029,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# explicitly set user/group IDs
"
7030,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7031,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7032,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
7033,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7034,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7035,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7036,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7037,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
7038,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# arches officialy built by upstream
"
7039,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7040,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7041,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7042,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7043,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7044,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7045,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7046,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7047,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7048,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7049,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7050,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7051,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7052,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile," # backwards compat
"
7053,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
7054,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7055,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
7056,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7057,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7058,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
7059,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
7060,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
7061,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7062,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7063,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7064,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
7065,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7066,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7067,54053ad27ac099abff3d4964bf7460fb9c541d5d,/Dockerfile-debian.template," # backwards compat
"
7068,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
7069,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# explicitly set user/group IDs
"
7070,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
7071,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7072,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7073,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7074,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7075,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7076,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7077,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile," # backwards compat
"
7078,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
7079,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# explicitly set user/group IDs
"
7080,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
7081,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7082,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7083,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# arches officialy built by upstream
"
7084,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7085,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7086,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7087,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7088,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7089,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7090,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7091,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7092,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7093,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7094,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7095,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile," # backwards compat
"
7096,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7097,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7098,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
7099,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
7100,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7101,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7102,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7103,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7104,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7105,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7106,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7107,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7108,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# vim:set ft=dockerfile:
"
7109,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# explicitly set user/group IDs
"
7110,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7111,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7112,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# grab gosu for easy step-down from root
"
7113,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7114,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7115,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7116,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7117,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
7118,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# arches officialy built by upstream
"
7119,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7120,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7121,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7122,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7123,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7124,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7125,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7126,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7127,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7128,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7129,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7130,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
7131,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7132,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile," # backwards compat
"
7133,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7134,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7135,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7136,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
7137,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
7138,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
7139,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7140,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7141,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7142,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7143,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7144,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7145,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7146,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7147,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7148,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7149,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7150,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7151,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7152,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7153,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile," # backwards compat
"
7154,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
7155,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
7156,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
7157,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7158,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7159,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7160,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# arches officialy built by upstream
"
7161,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7162,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7163,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7164,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7165,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7166,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7167,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7168,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7169,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
7170,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7171,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7172,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/Dockerfile-debian.template," # backwards compat
"
7173,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7174,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7175,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
7176,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
7177,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7178,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7179,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7180,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7181,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7182,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7183,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7184,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7185,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7186,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
7187,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7188,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#		krb5-dev \
"
7189,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#		openldap-dev \
"
7190,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# configure: error: prove not found
"
7191,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7192,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7193,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7194,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7195,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7196,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7197,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7198,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7199,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7200,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7201,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7202,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7203,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7204,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7205,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
7206,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# explicitly set user/group IDs
"
7207,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
7208,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7209,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7210,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7211,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7212,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7213,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7214,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# vim:set ft=dockerfile:
"
7215,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# explicitly set user/group IDs
"
7216,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7217,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7218,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
7219,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7220,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7221,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7222,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
7223,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7224,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# see note below about ""*.pyc"" files
"
7225,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# arches officialy built by upstream
"
7226,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7227,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7228,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7229,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417
"
7230,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7231,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7232,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7233,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7234,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7235,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7236,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7237,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7238,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
7239,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7240,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile," # backwards compat
"
7241,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
7242,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7243,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
7244,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7245,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7246,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
7247,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7248,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
7249,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7250,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7251,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
7252,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7253,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7254,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"#		krb5-dev \
"
7255,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"#		openldap-dev \
"
7256,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7257,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7258,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7259,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7260,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7261,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7262,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7263,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7264,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
7265,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7266,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7267,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/Dockerfile-alpine.template," # backwards compat
"
7268,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
7269,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# explicitly set user/group IDs
"
7270,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
7271,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7272,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7273,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7274,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7275,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7276,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
7277,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# explicitly set user/group IDs
"
7278,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
7279,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7280,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7281,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7282,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# arches officialy built by upstream
"
7283,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7284,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7285,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7286,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7287,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7288,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7289,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7290,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7291,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7292,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7293,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7294,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile," # backwards compat
"
7295,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7296,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7297,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7298,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
7299,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
7300,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
7301,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7302,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7303,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7304,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7305,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7306,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7307,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7308,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7309,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7310,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7311,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7312,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7313,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7314,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile," # backwards compat
"
7315,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7316,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7317,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
7318,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
7319,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7320,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7321,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7322,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7323,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7324,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7325,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7326,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7327,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7328,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7329,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
7330,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
7331,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7332,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7333,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7334,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7335,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7336,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7337,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7338,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7339,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
7340,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7341,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
7342,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7343,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7344,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
7345,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# explicitly set user/group IDs
"
7346,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7347,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7348,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
7349,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7350,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7351,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7352,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7353,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
7354,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# arches officialy built by upstream
"
7355,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7356,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7357,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7358,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7359,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7360,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7361,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7362,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7363,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7364,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7365,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7366,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
7367,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7368,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile," # backwards compat
"
7369,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7370,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7371,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7372,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
7373,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
7374,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
7375,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7376,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7377,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
7378,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7379,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7380,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7381,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7382,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7383,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7384,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7385,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7386,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7387,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7388,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7389,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7390,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile," # backwards compat
"
7391,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7392,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7393,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7394,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
7395,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
7396,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
7397,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7398,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7399,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7400,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7401,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7402,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7403,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7404,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7405,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7406,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7407,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7408,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7409,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7410,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7411,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile," # backwards compat
"
7412,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
7413,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# explicitly set user/group IDs
"
7414,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
7415,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7416,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7417,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7418,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7419,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# arches officialy built by upstream
"
7420,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7421,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7422,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7423,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7424,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7425,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7426,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7427,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7428,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7429,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7430,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7431,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile," # backwards compat
"
7432,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7433,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
7434,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7435,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#		krb5-dev \
"
7436,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#		openldap-dev \
"
7437,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# configure: error: prove not found
"
7438,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7439,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7440,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7441,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7442,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7443,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7444,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7445,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7446,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7447,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7448,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7449,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7450,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7451,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7452,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile," # backwards compat
"
7453,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
7454,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# explicitly set user/group IDs
"
7455,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
7456,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7457,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7458,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# arches officialy built by upstream
"
7459,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7460,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7461,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7462,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7463,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7464,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7465,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7466,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7467,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7468,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7469,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7470,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile," # backwards compat
"
7471,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
7472,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# explicitly set user/group IDs
"
7473,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7474,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7475,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
7476,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7477,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7478,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7479,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
7480,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7481,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
7482,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# arches officialy built by upstream
"
7483,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7484,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7485,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7486,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7487,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7488,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7489,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7490,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7491,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7492,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7493,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7494,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
7495,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7496,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile," # backwards compat
"
7497,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
7498,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# explicitly set user/group IDs
"
7499,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
7500,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7501,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7502,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# arches officialy built by upstream
"
7503,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7504,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7505,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7506,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7507,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7508,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7509,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7510,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7511,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7512,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7513,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7514,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile," # backwards compat
"
7515,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
7516,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7517,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7518,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"#		krb5-dev \
"
7519,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"#		openldap-dev \
"
7520,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7521,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7522,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7523,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7524,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7525,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7526,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7527,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7528,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7529,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
7530,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7531,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7532,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/Dockerfile-alpine.template," # backwards compat
"
7533,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7534,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7535,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7536,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#		krb5-dev \
"
7537,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#		openldap-dev \
"
7538,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# configure: error: prove not found
"
7539,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7540,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7541,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7542,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7543,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7544,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7545,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7546,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7547,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7548,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7549,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7550,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7551,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7552,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7553,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile," # backwards compat
"
7554,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# vim:set ft=dockerfile:
"
7555,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# explicitly set user/group IDs
"
7556,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7557,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7558,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# grab gosu for easy step-down from root
"
7559,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7560,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7561,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7562,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7563,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
7564,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# arches officialy built by upstream
"
7565,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7566,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7567,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7568,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7569,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7570,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7571,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7572,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7573,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7574,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7575,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7576,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
7577,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7578,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile," # backwards compat
"
7579,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# vim:set ft=dockerfile:
"
7580,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# explicitly set user/group IDs
"
7581,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7582,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7583,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# grab gosu for easy step-down from root
"
7584,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7585,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7586,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7587,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7588,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
7589,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# arches officialy built by upstream
"
7590,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7591,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7592,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7593,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7594,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7595,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7596,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7597,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7598,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7599,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7600,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7601,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
7602,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7603,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile," # backwards compat
"
7604,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
7605,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7606,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
7607,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7608,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7609,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
7610,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# explicitly set user/group IDs
"
7611,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
7612,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7613,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7614,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7615,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7616,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7617,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7618,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
7619,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# explicitly set user/group IDs
"
7620,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
7621,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7622,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7623,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7624,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7625,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7626,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
7627,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,"# explicitly set user/group IDs
"
7628,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
7629,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7630,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7631,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7632,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7633,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
7634,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
7635,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7636,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7637,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7638,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7639,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7640,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7641,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7642,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7643,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7644,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7645,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7646,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile," # backwards compat
"
7647,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# vim:set ft=dockerfile:
"
7648,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# explicitly set user/group IDs
"
7649,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7650,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7651,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# grab gosu for easy step-down from root
"
7652,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7653,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7654,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7655,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7656,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
7657,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# arches officialy built by upstream
"
7658,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7659,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7660,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7661,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7662,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7663,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7664,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7665,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7666,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7667,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7668,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7669,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
7670,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7671,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile," # backwards compat
"
7672,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7673,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7674,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7675,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
7676,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
7677,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
7678,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7679,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7680,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7681,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7682,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7683,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7684,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7685,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7686,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7687,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7688,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7689,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7690,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7691,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7692,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile," # backwards compat
"
7693,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
7694,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7695,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
7696,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7697,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7698,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7699,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7700,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7701,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
7702,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
7703,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
7704,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7705,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7706,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7707,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7708,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7709,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7710,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7711,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7712,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7713,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7714,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7715,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7716,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7717,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7718,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile," # backwards compat
"
7719,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7720,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7721,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7722,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
7723,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
7724,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
7725,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7726,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7727,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7728,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7729,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7730,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7731,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7732,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7733,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7734,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7735,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7736,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7737,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7738,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7739,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile," # backwards compat
"
7740,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
7741,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7742,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
7743,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7744,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7745,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
7746,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7747,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
7748,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7749,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7750,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7751,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7752,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
7753,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
7754,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7755,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7756,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7757,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7758,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7759,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
7760,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7761,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7762,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
7763,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# explicitly set user/group IDs
"
7764,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
7765,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
7766,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
7767,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7768,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
7769,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
7770,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
7771,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7772,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
7773,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# arches officialy built by upstream
"
7774,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7775,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
7776,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7777,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7778,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7779,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7780,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7781,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7782,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7783,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
7784,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7785,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
7786,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7787,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile," # backwards compat
"
7788,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
7789,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7790,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
7791,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7792,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7793,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7794,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7795,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7796,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
7797,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
7798,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
7799,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7800,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7801,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
7802,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7803,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7804,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7805,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7806,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7807,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7808,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7809,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7810,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7811,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7812,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7813,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7814,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7815,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile," # backwards compat
"
7816,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7817,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7818,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
7819,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
7820,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7821,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
7822,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7823,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7824,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7825,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7826,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7827,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7828,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7829,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7830,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7831,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7832,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile," # backwards compat
"
7833,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7834,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
7835,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7836,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#		krb5-dev \
"
7837,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#		openldap-dev \
"
7838,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# configure: error: prove not found
"
7839,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7840,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7841,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7842,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7843,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7844,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7845,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7846,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7847,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7848,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7849,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7850,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7851,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7852,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7853,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile," # backwards compat
"
7854,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
7855,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
7856,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
7857,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7858,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7859,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7860,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7861,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7862,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
7863,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
7864,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
7865,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7866,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7867,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7868,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7869,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7870,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7871,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7872,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7873,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7874,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7875,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7876,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7877,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7878,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7879,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile," # backwards compat
"
7880,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
7881,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# explicitly set user/group IDs
"
7882,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
7883,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7884,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7885,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7886,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7887,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7888,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7889,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
7890,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# explicitly set user/group IDs
"
7891,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
7892,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7893,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7894,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# arches officialy built by upstream
"
7895,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7896,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
7897,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
7898,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
7899,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
7900,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
7901,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
7902,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
7903,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7904,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7905,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7906,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile," # backwards compat
"
7907,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7908,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7909,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
7910,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
7911,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7912,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7913,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7914,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7915,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7916,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
7917,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7918,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7919,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7920,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
7921,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7922,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#		krb5-dev \
"
7923,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#		openldap-dev \
"
7924,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# configure: error: prove not found
"
7925,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7926,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7927,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7928,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7929,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7930,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7931,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7932,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7933,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7934,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7935,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7936,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7937,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7938,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7939,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile," # backwards compat
"
7940,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7941,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7942,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7943,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
7944,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
7945,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
7946,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7947,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7948,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7949,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7950,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7951,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7952,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7953,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7954,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7955,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7956,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7957,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7958,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7959,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7960,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile," # backwards compat
"
7961,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
7962,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# explicitly set user/group IDs
"
7963,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
7964,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7965,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7966,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
7967,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7968,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
7969,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7970,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile," # backwards compat
"
7971,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
7972,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
7973,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
7974,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
7975,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
7976,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
7977,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
7978,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
7979,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
7980,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
7981,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
7982,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
7983,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
7984,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
7985,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
7986,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
7987,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
7988,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
7989,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
7990,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
7991,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile," # backwards compat
"
7992,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
7993,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
7994,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
7995,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
7996,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
7997,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# arches officialy built by upstream
"
7998,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
7999,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8000,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8001,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8002,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8003,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8004,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8005,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8006,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
8007,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8008,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8009,f7dc5727b1d6b6a636350e11648845ae33477579,/Dockerfile-debian.template," # backwards compat
"
8010,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8011,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8012,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8013,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
8014,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
8015,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
8016,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8017,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8018,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8019,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8020,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8021,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8022,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8023,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8024,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8025,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8026,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8027,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8028,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8029,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile," # backwards compat
"
8030,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# vim:set ft=dockerfile:
"
8031,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# explicitly set user/group IDs
"
8032,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
8033,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
8034,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# grab gosu for easy step-down from root
"
8035,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8036,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8037,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8038,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
8039,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8040,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
8041,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# arches officialy built by upstream
"
8042,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8043,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
8044,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8045,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8046,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8047,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8048,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8049,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8050,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8051,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
8052,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8053,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
8054,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8055,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile," # backwards compat
"
8056,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8057,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8058,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8059,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
8060,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
8061,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
8062,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8063,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8064,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8065,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8066,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8067,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8068,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8069,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8070,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8071,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8072,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8073,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8074,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8075,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8076,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile," # backwards compat
"
8077,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
8078,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# explicitly set user/group IDs
"
8079,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
8080,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8081,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8082,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8083,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8084,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8085,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8086,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile," # backwards compat
"
8087,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
8088,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# explicitly set user/group IDs
"
8089,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
8090,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8091,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8092,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8093,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8094,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8095,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8096,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8097,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#		krb5-dev \
"
8098,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#		openldap-dev \
"
8099,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# configure: error: prove not found
"
8100,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8101,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8102,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8103,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8104,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8105,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8106,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8107,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8108,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8109,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8110,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8111,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8112,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8113,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8114,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile," # backwards compat
"
8115,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# vim:set ft=dockerfile:
"
8116,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# explicitly set user/group IDs
"
8117,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# grab gosu for easy step-down from root
"
8118,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8119,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8120,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8121,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8122,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# arches officialy built by upstream
"
8123,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8124,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8125,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8126,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8127,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8128,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8129,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8130,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8131,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8132,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8133,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8134,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile," # backwards compat
"
8135,77b5f005d45f4b0747f5a719f329499b6ad454dc,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
8136,77b5f005d45f4b0747f5a719f329499b6ad454dc,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8137,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
8138,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8139,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
8140,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
8141,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8142,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#		krb5-dev \
"
8143,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#		openldap-dev \
"
8144,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# configure: error: prove not found
"
8145,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8146,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8147,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8148,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8149,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8150,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8151,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8152,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8153,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8154,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
8155,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8156,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
8157,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8158,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8159,6d1f671dcd2c8d51484d19767a33c37110dd650f,/Dockerfile-alpine.template," # backwards compat
"
8160,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
8161,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
8162,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8163,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#		krb5-dev \
"
8164,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#		openldap-dev \
"
8165,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# configure: error: prove not found
"
8166,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8167,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8168,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8169,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8170,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8171,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8172,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8173,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8174,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8175,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
8176,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8177,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
8178,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8179,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8180,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/Dockerfile-alpine.template," # backwards compat
"
8181,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
8182,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8183,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8184,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8185,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8186,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
8187,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
8188,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
8189,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8190,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8191,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8192,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8193,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8194,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8195,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8196,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8197,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8198,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8199,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8200,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8201,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8202,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8203,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile," # backwards compat
"
8204,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
8205,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# explicitly set user/group IDs
"
8206,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
8207,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8208,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8209,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8210,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8211,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8212,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8213,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
8214,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# explicitly set user/group IDs
"
8215,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
8216,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8217,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8218,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8219,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8220,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8221,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8222,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8223,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
8224,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
8225,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8226,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8227,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8228,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8229,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8230,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8231,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8232,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8233,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
8234,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,"# explicitly set user/group IDs
"
8235,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
8236,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8237,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8238,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8239,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8240,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8241,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#		krb5-dev \
"
8242,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#		openldap-dev \
"
8243,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# configure: error: prove not found
"
8244,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8245,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8246,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8247,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8248,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8249,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8250,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8251,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8252,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8253,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8254,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8255,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8256,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8257,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8258,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile," # backwards compat
"
8259,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8260,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8261,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8262,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#		krb5-dev \
"
8263,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#		openldap-dev \
"
8264,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# configure: error: prove not found
"
8265,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8266,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8267,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8268,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8269,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8270,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8271,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8272,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8273,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8274,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8275,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8276,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8277,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8278,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8279,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile," # backwards compat
"
8280,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
8281,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# explicitly set user/group IDs
"
8282,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
8283,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8284,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8285,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# arches officialy built by upstream
"
8286,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8287,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8288,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8289,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8290,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8291,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8292,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8293,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8294,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8295,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8296,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8297,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile," # backwards compat
"
8298,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# vim:set ft=dockerfile:
"
8299,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# explicitly set user/group IDs
"
8300,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# grab gosu for easy step-down from root
"
8301,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8302,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8303,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8304,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8305,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# arches officialy built by upstream
"
8306,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8307,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8308,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8309,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8310,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8311,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8312,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8313,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8314,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8315,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8316,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8317,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile," # backwards compat
"
8318,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8319,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8320,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8321,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
8322,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
8323,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
8324,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8325,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8326,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8327,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8328,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8329,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8330,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8331,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8332,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8333,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8334,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8335,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8336,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8337,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8338,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile," # backwards compat
"
8339,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
8340,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# explicitly set user/group IDs
"
8341,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
8342,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8343,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8344,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8345,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8346,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8347,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8348,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile," # backwards compat
"
8349,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
8350,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# explicitly set user/group IDs
"
8351,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
8352,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8353,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8354,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8355,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8356,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8357,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8358,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile," # backwards compat
"
8359,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8360,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8361,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
8362,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
8363,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8364,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8365,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8366,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8367,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8368,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8369,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8370,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8371,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8372,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8373,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8374,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#		krb5-dev \
"
8375,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#		openldap-dev \
"
8376,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# configure: error: prove not found
"
8377,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8378,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8379,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8380,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8381,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8382,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8383,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8384,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8385,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8386,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8387,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8388,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8389,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8390,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8391,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile," # backwards compat
"
8392,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
8393,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
8394,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
8395,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8396,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8397,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8398,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# arches officialy built by upstream
"
8399,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8400,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8401,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8402,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8403,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8404,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8405,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8406,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8407,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
8408,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8409,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8410,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/Dockerfile-debian.template," # backwards compat
"
8411,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8412,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8413,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8414,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#		krb5-dev \
"
8415,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#		openldap-dev \
"
8416,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# configure: error: prove not found
"
8417,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8418,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8419,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8420,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8421,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8422,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8423,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8424,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8425,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8426,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8427,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8428,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8429,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8430,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8431,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile," # backwards compat
"
8432,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8433,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8434,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8435,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#		krb5-dev \
"
8436,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#		openldap-dev \
"
8437,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# configure: error: prove not found
"
8438,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8439,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8440,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8441,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8442,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8443,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8444,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8445,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8446,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8447,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8448,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8449,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8450,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8451,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8452,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile," # backwards compat
"
8453,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# vim:set ft=dockerfile:
"
8454,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# explicitly set user/group IDs
"
8455,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# grab gosu for easy step-down from root
"
8456,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8457,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8458,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# arches officialy built by upstream
"
8459,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8460,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8461,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8462,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8463,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8464,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8465,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8466,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8467,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8468,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8469,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8470,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile," # backwards compat
"
8471,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
8472,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# explicitly set user/group IDs
"
8473,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
8474,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8475,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8476,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8477,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8478,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8479,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8480,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8481,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#		krb5-dev \
"
8482,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#		openldap-dev \
"
8483,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# configure: error: prove not found
"
8484,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8485,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8486,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8487,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8488,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8489,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8490,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8491,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8492,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8493,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8494,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8495,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8496,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8497,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8498,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
8499,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# explicitly set user/group IDs
"
8500,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
8501,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
8502,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
8503,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8504,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8505,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8506,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8507,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
8508,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# arches officialy built by upstream
"
8509,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8510,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
8511,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8512,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8513,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8514,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8515,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8516,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8517,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8518,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
8519,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8520,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
8521,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8522,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile," # backwards compat
"
8523,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
8524,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
8525,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
8526,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8527,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8528,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
8529,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
8530,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
8531,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8532,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8533,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# vim:set ft=dockerfile:
"
8534,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# explicitly set user/group IDs
"
8535,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
8536,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
8537,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# grab gosu for easy step-down from root
"
8538,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8539,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8540,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8541,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8542,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# arches officialy built by upstream
"
8543,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8544,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8545,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8546,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8547,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8548,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8549,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8550,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8551,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8552,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8553,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8554,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile," # backwards compat
"
8555,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
8556,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# explicitly set user/group IDs
"
8557,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
8558,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8559,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8560,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8561,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8562,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8563,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8564,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8565,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
8566,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
8567,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
8568,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8569,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8570,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8571,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8572,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8573,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8574,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8575,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8576,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8577,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8578,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8579,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8580,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8581,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8582,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile," # backwards compat
"
8583,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,"# vim:set ft=dockerfile:
"
8584,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
8585,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,"# grab gosu for easy step-down from root
"
8586,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8587,80ebeda0a68be6a8b10ce0de1846a49228af0795,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8588,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
8589,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# explicitly set user/group IDs
"
8590,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
8591,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8592,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8593,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8594,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# arches officialy built by upstream
"
8595,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8596,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8597,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8598,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8599,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8600,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8601,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8602,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8603,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8604,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8605,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8606,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile," # backwards compat
"
8607,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8608,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
8609,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8610,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
8611,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
8612,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
8613,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8614,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8615,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8616,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8617,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8618,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8619,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8620,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8621,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8622,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8623,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8624,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8625,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8626,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8627,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile," # backwards compat
"
8628,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8629,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8630,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8631,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#		krb5-dev \
"
8632,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#		openldap-dev \
"
8633,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# configure: error: prove not found
"
8634,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8635,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8636,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8637,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8638,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8639,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8640,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8641,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8642,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8643,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8644,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8645,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8646,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8647,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8648,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile," # backwards compat
"
8649,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8650,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8651,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8652,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
8653,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
8654,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
8655,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8656,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8657,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8658,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8659,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8660,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8661,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8662,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8663,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8664,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8665,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8666,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8667,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8668,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8669,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile," # backwards compat
"
8670,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# vim:set ft=dockerfile:
"
8671,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# explicitly set user/group IDs
"
8672,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# grab gosu for easy step-down from root
"
8673,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8674,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8675,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8676,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8677,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# arches officialy built by upstream
"
8678,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8679,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8680,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8681,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8682,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8683,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8684,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8685,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8686,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8687,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8688,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8689,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile," # backwards compat
"
8690,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# vim:set ft=dockerfile:
"
8691,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# explicitly set user/group IDs
"
8692,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
8693,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
8694,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
8695,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8696,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8697,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8698,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
8699,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8700,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# see note below about ""*.pyc"" files
"
8701,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# arches officialy built by upstream
"
8702,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8703,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
8704,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8705,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8706,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8707,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8708,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8709,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8710,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8711,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
8712,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8713,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
8714,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8715,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile," # backwards compat
"
8716,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
8717,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# explicitly set user/group IDs
"
8718,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
8719,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
8720,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
8721,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8722,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8723,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8724,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8725,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
8726,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# arches officialy built by upstream
"
8727,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8728,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
8729,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8730,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8731,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8732,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8733,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8734,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8735,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8736,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
8737,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8738,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
8739,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8740,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile," # backwards compat
"
8741,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
8742,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
8743,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
8744,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8745,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8746,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
8747,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8748,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# arches officialy built by upstream
"
8749,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8750,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8751,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8752,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8753,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8754,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8755,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8756,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8757,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
8758,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8759,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8760,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/Dockerfile-debian.template," # backwards compat
"
8761,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
8762,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# explicitly set user/group IDs
"
8763,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
8764,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8765,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8766,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# arches officialy built by upstream
"
8767,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8768,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8769,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8770,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8771,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8772,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8773,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8774,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8775,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8776,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8777,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8778,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile," # backwards compat
"
8779,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8780,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8781,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8782,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#		krb5-dev \
"
8783,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#		openldap-dev \
"
8784,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# configure: error: prove not found
"
8785,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8786,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8787,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8788,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8789,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8790,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8791,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8792,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8793,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8794,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8795,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8796,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8797,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8798,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile," # backwards compat
"
8799,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8800,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8801,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
8802,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
8803,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8804,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8805,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8806,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8807,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8808,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
8809,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8810,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"#		krb5-dev \
"
8811,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"#		openldap-dev \
"
8812,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8813,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8814,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8815,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8816,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8817,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
8818,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
8819,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8820,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
8821,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
8822,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
8823,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8824,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8825,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8826,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
8827,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8828,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8829,d8abce4e82533aa2673da9ba9a5a8385589ed693,/Dockerfile-debian.template," # backwards compat
"
8830,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# vim:set ft=dockerfile:
"
8831,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# explicitly set user/group IDs
"
8832,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# grab gosu for easy step-down from root
"
8833,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8834,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
8835,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8836,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# arches officialy built by upstream
"
8837,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8838,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8839,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8840,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8841,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8842,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8843,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8844,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8845,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8846,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8847,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8848,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile," # backwards compat
"
8849,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
8850,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# explicitly set user/group IDs
"
8851,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
8852,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8853,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8854,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8855,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8856,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8857,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
8858,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8859,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#		krb5-dev \
"
8860,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#		openldap-dev \
"
8861,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# configure: error: prove not found
"
8862,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8863,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8864,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8865,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
8866,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8867,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8868,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8869,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8870,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8871,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
8872,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8873,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8874,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8875,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8876,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8877,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8878,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
8879,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
8880,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8881,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8882,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8883,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8884,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8885,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8886,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8887,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8888,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8889,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8890,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8891,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile," # backwards compat
"
8892,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
8893,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,"# explicitly set user/group IDs
"
8894,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
8895,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8896,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8897,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
8898,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
8899,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8900,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8901,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8902,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8903,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
8904,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
8905,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8906,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
8907,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8908,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8909,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8910,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8911,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8912,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8913,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8914,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8915,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8916,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8917,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8918,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8919,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile," # backwards compat
"
8920,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8921,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8922,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
8923,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
8924,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8925,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8926,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8927,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8928,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8929,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8930,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8931,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8932,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8933,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8934,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8935,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
8936,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
8937,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8938,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#		krb5-dev \
"
8939,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#		openldap-dev \
"
8940,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# configure: error: prove not found
"
8941,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
8942,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8943,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8944,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8945,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
8946,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8947,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8948,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8949,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8950,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
8951,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8952,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
8953,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
8954,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8955,6750eda25a2f0856b3997309ef393475f008d6a3,/Dockerfile-alpine.template," # backwards compat
"
8956,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
8957,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# explicitly set user/group IDs
"
8958,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
8959,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8960,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8961,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8962,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8963,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8964,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
8965,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
8966,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
8967,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8968,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
8969,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# vim:set ft=dockerfile:
"
8970,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# explicitly set user/group IDs
"
8971,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# grab gosu for easy step-down from root
"
8972,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
8973,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
8974,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# arches officialy built by upstream
"
8975,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
8976,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
8977,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
8978,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
8979,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
8980,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
8981,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
8982,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
8983,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
8984,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
8985,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
8986,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile," # backwards compat
"
8987,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
8988,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
8989,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
8990,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
8991,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
8992,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
8993,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
8994,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
8995,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
8996,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
8997,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
8998,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
8999,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9000,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9001,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9002,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
9003,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# explicitly set user/group IDs
"
9004,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
9005,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9006,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9007,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9008,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9009,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9010,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9011,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile," # backwards compat
"
9012,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
9013,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"# explicitly set user/group IDs
"
9014,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
9015,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9016,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9017,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9018,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9019,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9020,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9021,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9022,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
9023,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
9024,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
9025,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9026,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9027,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9028,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9029,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9030,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9031,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9032,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9033,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9034,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9035,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9036,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9037,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile," # backwards compat
"
9038,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9039,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
9040,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9041,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#		krb5-dev \
"
9042,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#		openldap-dev \
"
9043,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# configure: error: prove not found
"
9044,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9045,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9046,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9047,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9048,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9049,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9050,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9051,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9052,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9053,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9054,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9055,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9056,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9057,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9058,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile," # backwards compat
"
9059,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
9060,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# explicitly set user/group IDs
"
9061,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
9062,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9063,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9064,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9065,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# arches officialy built by upstream
"
9066,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9067,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9068,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9069,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9070,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9071,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9072,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9073,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9074,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9075,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9076,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9077,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile," # backwards compat
"
9078,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9079,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
9080,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9081,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
9082,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
9083,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
9084,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9085,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9086,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9087,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9088,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9089,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9090,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9091,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9092,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9093,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9094,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9095,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9096,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9097,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9098,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile," # backwards compat
"
9099,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
9100,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,"# explicitly set user/group IDs
"
9101,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
9102,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9103,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9104,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
9105,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9106,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"#		krb5-dev \
"
9107,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"#		openldap-dev \
"
9108,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9109,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9110,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9111,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9112,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9113,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9114,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
9115,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9116,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# vim:set ft=dockerfile:
"
9117,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# explicitly set user/group IDs
"
9118,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# grab gosu for easy step-down from root
"
9119,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9120,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9121,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# arches officialy built by upstream
"
9122,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9123,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9124,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9125,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9126,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9127,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9128,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9129,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9130,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9131,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9132,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9133,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile," # backwards compat
"
9134,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
9135,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
9136,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9137,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"#		krb5-dev \
"
9138,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"#		openldap-dev \
"
9139,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# configure: error: prove not found
"
9140,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9141,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9142,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9143,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9144,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9145,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9146,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9147,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9148,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9149,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
9150,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9151,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
9152,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9153,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9154,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/Dockerfile-alpine.template," # backwards compat
"
9155,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
9156,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# explicitly set user/group IDs
"
9157,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
9158,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
9159,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
9160,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9161,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9162,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9163,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
9164,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9165,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
9166,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# arches officialy built by upstream
"
9167,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9168,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
9169,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9170,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9171,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9172,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9173,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9174,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9175,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9176,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
9177,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9178,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
9179,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9180,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile," # backwards compat
"
9181,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9182,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9183,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
9184,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
9185,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9186,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
9187,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9188,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9189,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9190,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9191,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9192,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9193,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9194,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9195,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9196,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9197,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile," # backwards compat
"
9198,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9199,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9200,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
9201,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
9202,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9203,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9204,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9205,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9206,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9207,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9208,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9209,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9210,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9211,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9212,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9213,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
9214,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9215,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#		krb5-dev \
"
9216,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#		openldap-dev \
"
9217,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# configure: error: prove not found
"
9218,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9219,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9220,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9221,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
9222,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9223,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9224,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9225,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9226,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9227,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9228,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9229,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9230,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9231,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9232,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile," # backwards compat
"
9233,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9234,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9235,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9236,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
9237,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
9238,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
9239,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9240,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
9241,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9242,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9243,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9244,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9245,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9246,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9247,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9248,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9249,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9250,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9251,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9252,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9253,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile," # backwards compat
"
9254,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
9255,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
9256,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9257,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#		krb5-dev \
"
9258,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#		openldap-dev \
"
9259,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# configure: error: prove not found
"
9260,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9261,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9262,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9263,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9264,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9265,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9266,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9267,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9268,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9269,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
9270,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9271,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
9272,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9273,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9274,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/Dockerfile-alpine.template," # backwards compat
"
9275,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
9276,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# explicitly set user/group IDs
"
9277,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
9278,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
9279,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
9280,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9281,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9282,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9283,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9284,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
9285,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# arches officialy built by upstream
"
9286,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9287,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
9288,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9289,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9290,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9291,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9292,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9293,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9294,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9295,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
9296,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9297,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
9298,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9299,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile," # backwards compat
"
9300,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
9301,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# explicitly set user/group IDs
"
9302,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
9303,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9304,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9305,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# arches officialy built by upstream
"
9306,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9307,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9308,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9309,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9310,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9311,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9312,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9313,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9314,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9315,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9316,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9317,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile," # backwards compat
"
9318,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9319,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9320,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9321,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#		krb5-dev \
"
9322,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#		openldap-dev \
"
9323,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# configure: error: prove not found
"
9324,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9325,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9326,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9327,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9328,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9329,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9330,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9331,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9332,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9333,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9334,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9335,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9336,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9337,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9338,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile," # backwards compat
"
9339,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9340,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9341,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
9342,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
9343,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9344,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9345,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9346,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9347,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9348,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1
"
9349,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9350,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9351,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
9352,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# explicitly set user/group IDs
"
9353,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
9354,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9355,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9356,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9357,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9358,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9359,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9360,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile," # backwards compat
"
9361,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
9362,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# explicitly set user/group IDs
"
9363,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
9364,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
9365,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
9366,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9367,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9368,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9369,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9370,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
9371,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# arches officialy built by upstream
"
9372,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9373,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
9374,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9375,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9376,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9377,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9378,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9379,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9380,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9381,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
9382,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9383,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9384,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9385,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile," # backwards compat
"
9386,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9387,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9388,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
9389,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
9390,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9391,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9392,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9393,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9394,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9395,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9396,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9397,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9398,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9399,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9400,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9401,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile," # backwards compat
"
9402,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9403,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
9404,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9405,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#		krb5-dev \
"
9406,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#		openldap-dev \
"
9407,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# configure: error: prove not found
"
9408,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9409,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9410,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9411,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9412,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9413,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9414,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9415,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9416,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9417,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9418,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9419,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9420,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9421,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9422,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9423,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9424,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9425,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#		krb5-dev \
"
9426,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#		openldap-dev \
"
9427,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# configure: error: prove not found
"
9428,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9429,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9430,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9431,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9432,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9433,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9434,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9435,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9436,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9437,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9438,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9439,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9440,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9441,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9442,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile," # backwards compat
"
9443,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9444,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
9445,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9446,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#		krb5-dev \
"
9447,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#		openldap-dev \
"
9448,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# configure: error: prove not found
"
9449,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9450,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9451,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9452,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9453,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9454,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9455,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9456,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9457,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9458,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9459,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9460,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9461,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9462,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9463,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9464,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
9465,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9466,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
9467,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
9468,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
9469,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9470,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9471,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9472,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9473,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9474,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9475,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9476,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9477,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9478,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9479,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9480,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9481,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9482,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9483,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile," # backwards compat
"
9484,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
9485,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
9486,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
9487,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9488,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9489,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9490,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
9491,03a6cb67dfd3045996c024e5569d938b25bd41b6,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9492,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9493,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9494,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9495,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
9496,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
9497,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
9498,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9499,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9500,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
9501,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9502,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9503,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9504,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9505,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9506,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9507,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9508,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9509,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9510,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9511,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9512,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9513,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9514,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile," # backwards compat
"
9515,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,"# vim:set ft=dockerfile:
"
9516,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
9517,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,"# grab gosu for easy step-down from root
"
9518,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9519,574a975e1977357477a0e80d6c5b1d7425c84f9a,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9520,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# vim:set ft=dockerfile:
"
9521,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# explicitly set user/group IDs
"
9522,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# grab gosu for easy step-down from root
"
9523,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9524,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9525,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9526,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9527,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# arches officialy built by upstream
"
9528,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9529,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9530,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9531,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9532,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9533,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9534,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9535,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9536,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9537,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9538,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9539,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile," # backwards compat
"
9540,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9541,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9542,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9543,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#		krb5-dev \
"
9544,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#		openldap-dev \
"
9545,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# configure: error: prove not found
"
9546,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9547,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9548,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9549,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9550,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9551,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9552,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9553,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9554,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9555,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9556,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9557,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9558,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9559,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9560,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile," # backwards compat
"
9561,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
9562,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
9563,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
9564,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
9565,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
9566,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9567,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9568,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9569,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9570,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
9571,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# arches officialy built by upstream
"
9572,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9573,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
9574,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9575,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9576,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9577,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9578,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9579,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9580,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9581,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
9582,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
9583,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
9584,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9585,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/Dockerfile-debian.template," # backwards compat
"
9586,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# vim:set ft=dockerfile:
"
9587,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# explicitly set user/group IDs
"
9588,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# grab gosu for easy step-down from root
"
9589,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9590,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9591,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# arches officialy built by upstream
"
9592,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9593,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9594,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9595,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9596,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9597,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9598,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9599,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9600,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9601,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9602,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9603,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile," # backwards compat
"
9604,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
9605,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# explicitly set user/group IDs
"
9606,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
9607,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9608,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9609,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# arches officialy built by upstream
"
9610,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9611,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9612,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9613,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9614,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9615,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9616,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9617,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9618,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9619,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9620,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9621,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile," # backwards compat
"
9622,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9623,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
9624,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9625,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#		krb5-dev \
"
9626,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#		openldap-dev \
"
9627,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# configure: error: prove not found
"
9628,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9629,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9630,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9631,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9632,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9633,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9634,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9635,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9636,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9637,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9638,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9639,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9640,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9641,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9642,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile," # backwards compat
"
9643,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9644,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9645,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9646,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
9647,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
9648,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
9649,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9650,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9651,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9652,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9653,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9654,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9655,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9656,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9657,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9658,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9659,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9660,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9661,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9662,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9663,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile," # backwards compat
"
9664,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9665,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9666,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
9667,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
9668,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9669,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9670,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9671,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9672,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9673,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9674,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9675,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9676,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# vim:set ft=dockerfile:
"
9677,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# explicitly set user/group IDs
"
9678,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
9679,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
9680,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# grab gosu for easy step-down from root
"
9681,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9682,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9683,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9684,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9685,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
9686,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# arches officialy built by upstream
"
9687,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9688,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
9689,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9690,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9691,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9692,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9693,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9694,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9695,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9696,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
9697,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9698,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
9699,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9700,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile," # backwards compat
"
9701,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
9702,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# explicitly set user/group IDs
"
9703,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
9704,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9705,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9706,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9707,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9708,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9709,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
9710,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
9711,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
9712,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9713,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9714,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
9715,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
9716,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
9717,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9718,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9719,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9720,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9721,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
9722,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
9723,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9724,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9725,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9726,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9727,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9728,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9729,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9730,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9731,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
9732,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9733,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9734,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#		krb5-dev \
"
9735,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#		openldap-dev \
"
9736,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# configure: error: prove not found
"
9737,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9738,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9739,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9740,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9741,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9742,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9743,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9744,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9745,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9746,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
9747,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9748,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
9749,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9750,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9751,5992d8be755d8001474f737a44c73049c519cff3,/Dockerfile-alpine.template," # backwards compat
"
9752,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,"# vim:set ft=dockerfile:
"
9753,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
9754,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,"# grab gosu for easy step-down from root
"
9755,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9756,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9757,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
9758,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# explicitly set user/group IDs
"
9759,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
9760,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
9761,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
9762,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9763,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9764,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9765,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
9766,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9767,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
9768,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# arches officialy built by upstream
"
9769,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9770,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
9771,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9772,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9773,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9774,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9775,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9776,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9777,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9778,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
9779,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9780,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
9781,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9782,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile," # backwards compat
"
9783,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9784,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
9785,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9786,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#		krb5-dev \
"
9787,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#		openldap-dev \
"
9788,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# configure: error: prove not found
"
9789,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9790,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9791,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9792,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9793,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9794,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9795,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9796,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9797,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9798,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9799,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9800,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9801,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9802,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9803,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile," # backwards compat
"
9804,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9805,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
9806,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9807,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#		krb5-dev \
"
9808,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#		openldap-dev \
"
9809,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# configure: error: prove not found
"
9810,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9811,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9812,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9813,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
9814,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9815,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9816,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9817,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9818,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9819,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9820,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9821,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9822,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9823,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9824,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile," # backwards compat
"
9825,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
9826,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
9827,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
9828,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9829,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9830,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9831,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9832,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9833,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
9834,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
9835,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9836,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
9837,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9838,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9839,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9840,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9841,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9842,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9843,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9844,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9845,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9846,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9847,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile," # backwards compat
"
9848,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
9849,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
9850,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
9851,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9852,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9853,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/Dockerfile.template,"# vim:set ft=dockerfile:
"
9854,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/Dockerfile.template,"# explicitly set user/group IDs
"
9855,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/Dockerfile.template,"# grab gosu for easy step-down from root
"
9856,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9857,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9858,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/Dockerfile.template,"# make the sample config easier to munge (and ""correct by default"")
"
9859,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/Dockerfile.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9860,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# vim:set ft=dockerfile:
"
9861,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# explicitly set user/group IDs
"
9862,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
9863,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
9864,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# grab gosu for easy step-down from root
"
9865,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9866,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9867,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9868,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
9869,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9870,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
9871,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# arches officialy built by upstream
"
9872,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9873,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
9874,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9875,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9876,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9877,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9878,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9879,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9880,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9881,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
9882,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9883,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
9884,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9885,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile," # backwards compat
"
9886,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9887,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9888,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9889,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
9890,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
9891,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
9892,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9893,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9894,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9895,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9896,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9897,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9898,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9899,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9900,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9901,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9902,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9903,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9904,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9905,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile," # backwards compat
"
9906,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9907,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9908,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9909,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
9910,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
9911,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
9912,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9913,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9914,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9915,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9916,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9917,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9918,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9919,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9920,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9921,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9922,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9923,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9924,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9925,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9926,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile," # backwards compat
"
9927,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,"# vim:set ft=dockerfile:
"
9928,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
9929,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,"# grab gosu for easy step-down from root
"
9930,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9931,5036e92f87fa8f3d559996e50e91596127bcc2c1,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
9932,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
9933,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# explicitly set user/group IDs
"
9934,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
9935,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9936,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9937,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9938,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# arches officialy built by upstream
"
9939,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9940,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9941,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9942,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9943,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9944,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9945,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9946,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9947,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9948,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9949,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9950,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile," # backwards compat
"
9951,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
9952,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
9953,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
9954,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
9955,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
9956,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
9957,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
9958,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# arches officialy built by upstream
"
9959,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
9960,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
9961,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
9962,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
9963,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
9964,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
9965,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
9966,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
9967,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
9968,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
9969,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9970,2cab5040341f46331367f8766b4d249a5b7a9366,/Dockerfile-debian.template," # backwards compat
"
9971,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9972,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9973,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9974,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#		krb5-dev \
"
9975,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#		openldap-dev \
"
9976,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# configure: error: prove not found
"
9977,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9978,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9979,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
9980,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
9981,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
9982,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
9983,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
9984,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
9985,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
9986,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
9987,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
9988,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
9989,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
9990,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
9991,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
9992,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
9993,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
9994,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#		krb5-dev \
"
9995,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#		openldap-dev \
"
9996,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# configure: error: prove not found
"
9997,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
9998,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
9999,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10000,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10001,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10002,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10003,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10004,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10005,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10006,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10007,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10008,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10009,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10010,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10011,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile," # backwards compat
"
10012,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10013,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10014,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10015,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
10016,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
10017,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10018,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
10019,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10020,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10021,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10022,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10023,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10024,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10025,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10026,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10027,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10028,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10029,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10030,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10031,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile," # backwards compat
"
10032,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10033,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10034,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10035,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
10036,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
10037,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10038,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10039,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10040,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10041,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10042,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10043,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10044,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10045,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10046,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10047,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10048,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10049,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile," # backwards compat
"
10050,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
10051,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10052,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
10053,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10054,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10055,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
10056,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,"# explicitly set user/group IDs
"
10057,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
10058,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10059,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10060,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# vim:set ft=dockerfile:
"
10061,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# explicitly set user/group IDs
"
10062,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10063,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10064,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# grab gosu for easy step-down from root
"
10065,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10066,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10067,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10068,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10069,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
10070,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# arches officialy built by upstream
"
10071,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10072,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10073,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10074,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10075,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10076,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10077,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10078,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10079,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10080,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10081,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10082,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
10083,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10084,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile," # backwards compat
"
10085,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10086,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10087,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10088,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
10089,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
10090,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
10091,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10092,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10093,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10094,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10095,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10096,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10097,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10098,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10099,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10100,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10101,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10102,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10103,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10104,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10105,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile," # backwards compat
"
10106,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
10107,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# explicitly set user/group IDs
"
10108,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10109,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10110,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
10111,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10112,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10113,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10114,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10115,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
10116,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# arches officialy built by upstream
"
10117,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10118,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10119,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10120,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10121,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10122,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10123,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10124,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10125,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10126,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10127,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10128,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
10129,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10130,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile," # backwards compat
"
10131,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10132,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10133,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10134,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#		krb5-dev \
"
10135,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#		openldap-dev \
"
10136,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# configure: error: prove not found
"
10137,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10138,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10139,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10140,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10141,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10142,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10143,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10144,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10145,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10146,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10147,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10148,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10149,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10150,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10151,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile," # backwards compat
"
10152,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10153,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10154,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10155,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
10156,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
10157,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10158,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10159,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10160,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10161,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10162,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10163,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10164,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10165,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10166,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10167,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10168,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10169,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile," # backwards compat
"
10170,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10171,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10172,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10173,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
10174,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
10175,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10176,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10177,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10178,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10179,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10180,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10181,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10182,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10183,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10184,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10185,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10186,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile," # backwards compat
"
10187,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
10188,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10189,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"#		krb5-dev \
"
10190,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"#		openldap-dev \
"
10191,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10192,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10193,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10194,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10195,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10196,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10197,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
10198,106e9e56fea3ad34a8bf3e66d3a041d491788552,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10199,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
10200,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
10201,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10202,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#		krb5-dev \
"
10203,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#		openldap-dev \
"
10204,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# configure: error: prove not found
"
10205,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10206,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10207,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10208,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10209,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10210,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10211,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10212,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10213,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10214,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
10215,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10216,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
10217,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10218,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10219,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/Dockerfile-alpine.template," # backwards compat
"
10220,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# vim:set ft=dockerfile:
"
10221,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# explicitly set user/group IDs
"
10222,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# grab gosu for easy step-down from root
"
10223,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10224,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10225,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# arches officialy built by upstream
"
10226,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10227,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10228,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10229,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10230,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10231,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10232,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10233,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10234,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10235,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10236,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10237,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile," # backwards compat
"
10238,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
10239,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10240,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10241,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10242,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10243,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# vim:set ft=dockerfile:
"
10244,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# explicitly set user/group IDs
"
10245,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# grab gosu for easy step-down from root
"
10246,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10247,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10248,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10249,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10250,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10251,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10252,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile," # backwards compat
"
10253,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
10254,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# explicitly set user/group IDs
"
10255,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
10256,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10257,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10258,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# arches officialy built by upstream
"
10259,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10260,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10261,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10262,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10263,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10264,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10265,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10266,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10267,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10268,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10269,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10270,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile," # backwards compat
"
10271,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10272,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
10273,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10274,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
10275,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
10276,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
10277,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10278,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10279,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10280,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
10281,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10282,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10283,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10284,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10285,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10286,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10287,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10288,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10289,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10290,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10291,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile," # backwards compat
"
10292,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10293,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10294,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10295,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
10296,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
10297,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10298,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
10299,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10300,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10301,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10302,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10303,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10304,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10305,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10306,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10307,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10308,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10309,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile," # backwards compat
"
10310,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10311,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
10312,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10313,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#		krb5-dev \
"
10314,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#		openldap-dev \
"
10315,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# configure: error: prove not found
"
10316,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10317,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10318,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10319,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10320,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10321,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10322,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10323,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10324,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10325,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10326,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10327,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10328,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10329,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10330,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile," # backwards compat
"
10331,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
10332,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10333,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
10334,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10335,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10336,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
10337,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# explicitly set user/group IDs
"
10338,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
10339,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10340,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10341,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10342,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10343,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
10344,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# explicitly set user/group IDs
"
10345,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10346,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10347,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
10348,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10349,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10350,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10351,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10352,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
10353,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# arches officialy built by upstream
"
10354,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10355,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10356,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10357,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10358,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10359,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10360,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10361,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10362,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10363,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10364,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10365,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10366,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10367,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile," # backwards compat
"
10368,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
10369,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# explicitly set user/group IDs
"
10370,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
10371,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10372,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10373,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10374,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10375,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10376,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10377,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10378,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#		krb5-dev \
"
10379,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#		openldap-dev \
"
10380,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# configure: error: prove not found
"
10381,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10382,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10383,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10384,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10385,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10386,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10387,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10388,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10389,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10390,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10391,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10392,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10393,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10394,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10395,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile," # backwards compat
"
10396,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10397,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10398,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10399,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#		krb5-dev \
"
10400,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#		openldap-dev \
"
10401,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# configure: error: prove not found
"
10402,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10403,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10404,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10405,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10406,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10407,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10408,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10409,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10410,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10411,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10412,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10413,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10414,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10415,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile," # backwards compat
"
10416,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
10417,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10418,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
10419,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10420,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10421,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10422,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10423,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10424,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#		krb5-dev \
"
10425,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#		openldap-dev \
"
10426,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# configure: error: prove not found
"
10427,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10428,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10429,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10430,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10431,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10432,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10433,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10434,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10435,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10436,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10437,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10438,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10439,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10440,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10441,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile," # backwards compat
"
10442,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
10443,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# explicitly set user/group IDs
"
10444,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10445,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10446,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
10447,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10448,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10449,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10450,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10451,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
10452,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# arches officialy built by upstream
"
10453,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10454,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10455,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10456,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10457,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10458,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10459,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10460,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10461,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10462,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10463,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10464,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
10465,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10466,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile," # backwards compat
"
10467,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
10468,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,"# explicitly set user/group IDs
"
10469,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
10470,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10471,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10472,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
10473,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10474,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
10475,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10476,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10477,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
10478,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10479,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
10480,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10481,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10482,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
10483,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10484,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
10485,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10486,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10487,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
10488,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
10489,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
10490,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10491,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10492,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10493,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
10494,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10495,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10496,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-debian.template," # backwards compat
"
10497,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
10498,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10499,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
10500,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10501,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10502,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
10503,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# explicitly set user/group IDs
"
10504,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
10505,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10506,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10507,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# arches officialy built by upstream
"
10508,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10509,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10510,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10511,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10512,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10513,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10514,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10515,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10516,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10517,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10518,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10519,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile," # backwards compat
"
10520,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# vim:set ft=dockerfile:
"
10521,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# explicitly set user/group IDs
"
10522,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10523,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10524,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# grab gosu for easy step-down from root
"
10525,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10526,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10527,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10528,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10529,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
10530,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# arches officialy built by upstream
"
10531,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10532,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10533,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10534,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10535,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10536,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10537,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10538,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10539,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10540,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10541,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10542,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
10543,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10544,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile," # backwards compat
"
10545,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10546,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10547,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10548,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
10549,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
10550,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
10551,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10552,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10553,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10554,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10555,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10556,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10557,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10558,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10559,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10560,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10561,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10562,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10563,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10564,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10565,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile," # backwards compat
"
10566,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10567,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10568,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10569,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
10570,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
10571,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10572,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10573,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10574,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10575,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10576,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10577,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10578,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10579,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10580,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10581,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10582,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10583,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile," # backwards compat
"
10584,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
10585,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# explicitly set user/group IDs
"
10586,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
10587,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10588,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10589,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10590,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10591,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10592,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10593,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile," # backwards compat
"
10594,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
10595,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
10596,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10597,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10598,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
10599,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10600,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10601,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10602,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10603,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
10604,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# arches officialy built by upstream
"
10605,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10606,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10607,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10608,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10609,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10610,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10611,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10612,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10613,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10614,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10615,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
10616,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10617,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10618,d61fd19b699b2c380da08c3a95f7272137a182bb,/Dockerfile-debian.template," # backwards compat
"
10619,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10620,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10621,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10622,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
10623,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
10624,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10625,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10626,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10627,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10628,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10629,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10630,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10631,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10632,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10633,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10634,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10635,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10636,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile," # backwards compat
"
10637,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
10638,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# explicitly set user/group IDs
"
10639,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10640,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10641,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
10642,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10643,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10644,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10645,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10646,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
10647,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# arches officialy built by upstream
"
10648,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10649,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10650,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10651,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10652,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10653,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10654,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10655,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10656,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10657,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10658,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10659,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
10660,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10661,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile," # backwards compat
"
10662,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10663,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10664,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10665,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
10666,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
10667,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10668,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
10669,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10670,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10671,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10672,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10673,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10674,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10675,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10676,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10677,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10678,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10679,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10680,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10681,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile," # backwards compat
"
10682,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
10683,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# explicitly set user/group IDs
"
10684,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
10685,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10686,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10687,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10688,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10689,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
10690,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# explicitly set user/group IDs
"
10691,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10692,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10693,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
10694,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10695,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10696,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10697,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10698,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
10699,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# arches officialy built by upstream
"
10700,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10701,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10702,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10703,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10704,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10705,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10706,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10707,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10708,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10709,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10710,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10711,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
10712,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10713,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile," # backwards compat
"
10714,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
10715,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# explicitly set user/group IDs
"
10716,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
10717,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10718,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10719,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10720,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10721,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
10722,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
10723,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
10724,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10725,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10726,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# arches officialy built by upstream
"
10727,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10728,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10729,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10730,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10731,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10732,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10733,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10734,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10735,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
10736,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10737,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10738,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/Dockerfile-debian.template," # backwards compat
"
10739,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
10740,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10741,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
10742,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10743,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10744,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
10745,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# explicitly set user/group IDs
"
10746,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10747,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10748,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
10749,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10750,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10751,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10752,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10753,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# arches officialy built by upstream
"
10754,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10755,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10756,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10757,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10758,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10759,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10760,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10761,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10762,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10763,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10764,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10765,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile," # backwards compat
"
10766,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10767,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10768,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10769,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
10770,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
10771,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
10772,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10773,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10774,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
10775,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10776,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10777,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10778,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10779,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10780,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10781,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10782,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10783,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10784,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10785,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10786,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10787,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10788,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile," # backwards compat
"
10789,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
10790,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10791,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
10792,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10793,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10794,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
10795,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10796,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
10797,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10798,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10799,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10800,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10801,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10802,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
10803,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
10804,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10805,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10806,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10807,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10808,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10809,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10810,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10811,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10812,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10813,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10814,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10815,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10816,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile," # backwards compat
"
10817,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
10818,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# explicitly set user/group IDs
"
10819,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
10820,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10821,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10822,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10823,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10824,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10825,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10826,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10827,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10828,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
10829,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
10830,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10831,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10832,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10833,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10834,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10835,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10836,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10837,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10838,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10839,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10840,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10841,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile," # backwards compat
"
10842,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
10843,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# explicitly set user/group IDs
"
10844,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
10845,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10846,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10847,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10848,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# arches officialy built by upstream
"
10849,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10850,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10851,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10852,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10853,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10854,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10855,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10856,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10857,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10858,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10859,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10860,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile," # backwards compat
"
10861,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# vim:set ft=dockerfile:
"
10862,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# explicitly set user/group IDs
"
10863,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
10864,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
10865,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# grab gosu for easy step-down from root
"
10866,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10867,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
10868,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
10869,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10870,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
10871,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# arches officialy built by upstream
"
10872,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
10873,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
10874,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
10875,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
10876,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
10877,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
10878,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
10879,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
10880,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
10881,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
10882,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10883,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
10884,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10885,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile," # backwards compat
"
10886,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10887,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10888,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10889,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
10890,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
10891,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
10892,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10893,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10894,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10895,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10896,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10897,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10898,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10899,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10900,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10901,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10902,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10903,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10904,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10905,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10906,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile," # backwards compat
"
10907,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10908,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
10909,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10910,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
10911,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
10912,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
10913,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10914,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10915,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10916,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10917,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10918,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10919,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10920,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10921,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10922,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10923,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10924,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10925,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile," # backwards compat
"
10926,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10927,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
10928,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10929,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#		krb5-dev \
"
10930,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#		openldap-dev \
"
10931,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# configure: error: prove not found
"
10932,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10933,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10934,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10935,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10936,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10937,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10938,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10939,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10940,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10941,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10942,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10943,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10944,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10945,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10946,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile," # backwards compat
"
10947,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10948,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10949,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
10950,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
10951,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10952,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10953,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10954,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10955,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10956,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10957,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10958,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10959,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10960,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10961,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10962,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
10963,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# explicitly set user/group IDs
"
10964,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
10965,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10966,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
10967,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10968,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10969,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
10970,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10971,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
10972,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
10973,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
10974,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
10975,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
10976,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
10977,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
10978,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
10979,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#		krb5-dev \
"
10980,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#		openldap-dev \
"
10981,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# configure: error: prove not found
"
10982,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
10983,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
10984,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
10985,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
10986,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
10987,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
10988,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
10989,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
10990,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
10991,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
10992,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
10993,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
10994,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
10995,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
10996,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
10997,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
10998,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
10999,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11000,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11001,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# arches officialy built by upstream
"
11002,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11003,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11004,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11005,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11006,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11007,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11008,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11009,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11010,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
11011,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11012,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11013,3b022607bec233463a3d055731fb710837978747,/Dockerfile-debian.template," # backwards compat
"
11014,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
11015,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# explicitly set user/group IDs
"
11016,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
11017,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11018,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11019,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11020,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11021,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
11022,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# explicitly set user/group IDs
"
11023,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
11024,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11025,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11026,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11027,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11028,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11029,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11030,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile," # backwards compat
"
11031,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# vim:set ft=dockerfile:
"
11032,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# explicitly set user/group IDs
"
11033,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11034,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11035,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# grab gosu for easy step-down from root
"
11036,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11037,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11038,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11039,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
11040,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11041,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
11042,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# arches officialy built by upstream
"
11043,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11044,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11045,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11046,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11047,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11048,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11049,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11050,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11051,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11052,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11053,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11054,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11055,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11056,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile," # backwards compat
"
11057,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11058,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11059,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11060,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
11061,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
11062,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
11063,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11064,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
11065,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11066,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11067,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11068,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11069,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11070,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11071,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11072,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11073,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11074,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11075,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11076,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11077,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile," # backwards compat
"
11078,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
11079,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# explicitly set user/group IDs
"
11080,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
11081,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11082,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11083,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11084,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11085,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# arches officialy built by upstream
"
11086,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11087,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11088,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11089,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11090,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11091,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11092,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11093,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11094,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11095,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11096,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11097,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile," # backwards compat
"
11098,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
11099,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
11100,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
11101,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11102,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11103,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11104,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11105,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
11106,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
11107,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11108,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
11109,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11110,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11111,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11112,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11113,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11114,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11115,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11116,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11117,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11118,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11119,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile," # backwards compat
"
11120,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,"# vim:set ft=dockerfile:
"
11121,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
11122,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,"# grab gosu for easy step-down from root
"
11123,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11124,e5cd70b504ed958911d2ae495d0d39c26f82557f,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11125,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11126,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11127,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
11128,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
11129,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11130,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11131,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11132,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11133,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11134,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11135,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11136,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11137,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11138,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11139,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
11140,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11141,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11142,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#		krb5-dev \
"
11143,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#		openldap-dev \
"
11144,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# configure: error: prove not found
"
11145,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11146,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11147,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11148,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11149,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11150,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11151,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11152,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11153,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11154,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
11155,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11156,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
11157,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11158,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11159,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-alpine.template," # backwards compat
"
11160,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
11161,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# explicitly set user/group IDs
"
11162,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11163,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11164,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
11165,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11166,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11167,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11168,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11169,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
11170,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# arches officialy built by upstream
"
11171,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11172,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11173,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11174,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11175,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11176,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11177,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11178,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11179,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11180,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11181,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11182,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11183,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11184,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile," # backwards compat
"
11185,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
11186,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# explicitly set user/group IDs
"
11187,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
11188,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11189,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11190,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11191,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11192,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# arches officialy built by upstream
"
11193,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11194,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11195,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11196,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11197,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11198,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11199,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11200,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11201,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11202,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11203,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11204,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile," # backwards compat
"
11205,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
11206,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# explicitly set user/group IDs
"
11207,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
11208,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11209,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11210,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11211,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11212,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11213,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
11214,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11215,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#		krb5-dev \
"
11216,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#		openldap-dev \
"
11217,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# configure: error: prove not found
"
11218,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11219,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11220,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11221,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
11222,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11223,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11224,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11225,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11226,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11227,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11228,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11229,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11230,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11231,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11232,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile," # backwards compat
"
11233,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11234,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11235,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11236,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
11237,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
11238,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
11239,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11240,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11241,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11242,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11243,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11244,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11245,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11246,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11247,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11248,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11249,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11250,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11251,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11252,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11253,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile," # backwards compat
"
11254,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11255,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11256,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11257,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
11258,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
11259,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
11260,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11261,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11262,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11263,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11264,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11265,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11266,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11267,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11268,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11269,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11270,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11271,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11272,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11273,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile," # backwards compat
"
11274,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# vim:set ft=dockerfile:
"
11275,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# explicitly set user/group IDs
"
11276,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11277,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11278,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# grab gosu for easy step-down from root
"
11279,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11280,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11281,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11282,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11283,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
11284,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# arches officialy built by upstream
"
11285,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11286,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11287,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11288,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11289,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11290,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11291,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11292,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11293,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11294,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11295,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11296,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11297,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11298,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile," # backwards compat
"
11299,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11300,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11301,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11302,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#		krb5-dev \
"
11303,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#		openldap-dev \
"
11304,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# configure: error: prove not found
"
11305,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11306,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11307,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11308,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11309,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11310,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11311,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11312,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11313,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11314,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11315,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11316,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11317,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11318,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11319,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile," # backwards compat
"
11320,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11321,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
11322,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11323,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#		krb5-dev \
"
11324,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#		openldap-dev \
"
11325,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# configure: error: prove not found
"
11326,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11327,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11328,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11329,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11330,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11331,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11332,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11333,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11334,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11335,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11336,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11337,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11338,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11339,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11340,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# vim:set ft=dockerfile:
"
11341,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# explicitly set user/group IDs
"
11342,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# grab gosu for easy step-down from root
"
11343,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11344,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11345,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11346,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11347,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11348,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11349,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile," # backwards compat
"
11350,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11351,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11352,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
11353,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
11354,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11355,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11356,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11357,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11358,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11359,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11360,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11361,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11362,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11363,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11364,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
11365,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11366,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11367,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#		krb5-dev \
"
11368,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#		openldap-dev \
"
11369,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# configure: error: prove not found
"
11370,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11371,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11372,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11373,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11374,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11375,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11376,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11377,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11378,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11379,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
11380,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11381,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
11382,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11383,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11384,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-alpine.template," # backwards compat
"
11385,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11386,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11387,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11388,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#		krb5-dev \
"
11389,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#		openldap-dev \
"
11390,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# configure: error: prove not found
"
11391,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11392,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11393,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11394,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11395,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11396,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11397,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11398,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11399,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11400,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11401,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11402,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11403,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11404,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11405,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
11406,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
11407,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
11408,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11409,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11410,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11411,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11412,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11413,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
11414,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
11415,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
11416,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11417,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11418,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
11419,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11420,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11421,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11422,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11423,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11424,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11425,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11426,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11427,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11428,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11429,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11430,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11431,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11432,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile," # backwards compat
"
11433,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
11434,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# explicitly set user/group IDs
"
11435,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
11436,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11437,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11438,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11439,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11440,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11441,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11442,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
11443,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11444,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"#		krb5-dev \
"
11445,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"#		openldap-dev \
"
11446,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11447,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11448,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11449,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11450,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11451,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11452,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11453,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11454,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
11455,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11456,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11457,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
11458,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
11459,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
11460,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11461,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11462,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11463,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
11464,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11465,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
11466,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
11467,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
11468,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11469,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11470,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11471,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11472,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11473,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11474,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11475,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11476,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11477,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11478,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11479,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11480,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11481,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11482,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile," # backwards compat
"
11483,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# vim:set ft=dockerfile:
"
11484,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# explicitly set user/group IDs
"
11485,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11486,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11487,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# grab gosu for easy step-down from root
"
11488,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11489,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11490,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11491,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11492,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
11493,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# arches officialy built by upstream
"
11494,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11495,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11496,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11497,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11498,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11499,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11500,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11501,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11502,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11503,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11504,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11505,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11506,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11507,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile," # backwards compat
"
11508,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11509,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11510,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
11511,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
11512,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11513,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11514,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11515,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11516,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11517,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1
"
11518,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11519,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11520,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
11521,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# explicitly set user/group IDs
"
11522,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11523,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11524,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
11525,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11526,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11527,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11528,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
11529,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11530,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
11531,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# arches officialy built by upstream
"
11532,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11533,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11534,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11535,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11536,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11537,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11538,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11539,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11540,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11541,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11542,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11543,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11544,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11545,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile," # backwards compat
"
11546,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
11547,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# explicitly set user/group IDs
"
11548,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11549,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11550,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
11551,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11552,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11553,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11554,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11555,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
11556,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# arches officialy built by upstream
"
11557,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11558,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11559,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11560,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11561,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11562,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11563,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11564,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11565,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11566,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11567,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11568,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11569,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11570,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile," # backwards compat
"
11571,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
11572,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# explicitly set user/group IDs
"
11573,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
11574,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11575,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11576,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11577,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11578,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11579,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11580,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
11581,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
11582,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11583,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11584,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11585,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11586,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11587,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11588,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11589,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11590,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11591,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11592,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11593,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
11594,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
11595,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
11596,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11597,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11598,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11599,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11600,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11601,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11602,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11603,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11604,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11605,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11606,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11607,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11608,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11609,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11610,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile," # backwards compat
"
11611,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
11612,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# explicitly set user/group IDs
"
11613,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
11614,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11615,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11616,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11617,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11618,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11619,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11620,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile," # backwards compat
"
11621,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11622,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11623,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
11624,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
11625,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11626,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11627,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11628,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11629,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11630,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11631,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11632,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11633,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
11634,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
11635,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
11636,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11637,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11638,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
11639,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# explicitly set user/group IDs
"
11640,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11641,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11642,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
11643,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11644,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11645,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11646,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11647,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
11648,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# arches officialy built by upstream
"
11649,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11650,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11651,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11652,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11653,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11654,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11655,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11656,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11657,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11658,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11659,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11660,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11661,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11662,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile," # backwards compat
"
11663,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11664,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11665,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
11666,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
11667,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11668,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11669,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11670,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11671,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11672,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11673,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11674,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11675,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11676,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11677,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11678,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile," # backwards compat
"
11679,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11680,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
11681,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11682,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
11683,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
11684,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
11685,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11686,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11687,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11688,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11689,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11690,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11691,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11692,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11693,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11694,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11695,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11696,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11697,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11698,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11699,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile," # backwards compat
"
11700,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
11701,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
11702,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11703,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#		krb5-dev \
"
11704,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#		openldap-dev \
"
11705,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# configure: error: prove not found
"
11706,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11707,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11708,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11709,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
11710,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11711,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11712,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11713,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11714,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11715,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
11716,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11717,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
11718,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11719,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11720,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/Dockerfile-alpine.template," # backwards compat
"
11721,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
11722,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# explicitly set user/group IDs
"
11723,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
11724,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11725,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11726,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11727,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11728,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# arches officialy built by upstream
"
11729,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11730,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11731,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11732,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11733,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11734,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11735,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11736,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11737,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11738,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11739,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11740,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile," # backwards compat
"
11741,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# vim:set ft=dockerfile:
"
11742,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# explicitly set user/group IDs
"
11743,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11744,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11745,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
11746,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11747,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11748,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11749,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
11750,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11751,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
11752,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# arches officialy built by upstream
"
11753,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11754,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11755,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11756,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11757,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11758,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11759,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11760,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11761,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11762,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11763,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11764,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11765,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11766,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile," # backwards compat
"
11767,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
11768,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
11769,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11770,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11771,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
11772,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11773,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11774,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11775,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11776,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
11777,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# arches officialy built by upstream
"
11778,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11779,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11780,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11781,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11782,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11783,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11784,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11785,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11786,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11787,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11788,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
11789,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11790,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11791,064113e0e481a1d0542846b81858e457fde02c90,/Dockerfile-debian.template," # backwards compat
"
11792,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
11793,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
11794,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
11795,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
11796,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
11797,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
11798,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
11799,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
11800,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
11801,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
11802,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
11803,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
11804,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
11805,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
11806,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
11807,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
11808,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
11809,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11810,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
11811,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11812,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile," # backwards compat
"
11813,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
11814,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# explicitly set user/group IDs
"
11815,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11816,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11817,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
11818,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11819,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11820,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11821,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
11822,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11823,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
11824,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# arches officialy built by upstream
"
11825,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11826,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11827,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11828,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11829,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11830,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11831,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11832,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11833,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11834,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11835,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11836,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11837,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11838,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile," # backwards compat
"
11839,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# vim:set ft=dockerfile:
"
11840,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# explicitly set user/group IDs
"
11841,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11842,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11843,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# grab gosu for easy step-down from root
"
11844,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11845,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11846,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11847,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
11848,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11849,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
11850,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# arches officialy built by upstream
"
11851,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11852,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11853,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11854,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11855,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11856,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11857,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11858,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11859,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11860,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11861,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11862,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11863,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11864,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile," # backwards compat
"
11865,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# vim:set ft=dockerfile:
"
11866,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# explicitly set user/group IDs
"
11867,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# grab gosu for easy step-down from root
"
11868,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11869,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11870,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# arches officialy built by upstream
"
11871,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11872,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11873,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11874,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11875,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11876,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11877,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11878,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11879,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11880,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11881,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11882,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile," # backwards compat
"
11883,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
11884,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# explicitly set user/group IDs
"
11885,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11886,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11887,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
11888,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11889,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11890,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11891,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11892,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# arches officialy built by upstream
"
11893,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11894,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11895,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11896,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11897,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11898,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11899,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11900,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11901,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11902,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11903,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11904,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile," # backwards compat
"
11905,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# vim:set ft=dockerfile:
"
11906,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# explicitly set user/group IDs
"
11907,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11908,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11909,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# grab gosu for easy step-down from root
"
11910,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11911,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11912,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11913,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11914,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
11915,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# arches officialy built by upstream
"
11916,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11917,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11918,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11919,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11920,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11921,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11922,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11923,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11924,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11925,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11926,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11927,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11928,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11929,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile," # backwards compat
"
11930,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
11931,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
11932,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
11933,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11934,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
11935,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
11936,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# explicitly set user/group IDs
"
11937,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
11938,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11939,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11940,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11941,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11942,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# arches officialy built by upstream
"
11943,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11944,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11945,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11946,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11947,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11948,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11949,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11950,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11951,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11952,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
11953,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11954,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile," # backwards compat
"
11955,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# vim:set ft=dockerfile:
"
11956,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# explicitly set user/group IDs
"
11957,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11958,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11959,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# grab gosu for easy step-down from root
"
11960,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11961,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11962,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11963,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
11964,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11965,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
11966,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# arches officialy built by upstream
"
11967,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11968,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11969,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11970,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11971,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11972,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11973,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11974,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
11975,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
11976,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
11977,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
11978,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
11979,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
11980,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile," # backwards compat
"
11981,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# vim:set ft=dockerfile:
"
11982,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# explicitly set user/group IDs
"
11983,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
11984,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
11985,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# grab gosu for easy step-down from root
"
11986,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
11987,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
11988,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
11989,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
11990,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
11991,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# arches officialy built by upstream
"
11992,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
11993,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
11994,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
11995,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
11996,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
11997,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
11998,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
11999,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12000,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12001,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12002,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12003,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12004,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12005,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile," # backwards compat
"
12006,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
12007,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
12008,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
12009,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12010,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12011,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# arches officialy built by upstream
"
12012,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12013,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12014,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12015,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12016,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12017,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12018,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12019,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12020,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
12021,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12022,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12023,4566cb036dd021c42c252f7a41797d5d3907c0d2,/Dockerfile-debian.template," # backwards compat
"
12024,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12025,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12026,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12027,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
12028,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
12029,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
12030,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12031,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12032,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12033,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12034,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12035,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12036,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12037,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12038,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12039,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12040,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12041,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12042,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12043,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12044,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile," # backwards compat
"
12045,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# vim:set ft=dockerfile:
"
12046,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# explicitly set user/group IDs
"
12047,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# grab gosu for easy step-down from root
"
12048,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12049,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12050,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12051,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12052,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12053,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12054,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile," # backwards compat
"
12055,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
12056,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# explicitly set user/group IDs
"
12057,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
12058,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12059,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12060,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12061,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12062,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12063,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12064,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12065,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12066,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12067,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
12068,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
12069,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
12070,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12071,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12072,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12073,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12074,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12075,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12076,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12077,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12078,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12079,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12080,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12081,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12082,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12083,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12084,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile," # backwards compat
"
12085,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
12086,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
12087,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
12088,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12089,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12090,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12091,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12092,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
12093,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
12094,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12095,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12096,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12097,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12098,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12099,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12100,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12101,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12102,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#		krb5-dev \
"
12103,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#		openldap-dev \
"
12104,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# configure: error: prove not found
"
12105,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12106,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12107,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12108,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12109,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12110,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12111,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12112,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12113,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12114,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12115,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12116,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12117,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12118,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12119,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile," # backwards compat
"
12120,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12121,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12122,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12123,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
12124,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
12125,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
12126,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12127,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12128,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12129,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12130,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12131,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12132,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12133,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12134,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12135,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12136,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12137,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12138,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12139,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12140,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile," # backwards compat
"
12141,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
12142,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
12143,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
12144,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12145,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12146,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# arches officialy built by upstream
"
12147,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12148,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12149,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12150,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12151,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12152,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12153,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12154,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12155,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
12156,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12157,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12158,bef8f02d1fe2bb4547280ba609f19abd20230180,/Dockerfile-debian.template," # backwards compat
"
12159,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
12160,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12161,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12162,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#		krb5-dev \
"
12163,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#		openldap-dev \
"
12164,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# configure: error: prove not found
"
12165,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12166,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12167,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12168,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12169,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12170,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12171,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12172,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12173,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12174,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
12175,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12176,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
12177,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12178,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12179,4c4693ef1306a391785c7b73b2784d5634903467,/Dockerfile-alpine.template," # backwards compat
"
12180,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
12181,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,"# explicitly set user/group IDs
"
12182,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
12183,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12184,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12185,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# vim:set ft=dockerfile:
"
12186,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# explicitly set user/group IDs
"
12187,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# grab gosu for easy step-down from root
"
12188,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12189,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12190,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12191,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12192,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# arches officialy built by upstream
"
12193,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12194,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12195,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12196,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12197,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12198,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12199,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12200,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12201,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12202,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12203,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12204,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile," # backwards compat
"
12205,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
12206,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# explicitly set user/group IDs
"
12207,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
12208,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12209,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12210,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# arches officialy built by upstream
"
12211,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12212,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12213,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12214,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12215,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12216,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12217,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12218,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12219,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12220,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12221,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12222,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile," # backwards compat
"
12223,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12224,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12225,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
12226,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
12227,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12228,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12229,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12230,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12231,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12232,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12233,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12234,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12235,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12236,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12237,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12238,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12239,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12240,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
12241,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
12242,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12243,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12244,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12245,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12246,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12247,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12248,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12249,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12250,6abeb8590f35c5251b9f100a667024febaeee06b,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
12251,6abeb8590f35c5251b9f100a667024febaeee06b,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12252,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
12253,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# explicitly set user/group IDs
"
12254,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12255,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12256,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
12257,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12258,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12259,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12260,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12261,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
12262,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# arches officialy built by upstream
"
12263,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12264,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12265,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12266,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12267,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12268,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12269,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12270,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12271,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12272,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12273,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12274,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
12275,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12276,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile," # backwards compat
"
12277,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12278,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
12279,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12280,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#		krb5-dev \
"
12281,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#		openldap-dev \
"
12282,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# configure: error: prove not found
"
12283,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12284,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12285,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12286,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
12287,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12288,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12289,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12290,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12291,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12292,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12293,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12294,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12295,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12296,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12297,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12298,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12299,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
12300,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
12301,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12302,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12303,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12304,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12305,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12306,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12307,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12308,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12309,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12310,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12311,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12312,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile," # backwards compat
"
12313,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12314,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12315,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
12316,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
12317,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12318,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12319,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12320,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12321,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12322,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
12323,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12324,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12325,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
12326,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# explicitly set user/group IDs
"
12327,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
12328,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12329,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12330,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12331,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12332,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12333,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12334,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile," # backwards compat
"
12335,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
12336,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12337,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"#		krb5-dev \
"
12338,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"#		openldap-dev \
"
12339,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12340,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12341,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12342,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12343,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12344,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12345,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12346,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
12347,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
12348,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12349,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
12350,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12351,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12352,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12353,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12354,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12355,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12356,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12357,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12358,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12359,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12360,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile," # backwards compat
"
12361,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12362,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
12363,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12364,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#		krb5-dev \
"
12365,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#		openldap-dev \
"
12366,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# configure: error: prove not found
"
12367,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12368,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12369,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12370,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12371,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12372,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12373,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12374,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12375,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12376,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12377,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12378,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12379,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12380,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12381,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile," # backwards compat
"
12382,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12383,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12384,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12385,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#		krb5-dev \
"
12386,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#		openldap-dev \
"
12387,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# configure: error: prove not found
"
12388,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12389,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12390,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12391,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12392,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12393,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12394,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12395,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12396,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12397,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12398,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12399,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12400,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12401,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12402,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile," # backwards compat
"
12403,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12404,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12405,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12406,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
12407,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
12408,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
12409,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12410,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12411,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12412,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12413,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12414,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12415,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12416,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12417,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12418,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12419,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12420,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12421,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12422,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile," # backwards compat
"
12423,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12424,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12425,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12426,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
12427,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
12428,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
12429,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12430,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12431,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
12432,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12433,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12434,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12435,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12436,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12437,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12438,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12439,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12440,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12441,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12442,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12443,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12444,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12445,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile," # backwards compat
"
12446,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
12447,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,"# explicitly set user/group IDs
"
12448,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
12449,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12450,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12451,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
12452,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
12453,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12454,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12455,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
12456,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12457,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12458,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12459,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12460,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
12461,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# arches officialy built by upstream
"
12462,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12463,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12464,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12465,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12466,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12467,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12468,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12469,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12470,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12471,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12472,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
12473,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
12474,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12475,87b15b6c65ba985ac958e7b35ba787422113066e,/Dockerfile-debian.template," # backwards compat
"
12476,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12477,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12478,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12479,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#		krb5-dev \
"
12480,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#		openldap-dev \
"
12481,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# configure: error: prove not found
"
12482,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12483,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12484,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12485,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12486,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12487,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12488,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12489,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12490,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12491,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12492,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12493,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12494,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12495,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12496,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile," # backwards compat
"
12497,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12498,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
12499,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12500,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#		krb5-dev \
"
12501,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#		openldap-dev \
"
12502,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# configure: error: prove not found
"
12503,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12504,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12505,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12506,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
12507,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12508,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12509,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12510,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12511,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12512,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12513,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12514,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12515,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12516,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12517,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# vim:set ft=dockerfile:
"
12518,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# explicitly set user/group IDs
"
12519,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12520,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12521,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# grab gosu for easy step-down from root
"
12522,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12523,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12524,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12525,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12526,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
12527,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# arches officialy built by upstream
"
12528,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12529,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12530,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12531,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12532,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12533,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12534,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12535,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12536,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12537,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12538,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12539,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12540,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12541,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile," # backwards compat
"
12542,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,"# vim:set ft=dockerfile:
"
12543,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
12544,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,"# grab gosu for easy step-down from root
"
12545,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12546,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12547,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
12548,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# explicitly set user/group IDs
"
12549,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12550,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12551,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
12552,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12553,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12554,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12555,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12556,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
12557,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# arches officialy built by upstream
"
12558,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12559,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12560,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12561,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12562,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12563,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12564,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12565,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12566,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12567,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12568,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12569,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12570,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12571,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile," # backwards compat
"
12572,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12573,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12574,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12575,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
12576,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
12577,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
12578,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12579,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12580,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12581,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12582,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12583,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12584,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12585,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12586,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12587,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12588,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12589,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12590,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12591,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12592,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile," # backwards compat
"
12593,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# vim:set ft=dockerfile:
"
12594,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# explicitly set user/group IDs
"
12595,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12596,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12597,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# grab gosu for easy step-down from root
"
12598,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12599,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12600,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12601,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12602,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
12603,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# arches officialy built by upstream
"
12604,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12605,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12606,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12607,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12608,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12609,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12610,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12611,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12612,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12613,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12614,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12615,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
12616,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12617,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile," # backwards compat
"
12618,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12619,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12620,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
12621,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
12622,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12623,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12624,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12625,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12626,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12627,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12628,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12629,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12630,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12631,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12632,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12633,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile," # backwards compat
"
12634,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# vim:set ft=dockerfile:
"
12635,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# explicitly set user/group IDs
"
12636,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12637,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12638,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# grab gosu for easy step-down from root
"
12639,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12640,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12641,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12642,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12643,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
12644,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# arches officialy built by upstream
"
12645,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12646,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12647,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12648,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12649,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12650,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12651,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12652,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12653,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12654,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12655,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12656,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
12657,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12658,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile," # backwards compat
"
12659,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12660,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12661,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12662,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
12663,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
12664,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
12665,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12666,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12667,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12668,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12669,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12670,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12671,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12672,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12673,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12674,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12675,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12676,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12677,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12678,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile," # backwards compat
"
12679,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
12680,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# explicitly set user/group IDs
"
12681,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
12682,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12683,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12684,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12685,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12686,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
12687,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,"# explicitly set user/group IDs
"
12688,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
12689,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12690,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12691,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12692,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12693,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12694,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
12695,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
12696,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
12697,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12698,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12699,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12700,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12701,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12702,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12703,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12704,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12705,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12706,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12707,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12708,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12709,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12710,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12711,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile," # backwards compat
"
12712,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12713,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12714,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
12715,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
12716,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12717,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12718,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12719,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12720,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12721,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12722,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12723,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12724,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12725,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12726,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12727,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12728,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12729,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12730,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#		krb5-dev \
"
12731,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#		openldap-dev \
"
12732,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# configure: error: prove not found
"
12733,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12734,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12735,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12736,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12737,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12738,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12739,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12740,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12741,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12742,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12743,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12744,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12745,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12746,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12747,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile," # backwards compat
"
12748,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# vim:set ft=dockerfile:
"
12749,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# explicitly set user/group IDs
"
12750,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12751,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12752,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# grab gosu for easy step-down from root
"
12753,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12754,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12755,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12756,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
12757,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12758,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
12759,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# arches officialy built by upstream
"
12760,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12761,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12762,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12763,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12764,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12765,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12766,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12767,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12768,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12769,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12770,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12771,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
12772,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12773,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile," # backwards compat
"
12774,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
12775,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# explicitly set user/group IDs
"
12776,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
12777,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12778,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12779,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12780,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12781,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12782,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12783,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile," # backwards compat
"
12784,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12785,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12786,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
12787,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
12788,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12789,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12790,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12791,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12792,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12793,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12794,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12795,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12796,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
12797,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
12798,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
12799,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12800,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12801,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# vim:set ft=dockerfile:
"
12802,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# explicitly set user/group IDs
"
12803,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12804,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12805,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# grab gosu for easy step-down from root
"
12806,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12807,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12808,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12809,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12810,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
12811,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# arches officialy built by upstream
"
12812,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12813,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12814,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12815,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12816,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12817,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12818,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12819,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12820,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12821,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12822,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12823,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12824,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12825,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile," # backwards compat
"
12826,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12827,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12828,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12829,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#		krb5-dev \
"
12830,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#		openldap-dev \
"
12831,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# configure: error: prove not found
"
12832,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12833,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12834,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12835,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12836,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12837,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12838,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12839,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12840,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12841,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12842,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12843,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12844,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12845,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12846,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile," # backwards compat
"
12847,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# vim:set ft=dockerfile:
"
12848,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# explicitly set user/group IDs
"
12849,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# grab gosu for easy step-down from root
"
12850,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12851,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12852,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12853,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12854,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# arches officialy built by upstream
"
12855,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12856,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12857,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12858,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12859,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12860,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12861,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12862,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12863,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12864,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12865,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12866,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile," # backwards compat
"
12867,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12868,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12869,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12870,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#		krb5-dev \
"
12871,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#		openldap-dev \
"
12872,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# configure: error: prove not found
"
12873,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12874,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12875,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12876,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12877,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12878,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12879,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12880,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12881,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12882,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12883,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12884,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12885,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12886,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12887,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile," # backwards compat
"
12888,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
12889,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12890,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12891,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"#		krb5-dev \
"
12892,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"#		openldap-dev \
"
12893,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# configure: error: prove not found
"
12894,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12895,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12896,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12897,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12898,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12899,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12900,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12901,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12902,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12903,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12904,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
12905,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12906,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12907,f3146f857b42bd4c4cb2be6134149fddee546584,/Dockerfile-alpine.template," # backwards compat
"
12908,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12909,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12910,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12911,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#		krb5-dev \
"
12912,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#		openldap-dev \
"
12913,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# configure: error: prove not found
"
12914,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12915,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12916,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12917,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12918,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
12919,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12920,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12921,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12922,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12923,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
12924,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12925,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12926,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12927,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12928,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile," # backwards compat
"
12929,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
12930,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
12931,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
12932,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12933,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12934,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12935,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12936,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
12937,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
12938,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12939,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
12940,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
12941,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
12942,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
12943,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
12944,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12945,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
12946,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
12947,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# explicitly set user/group IDs
"
12948,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
12949,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
12950,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
12951,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12952,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
12953,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
12954,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12955,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
12956,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# arches officialy built by upstream
"
12957,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
12958,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
12959,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
12960,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
12961,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
12962,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
12963,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
12964,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
12965,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
12966,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
12967,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12968,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
12969,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12970,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile," # backwards compat
"
12971,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
12972,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
12973,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
12974,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12975,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12976,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12977,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
12978,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12979,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
12980,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-debian.template," # backwards compat
"
12981,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
12982,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# explicitly set user/group IDs
"
12983,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
12984,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
12985,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
12986,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
12987,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
12988,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
12989,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
12990,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
12991,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
12992,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
12993,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
12994,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
12995,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
12996,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
12997,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
12998,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
12999,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13000,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13001,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13002,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13003,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13004,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13005,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13006,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13007,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13008,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13009,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile," # backwards compat
"
13010,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13011,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13012,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
13013,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
13014,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13015,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13016,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13017,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13018,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13019,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13020,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13021,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13022,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
13023,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13024,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13025,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#		krb5-dev \
"
13026,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#		openldap-dev \
"
13027,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# configure: error: prove not found
"
13028,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13029,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13030,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13031,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13032,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13033,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13034,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13035,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13036,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13037,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
13038,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13039,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
13040,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13041,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13042,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-alpine.template," # backwards compat
"
13043,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
13044,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
13045,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13046,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13047,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
13048,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13049,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13050,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13051,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
13052,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13053,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
13054,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# arches officialy built by upstream
"
13055,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13056,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13057,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13058,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13059,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13060,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13061,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13062,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13063,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13064,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13065,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
13066,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
13067,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13068,4dc16e44d16480d9c8e5eb705c15468d65366e43,/Dockerfile-debian.template," # backwards compat
"
13069,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
13070,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,"# explicitly set user/group IDs
"
13071,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
13072,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13073,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13074,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
13075,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# explicitly set user/group IDs
"
13076,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
13077,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13078,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13079,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13080,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13081,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
13082,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13083,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
13084,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13085,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13086,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
13087,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# explicitly set user/group IDs
"
13088,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13089,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13090,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
13091,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13092,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13093,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13094,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13095,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
13096,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# arches officialy built by upstream
"
13097,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13098,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13099,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13100,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13101,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13102,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13103,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13104,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13105,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13106,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13107,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13108,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
13109,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13110,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile," # backwards compat
"
13111,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
13112,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# explicitly set user/group IDs
"
13113,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13114,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13115,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
13116,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13117,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13118,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13119,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13120,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# see note below about ""*.pyc"" files
"
13121,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# arches officialy built by upstream
"
13122,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13123,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13124,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13125,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13126,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13127,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13128,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13129,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13130,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13131,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13132,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13133,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
13134,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13135,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile," # backwards compat
"
13136,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13137,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
13138,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13139,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
13140,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
13141,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
13142,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13143,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13144,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13145,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
13146,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13147,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13148,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13149,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13150,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13151,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13152,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13153,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13154,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13155,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13156,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile," # backwards compat
"
13157,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# vim:set ft=dockerfile:
"
13158,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# explicitly set user/group IDs
"
13159,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13160,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13161,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# grab gosu for easy step-down from root
"
13162,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13163,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13164,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13165,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13166,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
13167,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# arches officialy built by upstream
"
13168,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13169,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13170,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13171,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13172,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13173,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13174,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13175,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13176,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13177,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13178,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13179,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13180,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13181,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile," # backwards compat
"
13182,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13183,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13184,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
13185,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
13186,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13187,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13188,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13189,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13190,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13191,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13192,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13193,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13194,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# vim:set ft=dockerfile:
"
13195,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# explicitly set user/group IDs
"
13196,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13197,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13198,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# grab gosu for easy step-down from root
"
13199,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13200,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13201,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13202,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13203,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
13204,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# arches officialy built by upstream
"
13205,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13206,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13207,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13208,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13209,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13210,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13211,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13212,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13213,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13214,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13215,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13216,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13217,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13218,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile," # backwards compat
"
13219,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
13220,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,"# explicitly set user/group IDs
"
13221,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
13222,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13223,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13224,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
13225,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"# explicitly set user/group IDs
"
13226,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
13227,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13228,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13229,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13230,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13231,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
13232,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# explicitly set user/group IDs
"
13233,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
13234,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13235,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13236,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13237,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13238,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# arches officialy built by upstream
"
13239,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13240,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13241,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13242,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13243,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13244,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13245,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13246,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13247,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13248,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13249,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13250,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile," # backwards compat
"
13251,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13252,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
13253,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13254,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#		krb5-dev \
"
13255,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#		openldap-dev \
"
13256,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# configure: error: prove not found
"
13257,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13258,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13259,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13260,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13261,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13262,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13263,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13264,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13265,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13266,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13267,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13268,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13269,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13270,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13271,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile," # backwards compat
"
13272,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
13273,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13274,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
13275,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13276,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13277,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
13278,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13279,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
13280,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13281,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13282,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13283,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13284,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13285,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
13286,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
13287,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
13288,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13289,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13290,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
13291,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13292,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13293,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13294,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13295,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13296,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13297,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13298,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13299,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13300,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13301,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13302,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13303,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile," # backwards compat
"
13304,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13305,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# explicitly set user/group IDs
#RUN adduser -S -G postgres -u 999 postgres

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13306,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13307,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
13308,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# explicitly set user/group IDs
"
13309,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13310,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13311,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
13312,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13313,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13314,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13315,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13316,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
13317,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# arches officialy built by upstream
"
13318,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13319,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13320,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13321,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13322,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13323,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13324,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13325,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13326,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13327,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13328,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13329,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
13330,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13331,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile," # backwards compat
"
13332,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
13333,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# explicitly set user/group IDs
"
13334,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
13335,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13336,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13337,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# arches officialy built by upstream
"
13338,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13339,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13340,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13341,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13342,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13343,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13344,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13345,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13346,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13347,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13348,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13349,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile," # backwards compat
"
13350,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# vim:set ft=dockerfile:
"
13351,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# explicitly set user/group IDs
"
13352,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# grab gosu for easy step-down from root
"
13353,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13354,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13355,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13356,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13357,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13358,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13359,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile," # backwards compat
"
13360,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13361,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13362,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13363,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#		krb5-dev \
"
13364,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#		openldap-dev \
"
13365,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# configure: error: prove not found
"
13366,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13367,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13368,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13369,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13370,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13371,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13372,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13373,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13374,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13375,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13376,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13377,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13378,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13379,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13380,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile," # backwards compat
"
13381,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13382,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13383,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13384,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#		krb5-dev \
"
13385,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#		openldap-dev \
"
13386,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# configure: error: prove not found
"
13387,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13388,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13389,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13390,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13391,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13392,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13393,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13394,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13395,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13396,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13397,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13398,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13399,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13400,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13401,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13402,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13403,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
13404,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
13405,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13406,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13407,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13408,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13409,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13410,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
13411,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13412,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13413,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
13414,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# explicitly set user/group IDs
"
13415,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
13416,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13417,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13418,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# arches officialy built by upstream
"
13419,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13420,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13421,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13422,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13423,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13424,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13425,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13426,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13427,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13428,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13429,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13430,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile," # backwards compat
"
13431,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13432,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13433,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13434,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
13435,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
13436,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
13437,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13438,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13439,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13440,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13441,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13442,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13443,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13444,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13445,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13446,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13447,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13448,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13449,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13450,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13451,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile," # backwards compat
"
13452,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13453,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13454,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13455,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
13456,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
13457,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
13458,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13459,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13460,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13461,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13462,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13463,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13464,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13465,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13466,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13467,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13468,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13469,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13470,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13471,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13472,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile," # backwards compat
"
13473,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
13474,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# explicitly set user/group IDs
"
13475,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
13476,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13477,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13478,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13479,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# arches officialy built by upstream
"
13480,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13481,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13482,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13483,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13484,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13485,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13486,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13487,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13488,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13489,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13490,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13491,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile," # backwards compat
"
13492,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
13493,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
13494,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13495,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#		krb5-dev \
"
13496,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#		openldap-dev \
"
13497,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# configure: error: prove not found
"
13498,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13499,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13500,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13501,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13502,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13503,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13504,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13505,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13506,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13507,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
13508,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13509,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
13510,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13511,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13512,52814abac491eca146620f921a44e2cb4217088e,/Dockerfile-alpine.template," # backwards compat
"
13513,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
13514,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
13515,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13516,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13517,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
13518,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13519,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13520,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13521,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13522,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
13523,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# arches officialy built by upstream
"
13524,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13525,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13526,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13527,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13528,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13529,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13530,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13531,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13532,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13533,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13534,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
13535,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
13536,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13537,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/Dockerfile-debian.template," # backwards compat
"
13538,6fabe2e39c165dd1e2e32f8b758f2c02ded20d8f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13539,6fabe2e39c165dd1e2e32f8b758f2c02ded20d8f,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13540,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# vim:set ft=dockerfile:
"
13541,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# explicitly set user/group IDs
"
13542,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13543,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13544,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# grab gosu for easy step-down from root
"
13545,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13546,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13547,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13548,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13549,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# arches officialy built by upstream
"
13550,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13551,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13552,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13553,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13554,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13555,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13556,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13557,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13558,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13559,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13560,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13561,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile," # backwards compat
"
13562,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
13563,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# explicitly set user/group IDs
"
13564,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13565,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13566,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
13567,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13568,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13569,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13570,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13571,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
13572,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# arches officialy built by upstream
"
13573,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13574,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13575,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13576,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13577,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13578,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13579,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13580,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13581,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13582,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13583,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13584,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13585,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13586,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile," # backwards compat
"
13587,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13588,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13589,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
13590,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
13591,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13592,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13593,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13594,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13595,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13596,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13597,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13598,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13599,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13600,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13601,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13602,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile," # backwards compat
"
13603,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
13604,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
13605,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
13606,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13607,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13608,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13609,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
13610,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13611,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13612,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13613,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13614,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
13615,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
13616,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13617,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13618,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13619,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13620,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13621,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13622,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13623,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13624,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13625,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13626,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13627,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13628,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13629,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13630,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
13631,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
13632,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
13633,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13634,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13635,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13636,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13637,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13638,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13639,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13640,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13641,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13642,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13643,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13644,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13645,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13646,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile," # backwards compat
"
13647,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
13648,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13649,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"#		krb5-dev \
"
13650,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"#		openldap-dev \
"
13651,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13652,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13653,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13654,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13655,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13656,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13657,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13658,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13659,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
13660,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13661,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13662,123aedc09bc067740fb28921c500ded83c018bd4,/Dockerfile-alpine.template," # backwards compat
"
13663,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,"# vim:set ft=dockerfile:
"
13664,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13665,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,"# grab gosu for easy step-down from root
"
13666,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13667,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13668,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13669,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
13670,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13671,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
13672,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
13673,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
13674,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13675,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13676,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13677,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13678,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13679,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13680,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13681,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13682,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13683,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13684,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13685,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13686,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13687,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13688,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile," # backwards compat
"
13689,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
13690,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,"# explicitly set user/group IDs
"
13691,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
13692,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13693,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13694,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
13695,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,"# explicitly set user/group IDs
"
13696,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
13697,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13698,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13699,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13700,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13701,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
13702,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
13703,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13704,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13705,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13706,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13707,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13708,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13709,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13710,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13711,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13712,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13713,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13714,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile," # backwards compat
"
13715,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13716,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13717,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13718,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
13719,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
13720,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
13721,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13722,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13723,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
13724,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13725,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13726,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13727,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13728,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13729,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13730,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13731,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13732,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13733,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13734,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13735,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13736,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile," # backwards compat
"
13737,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
13738,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13739,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
13740,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13741,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13742,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# vim:set ft=dockerfile:
"
13743,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# explicitly set user/group IDs
"
13744,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# grab gosu for easy step-down from root
"
13745,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13746,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13747,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# arches officialy built by upstream
"
13748,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13749,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13750,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13751,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13752,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13753,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13754,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13755,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13756,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13757,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13758,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13759,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile," # backwards compat
"
13760,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
13761,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# explicitly set user/group IDs
"
13762,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
13763,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13764,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13765,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13766,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# arches officialy built by upstream
"
13767,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13768,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13769,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13770,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13771,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13772,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13773,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13774,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13775,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13776,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13777,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13778,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile," # backwards compat
"
13779,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# vim:set ft=dockerfile:
"
13780,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# explicitly set user/group IDs
"
13781,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13782,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13783,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# grab gosu for easy step-down from root
"
13784,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13785,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13786,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13787,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
13788,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13789,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
13790,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# arches officialy built by upstream
"
13791,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13792,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13793,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13794,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13795,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13796,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13797,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13798,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13799,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13800,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13801,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13802,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
13803,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13804,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile," # backwards compat
"
13805,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# vim:set ft=dockerfile:
"
13806,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# explicitly set user/group IDs
"
13807,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# grab gosu for easy step-down from root
"
13808,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13809,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13810,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13811,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13812,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# arches officialy built by upstream
"
13813,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13814,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13815,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13816,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13817,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13818,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13819,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13820,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13821,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13822,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13823,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13824,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile," # backwards compat
"
13825,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
13826,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# explicitly set user/group IDs
"
13827,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
13828,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13829,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13830,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13831,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13832,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
13833,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13834,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile," # backwards compat
"
13835,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13836,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13837,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
13838,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
13839,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13840,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13841,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13842,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13843,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13844,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
13845,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13846,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
13847,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13848,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13849,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
13850,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13851,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
13852,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13853,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13854,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
13855,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# explicitly set user/group IDs
"
13856,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
13857,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
13858,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
13859,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
13860,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
13861,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
13862,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
13863,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
13864,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# arches officialy built by upstream
"
13865,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
13866,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
13867,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
13868,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
13869,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
13870,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
13871,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
13872,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
13873,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
13874,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
13875,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13876,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
13877,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13878,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile," # backwards compat
"
13879,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
13880,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13881,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13882,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13883,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13884,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13885,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
13886,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
13887,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
13888,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13889,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13890,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13891,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13892,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13893,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13894,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13895,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13896,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13897,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13898,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13899,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13900,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13901,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13902,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile," # backwards compat
"
13903,6abeb8590f35c5251b9f100a667024febaeee06b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13904,6abeb8590f35c5251b9f100a667024febaeee06b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13905,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13906,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13907,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13908,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
13909,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
13910,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
13911,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13912,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13913,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
13914,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13915,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13916,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13917,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13918,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13919,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13920,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13921,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13922,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13923,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13924,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13925,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13926,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile," # backwards compat
"
13927,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13928,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13929,7c8e945a80097e80fa1c8d69d2a027145177b701,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
13930,7c8e945a80097e80fa1c8d69d2a027145177b701,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
13931,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13932,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
13933,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13934,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
13935,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
13936,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
13937,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13938,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13939,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13940,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13941,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13942,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13943,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13944,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13945,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13946,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13947,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13948,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13949,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13950,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13951,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile," # backwards compat
"
13952,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13953,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
13954,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13955,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#		krb5-dev \
"
13956,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#		openldap-dev \
"
13957,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# configure: error: prove not found
"
13958,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13959,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13960,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13961,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13962,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13963,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13964,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13965,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13966,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13967,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13968,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13969,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13970,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13971,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13972,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile," # backwards compat
"
13973,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13974,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13975,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13976,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
13977,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
13978,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
13979,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
13980,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
13981,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
13982,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13983,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
13984,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
13985,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
13986,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
13987,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
13988,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
13989,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
13990,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
13991,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
13992,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
13993,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
13994,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
13995,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile," # backwards compat
"
13996,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
13997,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
13998,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
13999,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#		krb5-dev \
"
14000,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#		openldap-dev \
"
14001,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# configure: error: prove not found
"
14002,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14003,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14004,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14005,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14006,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14007,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14008,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14009,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14010,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14011,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14012,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14013,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14014,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14015,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14016,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile," # backwards compat
"
14017,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
14018,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14019,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14020,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"#		krb5-dev \
"
14021,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"#		openldap-dev \
"
14022,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14023,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14024,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14025,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14026,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14027,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14028,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14029,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14030,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
14031,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14032,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14033,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/Dockerfile-alpine.template," # backwards compat
"
14034,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14035,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
14036,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14037,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14038,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14039,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
14040,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14041,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14042,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14043,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14044,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14045,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14046,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14047,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14048,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14049,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14050,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14051,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14052,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14053,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14054,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile," # backwards compat
"
14055,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
14056,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# explicitly set user/group IDs
"
14057,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
14058,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14059,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14060,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14061,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14062,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14063,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14064,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# vim:set ft=dockerfile:
"
14065,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# explicitly set user/group IDs
"
14066,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
14067,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
14068,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# grab gosu for easy step-down from root
"
14069,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14070,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14071,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14072,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14073,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
14074,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# arches officialy built by upstream
"
14075,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14076,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
14077,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14078,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14079,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14080,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14081,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14082,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14083,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14084,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
14085,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14086,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
14087,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14088,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile," # backwards compat
"
14089,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
14090,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14091,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
14092,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14093,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14094,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
14095,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# explicitly set user/group IDs
"
14096,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
14097,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14098,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14099,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14100,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14101,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# arches officialy built by upstream
"
14102,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14103,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14104,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14105,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14106,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14107,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14108,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14109,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14110,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14111,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14112,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14113,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile," # backwards compat
"
14114,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# vim:set ft=dockerfile:
"
14115,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# explicitly set user/group IDs
"
14116,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
14117,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
14118,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# grab gosu for easy step-down from root
"
14119,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14120,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14121,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14122,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14123,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
14124,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# arches officialy built by upstream
"
14125,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14126,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
14127,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14128,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14129,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14130,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14131,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14132,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14133,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14134,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
14135,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14136,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
14137,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14138,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile," # backwards compat
"
14139,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14140,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14141,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
14142,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
14143,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14144,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14145,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14146,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14147,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14148,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14149,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14150,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14151,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
14152,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# explicitly set user/group IDs
"
14153,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
14154,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14155,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14156,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14157,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14158,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14159,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14160,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile," # backwards compat
"
14161,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14162,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14163,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14164,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
14165,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
14166,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
14167,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14168,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14169,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
14170,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14171,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14172,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14173,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14174,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14175,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14176,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14177,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14178,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14179,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14180,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14181,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14182,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14183,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile," # backwards compat
"
14184,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
14185,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
14186,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14187,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#		krb5-dev \
"
14188,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#		openldap-dev \
"
14189,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# configure: error: prove not found
"
14190,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14191,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14192,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14193,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
14194,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14195,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14196,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14197,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14198,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14199,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
14200,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14201,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
14202,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14203,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14204,1bddd083582b0977075dda4258f2d9dfbc90482b,/Dockerfile-alpine.template," # backwards compat
"
14205,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14206,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14207,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
14208,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
14209,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14210,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14211,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14212,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14213,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14214,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14215,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14216,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14217,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14218,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14219,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14220,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
14221,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
14222,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
14223,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14224,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14225,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14226,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14227,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14228,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14229,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14230,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14231,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14232,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14233,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14234,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14235,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14236,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14237,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile," # backwards compat
"
14238,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
14239,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# explicitly set user/group IDs
"
14240,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
14241,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14242,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14243,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# arches officialy built by upstream
"
14244,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14245,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14246,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14247,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14248,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14249,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14250,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14251,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14252,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14253,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14254,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14255,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile," # backwards compat
"
14256,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# vim:set ft=dockerfile:
"
14257,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# explicitly set user/group IDs
"
14258,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
14259,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
14260,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# grab gosu for easy step-down from root
"
14261,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14262,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14263,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14264,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
14265,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14266,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
14267,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# arches officialy built by upstream
"
14268,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14269,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
14270,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14271,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14272,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14273,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14274,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14275,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14276,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14277,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
14278,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14279,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
14280,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14281,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile," # backwards compat
"
14282,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
14283,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
14284,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
14285,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14286,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14287,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14288,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
14289,ea6f466b258ad42a87a753a10dc84272d56ab699,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14290,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
14291,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14292,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14293,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#		krb5-dev \
"
14294,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#		openldap-dev \
"
14295,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# configure: error: prove not found
"
14296,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14297,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14298,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14299,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14300,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14301,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14302,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14303,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14304,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14305,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
14306,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14307,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
14308,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14309,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14310,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/Dockerfile-alpine.template," # backwards compat
"
14311,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
14312,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# explicitly set user/group IDs
"
14313,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
14314,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14315,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14316,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14317,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14318,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
14319,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# explicitly set user/group IDs
"
14320,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
14321,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14322,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14323,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14324,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14325,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14326,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14327,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile," # backwards compat
"
14328,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
14329,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14330,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
14331,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14332,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14333,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
14334,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14335,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
14336,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14337,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14338,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14339,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
14340,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14341,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
14342,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
14343,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
14344,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14345,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14346,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14347,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14348,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14349,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14350,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14351,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14352,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14353,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14354,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14355,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14356,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14357,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14358,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile," # backwards compat
"
14359,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
14360,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# explicitly set user/group IDs
"
14361,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
14362,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14363,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14364,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14365,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14366,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14367,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# vim:set ft=dockerfile:
"
14368,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# explicitly set user/group IDs
"
14369,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
14370,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
14371,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# grab gosu for easy step-down from root
"
14372,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14373,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14374,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14375,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
14376,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14377,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
14378,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# arches officialy built by upstream
"
14379,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14380,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
14381,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14382,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14383,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14384,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14385,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14386,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14387,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14388,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
14389,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14390,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
14391,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14392,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile," # backwards compat
"
14393,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14394,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14395,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14396,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14397,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14398,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14399,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14400,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14401,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14402,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1
"
14403,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14404,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14405,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14406,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
14407,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14408,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#		krb5-dev \
"
14409,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#		openldap-dev \
"
14410,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# configure: error: prove not found
"
14411,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14412,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14413,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14414,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14415,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14416,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14417,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14418,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14419,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14420,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14421,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14422,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14423,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14424,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14425,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
14426,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14427,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
14428,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14429,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14430,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
14431,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14432,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
14433,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14434,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14435,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14436,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14437,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14438,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14439,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14440,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
14441,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14442,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14443,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14444,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14445,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14446,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14447,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14448,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14449,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14450,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14451,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14452,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14453,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14454,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14455,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile," # backwards compat
"
14456,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
14457,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# explicitly set user/group IDs
"
14458,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
14459,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14460,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14461,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# arches officialy built by upstream
"
14462,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14463,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14464,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14465,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14466,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14467,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14468,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14469,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14470,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14471,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14472,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14473,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile," # backwards compat
"
14474,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14475,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14476,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14477,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14478,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14479,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
14480,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14481,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14482,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14483,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14484,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14485,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14486,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14487,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14488,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14489,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14490,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14491,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14492,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile," # backwards compat
"
14493,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14494,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
14495,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14496,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#		krb5-dev \
"
14497,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#		openldap-dev \
"
14498,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# configure: error: prove not found
"
14499,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14500,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14501,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14502,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14503,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14504,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14505,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14506,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14507,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14508,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14509,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14510,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14511,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14512,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14513,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14514,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14515,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14516,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#		krb5-dev \
"
14517,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#		openldap-dev \
"
14518,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# configure: error: prove not found
"
14519,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14520,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14521,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14522,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14523,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14524,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14525,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14526,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14527,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14528,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14529,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14530,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14531,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14532,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14533,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile," # backwards compat
"
14534,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
14535,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14536,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14537,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#		krb5-dev \
"
14538,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#		openldap-dev \
"
14539,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# configure: error: prove not found
"
14540,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14541,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14542,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14543,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14544,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14545,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14546,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14547,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14548,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14549,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
14550,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14551,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
14552,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14553,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14554,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/Dockerfile-alpine.template," # backwards compat
"
14555,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
14556,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# explicitly set user/group IDs
"
14557,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
14558,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
14559,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
14560,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14561,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14562,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14563,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
14564,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14565,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
14566,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# arches officialy built by upstream
"
14567,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14568,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
14569,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14570,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14571,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14572,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14573,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14574,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14575,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14576,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
14577,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14578,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
14579,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14580,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile," # backwards compat
"
14581,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
14582,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# explicitly set user/group IDs
"
14583,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
14584,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14585,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14586,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# arches officialy built by upstream
"
14587,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14588,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14589,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14590,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14591,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14592,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14593,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14594,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14595,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14596,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14597,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14598,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile," # backwards compat
"
14599,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14600,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14601,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
14602,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
14603,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14604,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14605,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14606,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14607,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14608,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14609,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14610,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14611,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14612,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14613,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14614,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14615,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14616,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14617,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14618,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14619,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14620,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14621,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14622,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14623,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14624,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14625,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14626,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14627,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14628,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile," # backwards compat
"
14629,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14630,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14631,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14632,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#		krb5-dev \
"
14633,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#		openldap-dev \
"
14634,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# configure: error: prove not found
"
14635,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14636,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14637,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14638,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14639,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14640,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14641,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14642,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14643,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14644,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14645,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14646,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14647,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14648,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14649,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile," # backwards compat
"
14650,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14651,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14652,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14653,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#		krb5-dev \
"
14654,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#		openldap-dev \
"
14655,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# configure: error: prove not found
"
14656,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14657,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14658,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14659,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14660,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14661,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14662,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14663,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14664,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14665,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14666,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14667,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14668,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14669,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14670,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile," # backwards compat
"
14671,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14672,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14673,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14674,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#		krb5-dev \
"
14675,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#		openldap-dev \
"
14676,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# configure: error: prove not found
"
14677,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14678,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14679,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14680,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14681,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14682,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14683,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14684,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14685,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14686,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14687,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14688,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14689,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14690,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14691,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14692,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14693,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
14694,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
14695,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14696,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14697,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14698,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14699,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14700,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
14701,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14702,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14703,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
14704,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,"# explicitly set user/group IDs
"
14705,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
14706,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14707,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14708,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# vim:set ft=dockerfile:
"
14709,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# explicitly set user/group IDs
"
14710,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
14711,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
14712,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# grab gosu for easy step-down from root
"
14713,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14714,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14715,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14716,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14717,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
14718,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# arches officialy built by upstream
"
14719,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14720,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
14721,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14722,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14723,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14724,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14725,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14726,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14727,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14728,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
14729,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14730,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
14731,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14732,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile," # backwards compat
"
14733,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
14734,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# explicitly set user/group IDs
"
14735,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
14736,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14737,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14738,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14739,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14740,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14741,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14742,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
14743,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14744,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#		krb5-dev \
"
14745,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#		openldap-dev \
"
14746,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# configure: error: prove not found
"
14747,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14748,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14749,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14750,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14751,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14752,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14753,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14754,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14755,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14756,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14757,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14758,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14759,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14760,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14761,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14762,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14763,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14764,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
14765,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
14766,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
14767,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14768,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
14769,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14770,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14771,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14772,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14773,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14774,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14775,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14776,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14777,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14778,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14779,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14780,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14781,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile," # backwards compat
"
14782,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
14783,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14784,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
14785,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14786,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14787,ea490430aabd553f34656e8f0e846d2ed3c42930,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14788,ea490430aabd553f34656e8f0e846d2ed3c42930,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14789,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
14790,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14791,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
14792,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14793,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14794,11150aa0902aa6fbe1150085cddf5c956d0eb2fe,/Dockerfile.template,"# vim:set ft=dockerfile:
"
14795,11150aa0902aa6fbe1150085cddf5c956d0eb2fe,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14796,11150aa0902aa6fbe1150085cddf5c956d0eb2fe,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14797,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
14798,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# explicitly set user/group IDs
"
14799,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
14800,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
14801,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
14802,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14803,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14804,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14805,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14806,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
14807,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# arches officialy built by upstream
"
14808,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14809,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
14810,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14811,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14812,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14813,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14814,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14815,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14816,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14817,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
14818,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14819,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
14820,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14821,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile," # backwards compat
"
14822,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14823,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14824,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14825,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#		krb5-dev \
"
14826,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#		openldap-dev \
"
14827,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# configure: error: prove not found
"
14828,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14829,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14830,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14831,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14832,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14833,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14834,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14835,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14836,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14837,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14838,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14839,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14840,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile," # backwards compat
"
14841,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
14842,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
14843,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
14844,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14845,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14846,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14847,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
14848,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
14849,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14850,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/Dockerfile-debian.template," # backwards compat
"
14851,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
14852,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
14853,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14854,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
14855,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14856,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14857,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14858,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
14859,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14860,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14861,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14862,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14863,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14864,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14865,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14866,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14867,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14868,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14869,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14870,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14871,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14872,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14873,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile," # backwards compat
"
14874,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14875,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14876,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14877,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14878,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14879,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
14880,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14881,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14882,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14883,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14884,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14885,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14886,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14887,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14888,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14889,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14890,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14891,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14892,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14893,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14894,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile," # backwards compat
"
14895,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14896,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14897,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
14898,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
14899,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14900,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14901,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14902,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14903,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14904,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14905,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14906,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14907,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14908,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14909,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14910,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14911,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14912,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14913,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14914,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14915,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
14916,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14917,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14918,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14919,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14920,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14921,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14922,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14923,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14924,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14925,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14926,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14927,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14928,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14929,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14930,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile," # backwards compat
"
14931,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14932,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
14933,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14934,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
14935,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
14936,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
14937,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14938,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14939,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14940,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14941,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14942,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14943,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14944,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14945,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14946,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14947,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14948,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14949,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14950,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14951,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile," # backwards compat
"
14952,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# vim:set ft=dockerfile:
"
14953,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# explicitly set user/group IDs
"
14954,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
14955,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
14956,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# grab gosu for easy step-down from root
"
14957,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
14958,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
14959,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
14960,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
14961,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
14962,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# arches officialy built by upstream
"
14963,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
14964,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
14965,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
14966,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
14967,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
14968,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
14969,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
14970,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
14971,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
14972,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
14973,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14974,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
14975,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14976,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile," # backwards compat
"
14977,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
14978,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
14979,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
14980,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
14981,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
14982,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
14983,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
14984,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
14985,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
14986,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
14987,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
14988,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
14989,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
14990,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
14991,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
14992,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
14993,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
14994,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
14995,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
14996,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
14997,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile," # backwards compat
"
14998,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
14999,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15000,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15001,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15002,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15003,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
15004,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15005,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15006,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"#		krb5-dev \
"
15007,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"#		openldap-dev \
"
15008,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15009,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15010,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15011,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15012,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15013,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15014,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15015,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15016,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
15017,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15018,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15019,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/Dockerfile-alpine.template," # backwards compat
"
15020,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# vim:set ft=dockerfile:
"
15021,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# explicitly set user/group IDs
"
15022,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15023,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15024,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# grab gosu for easy step-down from root
"
15025,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15026,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15027,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15028,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15029,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
15030,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# arches officialy built by upstream
"
15031,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15032,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15033,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15034,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15035,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15036,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15037,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15038,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15039,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15040,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15041,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15042,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15043,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15044,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile," # backwards compat
"
15045,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
15046,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# explicitly set user/group IDs
"
15047,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15048,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15049,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
15050,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15051,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15052,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15053,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15054,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
15055,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# arches officialy built by upstream
"
15056,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15057,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15058,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15059,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15060,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15061,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15062,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15063,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15064,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15065,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15066,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15067,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15068,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15069,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile," # backwards compat
"
15070,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15071,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15072,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15073,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#		krb5-dev \
"
15074,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#		openldap-dev \
"
15075,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# configure: error: prove not found
"
15076,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15077,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15078,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15079,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15080,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15081,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15082,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15083,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15084,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15085,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
15086,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15087,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15088,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15089,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15090,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile," # backwards compat
"
15091,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15092,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15093,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15094,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
15095,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
15096,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15097,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
15098,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15099,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15100,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15101,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15102,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15103,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15104,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15105,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15106,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15107,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15108,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile," # backwards compat
"
15109,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
15110,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15111,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
15112,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15113,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15114,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15115,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15116,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15117,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
15118,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
15119,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15120,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
15121,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15122,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15123,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15124,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15125,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15126,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15127,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15128,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15129,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15130,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15131,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15132,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15133,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile," # backwards compat
"
15134,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
15135,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15136,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15137,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15138,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15139,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
15140,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,"# explicitly set user/group IDs
"
15141,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15142,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15143,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15144,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
15145,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# explicitly set user/group IDs
"
15146,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15147,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15148,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
15149,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15150,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15151,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15152,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15153,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
15154,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# arches officialy built by upstream
"
15155,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15156,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15157,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15158,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15159,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15160,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15161,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15162,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15163,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15164,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15165,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15166,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15167,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15168,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile," # backwards compat
"
15169,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# vim:set ft=dockerfile:
"
15170,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# explicitly set user/group IDs
"
15171,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# grab gosu for easy step-down from root
"
15172,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15173,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15174,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15175,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15176,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# arches officialy built by upstream
"
15177,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15178,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15179,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15180,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15181,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15182,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15183,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15184,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15185,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15186,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15187,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15188,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile," # backwards compat
"
15189,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15190,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
15191,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15192,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
15193,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
15194,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
15195,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15196,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15197,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15198,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
15199,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15200,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15201,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15202,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15203,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15204,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
15205,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15206,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15207,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15208,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15209,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile," # backwards compat
"
15210,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15211,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
15212,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15213,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
15214,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
15215,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
15216,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15217,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15218,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15219,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15220,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15221,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15222,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15223,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15224,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15225,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
15226,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15227,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15228,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15229,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15230,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile," # backwards compat
"
15231,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
15232,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15233,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
15234,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15235,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15236,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
15237,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# explicitly set user/group IDs
"
15238,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15239,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15240,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15241,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15242,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15243,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# arches officialy built by upstream
"
15244,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15245,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15246,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15247,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15248,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15249,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15250,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15251,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15252,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15253,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15254,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15255,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile," # backwards compat
"
15256,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
15257,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15258,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
15259,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15260,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15261,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15262,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15263,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15264,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
15265,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
15266,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15267,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15268,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15269,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15270,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15271,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15272,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15273,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15274,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15275,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15276,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15277,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15278,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile," # backwards compat
"
15279,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15280,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15281,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15282,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
15283,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
15284,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15285,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
15286,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15287,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15288,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15289,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15290,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15291,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15292,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15293,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15294,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15295,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15296,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15297,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15298,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile," # backwards compat
"
15299,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
15300,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# explicitly set user/group IDs
"
15301,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15302,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15303,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15304,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15305,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# arches officialy built by upstream
"
15306,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15307,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15308,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15309,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15310,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15311,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15312,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15313,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15314,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15315,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15316,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15317,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile," # backwards compat
"
15318,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
15319,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15320,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15321,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# vim:set ft=dockerfile:
"
15322,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# explicitly set user/group IDs
"
15323,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15324,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15325,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# grab gosu for easy step-down from root
"
15326,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15327,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15328,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15329,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15330,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
15331,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# arches officialy built by upstream
"
15332,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15333,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15334,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15335,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15336,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15337,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15338,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15339,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15340,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15341,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15342,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15343,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15344,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15345,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile," # backwards compat
"
15346,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/Dockerfile.template,"# vim:set ft=dockerfile:
"
15347,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15348,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/Dockerfile.template,"# grab gosu for easy step-down from root
"
15349,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15350,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15351,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
15352,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,"# explicitly set user/group IDs
"
15353,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
15354,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15355,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15356,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
15357,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15358,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15359,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
15360,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,"# explicitly set user/group IDs
"
15361,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
15362,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15363,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15364,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
15365,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
15366,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15367,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15368,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
15369,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15370,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15371,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15372,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
15373,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15374,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
15375,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# arches officialy built by upstream
"
15376,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15377,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15378,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15379,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15380,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15381,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15382,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15383,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15384,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15385,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15386,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
15387,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15388,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15389,a1420dac644b8190df5e78e80bfa9610b2f077e2,/Dockerfile-debian.template," # backwards compat
"
15390,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15391,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15392,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
15393,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
15394,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15395,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15396,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15397,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15398,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15399,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15400,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15401,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15402,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15403,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15404,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15405,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile," # backwards compat
"
15406,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
15407,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# explicitly set user/group IDs
"
15408,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
15409,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15410,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15411,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15412,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15413,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15414,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15415,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile," # backwards compat
"
15416,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
15417,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15418,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15419,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#		krb5-dev \
"
15420,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#		openldap-dev \
"
15421,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# configure: error: prove not found
"
15422,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15423,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15424,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15425,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15426,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15427,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15428,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15429,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15430,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15431,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
15432,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15433,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
15434,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15435,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15436,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/Dockerfile-alpine.template," # backwards compat
"
15437,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
15438,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# explicitly set user/group IDs
"
15439,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
15440,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15441,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15442,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15443,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15444,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15445,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15446,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile," # backwards compat
"
15447,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15448,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15449,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15450,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
15451,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
15452,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15453,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15454,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15455,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15456,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15457,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15458,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15459,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15460,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15461,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15462,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15463,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile," # backwards compat
"
15464,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
15465,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# explicitly set user/group IDs
"
15466,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15467,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15468,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
15469,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15470,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15471,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15472,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15473,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
15474,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# arches officialy built by upstream
"
15475,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15476,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15477,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15478,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15479,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15480,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15481,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15482,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15483,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15484,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15485,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15486,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15487,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15488,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile," # backwards compat
"
15489,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
15490,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# explicitly set user/group IDs
"
15491,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
15492,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15493,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15494,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15495,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15496,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15497,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15498,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile," # backwards compat
"
15499,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
15500,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# explicitly set user/group IDs
"
15501,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
15502,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15503,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15504,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15505,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15506,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15507,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15508,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile," # backwards compat
"
15509,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15510,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15511,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15512,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
15513,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
15514,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
15515,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15516,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15517,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15518,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15519,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15520,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15521,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15522,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15523,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15524,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15525,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15526,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15527,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15528,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile," # backwards compat
"
15529,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
15530,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15531,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
15532,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15533,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15534,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
15535,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# explicitly set user/group IDs
"
15536,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
15537,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15538,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15539,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15540,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15541,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15542,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15543,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile," # backwards compat
"
15544,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
15545,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# explicitly set user/group IDs
"
15546,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
15547,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15548,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15549,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15550,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15551,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15552,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15553,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile," # backwards compat
"
15554,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
15555,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# explicitly set user/group IDs
"
15556,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
15557,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15558,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15559,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# arches officialy built by upstream
"
15560,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15561,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15562,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15563,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15564,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15565,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15566,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15567,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15568,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15569,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15570,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15571,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile," # backwards compat
"
15572,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15573,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15574,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15575,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
15576,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
15577,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
15578,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15579,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15580,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
15581,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15582,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15583,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15584,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15585,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15586,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15587,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15588,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15589,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15590,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15591,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15592,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15593,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile," # backwards compat
"
15594,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
15595,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# explicitly set user/group IDs
"
15596,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15597,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15598,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15599,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# arches officialy built by upstream
"
15600,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15601,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15602,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15603,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15604,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15605,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15606,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15607,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15608,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15609,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15610,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15611,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile," # backwards compat
"
15612,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
15613,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# explicitly set user/group IDs
"
15614,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15615,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15616,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
15617,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15618,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15619,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15620,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15621,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
15622,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# arches officialy built by upstream
"
15623,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15624,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15625,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15626,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15627,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15628,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15629,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15630,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15631,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15632,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15633,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15634,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15635,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15636,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile," # backwards compat
"
15637,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
15638,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# explicitly set user/group IDs
"
15639,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15640,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15641,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15642,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15643,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15644,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# arches officialy built by upstream
"
15645,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15646,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15647,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15648,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15649,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15650,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15651,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15652,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15653,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15654,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15655,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15656,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile," # backwards compat
"
15657,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# vim:set ft=dockerfile:
"
15658,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# explicitly set user/group IDs
"
15659,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15660,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15661,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
15662,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15663,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15664,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15665,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
15666,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15667,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
15668,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# arches officialy built by upstream
"
15669,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15670,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15671,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15672,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15673,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15674,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15675,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15676,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15677,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15678,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15679,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15680,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15681,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15682,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile," # backwards compat
"
15683,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
15684,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15685,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
15686,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15687,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15688,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15689,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15690,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
15691,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
15692,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15693,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
15694,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15695,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15696,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15697,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15698,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15699,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15700,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15701,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15702,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15703,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15704,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile," # backwards compat
"
15705,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15706,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15707,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
15708,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# explicitly set user/group IDs
"
15709,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
15710,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15711,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15712,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15713,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15714,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15715,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15716,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile," # backwards compat
"
15717,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# vim:set ft=dockerfile:
"
15718,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# explicitly set user/group IDs
"
15719,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15720,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15721,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# grab gosu for easy step-down from root
"
15722,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15723,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15724,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15725,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15726,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
15727,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# arches officialy built by upstream
"
15728,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15729,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15730,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15731,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15732,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15733,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15734,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15735,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15736,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15737,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15738,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15739,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15740,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15741,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile," # backwards compat
"
15742,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
15743,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15744,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
15745,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15746,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15747,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15748,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15749,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15750,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#		krb5-dev \
"
15751,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#		openldap-dev \
"
15752,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# configure: error: prove not found
"
15753,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15754,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15755,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15756,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15757,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15758,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15759,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15760,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15761,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15762,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
15763,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15764,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15765,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15766,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15767,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15768,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15769,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15770,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
15771,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
15772,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
15773,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15774,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15775,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15776,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15777,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15778,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15779,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15780,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15781,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15782,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
15783,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15784,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15785,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15786,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15787,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile," # backwards compat
"
15788,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# vim:set ft=dockerfile:
"
15789,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# explicitly set user/group IDs
"
15790,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15791,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15792,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# grab gosu for easy step-down from root
"
15793,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15794,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15795,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15796,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15797,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
15798,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# arches officialy built by upstream
"
15799,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15800,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15801,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15802,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15803,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15804,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15805,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15806,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15807,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15808,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15809,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15810,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15811,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15812,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile," # backwards compat
"
15813,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# vim:set ft=dockerfile:
"
15814,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# explicitly set user/group IDs
"
15815,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15816,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15817,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# grab gosu for easy step-down from root
"
15818,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15819,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15820,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15821,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
15822,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15823,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
15824,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# arches officialy built by upstream
"
15825,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15826,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15827,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15828,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15829,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15830,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15831,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15832,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15833,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15834,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15835,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15836,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15837,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15838,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile," # backwards compat
"
15839,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
15840,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15841,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
15842,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15843,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15844,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
15845,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# explicitly set user/group IDs
"
15846,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15847,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15848,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15849,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15850,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15851,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15852,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15853,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
15854,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15855,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"#		krb5-dev \
"
15856,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"#		openldap-dev \
"
15857,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15858,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15859,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15860,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15861,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15862,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15863,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15864,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15865,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
15866,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15867,3706d4c4562c284ed070286b9fd516151167a40c,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15868,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
15869,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# explicitly set user/group IDs
"
15870,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
15871,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15872,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15873,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15874,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15875,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
15876,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15877,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile," # backwards compat
"
15878,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
15879,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
15880,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15881,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15882,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
15883,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15884,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15885,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15886,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15887,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
15888,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# arches officialy built by upstream
"
15889,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15890,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15891,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15892,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15893,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15894,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15895,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15896,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15897,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15898,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15899,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
15900,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15901,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15902,85aadc08c347cd20f199902c4b8b4f736341c3b8,/Dockerfile-debian.template," # backwards compat
"
15903,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15904,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15905,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15906,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
15907,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
15908,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
15909,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
15910,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15911,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
15912,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15913,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15914,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15915,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15916,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15917,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15918,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15919,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15920,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#p' --recursive /usr/local \
"
15921,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15922,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15923,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15924,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15925,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile," # backwards compat
"
15926,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# vim:set ft=dockerfile:
"
15927,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# explicitly set user/group IDs
"
15928,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15929,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15930,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# grab gosu for easy step-down from root
"
15931,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15932,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15933,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15934,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15935,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
15936,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# arches officialy built by upstream
"
15937,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
15938,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
15939,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
15940,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
15941,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
15942,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
15943,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
15944,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
15945,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
15946,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
15947,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15948,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
15949,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15950,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile," # backwards compat
"
15951,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
15952,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
15953,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
15954,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15955,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
15956,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15957,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15958,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
15959,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
15960,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15961,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15962,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15963,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15964,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15965,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15966,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15967,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15968,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15969,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15970,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15971,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile," # backwards compat
"
15972,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
15973,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
15974,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
15975,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
15976,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
15977,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
15978,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
15979,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
15980,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
15981,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
15982,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
15983,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
15984,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
15985,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
15986,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
15987,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
15988,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
15989,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile," # backwards compat
"
15990,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# vim:set ft=dockerfile:
"
15991,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# explicitly set user/group IDs
"
15992,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
15993,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
15994,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# grab gosu for easy step-down from root
"
15995,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
15996,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
15997,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
15998,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
15999,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
16000,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# arches officialy built by upstream
"
16001,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16002,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16003,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16004,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16005,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16006,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16007,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16008,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16009,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16010,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16011,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16012,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16013,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16014,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile," # backwards compat
"
16015,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
16016,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# explicitly set user/group IDs
"
16017,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16018,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16019,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
16020,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16021,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16022,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16023,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16024,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
16025,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# arches officialy built by upstream
"
16026,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16027,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16028,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16029,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16030,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16031,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16032,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16033,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16034,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16035,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16036,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16037,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16038,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16039,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile," # backwards compat
"
16040,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
16041,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# explicitly set user/group IDs
"
16042,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
16043,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16044,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16045,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16046,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16047,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
16048,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16049,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
16050,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16051,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16052,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16053,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16054,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16055,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
16056,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
16057,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
16058,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16059,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16060,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16061,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16062,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16063,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16064,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16065,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16066,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16067,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16068,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16069,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16070,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16071,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16072,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile," # backwards compat
"
16073,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16074,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16075,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16076,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
16077,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
16078,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
16079,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16080,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16081,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16082,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16083,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16084,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16085,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16086,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16087,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16088,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16089,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16090,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16091,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16092,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16093,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile," # backwards compat
"
16094,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# vim:set ft=dockerfile:
"
16095,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# explicitly set user/group IDs
"
16096,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16097,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16098,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# grab gosu for easy step-down from root
"
16099,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16100,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16101,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16102,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16103,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
16104,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# arches officialy built by upstream
"
16105,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16106,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16107,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16108,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16109,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16110,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16111,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16112,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16113,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16114,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16115,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16116,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16117,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16118,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile," # backwards compat
"
16119,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16120,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16121,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
16122,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
16123,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16124,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16125,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16126,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16127,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16128,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16129,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16130,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16131,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16132,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16133,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16134,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile," # backwards compat
"
16135,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
16136,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16137,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
16138,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16139,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16140,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
16141,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# explicitly set user/group IDs
"
16142,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
16143,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16144,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16145,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16146,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# arches officialy built by upstream
"
16147,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16148,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16149,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16150,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16151,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16152,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16153,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16154,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16155,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16156,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16157,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16158,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile," # backwards compat
"
16159,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
16160,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16161,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
16162,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16163,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16164,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
16165,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# explicitly set user/group IDs
"
16166,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16167,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16168,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
16169,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16170,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16171,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16172,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
16173,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16174,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
16175,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# arches officialy built by upstream
"
16176,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16177,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16178,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16179,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16180,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16181,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16182,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16183,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16184,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16185,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16186,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16187,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16188,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16189,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile," # backwards compat
"
16190,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
16191,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# explicitly set user/group IDs
"
16192,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
16193,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16194,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16195,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# arches officialy built by upstream
"
16196,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16197,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16198,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16199,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16200,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16201,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16202,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16203,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16204,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16205,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16206,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16207,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile," # backwards compat
"
16208,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
16209,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# explicitly set user/group IDs
"
16210,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
16211,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16212,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16213,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16214,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16215,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16216,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16217,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
16218,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16219,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
16220,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16221,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16222,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16223,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16224,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16225,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
16226,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
16227,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16228,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16229,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16230,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16231,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16232,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16233,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16234,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16235,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16236,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16237,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16238,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16239,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile," # backwards compat
"
16240,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
16241,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# explicitly set user/group IDs
"
16242,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16243,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16244,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
16245,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16246,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16247,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16248,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16249,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
16250,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# arches officialy built by upstream
"
16251,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16252,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16253,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16254,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16255,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16256,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16257,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16258,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16259,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16260,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16261,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16262,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16263,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16264,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile," # backwards compat
"
16265,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
16266,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# explicitly set user/group IDs
"
16267,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16268,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16269,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
16270,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16271,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16272,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16273,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16274,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# arches officialy built by upstream
"
16275,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16276,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16277,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16278,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16279,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16280,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16281,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16282,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16283,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16284,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16285,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16286,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile," # backwards compat
"
16287,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16288,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16289,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16290,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#		krb5-dev \
"
16291,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#		openldap-dev \
"
16292,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# configure: error: prove not found
"
16293,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16294,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16295,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16296,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16297,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16298,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16299,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16300,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16301,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16302,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16303,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16304,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16305,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16306,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16307,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
16308,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16309,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
16310,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16311,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16312,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
16313,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# explicitly set user/group IDs
"
16314,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
16315,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16316,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16317,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16318,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16319,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# arches officialy built by upstream
"
16320,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16321,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16322,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16323,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16324,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16325,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16326,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16327,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16328,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16329,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16330,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16331,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile," # backwards compat
"
16332,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
16333,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# explicitly set user/group IDs
"
16334,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
16335,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16336,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16337,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16338,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16339,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
16340,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# explicitly set user/group IDs
"
16341,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
16342,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16343,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16344,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16345,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16346,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16347,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
16348,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16349,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
16350,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16351,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16352,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16353,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16354,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16355,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
16356,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
16357,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
16358,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16359,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16360,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16361,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16362,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16363,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16364,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16365,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16366,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16367,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16368,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16369,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16370,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16371,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16372,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile," # backwards compat
"
16373,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16374,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
16375,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16376,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#		krb5-dev \
"
16377,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#		openldap-dev \
"
16378,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# configure: error: prove not found
"
16379,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16380,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16381,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16382,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
16383,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16384,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16385,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16386,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16387,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16388,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16389,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16390,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16391,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16392,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16393,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16394,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16395,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16396,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
16397,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
16398,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16399,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
16400,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16401,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16402,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16403,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16404,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16405,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16406,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16407,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16408,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16409,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16410,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16411,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16412,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile," # backwards compat
"
16413,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
16414,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16415,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16416,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#		krb5-dev \
"
16417,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#		openldap-dev \
"
16418,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# configure: error: prove not found
"
16419,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16420,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16421,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16422,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16423,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16424,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16425,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16426,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16427,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16428,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
16429,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16430,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
16431,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16432,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16433,c66fc738ed2eb957881a855eda7f921f785ec7a3,/Dockerfile-alpine.template," # backwards compat
"
16434,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16435,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16436,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
16437,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
16438,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16439,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16440,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16441,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16442,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16443,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
16444,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16445,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16446,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16447,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16448,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16449,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
16450,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
16451,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
16452,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16453,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16454,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16455,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16456,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16457,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16458,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16459,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16460,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16461,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16462,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16463,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16464,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16465,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16466,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile," # backwards compat
"
16467,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"# vim:set ft=dockerfile:
"
16468,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"# explicitly set user/group IDs
"
16469,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"# grab gosu for easy step-down from root
"
16470,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16471,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16472,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"# make the sample config easier to munge (and ""correct by default"")
"
16473,c82348f8f18a59c6830b98150cb879c1f8613f7b,/Dockerfile.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16474,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
16475,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# explicitly set user/group IDs
"
16476,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
16477,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16478,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16479,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# arches officialy built by upstream
"
16480,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16481,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16482,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16483,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16484,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16485,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16486,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16487,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16488,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16489,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16490,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16491,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile," # backwards compat
"
16492,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16493,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16494,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16495,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
16496,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
16497,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
16498,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16499,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16500,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16501,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16502,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16503,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16504,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16505,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16506,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16507,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16508,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16509,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16510,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16511,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16512,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile," # backwards compat
"
16513,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
16514,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# explicitly set user/group IDs
"
16515,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
16516,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16517,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16518,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16519,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16520,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16521,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16522,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile," # backwards compat
"
16523,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
16524,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# explicitly set user/group IDs
"
16525,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16526,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16527,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
16528,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16529,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16530,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16531,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16532,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
16533,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# arches officialy built by upstream
"
16534,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16535,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16536,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16537,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16538,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16539,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16540,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16541,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16542,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16543,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16544,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16545,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16546,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16547,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile," # backwards compat
"
16548,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16549,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
16550,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16551,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#		krb5-dev \
"
16552,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#		openldap-dev \
"
16553,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# configure: error: prove not found
"
16554,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16555,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16556,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16557,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16558,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16559,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16560,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16561,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16562,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16563,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16564,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16565,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16566,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16567,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16568,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile," # backwards compat
"
16569,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# vim:set ft=dockerfile:
"
16570,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# explicitly set user/group IDs
"
16571,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16572,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16573,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
16574,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16575,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16576,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16577,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
16578,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16579,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# see note below about ""*.pyc"" files
"
16580,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# arches officialy built by upstream
"
16581,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16582,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16583,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16584,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417
"
16585,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16586,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16587,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16588,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16589,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16590,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16591,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16592,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16593,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16594,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16595,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile," # backwards compat
"
16596,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16597,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16598,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16599,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
16600,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
16601,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
16602,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16603,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16604,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16605,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16606,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16607,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16608,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16609,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16610,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16611,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16612,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16613,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16614,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16615,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16616,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile," # backwards compat
"
16617,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16618,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
16619,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16620,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#		krb5-dev \
"
16621,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#		openldap-dev \
"
16622,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# configure: error: prove not found
"
16623,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16624,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16625,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16626,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16627,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16628,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16629,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16630,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16631,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16632,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16633,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16634,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16635,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16636,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16637,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16638,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16639,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16640,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
16641,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
16642,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
16643,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16644,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16645,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16646,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16647,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16648,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16649,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16650,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16651,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16652,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16653,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16654,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16655,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16656,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16657,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile," # backwards compat
"
16658,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
16659,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# explicitly set user/group IDs
"
16660,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
16661,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16662,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16663,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16664,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16665,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
16666,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,"# explicitly set user/group IDs
"
16667,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
16668,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16669,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16670,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# vim:set ft=dockerfile:
"
16671,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# explicitly set user/group IDs
"
16672,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# grab gosu for easy step-down from root
"
16673,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16674,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16675,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16676,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16677,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16678,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16679,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile," # backwards compat
"
16680,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
16681,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16682,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
16683,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16684,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16685,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
16686,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16687,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
16688,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16689,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16690,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
16691,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# explicitly set user/group IDs
"
16692,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16693,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16694,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
16695,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16696,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16697,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16698,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
16699,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16700,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
16701,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# arches officialy built by upstream
"
16702,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16703,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16704,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16705,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16706,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16707,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16708,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16709,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16710,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16711,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16712,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16713,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16714,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16715,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile," # backwards compat
"
16716,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
16717,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16718,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
16719,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16720,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16721,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
16722,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16723,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
16724,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16725,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16726,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16727,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16728,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16729,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#		krb5-dev \
"
16730,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#		openldap-dev \
"
16731,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# configure: error: prove not found
"
16732,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16733,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16734,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16735,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16736,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16737,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16738,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16739,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16740,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16741,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16742,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16743,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16744,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16745,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile," # backwards compat
"
16746,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
16747,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16748,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
16749,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16750,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16751,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16752,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16753,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
16754,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
16755,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16756,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16757,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16758,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16759,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16760,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16761,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16762,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16763,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16764,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16765,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16766,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
16767,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16768,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#		krb5-dev \
"
16769,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#		openldap-dev \
"
16770,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# configure: error: prove not found
"
16771,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16772,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16773,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16774,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16775,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16776,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16777,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16778,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16779,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16780,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16781,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16782,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16783,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16784,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16785,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile," # backwards compat
"
16786,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
16787,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16788,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16789,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#		krb5-dev \
"
16790,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#		openldap-dev \
"
16791,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# configure: error: prove not found
"
16792,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16793,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16794,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16795,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16796,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16797,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16798,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16799,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16800,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16801,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
16802,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16803,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
16804,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16805,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16806,1089a8971b43a675109ad886bf1f3b327c067fa1,/Dockerfile-alpine.template," # backwards compat
"
16807,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
16808,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# explicitly set user/group IDs
"
16809,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
16810,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16811,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16812,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16813,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16814,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
16815,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# explicitly set user/group IDs
"
16816,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
16817,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16818,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16819,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16820,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16821,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16822,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
16823,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16824,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#		krb5-dev \
"
16825,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#		openldap-dev \
"
16826,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# configure: error: prove not found
"
16827,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16828,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16829,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16830,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16831,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16832,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16833,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16834,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16835,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16836,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16837,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16838,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16839,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16840,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16841,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile," # backwards compat
"
16842,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
16843,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
16844,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
16845,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16846,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
16847,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
16848,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# explicitly set user/group IDs
"
16849,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16850,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16851,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
16852,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16853,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16854,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16855,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16856,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# see note below about ""*.pyc"" files
"
16857,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# arches officialy built by upstream
"
16858,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16859,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16860,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16861,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16862,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16863,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16864,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16865,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16866,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16867,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16868,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16869,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16870,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16871,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile," # backwards compat
"
16872,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# vim:set ft=dockerfile:
"
16873,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# explicitly set user/group IDs
"
16874,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# grab gosu for easy step-down from root
"
16875,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16876,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16877,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16878,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16879,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# arches officialy built by upstream
"
16880,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16881,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16882,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16883,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16884,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16885,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16886,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16887,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16888,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16889,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16890,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16891,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile," # backwards compat
"
16892,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16893,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16894,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16895,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#		krb5-dev \
"
16896,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#		openldap-dev \
"
16897,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# configure: error: prove not found
"
16898,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16899,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16900,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16901,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16902,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16903,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16904,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16905,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16906,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16907,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16908,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16909,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16910,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16911,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16912,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile," # backwards compat
"
16913,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
16914,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# explicitly set user/group IDs
"
16915,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
16916,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16917,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16918,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# arches officialy built by upstream
"
16919,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16920,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16921,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16922,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16923,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16924,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16925,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16926,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16927,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16928,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
16929,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16930,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile," # backwards compat
"
16931,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
16932,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
16933,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16934,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#		krb5-dev \
"
16935,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#		openldap-dev \
"
16936,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# configure: error: prove not found
"
16937,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16938,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16939,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16940,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16941,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16942,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16943,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16944,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16945,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16946,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
16947,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16948,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
16949,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16950,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16951,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/Dockerfile-alpine.template," # backwards compat
"
16952,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
16953,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
16954,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
16955,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
16956,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
16957,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
16958,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
16959,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
16960,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
16961,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
16962,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
16963,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# arches officialy built by upstream
"
16964,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
16965,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
16966,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
16967,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417
"
16968,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
16969,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
16970,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
16971,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
16972,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
16973,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
16974,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
16975,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
16976,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
16977,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16978,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/Dockerfile-debian.template," # backwards compat
"
16979,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
16980,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
16981,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
16982,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#		krb5-dev \
"
16983,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#		openldap-dev \
"
16984,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# configure: error: prove not found
"
16985,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
16986,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
16987,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
16988,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
16989,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
16990,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
16991,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
16992,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
16993,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
16994,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
16995,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
16996,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
16997,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
16998,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
16999,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile," # backwards compat
"
17000,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
17001,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
17002,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
17003,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17004,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17005,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# vim:set ft=dockerfile:
"
17006,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# explicitly set user/group IDs
"
17007,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17008,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17009,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# grab gosu for easy step-down from root
"
17010,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17011,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17012,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17013,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17014,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
17015,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# arches officialy built by upstream
"
17016,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17017,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17018,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17019,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17020,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17021,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17022,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17023,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17024,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17025,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17026,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17027,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
17028,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17029,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile," # backwards compat
"
17030,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17031,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
17032,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17033,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
17034,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
17035,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
17036,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17037,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17038,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17039,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17040,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17041,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17042,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17043,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17044,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17045,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17046,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17047,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17048,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17049,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17050,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile," # backwards compat
"
17051,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
17052,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# explicitly set user/group IDs
"
17053,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
17054,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17055,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17056,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17057,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17058,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17059,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# vim:set ft=dockerfile:
"
17060,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# explicitly set user/group IDs
"
17061,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17062,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17063,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# grab gosu for easy step-down from root
"
17064,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17065,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17066,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17067,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17068,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
17069,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# arches officialy built by upstream
"
17070,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17071,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17072,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17073,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17074,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17075,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17076,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17077,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17078,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17079,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17080,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17081,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17082,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17083,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile," # backwards compat
"
17084,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,"# vim:set ft=dockerfile:
"
17085,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
17086,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,"# grab gosu for easy step-down from root
"
17087,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17088,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17089,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
17090,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# explicitly set user/group IDs
"
17091,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
17092,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17093,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17094,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17095,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17096,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17097,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17098,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile," # backwards compat
"
17099,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17100,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17101,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17102,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#		krb5-dev \
"
17103,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#		openldap-dev \
"
17104,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# configure: error: prove not found
"
17105,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17106,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17107,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17108,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17109,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17110,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17111,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17112,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17113,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17114,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17115,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17116,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17117,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17118,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17119,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile," # backwards compat
"
17120,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# vim:set ft=dockerfile:
"
17121,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# explicitly set user/group IDs
"
17122,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17123,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17124,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# grab gosu for easy step-down from root
"
17125,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17126,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17127,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17128,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17129,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
17130,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# arches officialy built by upstream
"
17131,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17132,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17133,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17134,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17135,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17136,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17137,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17138,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17139,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17140,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17141,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17142,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
17143,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17144,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile," # backwards compat
"
17145,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
17146,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
17147,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
17148,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17149,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17150,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17151,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17152,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17153,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#		krb5-dev \
"
17154,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#		openldap-dev \
"
17155,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# configure: error: prove not found
"
17156,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17157,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17158,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17159,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17160,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17161,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17162,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17163,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17164,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17165,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17166,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17167,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17168,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17169,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17170,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile," # backwards compat
"
17171,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# vim:set ft=dockerfile:
"
17172,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# explicitly set user/group IDs
"
17173,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# grab gosu for easy step-down from root
"
17174,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17175,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17176,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# arches officialy built by upstream
"
17177,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17178,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17179,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17180,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17181,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17182,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17183,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17184,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17185,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17186,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17187,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17188,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile," # backwards compat
"
17189,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# vim:set ft=dockerfile:
"
17190,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# explicitly set user/group IDs
"
17191,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17192,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17193,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# grab gosu for easy step-down from root
"
17194,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17195,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17196,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17197,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17198,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
17199,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# arches officialy built by upstream
"
17200,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17201,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17202,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17203,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17204,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17205,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17206,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17207,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17208,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17209,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17210,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17211,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17212,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17213,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile," # backwards compat
"
17214,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17215,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17216,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17217,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
17218,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
17219,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
17220,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17221,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17222,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
17223,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17224,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17225,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17226,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17227,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17228,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17229,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17230,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17231,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17232,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17233,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17234,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17235,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile," # backwards compat
"
17236,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
17237,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17238,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"#		krb5-dev \
"
17239,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"#		openldap-dev \
"
17240,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17241,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17242,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17243,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17244,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17245,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17246,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
17247,a7ba7f2b2de177069e185e748adaa76ff444d921,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17248,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
17249,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# explicitly set user/group IDs
"
17250,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17251,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17252,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
17253,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17254,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17255,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17256,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17257,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
17258,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# arches officialy built by upstream
"
17259,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17260,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17261,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17262,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17263,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17264,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17265,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17266,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17267,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17268,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17269,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17270,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
17271,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17272,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile," # backwards compat
"
17273,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17274,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17275,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17276,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
17277,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
17278,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
17279,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17280,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17281,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17282,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17283,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17284,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17285,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17286,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17287,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17288,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17289,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17290,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17291,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17292,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17293,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile," # backwards compat
"
17294,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
17295,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,"# explicitly set user/group IDs
"
17296,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
17297,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17298,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17299,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# vim:set ft=dockerfile:
"
17300,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# explicitly set user/group IDs
"
17301,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17302,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17303,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# grab gosu for easy step-down from root
"
17304,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17305,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17306,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17307,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17308,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
17309,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# arches officialy built by upstream
"
17310,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17311,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17312,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17313,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17314,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17315,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17316,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17317,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17318,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17319,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17320,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17321,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
17322,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17323,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile," # backwards compat
"
17324,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17325,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
17326,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17327,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#		krb5-dev \
"
17328,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#		openldap-dev \
"
17329,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# configure: error: prove not found
"
17330,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17331,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17332,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17333,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \
"
17334,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17335,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17336,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17337,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17338,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17339,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17340,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17341,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17342,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17343,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17344,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile," # backwards compat
"
17345,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17346,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17347,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17348,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
17349,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
17350,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
17351,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17352,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17353,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17354,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17355,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17356,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17357,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17358,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17359,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17360,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17361,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17362,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17363,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17364,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17365,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile," # backwards compat
"
17366,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17367,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17368,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
17369,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
17370,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17371,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17372,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17373,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17374,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17375,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17376,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17377,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17378,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
17379,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# explicitly set user/group IDs
"
17380,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
17381,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17382,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17383,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17384,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17385,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17386,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17387,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile," # backwards compat
"
17388,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17389,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17390,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17391,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
17392,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
17393,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17394,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
17395,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17396,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17397,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17398,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17399,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17400,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17401,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17402,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17403,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17404,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17405,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile," # backwards compat
"
17406,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
17407,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# explicitly set user/group IDs
"
17408,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17409,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17410,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
17411,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17412,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17413,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17414,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17415,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
17416,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# arches officialy built by upstream
"
17417,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17418,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17419,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17420,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17421,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17422,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17423,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17424,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17425,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17426,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17427,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17428,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
17429,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17430,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile," # backwards compat
"
17431,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17432,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17433,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17434,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
17435,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
17436,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# configure: error: prove not found
"
17437,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17438,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17439,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
17440,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17441,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17442,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17443,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17444,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17445,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17446,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17447,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17448,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17449,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17450,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17451,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17452,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile," # backwards compat
"
17453,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
17454,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
17455,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17456,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17457,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
17458,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17459,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17460,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17461,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17462,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
17463,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# arches officialy built by upstream
"
17464,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17465,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17466,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17467,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17468,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17469,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17470,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17471,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17472,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17473,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17474,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
17475,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17476,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17477,91939daa3f42d2796952f03353534cd87d181ccc,/Dockerfile-debian.template," # backwards compat
"
17478,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
17479,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,"# explicitly set user/group IDs
"
17480,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
17481,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17482,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17483,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17484,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17485,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
17486,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
17487,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17488,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17489,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17490,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17491,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17492,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17493,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17494,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17495,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17496,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17497,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17498,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile," # backwards compat
"
17499,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17500,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17501,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17502,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
17503,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
17504,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
17505,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17506,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17507,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17508,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17509,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17510,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17511,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17512,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17513,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17514,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17515,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17516,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17517,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17518,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17519,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile," # backwards compat
"
17520,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17521,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17522,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17523,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
17524,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
17525,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
17526,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17527,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17528,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17529,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17530,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17531,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17532,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17533,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17534,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17535,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17536,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17537,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17538,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17539,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17540,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile," # backwards compat
"
17541,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"# vim:set ft=dockerfile:
"
17542,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"# explicitly set user/group IDs
"
17543,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"# grab gosu for easy step-down from root
"
17544,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17545,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17546,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"# make the sample config easier to munge (and ""correct by default"")
"
17547,41e7a62fb4e26b44e3d4746023ea977998c02252,/Dockerfile.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17548,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
17549,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
17550,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17551,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17552,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
17553,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17554,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17555,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17556,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17557,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
17558,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# arches officialy built by upstream
"
17559,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17560,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17561,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17562,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17563,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17564,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17565,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17566,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17567,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17568,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17569,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
17570,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
17571,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17572,faf08dbfd0675d144cbdef39f4506425ec7cee26,/Dockerfile-debian.template," # backwards compat
"
17573,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# vim:set ft=dockerfile:
"
17574,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# explicitly set user/group IDs
"
17575,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17576,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17577,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# grab gosu for easy step-down from root
"
17578,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17579,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17580,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17581,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17582,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
17583,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# arches officialy built by upstream
"
17584,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17585,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17586,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17587,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17588,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17589,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17590,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17591,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17592,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17593,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17594,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17595,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17596,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17597,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile," # backwards compat
"
17598,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17599,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17600,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17601,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
17602,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
17603,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
17604,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17605,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17606,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17607,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17608,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17609,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17610,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17611,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17612,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17613,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17614,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17615,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17616,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17617,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17618,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile," # backwards compat
"
17619,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17620,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17621,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17622,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
17623,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
17624,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
17625,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17626,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17627,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17628,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17629,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17630,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17631,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17632,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17633,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17634,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17635,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17636,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17637,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17638,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17639,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile," # backwards compat
"
17640,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17641,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17642,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
17643,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
17644,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17645,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17646,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17647,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17648,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17649,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17650,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17651,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17652,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17653,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17654,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17655,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile," # backwards compat
"
17656,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17657,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17658,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17659,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
17660,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
17661,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
17662,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17663,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17664,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17665,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17666,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17667,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17668,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17669,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17670,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17671,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17672,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17673,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17674,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17675,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17676,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile," # backwards compat
"
17677,6abeb8590f35c5251b9f100a667024febaeee06b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
17678,6abeb8590f35c5251b9f100a667024febaeee06b,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17679,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
17680,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
17681,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17682,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17683,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17684,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
17685,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
17686,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17687,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17688,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17689,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17690,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17691,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
17692,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17693,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17694,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17695,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
17696,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17697,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#		krb5-dev \
"
17698,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#		openldap-dev \
"
17699,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# configure: error: prove not found
"
17700,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17701,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17702,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17703,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17704,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17705,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17706,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17707,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17708,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17709,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17710,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17711,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17712,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17713,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17714,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile," # backwards compat
"
17715,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17716,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17717,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17718,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#		krb5-dev \
"
17719,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#		openldap-dev \
"
17720,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# configure: error: prove not found
"
17721,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17722,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17723,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17724,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17725,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17726,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17727,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17728,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17729,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17730,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17731,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17732,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17733,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17734,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17735,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile," # backwards compat
"
17736,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17737,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17738,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17739,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
17740,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
17741,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
17742,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17743,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17744,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17745,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17746,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17747,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17748,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17749,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17750,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17751,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17752,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17753,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17754,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17755,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17756,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile," # backwards compat
"
17757,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17758,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17759,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17760,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
17761,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
17762,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
17763,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17764,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17765,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17766,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17767,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17768,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17769,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17770,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17771,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17772,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17773,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17774,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17775,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17776,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17777,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile," # backwards compat
"
17778,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
17779,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,"# explicitly set user/group IDs
"
17780,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
17781,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17782,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17783,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17784,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17785,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17786,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#		krb5-dev \
"
17787,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#		openldap-dev \
"
17788,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# configure: error: prove not found
"
17789,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17790,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17791,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17792,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17793,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17794,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17795,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17796,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17797,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17798,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17799,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17800,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17801,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17802,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17803,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile," # backwards compat
"
17804,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17805,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
17806,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17807,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#		krb5-dev \
"
17808,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#		openldap-dev \
"
17809,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# configure: error: prove not found
"
17810,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17811,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17812,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17813,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17814,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17815,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17816,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17817,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17818,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17819,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17820,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17821,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17822,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17823,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17824,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# vim:set ft=dockerfile:
"
17825,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# explicitly set user/group IDs
"
17826,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17827,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17828,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# grab gosu for easy step-down from root
"
17829,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17830,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17831,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17832,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
17833,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17834,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
17835,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# arches officialy built by upstream
"
17836,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17837,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17838,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17839,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17840,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17841,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17842,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17843,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17844,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17845,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17846,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17847,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
17848,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17849,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile," # backwards compat
"
17850,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
17851,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# explicitly set user/group IDs
"
17852,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
17853,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17854,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17855,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17856,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17857,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# arches officialy built by upstream
"
17858,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17859,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17860,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17861,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17862,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17863,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17864,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17865,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17866,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17867,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17868,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17869,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile," # backwards compat
"
17870,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
17871,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
17872,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
17873,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17874,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17875,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17876,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17877,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
17878,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
17879,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17880,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17881,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17882,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17883,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17884,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17885,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17886,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17887,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
17888,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,"# explicitly set user/group IDs
"
17889,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
17890,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17891,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17892,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17893,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17894,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17895,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#		krb5-dev \
"
17896,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#		openldap-dev \
"
17897,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# configure: error: prove not found
"
17898,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17899,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17900,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17901,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17902,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17903,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17904,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17905,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17906,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17907,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17908,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17909,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17910,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17911,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17912,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17913,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17914,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17915,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
17916,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
17917,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
17918,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17919,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17920,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17921,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17922,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17923,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17924,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17925,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17926,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
17927,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
17928,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
17929,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17930,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
17931,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17932,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile," # backwards compat
"
17933,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# vim:set ft=dockerfile:
"
17934,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# explicitly set user/group IDs
"
17935,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# grab gosu for easy step-down from root
"
17936,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17937,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17938,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17939,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17940,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17941,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17942,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile," # backwards compat
"
17943,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# vim:set ft=dockerfile:
"
17944,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# explicitly set user/group IDs
"
17945,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
17946,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
17947,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# grab gosu for easy step-down from root
"
17948,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17949,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
17950,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
17951,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17952,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
17953,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# arches officialy built by upstream
"
17954,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
17955,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
17956,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
17957,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
17958,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
17959,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
17960,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
17961,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
17962,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
17963,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
17964,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17965,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17966,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17967,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile," # backwards compat
"
17968,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,"# vim:set ft=dockerfile:
"
17969,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,"# explicitly set user/group IDs
"
17970,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,"# grab gosu for easy step-down from root
"
17971,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17972,a7551affea985b86e5119ff36c9eae2f430e38ee,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17973,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
17974,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# explicitly set user/group IDs
"
17975,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
17976,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
17977,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
17978,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
17979,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
17980,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
17981,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
17982,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile," # backwards compat
"
17983,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
17984,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
17985,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
17986,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
17987,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
17988,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
17989,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
17990,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
17991,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
17992,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17993,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
17994,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
17995,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
17996,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
17997,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
17998,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
17999,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18000,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18001,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18002,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18003,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18004,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile," # backwards compat
"
18005,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
18006,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,"# explicitly set user/group IDs
"
18007,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
18008,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18009,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18010,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18011,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18012,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#		krb5-dev \
"
18013,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#		openldap-dev \
"
18014,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18015,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18016,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18017,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18018,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18019,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18020,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18021,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18022,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18023,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18024,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
18025,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
18026,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18027,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18028,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18029,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18030,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18031,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18032,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18033,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18034,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18035,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18036,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18037,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# vim:set ft=dockerfile:
"
18038,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# explicitly set user/group IDs
"
18039,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18040,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18041,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# grab gosu for easy step-down from root
"
18042,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18043,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18044,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18045,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18046,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
18047,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# arches officialy built by upstream
"
18048,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18049,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18050,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18051,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18052,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18053,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18054,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18055,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18056,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18057,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18058,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18059,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18060,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18061,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile," # backwards compat
"
18062,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
18063,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# explicitly set user/group IDs
"
18064,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18065,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18066,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
18067,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18068,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18069,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18070,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18071,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# arches officialy built by upstream
"
18072,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18073,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18074,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18075,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18076,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18077,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18078,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18079,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18080,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18081,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18082,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18083,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile," # backwards compat
"
18084,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
18085,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# explicitly set user/group IDs
"
18086,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18087,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18088,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
18089,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18090,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18091,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18092,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18093,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
18094,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# arches officialy built by upstream
"
18095,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18096,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18097,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18098,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18099,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18100,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18101,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18102,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18103,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18104,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18105,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18106,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18107,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18108,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile," # backwards compat
"
18109,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18110,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18111,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
18112,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
18113,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18114,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18115,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18116,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18117,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18118,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18119,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18120,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18121,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18122,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18123,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18124,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18125,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18126,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
18127,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
18128,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18129,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18130,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18131,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18132,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18133,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18134,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18135,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18136,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# vim:set ft=dockerfile:
"
18137,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# explicitly set user/group IDs
"
18138,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18139,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18140,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
18141,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18142,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18143,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18144,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
18145,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18146,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
18147,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# arches officialy built by upstream
"
18148,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18149,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18150,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18151,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18152,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18153,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18154,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18155,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18156,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18157,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18158,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18159,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18160,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18161,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile," # backwards compat
"
18162,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
18163,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,"# explicitly set user/group IDs
"
18164,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
18165,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18166,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18167,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18168,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18169,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
18170,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
18171,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18172,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18173,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18174,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18175,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18176,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18177,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18178,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18179,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# vim:set ft=dockerfile:
"
18180,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# explicitly set user/group IDs
"
18181,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18182,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18183,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# grab gosu for easy step-down from root
"
18184,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18185,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18186,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18187,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18188,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
18189,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# arches officialy built by upstream
"
18190,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18191,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18192,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18193,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18194,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18195,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18196,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18197,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18198,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18199,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18200,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18201,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18202,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18203,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile," # backwards compat
"
18204,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
18205,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# explicitly set user/group IDs
"
18206,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
18207,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18208,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18209,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18210,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18211,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# arches officialy built by upstream
"
18212,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18213,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18214,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18215,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18216,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18217,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18218,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18219,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18220,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18221,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18222,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18223,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile," # backwards compat
"
18224,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18225,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
18226,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18227,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#		krb5-dev \
"
18228,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#		openldap-dev \
"
18229,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# configure: error: prove not found
"
18230,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18231,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18232,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18233,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18234,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18235,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18236,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18237,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18238,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18239,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18240,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18241,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18242,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18243,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18244,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18245,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
18246,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18247,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#		krb5-dev \
"
18248,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#		openldap-dev \
"
18249,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# configure: error: prove not found
"
18250,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18251,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18252,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18253,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18254,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18255,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18256,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18257,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18258,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18259,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18260,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18261,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18262,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18263,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18264,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile," # backwards compat
"
18265,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
18266,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18267,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
18268,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18269,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18270,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
18271,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# explicitly set user/group IDs
"
18272,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
18273,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18274,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18275,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18276,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18277,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18278,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18279,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18280,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18281,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18282,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18283,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
18284,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
18285,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18286,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18287,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18288,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18289,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18290,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18291,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18292,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18293,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
18294,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18295,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18296,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
18297,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# explicitly set user/group IDs
"
18298,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
18299,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18300,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18301,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# arches officialy built by upstream
"
18302,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18303,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18304,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18305,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18306,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18307,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18308,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18309,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18310,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18311,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18312,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18313,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile," # backwards compat
"
18314,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
18315,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18316,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
18317,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18318,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18319,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# vim:set ft=dockerfile:
"
18320,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# explicitly set user/group IDs
"
18321,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# grab gosu for easy step-down from root
"
18322,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18323,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18324,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18325,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# arches officialy built by upstream
"
18326,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18327,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18328,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18329,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18330,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18331,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18332,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18333,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18334,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18335,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18336,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18337,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile," # backwards compat
"
18338,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18339,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18340,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18341,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#		krb5-dev \
"
18342,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#		openldap-dev \
"
18343,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# configure: error: prove not found
"
18344,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18345,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18346,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18347,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18348,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18349,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18350,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18351,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18352,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18353,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18354,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18355,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18356,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18357,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18358,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile," # backwards compat
"
18359,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
18360,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18361,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"#		krb5-dev \
"
18362,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"#		openldap-dev \
"
18363,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18364,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18365,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18366,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18367,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18368,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18369,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18370,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18371,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
18372,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18373,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18374,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/Dockerfile-alpine.template," # backwards compat
"
18375,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18376,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18377,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18378,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
18379,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
18380,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
18381,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18382,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18383,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18384,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18385,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18386,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18387,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18388,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18389,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18390,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18391,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18392,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18393,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18394,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18395,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile," # backwards compat
"
18396,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18397,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18398,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18399,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
18400,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
18401,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
18402,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18403,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18404,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18405,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18406,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18407,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18408,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18409,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18410,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18411,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18412,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18413,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18414,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18415,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18416,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile," # backwards compat
"
18417,2bfa44dab27b6be46333ac7bf86f2517c1479090,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18418,2bfa44dab27b6be46333ac7bf86f2517c1479090,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18419,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18420,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
18421,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18422,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#		krb5-dev \
"
18423,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#		openldap-dev \
"
18424,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# configure: error: prove not found
"
18425,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18426,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18427,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18428,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18429,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18430,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18431,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18432,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18433,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18434,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18435,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18436,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18437,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18438,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18439,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# vim:set ft=dockerfile:
"
18440,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# explicitly set user/group IDs
"
18441,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# grab gosu for easy step-down from root
"
18442,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18443,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18444,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# arches officialy built by upstream
"
18445,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18446,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18447,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18448,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18449,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18450,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18451,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18452,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18453,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18454,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18455,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18456,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile," # backwards compat
"
18457,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
18458,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18459,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
18460,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18461,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18462,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18463,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18464,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
18465,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
18466,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18467,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18468,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18469,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18470,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18471,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18472,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18473,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18474,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18475,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18476,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18477,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile," # backwards compat
"
18478,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
18479,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,"# explicitly set user/group IDs
"
18480,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
18481,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18482,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18483,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
18484,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18485,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"#		krb5-dev \
"
18486,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"#		openldap-dev \
"
18487,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18488,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18489,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18490,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18491,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18492,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18493,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18494,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18495,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
18496,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18497,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18498,54f46e57136635b484295b985acd6e422d0b9583,/Dockerfile-alpine.template," # backwards compat
"
18499,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
18500,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# explicitly set user/group IDs
"
18501,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
18502,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18503,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18504,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18505,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18506,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18507,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18508,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile," # backwards compat
"
18509,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18510,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18511,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18512,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
18513,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
18514,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
18515,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18516,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18517,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18518,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18519,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18520,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18521,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18522,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18523,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18524,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18525,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18526,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18527,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18528,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18529,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile," # backwards compat
"
18530,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18531,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18532,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18533,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
18534,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
18535,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
18536,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18537,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18538,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18539,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18540,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18541,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18542,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18543,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18544,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18545,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18546,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18547,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18548,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18549,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile," # backwards compat
"
18550,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18551,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
18552,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18553,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
18554,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
18555,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
18556,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18557,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18558,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18559,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18560,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18561,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18562,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18563,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18564,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18565,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18566,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18567,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18568,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18569,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18570,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile," # backwards compat
"
18571,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18572,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18573,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18574,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#		krb5-dev \
"
18575,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#		openldap-dev \
"
18576,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# configure: error: prove not found
"
18577,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18578,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18579,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18580,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18581,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18582,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18583,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18584,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18585,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18586,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18587,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18588,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18589,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18590,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18591,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile," # backwards compat
"
18592,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18593,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18594,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18595,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
18596,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
18597,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18598,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18599,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18600,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18601,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18602,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18603,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18604,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18605,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18606,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18607,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18608,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile," # backwards compat
"
18609,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18610,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18611,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
18612,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
18613,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18614,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18615,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18616,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18617,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18618,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
18619,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
18620,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18621,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#		krb5-dev \
"
18622,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#		openldap-dev \
"
18623,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# configure: error: prove not found
"
18624,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18625,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18626,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18627,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18628,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18629,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18630,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18631,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18632,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18633,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
18634,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18635,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
18636,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18637,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18638,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/Dockerfile-alpine.template," # backwards compat
"
18639,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
18640,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
18641,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18642,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18643,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
18644,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18645,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18646,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18647,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18648,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
18649,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# arches officialy built by upstream
"
18650,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18651,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18652,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18653,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18654,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18655,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18656,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18657,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18658,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18659,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18660,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
18661,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18662,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18663,59e5a640e9d4896f5d35261fc69402f2f174833b,/Dockerfile-debian.template," # backwards compat
"
18664,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,"# vim:set ft=dockerfile:
"
18665,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18666,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,"# grab gosu for easy step-down from root
"
18667,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18668,63d966973d9593c0d9890b96f10ac73566913520,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18669,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18670,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18671,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18672,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
18673,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
18674,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# configure: error: prove not found
"
18675,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18676,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18677,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
18678,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18679,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18680,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18681,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18682,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18683,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18684,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18685,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18686,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18687,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18688,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18689,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18690,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18691,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile," # backwards compat
"
18692,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
18693,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# explicitly set user/group IDs
"
18694,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18695,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18696,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
18697,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18698,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18699,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18700,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18701,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
18702,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# arches officialy built by upstream
"
18703,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18704,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18705,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18706,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18707,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18708,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18709,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18710,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18711,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18712,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18713,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18714,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18715,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18716,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile," # backwards compat
"
18717,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18718,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
18719,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18720,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#		krb5-dev \
"
18721,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#		openldap-dev \
"
18722,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# configure: error: prove not found
"
18723,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18724,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18725,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18726,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18727,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18728,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18729,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18730,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18731,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18732,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18733,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18734,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18735,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18736,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18737,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# vim:set ft=dockerfile:
"
18738,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# explicitly set user/group IDs
"
18739,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18740,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18741,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# grab gosu for easy step-down from root
"
18742,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18743,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18744,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18745,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18746,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# arches officialy built by upstream
"
18747,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18748,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18749,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18750,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18751,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18752,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18753,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18754,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18755,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18756,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18757,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18758,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile," # backwards compat
"
18759,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
18760,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# explicitly set user/group IDs
"
18761,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
18762,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18763,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18764,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# arches officialy built by upstream
"
18765,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18766,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18767,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18768,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18769,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18770,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18771,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18772,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18773,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18774,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18775,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18776,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile," # backwards compat
"
18777,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
18778,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
18779,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
18780,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18781,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18782,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18783,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
18784,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18785,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18786,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
18787,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18788,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
18789,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18790,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18791,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# vim:set ft=dockerfile:
"
18792,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# explicitly set user/group IDs
"
18793,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18794,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18795,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# grab gosu for easy step-down from root
"
18796,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18797,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18798,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18799,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18800,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
18801,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# arches officialy built by upstream
"
18802,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18803,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18804,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18805,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18806,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18807,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18808,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18809,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18810,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18811,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18812,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18813,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18814,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18815,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile," # backwards compat
"
18816,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# vim:set ft=dockerfile:
"
18817,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# explicitly set user/group IDs
"
18818,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18819,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18820,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# grab gosu for easy step-down from root
"
18821,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18822,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18823,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18824,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
18825,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18826,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
18827,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# arches officialy built by upstream
"
18828,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18829,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18830,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18831,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18832,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18833,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18834,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18835,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18836,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18837,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18838,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18839,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18840,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18841,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile," # backwards compat
"
18842,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18843,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18844,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
18845,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
18846,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18847,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18848,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18849,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18850,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18851,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18852,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18853,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18854,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
18855,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# explicitly set user/group IDs
"
18856,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18857,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18858,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
18859,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18860,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18861,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18862,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18863,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
18864,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# arches officialy built by upstream
"
18865,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18866,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18867,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18868,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18869,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18870,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18871,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18872,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18873,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18874,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18875,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18876,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18877,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18878,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile," # backwards compat
"
18879,e2971da001b64a54b4a971ecc83ad9a86ad25387,/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
18880,e2971da001b64a54b4a971ecc83ad9a86ad25387,/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18881,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
18882,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
18883,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18884,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#		krb5-dev \
"
18885,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#		openldap-dev \
"
18886,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# configure: error: prove not found
"
18887,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18888,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18889,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18890,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18891,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18892,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18893,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18894,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18895,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18896,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
18897,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18898,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
18899,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18900,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18901,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/Dockerfile-alpine.template," # backwards compat
"
18902,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
18903,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
18904,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
18905,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
18906,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
18907,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
18908,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
18909,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
18910,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
18911,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
18912,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
18913,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
18914,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
18915,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
18916,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
18917,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
18918,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
18919,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18920,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
18921,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18922,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile," # backwards compat
"
18923,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
18924,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,"# explicitly set user/group IDs
"
18925,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
18926,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18927,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18928,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
18929,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# explicitly set user/group IDs
"
18930,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
18931,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18932,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18933,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18934,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# arches officialy built by upstream
"
18935,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18936,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18937,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18938,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18939,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18940,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18941,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18942,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18943,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18944,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18945,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18946,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile," # backwards compat
"
18947,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
18948,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# explicitly set user/group IDs
"
18949,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18950,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18951,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
18952,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18953,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18954,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
18955,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
18956,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
18957,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
18958,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# arches officialy built by upstream
"
18959,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
18960,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
18961,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
18962,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
18963,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
18964,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
18965,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
18966,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
18967,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
18968,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
18969,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18970,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
18971,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
18972,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile," # backwards compat
"
18973,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
18974,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"# explicitly set user/group IDs
"
18975,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
18976,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18977,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18978,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18979,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18980,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
18981,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# explicitly set user/group IDs
"
18982,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
18983,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18984,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18985,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
18986,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
18987,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
18988,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,"# explicitly set user/group IDs
"
18989,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
18990,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18991,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
18992,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
18993,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# explicitly set user/group IDs
"
18994,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
18995,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
18996,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
18997,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
18998,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
18999,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19000,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19001,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# see note below about ""*.pyc"" files
"
19002,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# arches officialy built by upstream
"
19003,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19004,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19005,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19006,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19007,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19008,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19009,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19010,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19011,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19012,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19013,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19014,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
19015,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19016,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile," # backwards compat
"
19017,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
19018,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# explicitly set user/group IDs
"
19019,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
19020,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
19021,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
19022,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19023,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19024,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19025,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19026,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# see note below about ""*.pyc"" files
"
19027,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# arches officialy built by upstream
"
19028,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19029,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19030,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19031,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19032,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19033,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19034,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19035,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19036,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19037,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19038,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19039,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
19040,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19041,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile," # backwards compat
"
19042,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# vim:set ft=dockerfile:
"
19043,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# explicitly set user/group IDs
"
19044,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# grab gosu for easy step-down from root
"
19045,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19046,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19047,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19048,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19049,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19050,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19051,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile," # backwards compat
"
19052,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
19053,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# explicitly set user/group IDs
"
19054,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
19055,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
19056,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
19057,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19058,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19059,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19060,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19061,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# see note below about ""*.pyc"" files
"
19062,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# arches officialy built by upstream
"
19063,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19064,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19065,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19066,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19067,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19068,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19069,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19070,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19071,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19072,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19073,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19074,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19075,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19076,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile," # backwards compat
"
19077,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19078,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19079,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19080,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
19081,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
19082,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
19083,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19084,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19085,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19086,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19087,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19088,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19089,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19090,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19091,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19092,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19093,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19094,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19095,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19096,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19097,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile," # backwards compat
"
19098,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
19099,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
19100,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
19101,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19102,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19103,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# arches officialy built by upstream
"
19104,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19105,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19106,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19107,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19108,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19109,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19110,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19111,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19112,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
19113,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19114,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19115,57213ab012e6a38a27283eeac65c4726c069647a,/Dockerfile-debian.template," # backwards compat
"
19116,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# vim:set ft=dockerfile:
"
19117,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# explicitly set user/group IDs
"
19118,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# grab gosu for easy step-down from root
"
19119,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19120,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19121,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19122,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19123,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# arches officialy built by upstream
"
19124,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19125,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19126,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19127,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19128,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19129,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19130,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19131,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19132,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19133,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19134,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19135,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile," # backwards compat
"
19136,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19137,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
19138,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19139,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#		krb5-dev \
"
19140,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#		openldap-dev \
"
19141,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# configure: error: prove not found
"
19142,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19143,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19144,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19145,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19146,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19147,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19148,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19149,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19150,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19151,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19152,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19153,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19154,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19155,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19156,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19157,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19158,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19159,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#		krb5-dev \
"
19160,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#		openldap-dev \
"
19161,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# configure: error: prove not found
"
19162,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19163,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19164,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19165,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19166,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19167,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19168,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19169,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19170,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19171,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19172,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19173,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19174,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19175,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19176,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile," # backwards compat
"
19177,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
19178,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# explicitly set user/group IDs
"
19179,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
19180,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19181,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19182,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19183,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19184,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19185,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19186,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile," # backwards compat
"
19187,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19188,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
19189,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19190,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
19191,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
19192,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
19193,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19194,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19195,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19196,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19197,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19198,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19199,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19200,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19201,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19202,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19203,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19204,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19205,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19206,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19207,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile," # backwards compat
"
19208,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19209,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19210,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19211,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
19212,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
19213,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
19214,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19215,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19216,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19217,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19218,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19219,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19220,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19221,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19222,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19223,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19224,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19225,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19226,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19227,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19228,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile," # backwards compat
"
19229,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19230,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19231,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
19232,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
19233,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19234,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19235,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19236,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19237,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19238,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19239,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19240,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19241,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19242,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19243,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
19244,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# explicitly set user/group IDs
"
19245,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
19246,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19247,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19248,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19249,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19250,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19251,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19252,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile," # backwards compat
"
19253,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19254,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
19255,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19256,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
19257,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
19258,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
19259,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19260,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19261,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19262,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19263,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19264,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19265,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19266,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19267,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19268,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19269,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19270,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19271,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19272,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19273,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile," # backwards compat
"
19274,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19275,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19276,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19277,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
19278,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
19279,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
19280,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19281,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19282,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19283,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19284,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19285,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19286,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19287,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19288,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19289,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19290,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19291,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19292,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19293,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19294,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile," # backwards compat
"
19295,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
19296,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# explicitly set user/group IDs
"
19297,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
19298,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19299,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19300,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19301,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19302,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19303,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19304,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile," # backwards compat
"
19305,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
19306,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# explicitly set user/group IDs
"
19307,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
19308,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19309,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19310,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# arches officialy built by upstream
"
19311,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19312,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19313,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19314,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19315,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19316,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19317,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19318,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19319,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19320,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19321,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19322,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile," # backwards compat
"
19323,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19324,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19325,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
19326,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
19327,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19328,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19329,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19330,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19331,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19332,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1
"
19333,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19334,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19335,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19336,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable
"
19337,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19338,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#		krb5-dev \
"
19339,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#		openldap-dev \
"
19340,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# configure: error: prove not found
"
19341,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19342,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19343,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19344,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19345,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19346,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19347,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19348,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19349,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19350,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19351,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19352,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19353,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19354,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19355,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile," # backwards compat
"
19356,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,"# vim:set ft=dockerfile:
"
19357,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,"# explicitly set user/group IDs
"
19358,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,"# grab gosu for easy step-down from root
"
19359,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19360,fc014b79c32b82e042f281b03b0eeeb6c4fab4a5,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19361,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
19362,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# explicitly set user/group IDs
"
19363,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
19364,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19365,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19366,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19367,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19368,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19369,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
19370,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
19371,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19372,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
19373,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19374,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19375,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"#		krb5-dev \
"
19376,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"#		openldap-dev \
"
19377,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# configure: error: prove not found
"
19378,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19379,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19380,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19381,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19382,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19383,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19384,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19385,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19386,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19387,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19388,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
19389,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19390,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19391,466a61bac6997c368be02dff5eb43673c4ce3fa9,/Dockerfile-alpine.template," # backwards compat
"
19392,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
19393,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# explicitly set user/group IDs
"
19394,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
19395,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19396,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19397,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19398,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# arches officialy built by upstream
"
19399,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19400,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19401,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19402,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19403,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19404,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19405,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19406,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19407,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19408,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19409,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19410,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile," # backwards compat
"
19411,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
19412,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# explicitly set user/group IDs
"
19413,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
19414,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19415,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19416,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19417,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# arches officialy built by upstream
"
19418,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19419,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19420,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19421,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19422,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19423,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19424,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19425,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19426,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19427,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19428,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19429,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile," # backwards compat
"
19430,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
19431,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19432,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19433,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#		krb5-dev \
"
19434,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#		openldap-dev \
"
19435,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# configure: error: prove not found
"
19436,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19437,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19438,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19439,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19440,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19441,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19442,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19443,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19444,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19445,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#p' --recursive /usr/local \
"
19446,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19447,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
19448,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19449,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19450,81a7cf454df3564035f66936839c7c3b29ae26ea,/Dockerfile-alpine.template," # backwards compat
"
19451,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
19452,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,"# explicitly set user/group IDs
"
19453,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
19454,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19455,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19456,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
19457,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
19458,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
19459,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19460,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19461,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# vim:set ft=dockerfile:
"
19462,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# explicitly set user/group IDs
"
19463,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# grab gosu for easy step-down from root
"
19464,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19465,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19466,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19467,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19468,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19469,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19470,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19471,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#		krb5-dev \
"
19472,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#		openldap-dev \
"
19473,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# configure: error: prove not found
"
19474,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19475,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19476,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19477,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19478,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19479,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19480,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19481,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19482,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19483,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19484,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19485,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19486,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19487,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19488,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile," # backwards compat
"
19489,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
19490,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,"# explicitly set user/group IDs
"
19491,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
19492,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19493,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19494,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
19495,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
19496,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
19497,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19498,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19499,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19500,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
19501,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19502,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#		krb5-dev \
"
19503,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#		openldap-dev \
"
19504,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# configure: error: prove not found
"
19505,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19506,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19507,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19508,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19509,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19510,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19511,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19512,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19513,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19514,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19515,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19516,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19517,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19518,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19519,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile," # backwards compat
"
19520,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
19521,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# explicitly set user/group IDs
"
19522,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
19523,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
19524,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
19525,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19526,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19527,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19528,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19529,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# see note below about ""*.pyc"" files
"
19530,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# arches officialy built by upstream
"
19531,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19532,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19533,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19534,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19535,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19536,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19537,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19538,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19539,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19540,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19541,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19542,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19543,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19544,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile," # backwards compat
"
19545,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
19546,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# explicitly set user/group IDs
"
19547,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
19548,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19549,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19550,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19551,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19552,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19553,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19554,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
19555,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
19556,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19557,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19558,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19559,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19560,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19561,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \
"
19562,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19563,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19564,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
19565,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# explicitly set user/group IDs
"
19566,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
19567,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
19568,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
19569,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19570,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19571,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19572,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19573,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# see note below about ""*.pyc"" files
"
19574,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# arches officialy built by upstream
"
19575,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19576,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19577,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19578,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19579,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19580,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19581,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19582,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19583,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19584,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19585,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19586,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19587,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19588,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile," # backwards compat
"
19589,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19590,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19591,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19592,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
19593,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
19594,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
19595,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19596,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19597,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19598,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19599,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19600,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19601,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19602,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19603,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19604,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19605,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19606,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19607,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19608,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19609,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile," # backwards compat
"
19610,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/Dockerfile.template,"# vim:set ft=dockerfile:
"
19611,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/Dockerfile.template,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
19612,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/Dockerfile.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19613,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19614,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
19615,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19616,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
19617,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
19618,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
19619,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19620,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19621,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19622,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19623,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19624,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19625,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19626,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19627,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19628,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19629,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19630,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19631,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19632,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19633,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile," # backwards compat
"
19634,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
19635,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# explicitly set user/group IDs
"
19636,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
19637,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19638,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19639,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19640,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19641,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# arches officialy built by upstream
"
19642,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19643,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19644,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19645,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19646,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19647,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19648,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19649,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19650,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19651,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19652,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19653,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile," # backwards compat
"
19654,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
19655,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# explicitly set user/group IDs
"
19656,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
19657,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19658,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19659,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# arches officialy built by upstream
"
19660,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19661,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19662,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19663,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19664,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19665,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19666,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19667,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19668,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19669,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19670,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19671,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile," # backwards compat
"
19672,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# vim:set ft=dockerfile:
"
19673,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# explicitly set user/group IDs
"
19674,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
19675,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
19676,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# grab gosu for easy step-down from root
"
19677,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19678,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19679,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19680,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19681,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
19682,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# arches officialy built by upstream
"
19683,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19684,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19685,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19686,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19687,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19688,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19689,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19690,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19691,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19692,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19693,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19694,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19695,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19696,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile," # backwards compat
"
19697,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19698,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19699,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19700,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
19701,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
19702,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
19703,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19704,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19705,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19706,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19707,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19708,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19709,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19710,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19711,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19712,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19713,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19714,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19715,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile," # backwards compat
"
19716,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# vim:set ft=dockerfile:
"
19717,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# explicitly set user/group IDs
"
19718,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
19719,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
19720,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# grab gosu for easy step-down from root
"
19721,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19722,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19723,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19724,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19725,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
19726,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# arches officialy built by upstream
"
19727,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19728,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19729,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19730,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19731,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19732,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19733,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19734,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19735,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19736,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19737,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19738,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
19739,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19740,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile," # backwards compat
"
19741,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19742,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
19743,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19744,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#		krb5-dev \
"
19745,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#		openldap-dev \
"
19746,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# configure: error: prove not found
"
19747,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19748,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19749,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19750,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19751,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19752,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19753,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19754,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19755,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19756,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19757,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19758,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19759,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19760,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19761,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19762,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19763,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19764,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#		krb5-dev \
"
19765,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#		openldap-dev \
"
19766,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# configure: error: prove not found
"
19767,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19768,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19769,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19770,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19771,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19772,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19773,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19774,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19775,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19776,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19777,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19778,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19779,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19780,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19781,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# vim:set ft=dockerfile:
"
19782,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# explicitly set user/group IDs
"
19783,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
19784,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
19785,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# grab gosu for easy step-down from root
"
19786,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19787,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19788,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19789,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19790,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# see note below about ""*.pyc"" files
"
19791,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# arches officialy built by upstream
"
19792,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19793,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19794,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19795,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19796,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19797,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19798,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19799,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19800,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19801,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19802,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19803,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
19804,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19805,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile," # backwards compat
"
19806,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19807,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19808,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
19809,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
19810,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19811,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19812,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19813,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19814,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19815,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19816,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19817,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19818,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19819,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19820,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19821,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile," # backwards compat
"
19822,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19823,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19824,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19825,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#		krb5-dev \
"
19826,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#		openldap-dev \
"
19827,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# configure: error: prove not found
"
19828,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19829,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19830,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19831,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19832,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19833,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19834,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19835,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19836,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19837,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19838,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19839,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19840,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19841,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19842,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile," # backwards compat
"
19843,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19844,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19845,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19846,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
19847,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
19848,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19849,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19850,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19851,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19852,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19853,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19854,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19855,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19856,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19857,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19858,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19859,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19860,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile," # backwards compat
"
19861,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
19862,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# explicitly set user/group IDs
"
19863,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
19864,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19865,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19866,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19867,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19868,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19869,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19870,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile," # backwards compat
"
19871,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
19872,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,"# explicitly set user/group IDs
"
19873,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
19874,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19875,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19876,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
19877,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
19878,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
19879,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19880,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19881,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
19882,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
19883,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
19884,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19885,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19886,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19887,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
19888,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19889,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
19890,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
19891,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
19892,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19893,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19894,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19895,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19896,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19897,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19898,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19899,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19900,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19901,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19902,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19903,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19904,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19905,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19906,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile," # backwards compat
"
19907,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19908,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19909,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19910,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#		krb5-dev \
"
19911,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#		openldap-dev \
"
19912,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# configure: error: prove not found
"
19913,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19914,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19915,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19916,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19917,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19918,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19919,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19920,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19921,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19922,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19923,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19924,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19925,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19926,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19927,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile," # backwards compat
"
19928,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# vim:set ft=dockerfile:
"
19929,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# explicitly set user/group IDs
"
19930,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
19931,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
19932,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# grab gosu for easy step-down from root
"
19933,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19934,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
19935,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
19936,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19937,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# see note below about ""*.pyc"" files
"
19938,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# arches officialy built by upstream
"
19939,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
19940,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
19941,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
19942,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
19943,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
19944,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
19945,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
19946,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
19947,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
19948,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
19949,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19950,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
19951,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19952,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile," # backwards compat
"
19953,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
19954,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,"# explicitly set user/group IDs
"
19955,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
19956,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19957,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19958,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19959,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19960,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19961,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#		krb5-dev \
"
19962,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#		openldap-dev \
"
19963,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# configure: error: prove not found
"
19964,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19965,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19966,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19967,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19968,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
19969,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
19970,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
19971,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
19972,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
19973,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#p' --recursive /usr/local \
"
19974,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
19975,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19976,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
19977,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
19978,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile," # backwards compat
"
19979,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
19980,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# explicitly set user/group IDs
"
19981,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
19982,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
19983,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
19984,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19985,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
19986,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
19987,415b445c37de1d70cf6a669bd48b915952561f7d,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
19988,415b445c37de1d70cf6a669bd48b915952561f7d,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
19989,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
19990,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
19991,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
19992,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
19993,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
19994,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
19995,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
19996,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
19997,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
19998,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
19999,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20000,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20001,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20002,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20003,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20004,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
20005,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20006,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20007,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20008,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20009,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile," # backwards compat
"
20010,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20011,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20012,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20013,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#		krb5-dev \
"
20014,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#		openldap-dev \
"
20015,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20016,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details
"
20017,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20018,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20019,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20020,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20021,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20022,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20023,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20024,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20025,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20026,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20027,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20028,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20029,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile," # backwards compat
"
20030,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
20031,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20032,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20033,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20034,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20035,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
20036,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
20037,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20038,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20039,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20040,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20041,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20042,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20043,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20044,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20045,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20046,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20047,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20048,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20049,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile," # backwards compat
"
20050,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20051,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20052,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20053,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
20054,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
20055,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
20056,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
20057,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20058,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20059,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20060,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20061,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20062,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20063,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20064,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20065,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
20066,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20067,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20068,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20069,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20070,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile," # backwards compat
"
20071,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# vim:set ft=dockerfile:
"
20072,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# explicitly set user/group IDs
"
20073,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
20074,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
20075,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases
"
20076,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20077,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
20078,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
20079,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
20080,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20081,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# see note below about ""*.pyc"" files
"
20082,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# arches officialy built by upstream
"
20083,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
20084,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
20085,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
20086,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417
"
20087,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
20088,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
20089,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
20090,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
20091,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
20092,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
20093,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
20094,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20095,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
20096,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20097,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile," # backwards compat
"
20098,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20099,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20100,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20101,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
20102,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
20103,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
20104,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
20105,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20106,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20107,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20108,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20109,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20110,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20111,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20112,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20113,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
20114,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20115,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20116,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20117,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20118,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile," # backwards compat
"
20119,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20120,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable
"
20121,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20122,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
20123,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
20124,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# configure: error: prove not found
"
20125,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
20126,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20127,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20128,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20129,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20130,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20131,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20132,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20133,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20134,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#p' --recursive /usr/local \
"
20135,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20136,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20137,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20138,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20139,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile," # backwards compat
"
20140,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20141,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20142,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20143,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
20144,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
20145,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
20146,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
20147,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20148,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20149,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20150,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20151,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20152,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20153,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20154,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20155,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
20156,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20157,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20158,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20159,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20160,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile," # backwards compat
"
20161,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
20162,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# explicitly set user/group IDs
"
20163,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
20164,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
20165,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
20166,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20167,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
20168,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
20169,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
20170,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20171,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
20172,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# arches officialy built by upstream
"
20173,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
20174,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
20175,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
20176,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
20177,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
20178,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
20179,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
20180,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
20181,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
20182,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
20183,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20184,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
20185,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20186,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile," # backwards compat
"
20187,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# vim:set ft=dockerfile:
"
20188,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20189,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20190,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"#		krb5-dev \
"
20191,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"#		openldap-dev \
"
20192,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20193,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20194,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20195,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20196,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20197,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20198,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20199,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20200,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20201,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"# make the sample config easier to munge (and ""correct by default"")
"
20202,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20203,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20204,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/Dockerfile-alpine.template," # backwards compat
"
20205,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20206,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20207,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20208,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
20209,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
20210,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20211,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20212,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20213,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20214,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20215,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20216,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20217,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20218,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20219,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20220,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20221,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile," # backwards compat
"
20222,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# vim:set ft=dockerfile:
"
20223,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# explicitly set user/group IDs
"
20224,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
20225,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
20226,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# grab gosu for easy step-down from root
"
20227,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20228,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
20229,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
20230,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
20231,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20232,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# see note below about ""*.pyc"" files
"
20233,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# arches officialy built by upstream
"
20234,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
20235,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
20236,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
20237,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
20238,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
20239,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
20240,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
20241,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
20242,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
20243,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
20244,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20245,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
20246,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20247,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile," # backwards compat
"
20248,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
20249,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# explicitly set user/group IDs
"
20250,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
20251,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20252,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20253,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20254,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20255,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
20256,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# vim:set ft=dockerfile:
"
20257,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
20258,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# grab gosu for easy step-down from root
"
20259,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20260,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20261,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20262,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:

# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20263,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#		krb5-dev \
"
20264,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#		openldap-dev \
"
20265,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20266,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20267,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20268,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20269,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20270,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20271,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20272,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20273,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20274,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20275,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20276,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile," # backwards compat
"
20277,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# vim:set ft=dockerfile:
"
20278,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# explicitly set user/group IDs
"
20279,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# grab gosu for easy step-down from root
"
20280,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20281,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20282,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20283,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
20284,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# vim:set ft=dockerfile:
"
20285,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
20286,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# grab gosu for easy step-down from root
"
20287,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20288,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20289,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
20290,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# explicitly set user/group IDs
"
20291,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
20292,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20293,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20294,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20295,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
20296,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
20297,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
20298,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
20299,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20300,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20301,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# vim:set ft=dockerfile:
"
20302,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
20303,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# grab gosu for easy step-down from root
"
20304,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20305,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20306,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20307,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20308,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20309,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#		krb5-dev \
"
20310,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#		openldap-dev \
"
20311,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# configure: error: prove not found
"
20312,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
20313,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20314,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20315,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20316,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20317,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20318,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20319,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20320,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20321,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#p' --recursive /usr/local \
"
20322,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20323,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20324,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20325,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20326,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile," # backwards compat
"
20327,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20328,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20329,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20330,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#		krb5-dev \
"
20331,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#		openldap-dev \
"
20332,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# configure: error: prove not found
"
20333,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
20334,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20335,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20336,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20337,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20338,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20339,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20340,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20341,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20342,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#p' --recursive /usr/local \
"
20343,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20344,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20345,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20346,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20347,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile," # backwards compat
"
20348,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20349,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20350,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20351,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
20352,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
20353,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
20354,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
20355,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20356,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20357,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20358,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20359,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20360,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20361,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20362,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20363,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20364,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20365,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20366,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20367,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile," # backwards compat
"
20368,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
20369,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# explicitly set user/group IDs
"
20370,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
20371,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20372,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20373,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# arches officialy built by upstream
"
20374,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
20375,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
20376,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
20377,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
20378,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
20379,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
20380,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
20381,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
20382,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20383,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
20384,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20385,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile," # backwards compat
"
20386,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# vim:set ft=dockerfile:
"
20387,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274
"
20388,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# su-exec (gosu-compatible) is installed further down

# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation
"
20389,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#		krb5-dev \
"
20390,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#		openldap-dev \
"
20391,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# configure: error: prove not found
"
20392,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# configure: error: Perl module IPC::Run is required to run TAP tests
"
20393,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \
"
20394,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f
"
20395,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \
"
20396,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
"
20397,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5
"
20398,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \
"
20399,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \
"
20400,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \
"
20401,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#p' --recursive /usr/local \
"
20402,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration
"
20403,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20404,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample

"
20405,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20406,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile," # backwards compat
"
20407,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# vim:set ft=dockerfile:
"
20408,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# explicitly set user/group IDs
"
20409,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# grab gosu for easy step-down from root
"
20410,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20411,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
20412,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
20413,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20414,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# arches officialy built by upstream
"
20415,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
20416,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
20417,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
20418,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
20419,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
20420,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
20421,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
20422,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
20423,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20424,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
20425,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20426,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile," # backwards compat
"
20427,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
20428,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# explicitly set user/group IDs
"
20429,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
20430,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20431,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20432,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20433,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20434,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
20435,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20436,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile," # backwards compat
"
20437,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
20438,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
20439,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
20440,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
20441,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
20442,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20443,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
20444,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
20445,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20446,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# arches officialy built by upstream
"
20447,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
20448,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
20449,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
20450,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
20451,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
20452,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
20453,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
20454,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
20455,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
20456,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample

"
20457,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20458,726128b358cdc0efc1753475bbe502b07cbbb540,/Dockerfile-debian.template," # backwards compat
"
20459,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# vim:set ft=dockerfile:
"
20460,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added
"
20461,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# grab gosu for easy step-down from root
"
20462,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20463,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
"
20464,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# vim:set ft=dockerfile:
"
20465,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# explicitly set user/group IDs
"
20466,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
20467,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
20468,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# grab gosu for easy step-down from root
"
20469,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20470,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
20471,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
20472,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20473,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# see note below about ""*.pyc"" files
"
20474,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# arches officialy built by upstream
"
20475,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
20476,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
20477,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
20478,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# we don't remove APT lists here because they get re-downloaded and removed later
"
20479,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
20480,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
20481,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
20482,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
20483,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
20484,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
20485,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")
"
20486,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
20487,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20488,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile," # backwards compat
"
20489,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# vim:set ft=dockerfile:
"
20490,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# explicitly set user/group IDs
"
20491,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
"
20492,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274
"
20493,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# grab gosu for easy step-down from root
"
20494,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
"
20495,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)
"
20496,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html
"
20497,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files
"
20498,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository
"
20499,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# see note below about ""*.pyc"" files
"
20500,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# arches officialy built by upstream
"
20501,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages
"
20502,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+
"
20503,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# build .deb files from upstream's source packages (which are verified by apt-get)
"
20504,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# we don't remove APT lists here because they get re-downloaded and removed later
"
20505,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)
"
20506,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)
"
20507,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
"
20508,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
"
20509,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)
"
20510,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)
"
20511,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# make the sample config easier to munge (and ""correct by default"")
"
20512,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \
"
20513,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)
"
20514,72d7408ad3b57ab1a5c371e11460811551811bf5,/Dockerfile-debian.template," # backwards compat
"
