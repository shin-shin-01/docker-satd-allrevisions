,CommitID,Dockerfile,Comment
0,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# explicitly set user/group IDs
#RUN adduser -S -G postgres -u 999 postgres"
2,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3,442a92590b7f22d3ab6b2ebdbf0217c1554541c5,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#		krb5-dev \
9,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#		openldap-dev \
10,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# configure: error: prove not found
11,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
19,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
20,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
21,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
22,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
23,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
24,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
25,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
26,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
27,40158e3e1eab19a8faceef3f31c50869c964223c,/9.3/alpine/Dockerfile, # backwards compat
28,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# vim:set ft=dockerfile:
29,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# explicitly set user/group IDs
30,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
31,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
32,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# grab gosu for easy step-down from root
33,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
34,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
35,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
36,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
37,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# see note below about ""*.pyc"" files"
38,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# arches officialy built by upstream
39,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
40,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
41,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
42,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
43,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
44,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
45,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
46,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
47,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
48,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
49,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
50,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
51,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
52,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/Dockerfile, # backwards compat
53,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
54,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
55,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
56,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
57,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#		krb5-dev \
58,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#		openldap-dev \
59,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# configure: error: prove not found
60,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
61,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
62,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
63,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
64,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
65,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
66,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
67,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
68,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
69,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
70,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
71,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
72,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
73,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
74,5a690fbbe0f256b916a01afee293e8b2dfd3ad8d,/9.5/alpine/Dockerfile, # backwards compat
75,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
76,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
77,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
78,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
79,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,#		krb5-dev \
80,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,#		openldap-dev \
81,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
82,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
83,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
84,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
85,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
86,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
87,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
88,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
89,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
90,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
91,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
92,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
93,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
94,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
95,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.2/alpine/Dockerfile, # backwards compat
96,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
97,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
98,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
99,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
100,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#		krb5-dev \
101,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#		openldap-dev \
102,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# configure: error: prove not found
103,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
104,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
105,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
106,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
107,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
108,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
109,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
110,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
111,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
112,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
113,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
114,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
115,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
116,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
117,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
118,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
119,4955a99b600fa0badb1e707285617a23315421af,/9.3/alpine/Dockerfile, # backwards compat
120,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
121,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
122,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
123,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
124,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#		krb5-dev \
125,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#		openldap-dev \
126,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# configure: error: prove not found
127,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
128,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
129,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
130,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
131,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
132,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
133,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
134,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
135,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
136,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
137,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
138,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
139,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
140,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
141,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.6/alpine/Dockerfile, # backwards compat
142,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# vim:set ft=dockerfile:
143,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# explicitly set user/group IDs
144,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
145,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
146,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# grab gosu for easy step-down from root
147,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
148,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
149,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
150,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
151,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
152,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# arches officialy built by upstream
153,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
154,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
155,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
156,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
157,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
158,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
159,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
160,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
161,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
162,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
163,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
164,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
165,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
166,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.3/Dockerfile, # backwards compat
167,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# vim:set ft=dockerfile:
168,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# explicitly set user/group IDs
169,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,# grab gosu for easy step-down from root
170,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
171,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
172,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
173,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
174,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
175,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
176,972294a377463156c8d61297320c872fc7d370a9,/9.6/Dockerfile, # backwards compat
177,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,# vim:set ft=dockerfile:
178,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
179,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,# grab gosu for easy step-down from root
180,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
181,40cfe262061b4da708f1d5e9f5b7c69b5568d0e2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
182,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# vim:set ft=dockerfile:
183,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# explicitly set user/group IDs
184,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# grab gosu for easy step-down from root
185,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
186,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
187,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# arches officialy built by upstream
188,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
189,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
190,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
191,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
192,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
193,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
194,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
195,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
196,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
197,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
198,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
199,d8ce07a1e97e7caa1436a341ae7a2b06efb852dc,/9.3/Dockerfile, # backwards compat
200,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# vim:set ft=dockerfile:
201,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# explicitly set user/group IDs
202,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
203,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
204,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# grab gosu for easy step-down from root
205,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
206,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
207,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
208,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
209,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# see note below about ""*.pyc"" files"
210,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# arches officialy built by upstream
211,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
212,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
213,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
214,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
215,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
216,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
217,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
218,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
219,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
220,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
221,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
222,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
223,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
224,058c5c951f6870c538cb2039e93275bee242d373,/12/Dockerfile, # backwards compat
225,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# vim:set ft=dockerfile:
226,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# explicitly set user/group IDs
227,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# grab gosu for easy step-down from root
228,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
229,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
230,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# arches officialy built by upstream
231,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
232,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
233,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
234,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
235,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
236,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
237,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
238,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
239,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
240,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
241,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
242,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/Dockerfile, # backwards compat
243,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,# vim:set ft=dockerfile:
244,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
245,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,# grab gosu for easy step-down from root
246,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
247,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
248,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,# vim:set ft=dockerfile:
249,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,# explicitly set user/group IDs
250,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
251,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
252,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,# grab gosu for easy step-down from root
253,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
254,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
255,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
256,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
257,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
258,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,# arches officialy built by upstream
259,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
260,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
261,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
262,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
263,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
264,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
265,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
266,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
267,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
268,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
269,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
270,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
271,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
272,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/Dockerfile, # backwards compat
273,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
274,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
275,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
276,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
277,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#		krb5-dev \
278,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#		openldap-dev \
279,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# configure: error: prove not found
280,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
281,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
282,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
283,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
284,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
285,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
286,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
287,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
288,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
289,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,#p' --recursive /usr/local \
290,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
291,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
292,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
293,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
294,3402e9731098e1cba778c0af82b8d6fdfc698f27,/11/alpine/Dockerfile, # backwards compat
295,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
296,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
297,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
298,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
299,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#		krb5-dev \
300,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#		openldap-dev \
301,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# configure: error: prove not found
302,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
303,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
304,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
305,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
306,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
307,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
308,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
309,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
310,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
311,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
312,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
313,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
314,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
315,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
316,6750eda25a2f0856b3997309ef393475f008d6a3,/9.4/alpine/Dockerfile, # backwards compat
317,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
318,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
319,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
320,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
321,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,#		krb5-dev \
322,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,#		openldap-dev \
323,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,# configure: error: prove not found
324,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
325,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
326,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
327,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
328,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
329,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
330,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
331,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
332,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
333,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
334,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
335,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
336,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
337,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
338,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.5/alpine/Dockerfile, # backwards compat
339,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# vim:set ft=dockerfile:
340,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# explicitly set user/group IDs
341,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
342,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
343,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# grab gosu for easy step-down from root
344,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
345,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
346,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
347,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
348,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# see note below about ""*.pyc"" files"
349,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# arches officialy built by upstream
350,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
351,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
352,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
353,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
354,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
355,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
356,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
357,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
358,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
359,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
360,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
361,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
362,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
363,966d1ba7a639171895acee9b33cc6b8053498d18,/12/Dockerfile, # backwards compat
364,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,# vim:set ft=dockerfile:
365,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
366,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,# grab gosu for easy step-down from root
367,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
368,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
369,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,# vim:set ft=dockerfile:
370,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,# explicitly set user/group IDs
371,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,# grab gosu for easy step-down from root
372,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
373,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
374,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
375,a00e979002aaa80840d58a5f8cc541342e06788f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
376,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
377,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
378,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
379,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
380,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#		krb5-dev \
381,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#		openldap-dev \
382,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# configure: error: prove not found
383,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
384,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
385,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
386,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
387,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
388,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
389,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
390,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
391,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
392,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,#p' --recursive /usr/local \
393,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
394,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
395,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
396,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
397,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/alpine/Dockerfile, # backwards compat
398,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,# vim:set ft=dockerfile:
399,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,# explicitly set user/group IDs
400,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,# grab gosu for easy step-down from root
401,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
402,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
403,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
404,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
405,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
406,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
407,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
408,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
409,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,#		krb5-dev \
410,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,#		openldap-dev \
411,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
412,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
413,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
414,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
415,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
416,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
417,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
418,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
419,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
420,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
421,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
422,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.5/alpine/Dockerfile, # backwards compat
423,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# vim:set ft=dockerfile:
424,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# explicitly set user/group IDs
425,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
426,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
427,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# grab gosu for easy step-down from root
428,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
429,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
430,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
431,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
432,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
433,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# arches officialy built by upstream
434,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
435,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
436,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
437,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
438,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
439,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
440,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
441,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
442,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
443,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
444,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
445,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
446,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
447,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.4/Dockerfile, # backwards compat
448,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# vim:set ft=dockerfile:
449,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# explicitly set user/group IDs
450,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
451,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
452,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# grab gosu for easy step-down from root
453,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
454,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
455,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
456,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
457,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# see note below about ""*.pyc"" files"
458,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# arches officialy built by upstream
459,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
460,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
461,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
462,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
463,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
464,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
465,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
466,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
467,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
468,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
469,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
470,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
471,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
472,87b15b6c65ba985ac958e7b35ba787422113066e,/10/Dockerfile, # backwards compat
473,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# vim:set ft=dockerfile:
474,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# explicitly set user/group IDs
475,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,# grab gosu for easy step-down from root
476,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
477,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
478,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
479,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
480,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# vim:set ft=dockerfile:
481,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# explicitly set user/group IDs
482,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,# grab gosu for easy step-down from root
483,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
484,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
485,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# vim:set ft=dockerfile:
486,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# explicitly set user/group IDs
487,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
488,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
489,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# grab gosu for easy step-down from root
490,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
491,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
492,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
493,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
494,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
495,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# arches officialy built by upstream
496,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
497,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
498,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
499,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
500,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
501,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
502,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
503,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
504,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
505,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
506,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
507,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
508,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
509,5beb1d4c3a2b0745752ca5bbc6eff95ec1842820,/9.4/Dockerfile, # backwards compat
510,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# vim:set ft=dockerfile:
511,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# explicitly set user/group IDs
512,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
513,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
514,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
515,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
516,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
517,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
518,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
519,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
520,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# see note below about ""*.pyc"" files"
521,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# arches officialy built by upstream
522,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
523,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
524,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
525,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
526,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
527,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
528,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
529,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
530,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
531,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
532,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
533,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
534,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
535,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
536,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/Dockerfile, # backwards compat
537,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
538,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
539,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
540,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
541,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#		krb5-dev \
542,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#		openldap-dev \
543,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# configure: error: prove not found
544,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
545,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
546,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
547,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
548,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
549,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
550,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
551,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
552,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
553,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,#p' --recursive /usr/local \
554,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
555,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
556,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
557,9c5ca99fdc9af3e2cbefbc3bfa3348fe12fe9514,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
558,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
559,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
560,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
561,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
562,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#		krb5-dev \
563,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#		openldap-dev \
564,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# configure: error: prove not found
565,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
566,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
567,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
568,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
569,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
570,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
571,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
572,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
573,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
574,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
575,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
576,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
577,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
578,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
579,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.4/alpine/Dockerfile, # backwards compat
580,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
581,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
582,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
583,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
584,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#		krb5-dev \
585,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#		openldap-dev \
586,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# configure: error: prove not found
587,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
588,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
589,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
590,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
591,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
592,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
593,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
594,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
595,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
596,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
597,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
598,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
599,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
600,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
601,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
602,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
603,881448bf624ca3f461f7ddd234c198ba23aea1fe,/9.3/alpine/Dockerfile, # backwards compat
604,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# vim:set ft=dockerfile:
605,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# explicitly set user/group IDs
606,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,# grab gosu for easy step-down from root
607,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
608,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
609,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
610,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
611,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
612,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
613,f59e5f0edba2e5d4d38516e5765c1aaa8932c51e,/9.5/Dockerfile, # backwards compat
614,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
615,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
616,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
617,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
618,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,#		krb5-dev \
619,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,#		openldap-dev \
620,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# configure: error: prove not found
621,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
622,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
623,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
624,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
625,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
626,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
627,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
628,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
629,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
630,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
631,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
632,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
633,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
634,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.4/alpine/Dockerfile, # backwards compat
635,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# vim:set ft=dockerfile:
636,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# explicitly set user/group IDs
637,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
638,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
639,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# grab gosu for easy step-down from root
640,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
641,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
642,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
643,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
644,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
645,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# arches officialy built by upstream
646,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
647,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
648,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
649,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
650,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
651,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
652,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
653,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
654,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
655,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
656,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
657,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
658,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
659,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.5/Dockerfile, # backwards compat
660,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# vim:set ft=dockerfile:
661,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# explicitly set user/group IDs
662,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# grab gosu for easy step-down from root
663,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
664,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
665,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
666,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# arches officialy built by upstream
667,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
668,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
669,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
670,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
671,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
672,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
673,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
674,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
675,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
676,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
677,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
678,5ce8fc72310bf7026c971d9ce971e4ad57f0802f,/9.3/Dockerfile, # backwards compat
679,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
680,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
681,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
682,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
683,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#		krb5-dev \
684,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#		openldap-dev \
685,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# configure: error: prove not found
686,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
687,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
688,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
689,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
690,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
691,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
692,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
693,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
694,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
695,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,#p' --recursive /usr/local \
696,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
697,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
698,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
699,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
700,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/11/alpine/Dockerfile, # backwards compat
701,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
702,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
703,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
704,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
705,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#		krb5-dev \
706,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#		openldap-dev \
707,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# configure: error: prove not found
708,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
709,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
710,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
711,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
712,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
713,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
714,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
715,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
716,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
717,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,#p' --recursive /usr/local \
718,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
719,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
720,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
721,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
722,c1e547b318046ec604e1bda55e110828bfffd311,/10/alpine/Dockerfile, # backwards compat
723,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
724,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
725,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
726,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
727,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,#		krb5-dev \
728,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,#		openldap-dev \
729,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
730,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
731,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
732,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
733,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
734,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
735,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
736,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
737,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
738,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
739,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# vim:set ft=dockerfile:
740,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# explicitly set user/group IDs
741,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# grab gosu for easy step-down from root
742,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
743,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
744,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# arches officialy built by upstream
745,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
746,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
747,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
748,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
749,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
750,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
751,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
752,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
753,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
754,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
755,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
756,2ba4ac1074bc592ffa40076e5de2f94f972afb84,/10/Dockerfile, # backwards compat
757,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# vim:set ft=dockerfile:
758,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# explicitly set user/group IDs
759,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,# grab gosu for easy step-down from root
760,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
761,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
762,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
763,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
764,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
765,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
766,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
767,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
768,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
769,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
770,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#		krb5-dev \
771,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#		openldap-dev \
772,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# configure: error: prove not found
773,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
774,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
775,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
776,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
777,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
778,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
779,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
780,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
781,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
782,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
783,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
784,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
785,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
786,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
787,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/alpine/Dockerfile, # backwards compat
788,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
789,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
790,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
791,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
792,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#		krb5-dev \
793,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#		openldap-dev \
794,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# configure: error: prove not found
795,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
796,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
797,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
798,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
799,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
800,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
801,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
802,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
803,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
804,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
805,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
806,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
807,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
808,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
809,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.4/alpine/Dockerfile, # backwards compat
810,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# vim:set ft=dockerfile:
811,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# explicitly set user/group IDs
812,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
813,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
814,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# grab gosu for easy step-down from root
815,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
816,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
817,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
818,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
819,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# see note below about ""*.pyc"" files"
820,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# arches officialy built by upstream
821,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
822,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
823,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
824,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
825,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
826,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
827,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
828,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
829,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
830,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
831,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
832,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
833,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
834,d61fd19b699b2c380da08c3a95f7272137a182bb,/10/Dockerfile, # backwards compat
835,6abeb8590f35c5251b9f100a667024febaeee06b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
836,6abeb8590f35c5251b9f100a667024febaeee06b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
837,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# vim:set ft=dockerfile:
838,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# explicitly set user/group IDs
839,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
840,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
841,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# grab gosu for easy step-down from root
842,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
843,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
844,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
845,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
846,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
847,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# arches officialy built by upstream
848,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
849,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
850,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
851,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
852,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
853,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
854,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
855,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
856,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
857,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
858,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
859,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
860,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
861,87b15b6c65ba985ac958e7b35ba787422113066e,/9.4/Dockerfile, # backwards compat
862,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# vim:set ft=dockerfile:
863,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# explicitly set user/group IDs
864,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# grab gosu for easy step-down from root
865,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
866,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
867,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# arches officialy built by upstream
868,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
869,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
870,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
871,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
872,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
873,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
874,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
875,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
876,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
877,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
878,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
879,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/Dockerfile, # backwards compat
880,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# vim:set ft=dockerfile:
881,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# explicitly set user/group IDs
882,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# grab gosu for easy step-down from root
883,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
884,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
885,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
886,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# arches officialy built by upstream
887,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
888,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
889,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
890,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
891,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
892,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
893,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
894,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
895,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
896,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
897,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
898,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/10/Dockerfile, # backwards compat
899,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# vim:set ft=dockerfile:
900,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# explicitly set user/group IDs
901,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
902,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
903,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# grab gosu for easy step-down from root
904,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
905,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
906,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
907,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
908,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
909,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# see note below about ""*.pyc"" files"
910,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# arches officialy built by upstream
911,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
912,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
913,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
914,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
915,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
916,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
917,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
918,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
919,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
920,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
921,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
922,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
923,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
924,4dc16e44d16480d9c8e5eb705c15468d65366e43,/10/Dockerfile, # backwards compat
925,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# vim:set ft=dockerfile:
926,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# explicitly set user/group IDs
927,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
928,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
929,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# grab gosu for easy step-down from root
930,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
931,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
932,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
933,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
934,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# see note below about ""*.pyc"" files"
935,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# arches officialy built by upstream
936,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
937,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
938,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
939,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
940,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
941,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
942,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
943,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
944,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
945,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
946,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
947,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
948,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
949,cf9b6cdd64f8a81b1abf9e487886f47e4971abe2,/11/Dockerfile, # backwards compat
950,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
951,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
952,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
953,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
954,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,#		krb5-dev \
955,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,#		openldap-dev \
956,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
957,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
958,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
959,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
960,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
961,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
962,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
963,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
964,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# vim:set ft=dockerfile:
965,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# explicitly set user/group IDs
966,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# grab gosu for easy step-down from root
967,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
968,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
969,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
970,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
971,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# arches officialy built by upstream
972,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
973,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
974,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
975,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
976,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
977,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
978,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
979,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
980,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
981,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
982,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
983,56cf37a42a7647678a7e46b12e0df0942e26cc28,/11/Dockerfile, # backwards compat
984,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
985,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
986,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
987,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
988,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#		krb5-dev \
989,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#		openldap-dev \
990,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# configure: error: prove not found
991,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
992,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
993,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
994,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
995,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
996,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
997,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
998,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
999,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1000,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,#p' --recursive /usr/local \
1001,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1002,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1003,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1004,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1005,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/10/alpine/Dockerfile, # backwards compat
1006,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# vim:set ft=dockerfile:
1007,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# explicitly set user/group IDs
1008,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1009,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1010,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
1011,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1012,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1013,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1014,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1015,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1016,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# see note below about ""*.pyc"" files"
1017,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# arches officialy built by upstream
1018,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1019,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1020,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1021,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1022,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1023,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1024,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1025,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1026,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1027,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1028,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1029,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1030,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1031,a1420dac644b8190df5e78e80bfa9610b2f077e2,/10/Dockerfile, # backwards compat
1032,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# vim:set ft=dockerfile:
1033,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# explicitly set user/group IDs
1034,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,# grab gosu for easy step-down from root
1035,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1036,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1037,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1038,570ca9e8ea81cb6da73ea765132755f277cd0b66,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1039,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
1040,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1041,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1042,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1043,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#		krb5-dev \
1044,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#		openldap-dev \
1045,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# configure: error: prove not found
1046,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1047,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1048,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1049,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1050,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1051,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1052,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1053,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1054,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1055,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,#p' --recursive /usr/local \
1056,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1057,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1058,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1059,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1060,5992d8be755d8001474f737a44c73049c519cff3,/11/alpine/Dockerfile, # backwards compat
1061,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1062,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1063,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1064,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1065,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,#		krb5-dev \
1066,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,#		openldap-dev \
1067,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1068,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1069,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1070,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1071,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1072,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1073,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1074,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1075,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1076,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1077,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1078,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1079,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/alpine/Dockerfile, # backwards compat
1080,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
1081,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1082,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1083,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1084,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,#		krb5-dev \
1085,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,#		openldap-dev \
1086,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1087,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1088,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1089,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1090,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1091,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1092,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1093,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1094,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1095,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1096,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# vim:set ft=dockerfile:
1097,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# explicitly set user/group IDs
1098,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1099,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1100,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# grab gosu for easy step-down from root
1101,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1102,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1103,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1104,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1105,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1106,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# arches officialy built by upstream
1107,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1108,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1109,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1110,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1111,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1112,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1113,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1114,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1115,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1116,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1117,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1118,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1119,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1120,246f8d41d6de8888ba82f27579bc05d9362a8641,/11/Dockerfile, # backwards compat
1121,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# vim:set ft=dockerfile:
1122,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# explicitly set user/group IDs
1123,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1124,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1125,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# grab gosu for easy step-down from root
1126,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1127,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1128,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1129,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1130,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1131,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1132,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# arches officialy built by upstream
1133,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1134,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1135,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1136,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1137,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1138,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1139,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1140,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1141,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1142,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1143,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1144,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1145,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1146,72d7408ad3b57ab1a5c371e11460811551811bf5,/11/Dockerfile, # backwards compat
1147,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# vim:set ft=dockerfile:
1148,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# explicitly set user/group IDs
1149,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,# grab gosu for easy step-down from root
1150,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1151,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1152,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,# vim:set ft=dockerfile:
1153,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1154,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,# grab gosu for easy step-down from root
1155,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1156,63d966973d9593c0d9890b96f10ac73566913520,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1157,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1158,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1159,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1160,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1161,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,#		krb5-dev \
1162,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,#		openldap-dev \
1163,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# configure: error: prove not found
1164,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1165,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1166,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1167,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1168,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1169,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1170,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1171,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1172,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1173,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1174,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1175,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1176,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1177,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/alpine/Dockerfile, # backwards compat
1178,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# vim:set ft=dockerfile:
1179,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# explicitly set user/group IDs
1180,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1181,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1182,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
1183,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1184,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1185,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1186,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1187,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1188,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1189,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# arches officialy built by upstream
1190,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1191,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1192,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1193,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1194,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1195,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1196,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1197,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1198,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1199,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1200,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1201,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1202,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1203,1858993247748c52316b4690b0a6c6ea6c33f49f,/11/Dockerfile, # backwards compat
1204,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# vim:set ft=dockerfile:
1205,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# explicitly set user/group IDs
1206,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# grab gosu for easy step-down from root
1207,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1208,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1209,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# arches officialy built by upstream
1210,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1211,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1212,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1213,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1214,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1215,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1216,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1217,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1218,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1219,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1220,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1221,b7cb3c6eacea93be2259381033be3cc435649369,/9.6/Dockerfile, # backwards compat
1222,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# vim:set ft=dockerfile:
1223,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# explicitly set user/group IDs
1224,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,# grab gosu for easy step-down from root
1225,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1226,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1227,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1228,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1229,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1230,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# vim:set ft=dockerfile:
1231,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# explicitly set user/group IDs
1232,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,# grab gosu for easy step-down from root
1233,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1234,09b09edbea4339a008ef81f00475330172fe7630,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1235,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,# vim:set ft=dockerfile:
1236,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1237,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,# grab gosu for easy step-down from root
1238,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1239,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1240,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1241,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1242,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1243,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1244,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#		krb5-dev \
1245,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#		openldap-dev \
1246,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# configure: error: prove not found
1247,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1248,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1249,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1250,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1251,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1252,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1253,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1254,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1255,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1256,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
1257,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1258,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1259,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1260,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1261,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.4/alpine/Dockerfile, # backwards compat
1262,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1263,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1264,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1265,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1266,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,#		krb5-dev \
1267,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,#		openldap-dev \
1268,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,# configure: error: prove not found
1269,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1270,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1271,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1272,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1273,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1274,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1275,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1276,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1277,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1278,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1279,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1280,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1281,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1282,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/alpine/Dockerfile, # backwards compat
1283,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1284,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1285,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1286,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1287,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,#		krb5-dev \
1288,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,#		openldap-dev \
1289,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1290,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1291,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1292,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1293,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1294,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1295,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1296,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1297,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1298,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1299,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1300,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.4/alpine/Dockerfile, # backwards compat
1301,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1302,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1303,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1304,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1305,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,#		krb5-dev \
1306,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,#		openldap-dev \
1307,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1308,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1309,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1310,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1311,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1312,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1313,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1314,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1315,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1316,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1317,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1318,5408eaec65c84374dd6a8f2f2e900197d50cf6c4,/9.4/alpine/Dockerfile, # backwards compat
1319,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1320,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1321,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1322,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1323,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#		krb5-dev \
1324,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#		openldap-dev \
1325,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# configure: error: prove not found
1326,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1327,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1328,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1329,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1330,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1331,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1332,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1333,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1334,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1335,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
1336,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1337,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1338,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1339,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1340,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.5/alpine/Dockerfile, # backwards compat
1341,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,# vim:set ft=dockerfile:
1342,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1343,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,# grab gosu for easy step-down from root
1344,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1345,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1346,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# vim:set ft=dockerfile:
1347,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# explicitly set user/group IDs
1348,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1349,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1350,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# grab gosu for easy step-down from root
1351,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1352,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1353,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1354,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1355,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
1356,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# arches officialy built by upstream
1357,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1358,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1359,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1360,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1361,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1362,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1363,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1364,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1365,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1366,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1367,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1368,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1369,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1370,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.4/Dockerfile, # backwards compat
1371,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# vim:set ft=dockerfile:
1372,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# explicitly set user/group IDs
1373,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,# grab gosu for easy step-down from root
1374,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1375,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1376,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1377,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1378,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1379,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1380,7b518a11cf0d1bcebbf27b3cbbc64cb69839db11,/9.2/Dockerfile, # backwards compat
1381,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
1382,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1383,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1384,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1385,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,#		krb5-dev \
1386,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,#		openldap-dev \
1387,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1388,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1389,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1390,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1391,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1392,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1393,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1394,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1395,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# vim:set ft=dockerfile:
1396,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# explicitly set user/group IDs
1397,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1398,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1399,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# grab gosu for easy step-down from root
1400,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1401,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1402,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1403,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1404,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1405,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# arches officialy built by upstream
1406,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1407,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1408,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1409,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1410,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1411,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1412,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1413,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1414,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1415,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1416,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1417,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1418,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1419,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/11/Dockerfile, # backwards compat
1420,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# vim:set ft=dockerfile:
1421,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# explicitly set user/group IDs
1422,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,# grab gosu for easy step-down from root
1423,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1424,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1425,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1426,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1427,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1428,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1429,54f46e57136635b484295b985acd6e422d0b9583,/9.6/Dockerfile, # backwards compat
1430,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# vim:set ft=dockerfile:
1431,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# explicitly set user/group IDs
1432,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1433,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1434,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# grab gosu for easy step-down from root
1435,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1436,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1437,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1438,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1439,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
1440,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# arches officialy built by upstream
1441,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1442,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1443,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1444,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1445,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1446,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1447,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1448,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1449,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1450,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1451,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1452,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1453,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1454,5c324b9f3e030855e94b00ae72a4936f7915d1be,/9.4/Dockerfile, # backwards compat
1455,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# vim:set ft=dockerfile:
1456,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# explicitly set user/group IDs
1457,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# grab gosu for easy step-down from root
1458,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1459,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1460,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# arches officialy built by upstream
1461,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1462,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1463,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1464,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1465,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1466,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1467,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1468,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1469,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1470,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1471,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1472,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.5/Dockerfile, # backwards compat
1473,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# vim:set ft=dockerfile:
1474,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# explicitly set user/group IDs
1475,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,# grab gosu for easy step-down from root
1476,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1477,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1478,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1479,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1480,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1481,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1482,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1483,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1484,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1485,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,#		krb5-dev \
1486,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,#		openldap-dev \
1487,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1488,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1489,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1490,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1491,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1492,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1493,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1494,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1495,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1496,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1497,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1498,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1499,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/alpine/Dockerfile, # backwards compat
1500,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1501,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1502,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1503,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1504,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#		krb5-dev \
1505,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#		openldap-dev \
1506,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# configure: error: prove not found
1507,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1508,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1509,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1510,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1511,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1512,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1513,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1514,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1515,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1516,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,#p' --recursive /usr/local \
1517,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1518,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1519,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1520,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1521,f7dc5727b1d6b6a636350e11648845ae33477579,/10/alpine/Dockerfile, # backwards compat
1522,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,# vim:set ft=dockerfile:
1523,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1524,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,# grab gosu for easy step-down from root
1525,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1526,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1527,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# vim:set ft=dockerfile:
1528,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# explicitly set user/group IDs
1529,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# grab gosu for easy step-down from root
1530,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1531,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1532,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1533,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1534,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# arches officialy built by upstream
1535,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1536,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1537,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1538,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1539,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1540,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1541,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1542,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1543,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1544,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1545,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1546,d424c8f180ed614184059a953639d0a420477846,/9.5/Dockerfile, # backwards compat
1547,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,# vim:set ft=dockerfile:
1548,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1549,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,# grab gosu for easy step-down from root
1550,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1551,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1552,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,# vim:set ft=dockerfile:
1553,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1554,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,# grab gosu for easy step-down from root
1555,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1556,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1557,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# vim:set ft=dockerfile:
1558,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# explicitly set user/group IDs
1559,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1560,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1561,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# grab gosu for easy step-down from root
1562,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1563,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1564,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1565,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
1566,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1567,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
1568,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# arches officialy built by upstream
1569,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1570,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1571,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1572,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1573,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1574,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1575,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1576,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1577,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1578,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1579,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1580,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1581,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1582,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.6/Dockerfile, # backwards compat
1583,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
1584,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1585,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1586,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1587,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#		krb5-dev \
1588,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#		openldap-dev \
1589,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# configure: error: prove not found
1590,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1591,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1592,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1593,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1594,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1595,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1596,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1597,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1598,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1599,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,#p' --recursive /usr/local \
1600,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1601,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1602,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1603,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1604,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# vim:set ft=dockerfile:
1605,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# explicitly set user/group IDs
1606,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# grab gosu for easy step-down from root
1607,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1608,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1609,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# arches officialy built by upstream
1610,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1611,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1612,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1613,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1614,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1615,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1616,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1617,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1618,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1619,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1620,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1621,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.2/Dockerfile, # backwards compat
1622,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,# vim:set ft=dockerfile:
1623,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1624,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,# grab gosu for easy step-down from root
1625,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1626,a6d4922823aa8011513bb9c160c26c689301823a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1627,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# vim:set ft=dockerfile:
1628,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# explicitly set user/group IDs
1629,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,# grab gosu for easy step-down from root
1630,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1631,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1632,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1633,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1634,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1635,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1636,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/Dockerfile, # backwards compat
1637,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# vim:set ft=dockerfile:
1638,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# explicitly set user/group IDs
1639,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,# grab gosu for easy step-down from root
1640,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1641,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1642,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1643,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1644,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# vim:set ft=dockerfile:
1645,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# explicitly set user/group IDs
1646,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# grab gosu for easy step-down from root
1647,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1648,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1649,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1650,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1651,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# arches officialy built by upstream
1652,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1653,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1654,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1655,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1656,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1657,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1658,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1659,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1660,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1661,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1662,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1663,2cab5040341f46331367f8766b4d249a5b7a9366,/9.4/Dockerfile, # backwards compat
1664,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1665,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1666,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1667,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1668,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#		krb5-dev \
1669,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#		openldap-dev \
1670,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# configure: error: prove not found
1671,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1672,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1673,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1674,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1675,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1676,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1677,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1678,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1679,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1680,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
1681,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1682,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1683,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1684,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1685,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.5/alpine/Dockerfile, # backwards compat
1686,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
1687,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
1688,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1689,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1690,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#		krb5-dev \
1691,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#		openldap-dev \
1692,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# configure: error: prove not found
1693,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1694,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1695,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1696,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
1697,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1698,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1699,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1700,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1701,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1702,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,#p' --recursive /usr/local \
1703,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1704,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1705,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1706,1abff660740cb2ba89d25fa1d00be8f6511dd157,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1707,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# vim:set ft=dockerfile:
1708,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# explicitly set user/group IDs
1709,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1710,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1711,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# grab gosu for easy step-down from root
1712,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1713,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1714,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1715,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1716,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# see note below about ""*.pyc"" files"
1717,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# arches officialy built by upstream
1718,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1719,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1720,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1721,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1722,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1723,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1724,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1725,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1726,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1727,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1728,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1729,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
1730,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1731,faf08dbfd0675d144cbdef39f4506425ec7cee26,/11/Dockerfile, # backwards compat
1732,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
1733,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
1734,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1735,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1736,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#		krb5-dev \
1737,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#		openldap-dev \
1738,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# configure: error: prove not found
1739,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1740,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1741,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1742,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1743,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1744,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1745,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1746,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1747,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1748,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
1749,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1750,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1751,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1752,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1753,06bd57c3c36caa0c8b629e2f4b54a5e46dafa901,/9.6/alpine/Dockerfile, # backwards compat
1754,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# vim:set ft=dockerfile:
1755,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# explicitly set user/group IDs
1756,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,# grab gosu for easy step-down from root
1757,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1758,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1759,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1760,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1761,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1762,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1763,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/Dockerfile, # backwards compat
1764,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# vim:set ft=dockerfile:
1765,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# explicitly set user/group IDs
1766,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,# grab gosu for easy step-down from root
1767,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1768,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1769,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1770,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1771,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1772,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1773,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.4/Dockerfile, # backwards compat
1774,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# vim:set ft=dockerfile:
1775,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# explicitly set user/group IDs
1776,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# grab gosu for easy step-down from root
1777,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1778,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1779,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1780,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1781,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# arches officialy built by upstream
1782,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1783,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1784,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1785,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1786,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1787,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1788,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1789,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1790,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1791,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1792,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1793,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/10/Dockerfile, # backwards compat
1794,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
1795,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
1796,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1797,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1798,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#		krb5-dev \
1799,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#		openldap-dev \
1800,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# configure: error: prove not found
1801,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1802,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1803,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1804,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1805,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1806,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1807,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1808,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1809,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1810,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,#p' --recursive /usr/local \
1811,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1812,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1813,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1814,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1815,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/10/alpine/Dockerfile, # backwards compat
1816,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
1817,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1818,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1819,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1820,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,#		krb5-dev \
1821,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,#		openldap-dev \
1822,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1823,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1824,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1825,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1826,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1827,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1828,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1829,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1830,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1831,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1832,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1833,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1834,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1835,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1836,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1837,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,#		krb5-dev \
1838,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,#		openldap-dev \
1839,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1840,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1841,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1842,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1843,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1844,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1845,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1846,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1847,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,# vim:set ft=dockerfile:
1848,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1849,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,# grab gosu for easy step-down from root
1850,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1851,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1852,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# vim:set ft=dockerfile:
1853,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# explicitly set user/group IDs
1854,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,# grab gosu for easy step-down from root
1855,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1856,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1857,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1858,b2317dd369030a5f3f030b1daa1fc80da3cab9e0,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1859,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,# vim:set ft=dockerfile:
1860,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1861,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,# grab gosu for easy step-down from root
1862,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1863,80ebeda0a68be6a8b10ce0de1846a49228af0795,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1864,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# vim:set ft=dockerfile:
1865,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# explicitly set user/group IDs
1866,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,# grab gosu for easy step-down from root
1867,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1868,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1869,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,# vim:set ft=dockerfile:
1870,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
1871,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,# grab gosu for easy step-down from root
1872,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1873,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1874,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# vim:set ft=dockerfile:
1875,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# explicitly set user/group IDs
1876,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,# grab gosu for easy step-down from root
1877,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1878,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1879,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1880,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1881,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1882,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1883,5159417968c6a08e2ed784498cba28f22a74b03e,/9.6/Dockerfile, # backwards compat
1884,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
1885,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1886,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1887,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1888,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#		krb5-dev \
1889,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#		openldap-dev \
1890,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# configure: error: prove not found
1891,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1892,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1893,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1894,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1895,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1896,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1897,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1898,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1899,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1900,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
1901,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1902,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1903,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1904,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1905,a72377975f328b42344dbefc5243f994f25ced22,/9.5/alpine/Dockerfile, # backwards compat
1906,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# vim:set ft=dockerfile:
1907,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# explicitly set user/group IDs
1908,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,# grab gosu for easy step-down from root
1909,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1910,d74474439c5ce1b0d7a2e17a310e53ae975e519b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1911,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# vim:set ft=dockerfile:
1912,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# explicitly set user/group IDs
1913,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,# grab gosu for easy step-down from root
1914,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1915,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1916,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
1917,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1918,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1919,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1920,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,#		krb5-dev \
1921,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,#		openldap-dev \
1922,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1923,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1924,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1925,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1926,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1927,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1928,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1929,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1930,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# vim:set ft=dockerfile:
1931,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# explicitly set user/group IDs
1932,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
1933,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
1934,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# grab gosu for easy step-down from root
1935,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1936,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
1937,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
1938,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
1939,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
1940,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# arches officialy built by upstream
1941,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
1942,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
1943,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
1944,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
1945,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
1946,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
1947,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
1948,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
1949,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
1950,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
1951,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1952,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1953,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1954,91939daa3f42d2796952f03353534cd87d181ccc,/9.4/Dockerfile, # backwards compat
1955,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# vim:set ft=dockerfile:
1956,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# explicitly set user/group IDs
1957,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,# grab gosu for easy step-down from root
1958,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1959,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1960,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1961,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1962,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
1963,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
1964,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1965,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1966,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,#		krb5-dev \
1967,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,#		openldap-dev \
1968,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1969,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1970,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1971,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
1972,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
1973,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
1974,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
1975,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
1976,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1977,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
1978,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
1979,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.6/alpine/Dockerfile, # backwards compat
1980,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# vim:set ft=dockerfile:
1981,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# explicitly set user/group IDs
1982,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,# grab gosu for easy step-down from root
1983,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
1984,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
1985,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
1986,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
1987,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
1988,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
1989,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
1990,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
1991,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#		krb5-dev \
1992,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#		openldap-dev \
1993,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# configure: error: prove not found
1994,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
1995,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
1996,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
1997,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
1998,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
1999,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2000,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2001,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2002,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2003,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,#p' --recursive /usr/local \
2004,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2005,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2006,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2007,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2008,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/11/alpine/Dockerfile, # backwards compat
2009,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,# vim:set ft=dockerfile:
2010,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2011,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,# grab gosu for easy step-down from root
2012,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2013,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2014,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
2015,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2016,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2017,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2018,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#		krb5-dev \
2019,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#		openldap-dev \
2020,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# configure: error: prove not found
2021,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2022,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2023,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2024,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2025,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2026,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2027,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2028,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2029,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2030,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,#p' --recursive /usr/local \
2031,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2032,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2033,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2034,5ad8e92a81fec890f33eb077e491ea82c76ac980,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2035,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
2036,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2037,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2038,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2039,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,#		krb5-dev \
2040,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,#		openldap-dev \
2041,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2042,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2043,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2044,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2045,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2046,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2047,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2048,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2049,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2050,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2051,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2052,54f46e57136635b484295b985acd6e422d0b9583,/9.2/alpine/Dockerfile, # backwards compat
2053,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# vim:set ft=dockerfile:
2054,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# explicitly set user/group IDs
2055,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2056,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2057,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# grab gosu for easy step-down from root
2058,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2059,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2060,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2061,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
2062,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2063,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2064,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# arches officialy built by upstream
2065,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2066,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2067,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2068,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2069,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2070,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2071,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2072,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2073,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2074,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2075,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2076,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2077,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2078,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.6/Dockerfile, # backwards compat
2079,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,# vim:set ft=dockerfile:
2080,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2081,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,# grab gosu for easy step-down from root
2082,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2083,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2084,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2085,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2086,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2087,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2088,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#		krb5-dev \
2089,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#		openldap-dev \
2090,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# configure: error: prove not found
2091,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2092,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2093,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2094,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2095,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2096,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2097,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2098,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2099,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2100,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
2101,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2102,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2103,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2104,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2105,65f0c2afd32d2b2f4b8cf3d7a68461a7c3fa00a5,/9.5/alpine/Dockerfile, # backwards compat
2106,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,# vim:set ft=dockerfile:
2107,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2108,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,# grab gosu for easy step-down from root
2109,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2110,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2111,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# vim:set ft=dockerfile:
2112,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# explicitly set user/group IDs
2113,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2114,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2115,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# grab gosu for easy step-down from root
2116,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2117,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2118,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2119,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2120,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# see note below about ""*.pyc"" files"
2121,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# arches officialy built by upstream
2122,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2123,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2124,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2125,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2126,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2127,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2128,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2129,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2130,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2131,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2132,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2133,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2134,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2135,7e80419825e4bab4e749bc61334570ffc261ea5e,/11/Dockerfile, # backwards compat
2136,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,# vim:set ft=dockerfile:
2137,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2138,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,# grab gosu for easy step-down from root
2139,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2140,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2141,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
2142,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
2143,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2144,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2145,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#		krb5-dev \
2146,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#		openldap-dev \
2147,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# configure: error: prove not found
2148,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2149,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2150,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2151,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2152,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2153,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2154,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2155,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2156,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2157,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,#p' --recursive /usr/local \
2158,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2159,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2160,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2161,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2162,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# vim:set ft=dockerfile:
2163,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# explicitly set user/group IDs
2164,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,# grab gosu for easy step-down from root
2165,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2166,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2167,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,# vim:set ft=dockerfile:
2168,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2169,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,# grab gosu for easy step-down from root
2170,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2171,51e5166d69320581cb707d6fb102d3ba04803400,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2172,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# vim:set ft=dockerfile:
2173,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# explicitly set user/group IDs
2174,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,# grab gosu for easy step-down from root
2175,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2176,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2177,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# vim:set ft=dockerfile:
2178,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# explicitly set user/group IDs
2179,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2180,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2181,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# grab gosu for easy step-down from root
2182,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2183,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2184,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2185,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2186,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# arches officialy built by upstream
2187,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2188,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2189,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2190,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2191,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2192,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2193,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2194,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2195,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2196,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2197,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2198,726128b358cdc0efc1753475bbe502b07cbbb540,/9.3/Dockerfile, # backwards compat
2199,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2200,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2201,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2202,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2203,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,#		krb5-dev \
2204,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,#		openldap-dev \
2205,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# configure: error: prove not found
2206,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2207,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2208,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2209,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2210,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2211,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2212,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2213,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2214,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2215,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2216,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2217,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2218,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2219,f3146f857b42bd4c4cb2be6134149fddee546584,/9.6/alpine/Dockerfile, # backwards compat
2220,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# vim:set ft=dockerfile:
2221,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# explicitly set user/group IDs
2222,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,# grab gosu for easy step-down from root
2223,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2224,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2225,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2226,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2227,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# vim:set ft=dockerfile:
2228,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# explicitly set user/group IDs
2229,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,# grab gosu for easy step-down from root
2230,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2231,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2232,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2233,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2234,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2235,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2236,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,#		krb5-dev \
2237,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,#		openldap-dev \
2238,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2239,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2240,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2241,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2242,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2243,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2244,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2245,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2246,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2247,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2248,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2249,54f46e57136635b484295b985acd6e422d0b9583,/9.5/alpine/Dockerfile, # backwards compat
2250,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,# vim:set ft=dockerfile:
2251,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2252,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,# grab gosu for easy step-down from root
2253,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2254,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2255,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# vim:set ft=dockerfile:
2256,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# explicitly set user/group IDs
2257,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,# grab gosu for easy step-down from root
2258,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2259,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2260,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2261,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2262,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2263,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# vim:set ft=dockerfile:
2264,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# explicitly set user/group IDs
2265,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# grab gosu for easy step-down from root
2266,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2267,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2268,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2269,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# arches officialy built by upstream
2270,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2271,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2272,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2273,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2274,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2275,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2276,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2277,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2278,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2279,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2280,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2281,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/Dockerfile, # backwards compat
2282,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,# vim:set ft=dockerfile:
2283,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2284,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2285,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
2286,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2287,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2288,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2289,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#		krb5-dev \
2290,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#		openldap-dev \
2291,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# configure: error: prove not found
2292,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2293,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2294,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2295,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2296,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2297,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2298,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2299,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2300,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2301,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,#p' --recursive /usr/local \
2302,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2303,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2304,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2305,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2306,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/11/alpine/Dockerfile, # backwards compat
2307,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
2308,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2309,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2310,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2311,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#		krb5-dev \
2312,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#		openldap-dev \
2313,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# configure: error: prove not found
2314,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2315,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2316,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2317,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2318,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2319,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2320,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2321,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2322,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2323,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,#p' --recursive /usr/local \
2324,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2325,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2326,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2327,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2328,85aadc08c347cd20f199902c4b8b4f736341c3b8,/10/alpine/Dockerfile, # backwards compat
2329,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# vim:set ft=dockerfile:
2330,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# explicitly set user/group IDs
2331,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# grab gosu for easy step-down from root
2332,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2333,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2334,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# arches officialy built by upstream
2335,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2336,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2337,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2338,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2339,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2340,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2341,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2342,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2343,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2344,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2345,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2346,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/Dockerfile, # backwards compat
2347,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# vim:set ft=dockerfile:
2348,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# explicitly set user/group IDs
2349,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# grab gosu for easy step-down from root
2350,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2351,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2352,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2353,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2354,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# arches officialy built by upstream
2355,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2356,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2357,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2358,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2359,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2360,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2361,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2362,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2363,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2364,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2365,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2366,988d8afbdbf5d3c9e28c78a33ccc6670de337eed,/11/Dockerfile, # backwards compat
2367,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# vim:set ft=dockerfile:
2368,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# explicitly set user/group IDs
2369,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2370,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2371,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# grab gosu for easy step-down from root
2372,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2373,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2374,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2375,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2376,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# see note below about ""*.pyc"" files"
2377,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# arches officialy built by upstream
2378,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2379,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2380,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2381,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2382,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2383,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2384,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2385,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2386,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2387,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2388,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2389,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2390,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2391,f19a74ec301fe755b70a822f905c8f537f67bc9a,/11/Dockerfile, # backwards compat
2392,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# vim:set ft=dockerfile:
2393,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# explicitly set user/group IDs
2394,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,# grab gosu for easy step-down from root
2395,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2396,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2397,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2398,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2399,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2400,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2401,de4122a80157b1a0a73c14bdd4f11479011a2a51,/9.2/Dockerfile, # backwards compat
2402,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,# vim:set ft=dockerfile:
2403,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2404,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,# grab gosu for easy step-down from root
2405,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2406,ae81e91148991e9807b7275485e37b92a9cf13eb,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2407,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# vim:set ft=dockerfile:
2408,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# explicitly set user/group IDs
2409,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,# grab gosu for easy step-down from root
2410,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2411,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2412,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2413,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2414,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2415,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2416,c686efac7c1c9db3e3b4a95cff93e2057c237a2e,/10/Dockerfile, # backwards compat
2417,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
2418,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2419,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2420,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2421,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,#		krb5-dev \
2422,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,#		openldap-dev \
2423,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2424,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2425,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2426,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2427,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2428,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2429,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2430,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2431,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# vim:set ft=dockerfile:
2432,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# explicitly set user/group IDs
2433,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2434,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2435,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# grab gosu for easy step-down from root
2436,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2437,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2438,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2439,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2440,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
2441,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# arches officialy built by upstream
2442,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2443,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2444,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2445,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2446,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2447,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2448,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2449,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2450,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2451,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2452,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2453,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2454,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2455,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/Dockerfile, # backwards compat
2456,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# vim:set ft=dockerfile:
2457,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# explicitly set user/group IDs
2458,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,# grab gosu for easy step-down from root
2459,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2460,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2461,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2462,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2463,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2464,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2465,9e6a83faa9859b35fc4df18be513320c00ecd493,/9.4/Dockerfile, # backwards compat
2466,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,# vim:set ft=dockerfile:
2467,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,# explicitly set user/group IDs
2468,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2469,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2470,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,# grab gosu for easy step-down from root
2471,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2472,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2473,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2474,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2475,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# see note below about ""*.pyc"" files"
2476,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,# arches officialy built by upstream
2477,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2478,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2479,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2480,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2481,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2482,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2483,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2484,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2485,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2486,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2487,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2488,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2489,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2490,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/Dockerfile, # backwards compat
2491,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2492,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2493,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2494,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2495,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,#		krb5-dev \
2496,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,#		openldap-dev \
2497,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2498,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2499,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2500,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2501,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2502,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2503,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2504,d2b38544770a63fed430694a7aed33de3ad8b808,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2505,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,# vim:set ft=dockerfile:
2506,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2507,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,# grab gosu for easy step-down from root
2508,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2509,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2510,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# vim:set ft=dockerfile:
2511,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# explicitly set user/group IDs
2512,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# grab gosu for easy step-down from root
2513,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2514,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2515,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# arches officialy built by upstream
2516,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2517,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2518,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2519,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2520,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2521,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2522,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2523,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2524,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2525,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2526,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2527,b84ddd1619ee3a7f6e318bb9ac33f39818b3b548,/9.5/Dockerfile, # backwards compat
2528,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# vim:set ft=dockerfile:
2529,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# explicitly set user/group IDs
2530,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# grab gosu for easy step-down from root
2531,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2532,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2533,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2534,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2535,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# arches officialy built by upstream
2536,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2537,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2538,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2539,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2540,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2541,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2542,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2543,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2544,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2545,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2546,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2547,2cab5040341f46331367f8766b4d249a5b7a9366,/10/Dockerfile, # backwards compat
2548,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,# vim:set ft=dockerfile:
2549,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2550,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,# grab gosu for easy step-down from root
2551,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2552,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2553,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# vim:set ft=dockerfile:
2554,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# explicitly set user/group IDs
2555,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# grab gosu for easy step-down from root
2556,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2557,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2558,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2559,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2560,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# arches officialy built by upstream
2561,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2562,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2563,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2564,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2565,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2566,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2567,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2568,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2569,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2570,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2571,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2572,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.6/Dockerfile, # backwards compat
2573,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# vim:set ft=dockerfile:
2574,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# explicitly set user/group IDs
2575,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,# grab gosu for easy step-down from root
2576,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2577,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2578,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2579,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2580,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# vim:set ft=dockerfile:
2581,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# explicitly set user/group IDs
2582,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2583,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2584,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# grab gosu for easy step-down from root
2585,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2586,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2587,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2588,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2589,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2590,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# arches officialy built by upstream
2591,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2592,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2593,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2594,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2595,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2596,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2597,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2598,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2599,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2600,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2601,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2602,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2603,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2604,033f4941dde868055070eff244f23fd0f7b14ae6,/9.6/Dockerfile, # backwards compat
2605,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
2606,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2607,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2608,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2609,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,#		krb5-dev \
2610,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,#		openldap-dev \
2611,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2612,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2613,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2614,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2615,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2616,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2617,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2618,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2619,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2620,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2621,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2622,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2623,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,#		krb5-dev \
2624,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,#		openldap-dev \
2625,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2626,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2627,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2628,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2629,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2630,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2631,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2632,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2633,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2634,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2635,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2636,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# vim:set ft=dockerfile:
2637,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# explicitly set user/group IDs
2638,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2639,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2640,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# grab gosu for easy step-down from root
2641,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2642,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2643,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2644,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2645,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# arches officialy built by upstream
2646,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2647,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2648,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2649,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2650,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2651,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2652,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2653,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2654,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2655,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2656,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2657,726128b358cdc0efc1753475bbe502b07cbbb540,/10/Dockerfile, # backwards compat
2658,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,# vim:set ft=dockerfile:
2659,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2660,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,# grab gosu for easy step-down from root
2661,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2662,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2663,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# vim:set ft=dockerfile:
2664,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# explicitly set user/group IDs
2665,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2666,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2667,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# grab gosu for easy step-down from root
2668,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2669,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2670,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2671,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2672,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
2673,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# arches officialy built by upstream
2674,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2675,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2676,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2677,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2678,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2679,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2680,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2681,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2682,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2683,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2684,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2685,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2686,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2687,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.4/Dockerfile, # backwards compat
2688,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# vim:set ft=dockerfile:
2689,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# explicitly set user/group IDs
2690,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,# grab gosu for easy step-down from root
2691,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2692,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2693,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2694,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2695,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
2696,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2697,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2698,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2699,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#		krb5-dev \
2700,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#		openldap-dev \
2701,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# configure: error: prove not found
2702,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2703,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2704,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2705,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2706,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2707,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2708,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2709,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2710,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2711,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,#p' --recursive /usr/local \
2712,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2713,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2714,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2715,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2716,cc305ee1c59d93ac1808108edda6556b879374a4,/10/alpine/Dockerfile, # backwards compat
2717,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# vim:set ft=dockerfile:
2718,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# explicitly set user/group IDs
2719,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2720,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2721,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# grab gosu for easy step-down from root
2722,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2723,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2724,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2725,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
2726,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2727,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
2728,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# arches officialy built by upstream
2729,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2730,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2731,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2732,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2733,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2734,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2735,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2736,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2737,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2738,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2739,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2740,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2741,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2742,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.6/Dockerfile, # backwards compat
2743,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# vim:set ft=dockerfile:
2744,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# explicitly set user/group IDs
2745,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,# grab gosu for easy step-down from root
2746,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2747,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2748,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2749,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2750,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2751,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2752,54f46e57136635b484295b985acd6e422d0b9583,/9.2/Dockerfile, # backwards compat
2753,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
2754,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
2755,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2756,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2757,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#		krb5-dev \
2758,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#		openldap-dev \
2759,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# configure: error: prove not found
2760,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2761,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2762,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2763,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2764,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2765,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2766,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2767,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2768,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2769,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
2770,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2771,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2772,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2773,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2774,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.4/alpine/Dockerfile, # backwards compat
2775,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2776,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2777,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2778,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2779,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#		krb5-dev \
2780,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#		openldap-dev \
2781,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# configure: error: prove not found
2782,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2783,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2784,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2785,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2786,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2787,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2788,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2789,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2790,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2791,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
2792,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2793,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2794,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2795,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2796,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.6/alpine/Dockerfile, # backwards compat
2797,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# vim:set ft=dockerfile:
2798,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# explicitly set user/group IDs
2799,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# grab gosu for easy step-down from root
2800,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2801,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2802,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2803,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2804,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# arches officialy built by upstream
2805,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2806,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2807,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2808,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2809,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2810,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2811,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2812,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2813,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2814,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2815,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2816,635fd0bcb3ababc96871c9da52f10743fbae4742,/11/Dockerfile, # backwards compat
2817,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,# vim:set ft=dockerfile:
2818,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,# explicitly set user/group IDs
2819,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,# grab gosu for easy step-down from root
2820,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2821,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2822,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2823,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2824,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,# arches officialy built by upstream
2825,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2826,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2827,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2828,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2829,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2830,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2831,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2832,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2833,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2834,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2835,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2836,639f83fb14161c8be60119b97bb9f88796776058,/9.3/Dockerfile, # backwards compat
2837,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,# vim:set ft=dockerfile:
2838,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2839,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,# grab gosu for easy step-down from root
2840,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2841,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2842,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# vim:set ft=dockerfile:
2843,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# explicitly set user/group IDs
2844,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# grab gosu for easy step-down from root
2845,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2846,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2847,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# arches officialy built by upstream
2848,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2849,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2850,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2851,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2852,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2853,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2854,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2855,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2856,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2857,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2858,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2859,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/Dockerfile, # backwards compat
2860,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# vim:set ft=dockerfile:
2861,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# explicitly set user/group IDs
2862,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2863,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2864,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# grab gosu for easy step-down from root
2865,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2866,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2867,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2868,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2869,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# see note below about ""*.pyc"" files"
2870,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# arches officialy built by upstream
2871,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2872,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2873,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2874,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2875,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2876,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2877,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2878,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2879,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2880,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2881,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2882,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2883,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2884,ff832cbf1e9ffe150f66f00a0837d5b59083fec9,/10/Dockerfile, # backwards compat
2885,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2886,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2887,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2888,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2889,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
2890,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2891,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# vim:set ft=dockerfile:
2892,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# explicitly set user/group IDs
2893,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,# grab gosu for easy step-down from root
2894,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2895,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2896,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2897,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2898,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2899,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2900,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
2901,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2902,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2903,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2904,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,#		krb5-dev \
2905,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,#		openldap-dev \
2906,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2907,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2908,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2909,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2910,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2911,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2912,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2913,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2914,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# vim:set ft=dockerfile:
2915,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# explicitly set user/group IDs
2916,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,# grab gosu for easy step-down from root
2917,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2918,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2919,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
2920,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2921,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
2922,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2923,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/Dockerfile, # backwards compat
2924,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
2925,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
2926,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2927,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2928,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,#		krb5-dev \
2929,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,#		openldap-dev \
2930,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2931,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2932,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
2933,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2934,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2935,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2936,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2937,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2938,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2939,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2940,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2941,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/alpine/Dockerfile, # backwards compat
2942,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# vim:set ft=dockerfile:
2943,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# explicitly set user/group IDs
2944,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
2945,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
2946,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# grab gosu for easy step-down from root
2947,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
2948,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
2949,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
2950,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
2951,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
2952,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# see note below about ""*.pyc"" files"
2953,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# arches officialy built by upstream
2954,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
2955,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
2956,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
2957,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
2958,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
2959,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
2960,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
2961,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
2962,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
2963,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
2964,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2965,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
2966,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2967,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/10/Dockerfile, # backwards compat
2968,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
2969,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
2970,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2971,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2972,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#		krb5-dev \
2973,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#		openldap-dev \
2974,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# configure: error: prove not found
2975,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2976,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2977,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
2978,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
2979,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
2980,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
2981,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
2982,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
2983,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
2984,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,#p' --recursive /usr/local \
2985,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
2986,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
2987,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
2988,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
2989,1bddd083582b0977075dda4258f2d9dfbc90482b,/11/alpine/Dockerfile, # backwards compat
2990,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
2991,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
2992,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
2993,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
2994,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,#		krb5-dev \
2995,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,#		openldap-dev \
2996,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,# configure: error: prove not found
2997,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
2998,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
2999,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3000,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3001,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3002,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3003,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3004,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3005,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3006,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3007,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3008,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3009,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3010,bef8f02d1fe2bb4547280ba609f19abd20230180,/10/alpine/Dockerfile, # backwards compat
3011,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# vim:set ft=dockerfile:
3012,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# explicitly set user/group IDs
3013,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# grab gosu for easy step-down from root
3014,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3015,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3016,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# arches officialy built by upstream
3017,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3018,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3019,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3020,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3021,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3022,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3023,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3024,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3025,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3026,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3027,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3028,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.6/Dockerfile, # backwards compat
3029,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,# vim:set ft=dockerfile:
3030,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,# explicitly set user/group IDs
3031,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,# grab gosu for easy step-down from root
3032,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3033,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3034,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3035,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3036,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,# arches officialy built by upstream
3037,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3038,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3039,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3040,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3041,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3042,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3043,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3044,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3045,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3046,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3047,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3048,639f83fb14161c8be60119b97bb9f88796776058,/11/Dockerfile, # backwards compat
3049,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# vim:set ft=dockerfile:
3050,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# explicitly set user/group IDs
3051,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,# grab gosu for easy step-down from root
3052,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3053,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3054,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3055,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3056,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3057,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3058,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/Dockerfile, # backwards compat
3059,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3060,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3061,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3062,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3063,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,#		krb5-dev \
3064,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,#		openldap-dev \
3065,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3066,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3067,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3068,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3069,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3070,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3071,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3072,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3073,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3074,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3075,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3076,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# vim:set ft=dockerfile:
3077,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# explicitly set user/group IDs
3078,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,# grab gosu for easy step-down from root
3079,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3080,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3081,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3082,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3083,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# vim:set ft=dockerfile:
3084,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# explicitly set user/group IDs
3085,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3086,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3087,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# grab gosu for easy step-down from root
3088,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3089,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3090,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3091,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3092,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
3093,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# arches officialy built by upstream
3094,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3095,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3096,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3097,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3098,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3099,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3100,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3101,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3102,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3103,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3104,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3105,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3106,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3107,064113e0e481a1d0542846b81858e457fde02c90,/9.3/Dockerfile, # backwards compat
3108,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,# vim:set ft=dockerfile:
3109,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3110,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,# grab gosu for easy step-down from root
3111,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3112,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3113,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3114,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3115,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3116,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3117,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,#		krb5-dev \
3118,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,#		openldap-dev \
3119,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,# configure: error: prove not found
3120,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3121,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3122,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3123,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3124,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3125,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3126,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3127,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3128,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3129,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3130,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3131,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3132,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3133,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3134,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/alpine/Dockerfile, # backwards compat
3135,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# vim:set ft=dockerfile:
3136,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# explicitly set user/group IDs
3137,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,# grab gosu for easy step-down from root
3138,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3139,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3140,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3141,bcfa58b2f0c971ad55f541f3fb868607cd391089,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3142,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,# vim:set ft=dockerfile:
3143,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3144,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,# grab gosu for easy step-down from root
3145,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3146,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3147,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# vim:set ft=dockerfile:
3148,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# explicitly set user/group IDs
3149,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3150,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3151,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# grab gosu for easy step-down from root
3152,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3153,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3154,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3155,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3156,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
3157,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# arches officialy built by upstream
3158,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3159,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3160,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3161,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3162,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3163,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3164,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3165,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3166,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3167,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3168,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3169,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3170,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3171,0dfe0ba571b8aa2319474548403489ebdd80c52e,/9.6/Dockerfile, # backwards compat
3172,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# vim:set ft=dockerfile:
3173,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# explicitly set user/group IDs
3174,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# grab gosu for easy step-down from root
3175,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3176,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3177,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3178,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# arches officialy built by upstream
3179,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3180,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3181,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3182,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3183,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3184,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3185,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3186,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3187,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3188,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3189,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3190,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.3/Dockerfile, # backwards compat
3191,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# vim:set ft=dockerfile:
3192,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# explicitly set user/group IDs
3193,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,# grab gosu for easy step-down from root
3194,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3195,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3196,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3197,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3198,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3199,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3200,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3201,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3202,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3203,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,#		krb5-dev \
3204,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,#		openldap-dev \
3205,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3206,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3207,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3208,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3209,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3210,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3211,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3212,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3213,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3214,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3215,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3216,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3217,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.3/alpine/Dockerfile, # backwards compat
3218,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,# vim:set ft=dockerfile:
3219,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3220,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,# grab gosu for easy step-down from root
3221,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3222,981ac750a3ef6160aab69509a9e8a56304366eb2,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3223,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3224,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3225,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3226,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3227,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,#		krb5-dev \
3228,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,#		openldap-dev \
3229,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,# configure: error: prove not found
3230,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3231,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3232,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3233,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3234,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3235,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3236,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3237,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3238,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3239,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3240,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3241,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3242,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3243,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3244,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3245,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/alpine/Dockerfile, # backwards compat
3246,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# vim:set ft=dockerfile:
3247,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# explicitly set user/group IDs
3248,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3249,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3250,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# grab gosu for easy step-down from root
3251,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3252,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3253,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3254,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3255,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3256,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# see note below about ""*.pyc"" files"
3257,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# arches officialy built by upstream
3258,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3259,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3260,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3261,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3262,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3263,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3264,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3265,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3266,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3267,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3268,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3269,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3270,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3271,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/12/Dockerfile, # backwards compat
3272,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3273,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3274,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3275,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3276,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,#		krb5-dev \
3277,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,#		openldap-dev \
3278,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# configure: error: prove not found
3279,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3280,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3281,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3282,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3283,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3284,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3285,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3286,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3287,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3288,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3289,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3290,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3291,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3292,3aeab631baeee5b6c872c750259764fd5960deca,/10/alpine/Dockerfile, # backwards compat
3293,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3294,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3295,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3296,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3297,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#		krb5-dev \
3298,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#		openldap-dev \
3299,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# configure: error: prove not found
3300,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3301,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3302,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3303,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3304,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3305,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3306,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3307,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3308,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3309,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3310,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3311,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
3312,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3313,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3314,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3315,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3316,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.3/alpine/Dockerfile, # backwards compat
3317,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,# vim:set ft=dockerfile:
3318,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3319,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,# grab gosu for easy step-down from root
3320,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3321,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3322,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,# vim:set ft=dockerfile:
3323,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3324,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,# grab gosu for easy step-down from root
3325,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3326,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3327,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,# vim:set ft=dockerfile:
3328,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,# explicitly set user/group IDs
3329,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,# grab gosu for easy step-down from root
3330,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3331,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3332,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3333,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3334,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3335,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3336,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,# vim:set ft=dockerfile:
3337,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3338,783906f551b9bc1472751200296f93bb2c55bc44,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3339,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
3340,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3341,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3342,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3343,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#		krb5-dev \
3344,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#		openldap-dev \
3345,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# configure: error: prove not found
3346,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3347,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3348,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3349,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
3350,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3351,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3352,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3353,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3354,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3355,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,#p' --recursive /usr/local \
3356,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3357,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3358,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3359,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3360,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3361,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3362,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3363,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3364,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,#		krb5-dev \
3365,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,#		openldap-dev \
3366,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3367,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3368,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3369,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3370,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3371,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3372,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3373,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3374,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3375,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3376,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3377,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3378,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3379,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3380,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/alpine/Dockerfile, # backwards compat
3381,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# vim:set ft=dockerfile:
3382,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# explicitly set user/group IDs
3383,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,# grab gosu for easy step-down from root
3384,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3385,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3386,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3387,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3388,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3389,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3390,8836191de6100bfae541c6d9a02cb4ec6e97471e,/9.5/Dockerfile, # backwards compat
3391,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3392,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3393,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3394,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3395,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#		krb5-dev \
3396,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#		openldap-dev \
3397,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# configure: error: prove not found
3398,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3399,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3400,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3401,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3402,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3403,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3404,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3405,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3406,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3407,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3408,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3409,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3410,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3411,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3412,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/alpine/Dockerfile, # backwards compat
3413,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# vim:set ft=dockerfile:
3414,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# explicitly set user/group IDs
3415,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,# grab gosu for easy step-down from root
3416,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3417,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3418,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3419,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3420,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3421,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3422,b8bc661d9222e4f91b291368a1f7f92ee67ac627,/9.3/Dockerfile, # backwards compat
3423,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3424,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3425,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,# vim:set ft=dockerfile:
3426,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3427,783906f551b9bc1472751200296f93bb2c55bc44,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3428,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# vim:set ft=dockerfile:
3429,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# explicitly set user/group IDs
3430,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# grab gosu for easy step-down from root
3431,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3432,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3433,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# arches officialy built by upstream
3434,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3435,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3436,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3437,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3438,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3439,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3440,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3441,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3442,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3443,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3444,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3445,7f18547f3779e8593e2bb35f21eba5baadc47290,/9.6/Dockerfile, # backwards compat
3446,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,# vim:set ft=dockerfile:
3447,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3448,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,# grab gosu for easy step-down from root
3449,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3450,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3451,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3452,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3453,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3454,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3455,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,#		krb5-dev \
3456,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,#		openldap-dev \
3457,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3458,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3459,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3460,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3461,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3462,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3463,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3464,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3465,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3466,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3467,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3468,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# vim:set ft=dockerfile:
3469,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# explicitly set user/group IDs
3470,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# grab gosu for easy step-down from root
3471,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3472,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3473,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3474,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3475,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# arches officialy built by upstream
3476,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3477,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3478,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3479,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3480,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3481,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3482,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3483,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3484,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3485,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3486,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3487,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.6/Dockerfile, # backwards compat
3488,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# vim:set ft=dockerfile:
3489,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# explicitly set user/group IDs
3490,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,# grab gosu for easy step-down from root
3491,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3492,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3493,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3494,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3495,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3496,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3497,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/Dockerfile, # backwards compat
3498,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# vim:set ft=dockerfile:
3499,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# explicitly set user/group IDs
3500,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3501,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3502,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# grab gosu for easy step-down from root
3503,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3504,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3505,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3506,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3507,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
3508,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# arches officialy built by upstream
3509,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3510,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3511,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3512,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3513,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3514,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3515,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3516,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3517,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3518,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3519,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3520,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3521,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3522,1ba3e9e1eb9337b428189dd94ecb09feeac33a36,/9.5/Dockerfile, # backwards compat
3523,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,# vim:set ft=dockerfile:
3524,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,# explicitly set user/group IDs
3525,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3526,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3527,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,# grab gosu for easy step-down from root
3528,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3529,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3530,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3531,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3532,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
3533,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,# arches officialy built by upstream
3534,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3535,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3536,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3537,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3538,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3539,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3540,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3541,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3542,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3543,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3544,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3545,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3546,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3547,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.5/Dockerfile, # backwards compat
3548,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
3549,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3550,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3551,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3552,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,#		krb5-dev \
3553,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,#		openldap-dev \
3554,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3555,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3556,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3557,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3558,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3559,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
3560,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3561,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3562,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3563,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3564,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3565,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3566,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,#		krb5-dev \
3567,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,#		openldap-dev \
3568,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# configure: error: prove not found
3569,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3570,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3571,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3572,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3573,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3574,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3575,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3576,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3577,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3578,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3579,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3580,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3581,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.6/alpine/Dockerfile, # backwards compat
3582,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3583,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3584,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3585,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3586,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#		krb5-dev \
3587,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#		openldap-dev \
3588,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# configure: error: prove not found
3589,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3590,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3591,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3592,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3593,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3594,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3595,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3596,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3597,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3598,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3599,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3600,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3601,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3602,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3603,5992d8be755d8001474f737a44c73049c519cff3,/9.5/alpine/Dockerfile, # backwards compat
3604,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# vim:set ft=dockerfile:
3605,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# explicitly set user/group IDs
3606,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# grab gosu for easy step-down from root
3607,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3608,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3609,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# arches officialy built by upstream
3610,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3611,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3612,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3613,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3614,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3615,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3616,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3617,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3618,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3619,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3620,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3621,82e8101ff612b492507f4efc2120963b29f4188d,/9.6/Dockerfile, # backwards compat
3622,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# vim:set ft=dockerfile:
3623,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# explicitly set user/group IDs
3624,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,# grab gosu for easy step-down from root
3625,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3626,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3627,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# vim:set ft=dockerfile:
3628,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# explicitly set user/group IDs
3629,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# grab gosu for easy step-down from root
3630,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3631,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3632,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3633,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3634,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# arches officialy built by upstream
3635,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3636,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3637,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3638,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3639,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3640,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3641,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3642,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3643,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3644,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3645,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3646,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.3/Dockerfile, # backwards compat
3647,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,# vim:set ft=dockerfile:
3648,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3649,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,# grab gosu for easy step-down from root
3650,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3651,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3652,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# vim:set ft=dockerfile:
3653,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# explicitly set user/group IDs
3654,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3655,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3656,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# grab gosu for easy step-down from root
3657,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3658,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3659,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3660,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3661,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3662,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# see note below about ""*.pyc"" files"
3663,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# arches officialy built by upstream
3664,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3665,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3666,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3667,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3668,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3669,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3670,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3671,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3672,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3673,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3674,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3675,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3676,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3677,4f70bf2b811bcdb4ab1a015ef703373226452157,/10/Dockerfile, # backwards compat
3678,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3679,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3680,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3681,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3682,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#		krb5-dev \
3683,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#		openldap-dev \
3684,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# configure: error: prove not found
3685,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3686,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3687,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3688,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
3689,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3690,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3691,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3692,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3693,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3694,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3695,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3696,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3697,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3698,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3699,1657faac6b9918537da408915b65e92323f8c74b,/10/alpine/Dockerfile, # backwards compat
3700,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3701,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3702,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3703,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3704,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#		krb5-dev \
3705,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#		openldap-dev \
3706,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# configure: error: prove not found
3707,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3708,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3709,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3710,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3711,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3712,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3713,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3714,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3715,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3716,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3717,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3718,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3719,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3720,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3721,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.5/alpine/Dockerfile, # backwards compat
3722,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3723,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3724,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3725,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3726,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,#		krb5-dev \
3727,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,#		openldap-dev \
3728,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3729,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3730,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3731,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3732,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3733,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3734,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3735,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3736,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# vim:set ft=dockerfile:
3737,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# explicitly set user/group IDs
3738,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3739,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3740,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
3741,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3742,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3743,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3744,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
3745,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3746,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# see note below about ""*.pyc"" files"
3747,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# arches officialy built by upstream
3748,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3749,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3750,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3751,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3752,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3753,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3754,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3755,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3756,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3757,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3758,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3759,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3760,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3761,aa4f329a17fd82077536602da12f4264fa195b20,/11/Dockerfile, # backwards compat
3762,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
3763,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3764,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3765,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3766,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,#		krb5-dev \
3767,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,#		openldap-dev \
3768,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3769,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3770,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3771,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3772,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3773,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3774,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3775,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3776,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3777,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
3778,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3779,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3780,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#		krb5-dev \
3781,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#		openldap-dev \
3782,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# configure: error: prove not found
3783,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3784,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3785,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3786,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3787,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3788,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3789,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3790,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3791,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3792,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3793,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3794,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3795,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3796,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3797,c4b019526a25d1300de77b9699d53ad187cf0dcf,/10/alpine/Dockerfile, # backwards compat
3798,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
3799,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3800,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3801,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3802,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#		krb5-dev \
3803,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#		openldap-dev \
3804,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# configure: error: prove not found
3805,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3806,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3807,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3808,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3809,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3810,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3811,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3812,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3813,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3814,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,#p' --recursive /usr/local \
3815,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3816,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3817,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3818,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3819,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/11/alpine/Dockerfile, # backwards compat
3820,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# vim:set ft=dockerfile:
3821,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# explicitly set user/group IDs
3822,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3823,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3824,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# grab gosu for easy step-down from root
3825,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3826,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3827,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3828,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3829,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
3830,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# arches officialy built by upstream
3831,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3832,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3833,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3834,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3835,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3836,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3837,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3838,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3839,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3840,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3841,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3842,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3843,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3844,2803c9e12ac659335a394d5712e5da8cd10bdf69,/9.5/Dockerfile, # backwards compat
3845,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
3846,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3847,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3848,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3849,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#		krb5-dev \
3850,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#		openldap-dev \
3851,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# configure: error: prove not found
3852,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3853,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3854,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
3855,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3856,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3857,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3858,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3859,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3860,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3861,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3862,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3863,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
3864,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3865,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3866,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3867,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3868,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.3/alpine/Dockerfile, # backwards compat
3869,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,# vim:set ft=dockerfile:
3870,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
3871,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,# grab gosu for easy step-down from root
3872,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3873,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
3874,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3875,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
3876,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3877,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3878,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#		krb5-dev \
3879,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#		openldap-dev \
3880,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# configure: error: prove not found
3881,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3882,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3883,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3884,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3885,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3886,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3887,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3888,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3889,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3890,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
3891,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3892,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3893,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3894,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3895,a0ec4f5af75da64d706cad256ba8a0245514aae6,/9.5/alpine/Dockerfile, # backwards compat
3896,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# vim:set ft=dockerfile:
3897,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# explicitly set user/group IDs
3898,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3899,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3900,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# grab gosu for easy step-down from root
3901,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3902,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3903,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3904,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3905,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# arches officialy built by upstream
3906,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3907,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3908,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3909,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3910,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3911,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3912,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3913,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3914,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3915,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3916,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3917,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.3/Dockerfile, # backwards compat
3918,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
3919,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
3920,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3921,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3922,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,#		krb5-dev \
3923,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,#		openldap-dev \
3924,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3925,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3926,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3927,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3928,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3929,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3930,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3931,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3932,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3933,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3934,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
3935,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
3936,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
3937,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
3938,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#		krb5-dev \
3939,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#		openldap-dev \
3940,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# configure: error: prove not found
3941,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
3942,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
3943,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
3944,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
3945,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
3946,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
3947,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
3948,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
3949,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
3950,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,#p' --recursive /usr/local \
3951,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
3952,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3953,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
3954,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3955,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/10/alpine/Dockerfile, # backwards compat
3956,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# vim:set ft=dockerfile:
3957,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# explicitly set user/group IDs
3958,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
3959,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
3960,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# grab gosu for easy step-down from root
3961,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3962,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
3963,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
3964,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3965,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
3966,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# arches officialy built by upstream
3967,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3968,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
3969,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3970,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3971,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3972,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3973,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3974,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3975,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3976,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
3977,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3978,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
3979,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3980,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.6/Dockerfile, # backwards compat
3981,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# vim:set ft=dockerfile:
3982,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# explicitly set user/group IDs
3983,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# grab gosu for easy step-down from root
3984,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
3985,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
3986,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# arches officialy built by upstream
3987,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
3988,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
3989,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
3990,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
3991,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
3992,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
3993,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
3994,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
3995,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
3996,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
3997,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
3998,3b022607bec233463a3d055731fb710837978747,/9.4/Dockerfile, # backwards compat
3999,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4000,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4001,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4002,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4003,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,#		krb5-dev \
4004,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,#		openldap-dev \
4005,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4006,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4007,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4008,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4009,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4010,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4011,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4012,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4013,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4014,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4015,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4016,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4017,c844ef624823fac9f0e40695d5d01a622f5fd71a,/9.5/alpine/Dockerfile, # backwards compat
4018,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,# vim:set ft=dockerfile:
4019,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4020,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,# grab gosu for easy step-down from root
4021,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4022,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4023,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
4024,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
4025,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4026,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4027,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#		krb5-dev \
4028,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#		openldap-dev \
4029,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# configure: error: prove not found
4030,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4031,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4032,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4033,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4034,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4035,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4036,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4037,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4038,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4039,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,#p' --recursive /usr/local \
4040,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4041,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4042,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4043,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4044,8bebabd5bcfa166ff8ac29a5166d2c1eb6e36002,/10/alpine/Dockerfile, # backwards compat
4045,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# vim:set ft=dockerfile:
4046,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# explicitly set user/group IDs
4047,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,# grab gosu for easy step-down from root
4048,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4049,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4050,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4051,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4052,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4053,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4054,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4055,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4056,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4057,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,#		krb5-dev \
4058,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,#		openldap-dev \
4059,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# configure: error: prove not found
4060,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4061,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4062,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4063,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4064,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4065,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4066,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4067,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4068,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4069,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4070,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4071,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4072,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4073,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4074,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4075,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.3/alpine/Dockerfile, # backwards compat
4076,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,# vim:set ft=dockerfile:
4077,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4078,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,# grab gosu for easy step-down from root
4079,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4080,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4081,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# vim:set ft=dockerfile:
4082,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# explicitly set user/group IDs
4083,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,# grab gosu for easy step-down from root
4084,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4085,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4086,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4087,e4942cb0f79b61024963dc0ac196375b26fa60dd,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4088,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# vim:set ft=dockerfile:
4089,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# explicitly set user/group IDs
4090,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,# grab gosu for easy step-down from root
4091,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4092,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4093,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4094,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4095,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4096,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4097,972294a377463156c8d61297320c872fc7d370a9,/9.2/Dockerfile, # backwards compat
4098,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4099,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
4100,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4101,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4102,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#		krb5-dev \
4103,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#		openldap-dev \
4104,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# configure: error: prove not found
4105,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4106,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4107,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4108,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
4109,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4110,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4111,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4112,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4113,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4114,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
4115,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4116,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4117,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4118,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4119,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.6/alpine/Dockerfile, # backwards compat
4120,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
4121,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
4122,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4123,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4124,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,#		krb5-dev \
4125,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,#		openldap-dev \
4126,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4127,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4128,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4129,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4130,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4131,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4132,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4133,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4134,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4135,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4136,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4137,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4138,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.2/alpine/Dockerfile, # backwards compat
4139,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
4140,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4141,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4142,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4143,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#		krb5-dev \
4144,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#		openldap-dev \
4145,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# configure: error: prove not found
4146,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4147,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4148,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4149,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4150,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4151,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4152,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4153,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4154,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4155,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
4156,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4157,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4158,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4159,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4160,eacf33933eced1d5db93699c19e6f24b30596db8,/11/alpine/Dockerfile, # backwards compat
4161,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
4162,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
4163,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4164,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4165,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#		krb5-dev \
4166,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#		openldap-dev \
4167,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# configure: error: prove not found
4168,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4169,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4170,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4171,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4172,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4173,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4174,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4175,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4176,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4177,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,#p' --recursive /usr/local \
4178,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4179,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4180,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4181,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4182,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4183,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4184,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4185,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4186,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,#		krb5-dev \
4187,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,#		openldap-dev \
4188,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4189,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4190,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4191,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4192,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4193,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4194,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4195,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4196,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4197,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4198,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4199,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.6/alpine/Dockerfile, # backwards compat
4200,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4201,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
4202,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4203,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4204,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,#		krb5-dev \
4205,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,#		openldap-dev \
4206,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4207,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4208,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4209,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4210,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4211,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4212,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4213,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4214,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4215,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4216,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4217,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.3/alpine/Dockerfile, # backwards compat
4218,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# vim:set ft=dockerfile:
4219,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# explicitly set user/group IDs
4220,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4221,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4222,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# grab gosu for easy step-down from root
4223,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4224,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4225,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4226,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4227,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4228,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# arches officialy built by upstream
4229,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4230,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4231,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4232,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4233,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4234,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4235,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4236,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4237,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4238,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4239,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4240,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4241,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4242,f13fbe5ad177aa30befdfe25379859e01b5b2d9d,/9.6/Dockerfile, # backwards compat
4243,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4244,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4245,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4246,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4247,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#		krb5-dev \
4248,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#		openldap-dev \
4249,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# configure: error: prove not found
4250,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4251,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4252,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4253,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4254,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4255,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4256,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4257,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4258,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4259,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4260,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4261,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
4262,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4263,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4264,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4265,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4266,6750eda25a2f0856b3997309ef393475f008d6a3,/9.3/alpine/Dockerfile, # backwards compat
4267,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
4268,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4269,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4270,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4271,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#		krb5-dev \
4272,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#		openldap-dev \
4273,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# configure: error: prove not found
4274,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4275,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4276,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4277,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4278,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4279,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4280,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4281,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4282,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4283,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,#p' --recursive /usr/local \
4284,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4285,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4286,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4287,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4288,eed67ed0f33435bffd1e78d27b389e0492d30599,/11/alpine/Dockerfile, # backwards compat
4289,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# vim:set ft=dockerfile:
4290,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# explicitly set user/group IDs
4291,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,# grab gosu for easy step-down from root
4292,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4293,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4294,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4295,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4296,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4297,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4298,010a4e7e8321a692cd2fdb41c87cb8d4023567aa,/10/Dockerfile, # backwards compat
4299,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4300,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4301,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4302,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4303,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,#		krb5-dev \
4304,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,#		openldap-dev \
4305,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4306,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4307,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4308,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4309,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4310,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4311,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4312,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4313,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4314,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4315,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4316,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4317,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/alpine/Dockerfile, # backwards compat
4318,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4319,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4320,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4321,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4322,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,#		krb5-dev \
4323,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,#		openldap-dev \
4324,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4325,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4326,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4327,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4328,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4329,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4330,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4331,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4332,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4333,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4334,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4335,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4336,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.5/alpine/Dockerfile, # backwards compat
4337,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# vim:set ft=dockerfile:
4338,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# explicitly set user/group IDs
4339,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,# grab gosu for easy step-down from root
4340,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4341,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4342,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4343,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4344,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4345,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4346,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/Dockerfile, # backwards compat
4347,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# vim:set ft=dockerfile:
4348,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# explicitly set user/group IDs
4349,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,# grab gosu for easy step-down from root
4350,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4351,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4352,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# vim:set ft=dockerfile:
4353,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# explicitly set user/group IDs
4354,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# grab gosu for easy step-down from root
4355,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4356,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4357,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# arches officialy built by upstream
4358,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4359,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4360,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4361,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4362,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4363,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4364,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4365,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4366,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4367,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4368,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4369,93dc51c2ec5b16d3d728b7f85804ae43113006d6,/9.4/Dockerfile, # backwards compat
4370,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# vim:set ft=dockerfile:
4371,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# explicitly set user/group IDs
4372,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4373,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4374,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# grab gosu for easy step-down from root
4375,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4376,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4377,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4378,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4379,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4380,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4381,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# arches officialy built by upstream
4382,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4383,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4384,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4385,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4386,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4387,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4388,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4389,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4390,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4391,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4392,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4393,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4394,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4395,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.6/Dockerfile, # backwards compat
4396,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4397,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4398,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4399,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4400,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,#		krb5-dev \
4401,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,#		openldap-dev \
4402,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4403,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4404,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4405,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4406,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4407,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4408,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4409,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4410,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4411,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4412,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4413,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4414,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.3/alpine/Dockerfile, # backwards compat
4415,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# vim:set ft=dockerfile:
4416,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# explicitly set user/group IDs
4417,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4418,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4419,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# grab gosu for easy step-down from root
4420,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4421,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4422,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4423,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4424,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# see note below about ""*.pyc"" files"
4425,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# arches officialy built by upstream
4426,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4427,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4428,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4429,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4430,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4431,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4432,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4433,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4434,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4435,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4436,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4437,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4438,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4439,c6c3621d450c4a0a1fda7af50a71c4fe4f292946,/10/Dockerfile, # backwards compat
4440,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4441,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4442,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4443,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4444,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,#		krb5-dev \
4445,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,#		openldap-dev \
4446,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4447,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4448,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4449,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4450,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4451,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4452,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4453,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4454,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4455,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4456,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4457,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4458,a554d043a3b77937120d325b30fefaad2e3be12d,/9.6/alpine/Dockerfile, # backwards compat
4459,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
4460,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4461,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4462,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4463,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,#		krb5-dev \
4464,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,#		openldap-dev \
4465,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4466,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4467,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4468,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4469,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4470,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4471,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4472,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4473,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4474,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4475,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4476,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4477,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4478,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4479,975f6a2705d981f865a2cb0536a86a46e5839534,/9.2/alpine/Dockerfile, # backwards compat
4480,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# vim:set ft=dockerfile:
4481,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# explicitly set user/group IDs
4482,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# grab gosu for easy step-down from root
4483,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4484,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4485,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4486,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4487,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# arches officialy built by upstream
4488,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4489,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4490,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4491,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4492,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4493,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4494,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4495,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4496,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4497,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4498,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4499,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.6/Dockerfile, # backwards compat
4500,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# vim:set ft=dockerfile:
4501,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# explicitly set user/group IDs
4502,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,# grab gosu for easy step-down from root
4503,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4504,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4505,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# vim:set ft=dockerfile:
4506,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# explicitly set user/group IDs
4507,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,# grab gosu for easy step-down from root
4508,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4509,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4510,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4511,0f910e3495412a854dae3add691f79d6f18a7aa5,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4512,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4513,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4514,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4515,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4516,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#		krb5-dev \
4517,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#		openldap-dev \
4518,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# configure: error: prove not found
4519,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4520,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4521,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4522,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4523,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4524,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4525,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4526,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4527,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4528,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
4529,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4530,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4531,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4532,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4533,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.5/alpine/Dockerfile, # backwards compat
4534,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4535,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4536,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4537,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4538,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#		krb5-dev \
4539,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#		openldap-dev \
4540,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# configure: error: prove not found
4541,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4542,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4543,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4544,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4545,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4546,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4547,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4548,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4549,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4550,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
4551,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4552,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4553,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4554,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4555,6750eda25a2f0856b3997309ef393475f008d6a3,/9.6/alpine/Dockerfile, # backwards compat
4556,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# vim:set ft=dockerfile:
4557,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# explicitly set user/group IDs
4558,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4559,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4560,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# grab gosu for easy step-down from root
4561,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4562,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4563,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4564,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4565,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4566,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# see note below about ""*.pyc"" files"
4567,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# arches officialy built by upstream
4568,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4569,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4570,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4571,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4572,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4573,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4574,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4575,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4576,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4577,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4578,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4579,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4580,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4581,72d7408ad3b57ab1a5c371e11460811551811bf5,/10/Dockerfile, # backwards compat
4582,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
4583,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4584,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4585,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4586,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,#		krb5-dev \
4587,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,#		openldap-dev \
4588,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4589,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
4590,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4591,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4592,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4593,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4594,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4595,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4596,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4597,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4598,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4599,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4600,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4601,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4602,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.3/alpine/Dockerfile, # backwards compat
4603,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# vim:set ft=dockerfile:
4604,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# explicitly set user/group IDs
4605,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4606,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4607,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# grab gosu for easy step-down from root
4608,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4609,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4610,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4611,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4612,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# arches officialy built by upstream
4613,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4614,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4615,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4616,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4617,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4618,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4619,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4620,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4621,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4622,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4623,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4624,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.6/Dockerfile, # backwards compat
4625,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# vim:set ft=dockerfile:
4626,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# explicitly set user/group IDs
4627,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4628,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4629,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# grab gosu for easy step-down from root
4630,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4631,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4632,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4633,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4634,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4635,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4636,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# arches officialy built by upstream
4637,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4638,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4639,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4640,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4641,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4642,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4643,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4644,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4645,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4646,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4647,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4648,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4649,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4650,4dc16e44d16480d9c8e5eb705c15468d65366e43,/11/Dockerfile, # backwards compat
4651,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# vim:set ft=dockerfile:
4652,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# explicitly set user/group IDs
4653,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4654,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4655,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# grab gosu for easy step-down from root
4656,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4657,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4658,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4659,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4660,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4661,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
4662,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# arches officialy built by upstream
4663,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4664,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4665,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4666,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4667,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4668,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4669,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4670,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4671,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4672,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4673,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4674,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4675,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4676,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.6/Dockerfile, # backwards compat
4677,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,# vim:set ft=dockerfile:
4678,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4679,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,# grab gosu for easy step-down from root
4680,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4681,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4682,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4683,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4684,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4685,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4686,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,#		krb5-dev \
4687,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,#		openldap-dev \
4688,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4689,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4690,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4691,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4692,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4693,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4694,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4695,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4696,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4697,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4698,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4699,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4700,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.5/alpine/Dockerfile, # backwards compat
4701,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
4702,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4703,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4704,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4705,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,#		krb5-dev \
4706,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,#		openldap-dev \
4707,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# configure: error: prove not found
4708,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4709,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4710,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4711,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4712,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4713,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4714,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4715,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4716,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4717,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4718,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4719,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4720,0f55625d25faf7ad6adf821e91612d7df53d9a11,/10/alpine/Dockerfile, # backwards compat
4721,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4722,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
4723,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4724,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4725,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#		krb5-dev \
4726,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#		openldap-dev \
4727,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# configure: error: prove not found
4728,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4729,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4730,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4731,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4732,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4733,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4734,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4735,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4736,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4737,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
4738,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4739,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4740,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4741,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4742,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.5/alpine/Dockerfile, # backwards compat
4743,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# vim:set ft=dockerfile:
4744,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# explicitly set user/group IDs
4745,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4746,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4747,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
4748,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4749,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4750,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4751,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4752,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4753,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4754,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# arches officialy built by upstream
4755,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4756,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4757,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4758,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4759,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4760,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4761,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4762,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4763,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4764,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4765,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4766,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4767,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4768,a1420dac644b8190df5e78e80bfa9610b2f077e2,/11/Dockerfile, # backwards compat
4769,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# vim:set ft=dockerfile:
4770,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# explicitly set user/group IDs
4771,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4772,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4773,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# grab gosu for easy step-down from root
4774,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4775,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4776,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4777,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4778,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4779,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# arches officialy built by upstream
4780,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4781,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4782,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4783,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4784,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4785,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4786,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4787,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4788,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4789,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4790,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4791,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4792,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4793,42f9ab3bab65fdbabbf35130c68a9869b6e82ee7,/11/Dockerfile, # backwards compat
4794,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# vim:set ft=dockerfile:
4795,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# explicitly set user/group IDs
4796,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4797,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4798,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# grab gosu for easy step-down from root
4799,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4800,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4801,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4802,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4803,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
4804,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# arches officialy built by upstream
4805,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4806,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4807,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4808,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4809,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4810,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4811,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4812,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4813,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4814,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4815,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4816,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4817,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4818,87b15b6c65ba985ac958e7b35ba787422113066e,/9.5/Dockerfile, # backwards compat
4819,6abeb8590f35c5251b9f100a667024febaeee06b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4820,6abeb8590f35c5251b9f100a667024febaeee06b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4821,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4822,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4823,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# vim:set ft=dockerfile:
4824,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# explicitly set user/group IDs
4825,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4826,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4827,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# grab gosu for easy step-down from root
4828,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4829,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4830,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4831,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4832,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# see note below about ""*.pyc"" files"
4833,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# arches officialy built by upstream
4834,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4835,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4836,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4837,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4838,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4839,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4840,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4841,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4842,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4843,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4844,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4845,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4846,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4847,d61fd19b699b2c380da08c3a95f7272137a182bb,/11/Dockerfile, # backwards compat
4848,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4849,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4850,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4851,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4852,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,#		krb5-dev \
4853,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,#		openldap-dev \
4854,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# configure: error: prove not found
4855,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4856,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4857,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4858,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4859,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4860,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4861,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4862,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4863,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4864,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4865,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4866,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4867,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4868,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.6/alpine/Dockerfile, # backwards compat
4869,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# vim:set ft=dockerfile:
4870,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# explicitly set user/group IDs
4871,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4872,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4873,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# grab gosu for easy step-down from root
4874,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4875,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4876,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4877,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
4878,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4879,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# see note below about ""*.pyc"" files"
4880,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# arches officialy built by upstream
4881,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4882,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4883,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4884,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4885,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4886,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4887,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4888,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4889,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4890,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4891,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4892,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4893,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4894,bdfa18e43c2b7ea7d26d2df7a18b12a674beaf92,/10/Dockerfile, # backwards compat
4895,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
4896,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4897,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4898,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4899,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#		krb5-dev \
4900,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#		openldap-dev \
4901,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# configure: error: prove not found
4902,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4903,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4904,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4905,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4906,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4907,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4908,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4909,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4910,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4911,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
4912,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4913,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4914,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4915,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4916,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.6/alpine/Dockerfile, # backwards compat
4917,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# vim:set ft=dockerfile:
4918,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# explicitly set user/group IDs
4919,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# grab gosu for easy step-down from root
4920,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4921,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4922,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# arches officialy built by upstream
4923,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4924,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4925,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4926,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4927,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4928,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4929,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4930,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4931,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4932,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
4933,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4934,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/Dockerfile, # backwards compat
4935,6abeb8590f35c5251b9f100a667024febaeee06b,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
4936,6abeb8590f35c5251b9f100a667024febaeee06b,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
4937,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
4938,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4939,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4940,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4941,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#		krb5-dev \
4942,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#		openldap-dev \
4943,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# configure: error: prove not found
4944,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
4945,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4946,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4947,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4948,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
4949,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4950,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4951,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4952,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4953,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,#p' --recursive /usr/local \
4954,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4955,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4956,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4957,ba24350aa02996f75cf5b44eea0af082775cc8ec,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4958,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# vim:set ft=dockerfile:
4959,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# explicitly set user/group IDs
4960,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
4961,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
4962,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# grab gosu for easy step-down from root
4963,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
4964,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
4965,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
4966,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
4967,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# see note below about ""*.pyc"" files"
4968,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# arches officialy built by upstream
4969,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
4970,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
4971,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
4972,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
4973,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
4974,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
4975,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
4976,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
4977,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
4978,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
4979,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4980,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
4981,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
4982,a8613f4cda3e932245f09c4d0f6733462b14b582,/12/Dockerfile, # backwards compat
4983,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
4984,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
4985,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
4986,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
4987,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,#		krb5-dev \
4988,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,#		openldap-dev \
4989,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
4990,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
4991,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
4992,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
4993,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
4994,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
4995,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
4996,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
4997,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
4998,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
4999,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5000,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.5/alpine/Dockerfile, # backwards compat
5001,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# vim:set ft=dockerfile:
5002,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# explicitly set user/group IDs
5003,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,# grab gosu for easy step-down from root
5004,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5005,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5006,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5007,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5008,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5009,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5010,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# vim:set ft=dockerfile:
5011,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# explicitly set user/group IDs
5012,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# grab gosu for easy step-down from root
5013,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5014,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5015,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5016,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5017,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# arches officialy built by upstream
5018,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5019,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5020,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5021,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5022,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5023,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5024,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5025,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5026,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5027,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5028,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5029,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.3/Dockerfile, # backwards compat
5030,fa36941d6835d8cd86f891d44fcf2c634ee261c2,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5031,fa36941d6835d8cd86f891d44fcf2c634ee261c2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5032,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
5033,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5034,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5035,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5036,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#		krb5-dev \
5037,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#		openldap-dev \
5038,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# configure: error: prove not found
5039,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5040,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5041,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5042,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5043,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5044,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5045,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5046,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5047,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5048,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
5049,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5050,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5051,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5052,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5053,408356d52c2cdfaff96fd88246124bd2cfeb7160,/9.4/alpine/Dockerfile, # backwards compat
5054,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# vim:set ft=dockerfile:
5055,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# explicitly set user/group IDs
5056,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5057,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5058,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# grab gosu for easy step-down from root
5059,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5060,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5061,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5062,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5063,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
5064,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# arches officialy built by upstream
5065,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5066,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5067,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5068,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5069,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5070,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5071,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5072,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5073,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5074,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5075,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5076,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5077,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5078,d28670df74380893a098d9e08c80e9507af5ffff,/9.4/Dockerfile, # backwards compat
5079,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# vim:set ft=dockerfile:
5080,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# explicitly set user/group IDs
5081,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5082,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5083,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# grab gosu for easy step-down from root
5084,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5085,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5086,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5087,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5088,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
5089,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# arches officialy built by upstream
5090,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5091,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5092,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5093,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5094,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5095,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5096,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5097,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5098,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5099,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5100,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5101,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5102,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5103,23d28bb5957e74cfa1167262fffaddab1bdea4d6,/9.4/Dockerfile, # backwards compat
5104,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# vim:set ft=dockerfile:
5105,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# explicitly set user/group IDs
5106,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5107,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5108,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# grab gosu for easy step-down from root
5109,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5110,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5111,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5112,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5113,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
5114,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# arches officialy built by upstream
5115,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5116,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5117,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5118,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5119,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5120,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5121,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5122,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5123,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5124,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5125,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5126,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5127,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5128,9558084c73fd9bb5e3c7d8048e6a46f9e18a6ea2,/9.6/Dockerfile, # backwards compat
5129,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# vim:set ft=dockerfile:
5130,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# explicitly set user/group IDs
5131,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5132,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5133,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# grab gosu for easy step-down from root
5134,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5135,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5136,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5137,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5138,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# see note below about ""*.pyc"" files"
5139,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# arches officialy built by upstream
5140,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5141,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5142,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5143,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5144,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5145,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5146,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5147,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5148,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5149,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5150,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5151,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5152,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5153,87b15b6c65ba985ac958e7b35ba787422113066e,/11/Dockerfile, # backwards compat
5154,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# vim:set ft=dockerfile:
5155,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# explicitly set user/group IDs
5156,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,# grab gosu for easy step-down from root
5157,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5158,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5159,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# vim:set ft=dockerfile:
5160,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# explicitly set user/group IDs
5161,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,# grab gosu for easy step-down from root
5162,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5163,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5164,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5165,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5166,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# vim:set ft=dockerfile:
5167,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# explicitly set user/group IDs
5168,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,# grab gosu for easy step-down from root
5169,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5170,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5171,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5172,1c0bc9d905d569fead777b9b8e3836e8af1c394c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5173,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# vim:set ft=dockerfile:
5174,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# explicitly set user/group IDs
5175,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5176,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5177,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# grab gosu for easy step-down from root
5178,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5179,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5180,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5181,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5182,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5183,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# arches officialy built by upstream
5184,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5185,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5186,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5187,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5188,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5189,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5190,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5191,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5192,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5193,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5194,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5195,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5196,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5197,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.5/Dockerfile, # backwards compat
5198,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5199,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5200,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5201,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5202,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,#		krb5-dev \
5203,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,#		openldap-dev \
5204,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5205,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5206,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5207,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5208,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5209,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5210,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5211,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5212,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# vim:set ft=dockerfile:
5213,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# explicitly set user/group IDs
5214,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5215,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5216,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# grab gosu for easy step-down from root
5217,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5218,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5219,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5220,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5221,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
5222,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# arches officialy built by upstream
5223,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5224,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5225,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5226,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5227,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5228,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5229,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5230,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5231,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5232,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5233,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5234,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5235,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5236,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.4/Dockerfile, # backwards compat
5237,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5238,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5239,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5240,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5241,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,#		krb5-dev \
5242,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,#		openldap-dev \
5243,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5244,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5245,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5246,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5247,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5248,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5249,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5250,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5251,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# vim:set ft=dockerfile:
5252,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# explicitly set user/group IDs
5253,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,# grab gosu for easy step-down from root
5254,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5255,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5256,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5257,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5258,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5259,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5260,1e7af691a3981ec1c86d23d585dcebd9154d1cd0,/9.4/Dockerfile, # backwards compat
5261,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# vim:set ft=dockerfile:
5262,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# explicitly set user/group IDs
5263,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,# grab gosu for easy step-down from root
5264,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5265,762e07937086fb43082ab1523ac9d0191c2c347f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5266,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5267,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5268,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5269,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5270,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#		krb5-dev \
5271,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#		openldap-dev \
5272,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# configure: error: prove not found
5273,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5274,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5275,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5276,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5277,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5278,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5279,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5280,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5281,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5282,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5283,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5284,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5285,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5286,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5287,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/alpine/Dockerfile, # backwards compat
5288,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
5289,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5290,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5291,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5292,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#		krb5-dev \
5293,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#		openldap-dev \
5294,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# configure: error: prove not found
5295,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5296,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5297,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5298,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5299,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5300,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5301,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5302,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5303,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5304,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,#p' --recursive /usr/local \
5305,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5306,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5307,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5308,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5309,06813e04bdd11c923fe531b6b73176a0b6a2bb72,/11/alpine/Dockerfile, # backwards compat
5310,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# vim:set ft=dockerfile:
5311,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# explicitly set user/group IDs
5312,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,# grab gosu for easy step-down from root
5313,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5314,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5315,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5316,c01405b7c324350cc796ba9e861326aee158f75e,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5317,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
5318,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5319,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5320,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5321,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,#		krb5-dev \
5322,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,#		openldap-dev \
5323,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5324,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5325,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5326,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5327,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5328,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5329,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5330,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5331,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5332,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5333,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5334,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5335,6420763a8acd9ba12d34b2bd76e6d6927d2c36a5,/9.4/alpine/Dockerfile, # backwards compat
5336,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5337,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5338,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5339,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5340,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,#		krb5-dev \
5341,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,#		openldap-dev \
5342,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5343,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5344,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5345,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5346,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5347,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
5348,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5349,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5350,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
5351,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5352,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5353,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5354,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#		krb5-dev \
5355,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#		openldap-dev \
5356,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# configure: error: prove not found
5357,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5358,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5359,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5360,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5361,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5362,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5363,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5364,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5365,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5366,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,#p' --recursive /usr/local \
5367,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5368,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5369,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5370,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5371,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# vim:set ft=dockerfile:
5372,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# explicitly set user/group IDs
5373,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5374,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5375,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
5376,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5377,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5378,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5379,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5380,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5381,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# see note below about ""*.pyc"" files"
5382,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# arches officialy built by upstream
5383,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5384,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5385,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5386,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5387,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5388,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5389,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5390,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5391,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5392,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5393,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5394,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5395,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5396,f1e039c4ebd8e4691af65dfd6cf280df126039aa,/10/Dockerfile, # backwards compat
5397,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5398,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5399,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5400,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5401,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#		krb5-dev \
5402,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#		openldap-dev \
5403,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# configure: error: prove not found
5404,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5405,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5406,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
5407,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5408,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5409,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5410,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5411,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5412,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5413,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5414,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5415,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
5416,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5417,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5418,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5419,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5420,feaec8367b50af1707fc07da0643f77bd56aa912,/9.3/alpine/Dockerfile, # backwards compat
5421,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5422,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5423,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5424,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5425,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#		krb5-dev \
5426,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#		openldap-dev \
5427,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# configure: error: prove not found
5428,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5429,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5430,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5431,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5432,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5433,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5434,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5435,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5436,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5437,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
5438,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5439,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5440,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5441,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5442,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.6/alpine/Dockerfile, # backwards compat
5443,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# vim:set ft=dockerfile:
5444,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# explicitly set user/group IDs
5445,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,# grab gosu for easy step-down from root
5446,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5447,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5448,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5449,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5450,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5451,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5452,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.6/Dockerfile, # backwards compat
5453,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5454,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5455,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5456,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5457,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#		krb5-dev \
5458,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#		openldap-dev \
5459,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# configure: error: prove not found
5460,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5461,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5462,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5463,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5464,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5465,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5466,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5467,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5468,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5469,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
5470,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5471,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5472,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5473,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5474,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.6/alpine/Dockerfile, # backwards compat
5475,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,# vim:set ft=dockerfile:
5476,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,# explicitly set user/group IDs
5477,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,# grab gosu for easy step-down from root
5478,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5479,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5480,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5481,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5482,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# vim:set ft=dockerfile:
5483,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# explicitly set user/group IDs
5484,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5485,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5486,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# grab gosu for easy step-down from root
5487,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5488,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5489,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5490,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5491,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5492,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5493,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# arches officialy built by upstream
5494,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5495,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5496,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5497,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5498,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5499,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5500,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5501,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5502,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5503,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5504,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5505,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5506,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5507,1de51ab35ec3dccbb992b9b02faf8b61ed2d1e2d,/9.5/Dockerfile, # backwards compat
5508,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,# vim:set ft=dockerfile:
5509,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,# explicitly set user/group IDs
5510,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5511,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5512,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,# grab gosu for easy step-down from root
5513,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5514,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5515,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5516,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5517,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5518,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,# arches officialy built by upstream
5519,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5520,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5521,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5522,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5523,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5524,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5525,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5526,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5527,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5528,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5529,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5530,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5531,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5532,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.5/Dockerfile, # backwards compat
5533,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
5534,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5535,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5536,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5537,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,#		krb5-dev \
5538,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,#		openldap-dev \
5539,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5540,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5541,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5542,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5543,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5544,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5545,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5546,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5547,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5548,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5549,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5550,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5551,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/alpine/Dockerfile, # backwards compat
5552,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
5553,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5554,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5555,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5556,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,#		krb5-dev \
5557,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,#		openldap-dev \
5558,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5559,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5560,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5561,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5562,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5563,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5564,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5565,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5566,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5567,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5568,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5569,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5570,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5571,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5572,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,#		krb5-dev \
5573,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,#		openldap-dev \
5574,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5575,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5576,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5577,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5578,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5579,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5580,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5581,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5582,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5583,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5584,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5585,123aedc09bc067740fb28921c500ded83c018bd4,/9.5/alpine/Dockerfile, # backwards compat
5586,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5587,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5588,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5589,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5590,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#		krb5-dev \
5591,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#		openldap-dev \
5592,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# configure: error: prove not found
5593,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5594,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5595,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5596,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5597,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5598,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5599,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5600,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5601,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5602,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5603,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5604,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5605,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5606,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5607,8734ceed8c5e196d3d59227a59d80df8fed70126,/9.5/alpine/Dockerfile, # backwards compat
5608,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
5609,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5610,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5611,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5612,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#		krb5-dev \
5613,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#		openldap-dev \
5614,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# configure: error: prove not found
5615,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5616,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5617,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5618,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5619,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5620,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5621,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5622,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5623,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5624,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,#p' --recursive /usr/local \
5625,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5626,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5627,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5628,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5629,fe8c9a4a309a889dc057d53bf3769c25c1522c65,/10/alpine/Dockerfile, # backwards compat
5630,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,# vim:set ft=dockerfile:
5631,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5632,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,# grab gosu for easy step-down from root
5633,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5634,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5635,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# vim:set ft=dockerfile:
5636,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# explicitly set user/group IDs
5637,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,# grab gosu for easy step-down from root
5638,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5639,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5640,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5641,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5642,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5643,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,# vim:set ft=dockerfile:
5644,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5645,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,# grab gosu for easy step-down from root
5646,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5647,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5648,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5649,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5650,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5651,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5652,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,#		krb5-dev \
5653,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,#		openldap-dev \
5654,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# configure: error: prove not found
5655,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5656,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5657,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5658,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5659,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5660,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5661,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5662,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5663,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5664,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5665,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5666,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5667,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/alpine/Dockerfile, # backwards compat
5668,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
5669,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5670,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5671,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5672,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#		krb5-dev \
5673,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#		openldap-dev \
5674,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# configure: error: prove not found
5675,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5676,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5677,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5678,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5679,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5680,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5681,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5682,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5683,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5684,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,#p' --recursive /usr/local \
5685,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5686,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5687,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5688,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5689,0a66d53fface5ccc8274f99712ba2f382a1caf42,/11/alpine/Dockerfile, # backwards compat
5690,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5691,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5692,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5693,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5694,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,#		krb5-dev \
5695,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,#		openldap-dev \
5696,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5697,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5698,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5699,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5700,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5701,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5702,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5703,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5704,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5705,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5706,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5707,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,# vim:set ft=dockerfile:
5708,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5709,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,# grab gosu for easy step-down from root
5710,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5711,bfa7152926890a27e9fd8925fdffa824c353480a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5712,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5713,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
5714,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5715,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5716,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#		krb5-dev \
5717,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#		openldap-dev \
5718,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# configure: error: prove not found
5719,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5720,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5721,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5722,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5723,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5724,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5725,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5726,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5727,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5728,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
5729,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5730,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5731,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5732,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5733,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.5/alpine/Dockerfile, # backwards compat
5734,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# vim:set ft=dockerfile:
5735,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# explicitly set user/group IDs
5736,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5737,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5738,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# grab gosu for easy step-down from root
5739,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5740,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5741,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5742,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5743,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# see note below about ""*.pyc"" files"
5744,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# arches officialy built by upstream
5745,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5746,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5747,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5748,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5749,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5750,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5751,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5752,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5753,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5754,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5755,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5756,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5757,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5758,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/Dockerfile, # backwards compat
5759,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# vim:set ft=dockerfile:
5760,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# explicitly set user/group IDs
5761,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5762,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5763,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# grab gosu for easy step-down from root
5764,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5765,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5766,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5767,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5768,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# see note below about ""*.pyc"" files"
5769,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# arches officialy built by upstream
5770,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5771,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5772,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5773,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5774,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5775,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5776,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5777,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5778,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5779,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5780,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5781,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5782,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5783,559d29a4f8158c35d6b50870522f532abbabe3e6,/12/Dockerfile, # backwards compat
5784,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
5785,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
5786,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5787,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5788,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#		krb5-dev \
5789,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#		openldap-dev \
5790,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# configure: error: prove not found
5791,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5792,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5793,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5794,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5795,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5796,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5797,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5798,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5799,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5800,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,#p' --recursive /usr/local \
5801,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5802,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5803,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5804,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5805,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# vim:set ft=dockerfile:
5806,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# explicitly set user/group IDs
5807,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5808,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5809,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# grab gosu for easy step-down from root
5810,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5811,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5812,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5813,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
5814,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5815,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
5816,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# arches officialy built by upstream
5817,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5818,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5819,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5820,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5821,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5822,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5823,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5824,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5825,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5826,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5827,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5828,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
5829,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5830,8b792b8005278fa2349e2c591736b57aa94d7131,/9.6/Dockerfile, # backwards compat
5831,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5832,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5833,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5834,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5835,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,#		krb5-dev \
5836,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,#		openldap-dev \
5837,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# configure: error: prove not found
5838,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5839,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
5840,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5841,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5842,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5843,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5844,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5845,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5846,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5847,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5848,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5849,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5850,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5851,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5852,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/alpine/Dockerfile, # backwards compat
5853,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,# vim:set ft=dockerfile:
5854,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5855,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,# grab gosu for easy step-down from root
5856,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5857,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5858,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,# vim:set ft=dockerfile:
5859,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5860,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,# grab gosu for easy step-down from root
5861,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5862,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5863,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
5864,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5865,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5866,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5867,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,#		krb5-dev \
5868,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,#		openldap-dev \
5869,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5870,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
5871,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5872,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5873,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5874,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5875,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5876,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5877,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5878,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5879,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5880,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5881,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5882,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5883,87202c7e94944885c994cf1454c19a549bb7ac5b,/9.2/alpine/Dockerfile, # backwards compat
5884,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5885,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5886,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5887,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5888,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,#		krb5-dev \
5889,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,#		openldap-dev \
5890,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5891,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5892,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5893,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5894,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5895,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5896,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5897,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5898,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5899,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5900,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5901,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/alpine/Dockerfile, # backwards compat
5902,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,# vim:set ft=dockerfile:
5903,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5904,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,# grab gosu for easy step-down from root
5905,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5906,51e5166d69320581cb707d6fb102d3ba04803400,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5907,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# vim:set ft=dockerfile:
5908,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# explicitly set user/group IDs
5909,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,# grab gosu for easy step-down from root
5910,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5911,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5912,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,# vim:set ft=dockerfile:
5913,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5914,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,# grab gosu for easy step-down from root
5915,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5916,51e5166d69320581cb707d6fb102d3ba04803400,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5917,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,# vim:set ft=dockerfile:
5918,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5919,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,# grab gosu for easy step-down from root
5920,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5921,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5922,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
5923,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
5924,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5925,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5926,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,#		krb5-dev \
5927,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,#		openldap-dev \
5928,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5929,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5930,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5931,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5932,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5933,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5934,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5935,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5936,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5937,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5938,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5939,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,# vim:set ft=dockerfile:
5940,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5941,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,# grab gosu for easy step-down from root
5942,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5943,5036e92f87fa8f3d559996e50e91596127bcc2c1,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5944,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,# vim:set ft=dockerfile:
5945,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
5946,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,# grab gosu for easy step-down from root
5947,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5948,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
5949,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# vim:set ft=dockerfile:
5950,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# explicitly set user/group IDs
5951,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
5952,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
5953,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# grab gosu for easy step-down from root
5954,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
5955,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
5956,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
5957,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
5958,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
5959,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# arches officialy built by upstream
5960,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
5961,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
5962,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
5963,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
5964,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
5965,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
5966,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
5967,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
5968,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
5969,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
5970,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5971,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
5972,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5973,91939daa3f42d2796952f03353534cd87d181ccc,/9.5/Dockerfile, # backwards compat
5974,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
5975,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
5976,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5977,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5978,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#		krb5-dev \
5979,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#		openldap-dev \
5980,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# configure: error: prove not found
5981,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
5982,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
5983,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
5984,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
5985,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
5986,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
5987,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
5988,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
5989,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
5990,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,#p' --recursive /usr/local \
5991,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
5992,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
5993,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
5994,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
5995,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
5996,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
5997,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
5998,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
5999,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#		krb5-dev \
6000,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#		openldap-dev \
6001,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# configure: error: prove not found
6002,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6003,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6004,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6005,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6006,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6007,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6008,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6009,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6010,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6011,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6012,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6013,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6014,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6015,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6016,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.5/alpine/Dockerfile, # backwards compat
6017,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6018,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6019,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6020,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6021,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,#		krb5-dev \
6022,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,#		openldap-dev \
6023,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6024,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6025,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6026,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6027,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6028,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6029,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6030,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6031,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6032,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6033,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6034,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.6/alpine/Dockerfile, # backwards compat
6035,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6036,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6037,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6038,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6039,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#		krb5-dev \
6040,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#		openldap-dev \
6041,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# configure: error: prove not found
6042,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6043,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6044,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6045,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6046,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6047,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6048,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6049,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6050,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6051,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
6052,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6053,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6054,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6055,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6056,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.6/alpine/Dockerfile, # backwards compat
6057,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# vim:set ft=dockerfile:
6058,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# explicitly set user/group IDs
6059,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# grab gosu for easy step-down from root
6060,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6061,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6062,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6063,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# arches officialy built by upstream
6064,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6065,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6066,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6067,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6068,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6069,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6070,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6071,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6072,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6073,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6074,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6075,cdbe05265f849b028e44c01b942db7055bf37101,/10/Dockerfile, # backwards compat
6076,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6077,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6078,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6079,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6080,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,#		krb5-dev \
6081,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,#		openldap-dev \
6082,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,# configure: error: prove not found
6083,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6084,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6085,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6086,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6087,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6088,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6089,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6090,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6091,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6092,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6093,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6094,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6095,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6096,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/alpine/Dockerfile, # backwards compat
6097,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# vim:set ft=dockerfile:
6098,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# explicitly set user/group IDs
6099,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# grab gosu for easy step-down from root
6100,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6101,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6102,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6103,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6104,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# arches officialy built by upstream
6105,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6106,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6107,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6108,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6109,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6110,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6111,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6112,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6113,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6114,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6115,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6116,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.3/Dockerfile, # backwards compat
6117,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,# vim:set ft=dockerfile:
6118,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6119,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,# grab gosu for easy step-down from root
6120,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6121,94aee2022d2014230fad3d054c048678137281d1,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6122,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,# vim:set ft=dockerfile:
6123,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6124,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,# grab gosu for easy step-down from root
6125,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6126,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6127,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6128,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6129,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6130,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6131,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,#		krb5-dev \
6132,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,#		openldap-dev \
6133,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6134,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6135,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6136,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6137,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6138,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,# vim:set ft=dockerfile:
6139,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6140,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6141,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# vim:set ft=dockerfile:
6142,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# explicitly set user/group IDs
6143,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6144,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6145,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# grab gosu for easy step-down from root
6146,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6147,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6148,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6149,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6150,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# see note below about ""*.pyc"" files"
6151,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# arches officialy built by upstream
6152,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6153,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6154,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6155,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6156,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6157,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6158,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6159,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6160,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6161,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6162,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6163,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6164,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6165,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/Dockerfile, # backwards compat
6166,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# vim:set ft=dockerfile:
6167,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# explicitly set user/group IDs
6168,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# grab gosu for easy step-down from root
6169,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6170,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6171,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6172,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# arches officialy built by upstream
6173,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6174,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6175,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6176,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6177,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6178,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6179,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6180,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6181,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6182,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6183,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6184,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/Dockerfile, # backwards compat
6185,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6186,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6187,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6188,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6189,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#		krb5-dev \
6190,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#		openldap-dev \
6191,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# configure: error: prove not found
6192,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6193,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6194,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
6195,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6196,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6197,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6198,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6199,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6200,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6201,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6202,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6203,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
6204,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6205,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6206,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6207,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6208,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.3/alpine/Dockerfile, # backwards compat
6209,9375cde5569bcfbe814a2788d97c1f8f9590e514,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6210,9375cde5569bcfbe814a2788d97c1f8f9590e514,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6211,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
6212,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
6213,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6214,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6215,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#		krb5-dev \
6216,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#		openldap-dev \
6217,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# configure: error: prove not found
6218,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6219,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6220,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6221,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6222,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6223,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6224,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6225,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6226,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6227,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,#p' --recursive /usr/local \
6228,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6229,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6230,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6231,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6232,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/10/alpine/Dockerfile, # backwards compat
6233,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,# vim:set ft=dockerfile:
6234,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6235,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,# grab gosu for easy step-down from root
6236,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6237,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6238,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# vim:set ft=dockerfile:
6239,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# explicitly set user/group IDs
6240,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6241,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6242,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
6243,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6244,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6245,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6246,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
6247,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6248,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6249,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# arches officialy built by upstream
6250,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6251,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6252,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6253,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6254,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6255,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6256,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6257,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6258,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6259,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6260,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6261,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6262,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6263,9f53bdfb953c67bfb030417b5038d78ff162ed2a,/10/Dockerfile, # backwards compat
6264,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# vim:set ft=dockerfile:
6265,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# explicitly set user/group IDs
6266,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,# grab gosu for easy step-down from root
6267,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6268,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6269,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# vim:set ft=dockerfile:
6270,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# explicitly set user/group IDs
6271,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6272,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6273,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# grab gosu for easy step-down from root
6274,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6275,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6276,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6277,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6278,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# arches officialy built by upstream
6279,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6280,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6281,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6282,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6283,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6284,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6285,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6286,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6287,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6288,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6289,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6290,726128b358cdc0efc1753475bbe502b07cbbb540,/9.6/Dockerfile, # backwards compat
6291,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,# vim:set ft=dockerfile:
6292,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6293,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,# grab gosu for easy step-down from root
6294,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6295,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6296,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# vim:set ft=dockerfile:
6297,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# explicitly set user/group IDs
6298,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,# grab gosu for easy step-down from root
6299,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6300,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6301,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# vim:set ft=dockerfile:
6302,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# explicitly set user/group IDs
6303,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,# grab gosu for easy step-down from root
6304,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6305,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6306,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6307,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6308,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6309,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6310,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/Dockerfile, # backwards compat
6311,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# vim:set ft=dockerfile:
6312,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# explicitly set user/group IDs
6313,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,# grab gosu for easy step-down from root
6314,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6315,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6316,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6317,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6318,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6319,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6320,a869eeccfb98c9653fca9f135f3bafa758c6f4f7,/9.5/Dockerfile, # backwards compat
6321,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# vim:set ft=dockerfile:
6322,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# explicitly set user/group IDs
6323,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,# grab gosu for easy step-down from root
6324,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6325,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6326,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6327,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6328,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6329,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6330,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/Dockerfile, # backwards compat
6331,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# vim:set ft=dockerfile:
6332,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# explicitly set user/group IDs
6333,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6334,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6335,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# grab gosu for easy step-down from root
6336,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6337,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6338,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6339,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6340,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6341,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# arches officialy built by upstream
6342,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6343,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6344,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6345,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6346,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6347,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6348,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6349,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6350,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6351,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6352,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6353,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6354,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6355,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/Dockerfile, # backwards compat
6356,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
6357,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6358,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6359,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6360,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#		krb5-dev \
6361,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#		openldap-dev \
6362,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# configure: error: prove not found
6363,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6364,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6365,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6366,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6367,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6368,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6369,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6370,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6371,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6372,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,#p' --recursive /usr/local \
6373,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6374,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6375,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6376,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6377,6f7881a307a7856aa7671260b1f0b690ca51b740,/12/alpine/Dockerfile, # backwards compat
6378,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6379,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6380,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6381,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6382,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#		krb5-dev \
6383,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#		openldap-dev \
6384,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# configure: error: prove not found
6385,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6386,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6387,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6388,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6389,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6390,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6391,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6392,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6393,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6394,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6395,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6396,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6397,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6398,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6399,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.5/alpine/Dockerfile, # backwards compat
6400,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6401,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
6402,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6403,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6404,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#		krb5-dev \
6405,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#		openldap-dev \
6406,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# configure: error: prove not found
6407,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6408,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6409,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6410,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
6411,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6412,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6413,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6414,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6415,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6416,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6417,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6418,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6419,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6420,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6421,63fb3178b5b2cdaf920454f7e30042e73c01d75f,/9.5/alpine/Dockerfile, # backwards compat
6422,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
6423,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6424,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6425,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6426,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#		krb5-dev \
6427,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#		openldap-dev \
6428,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# configure: error: prove not found
6429,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6430,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6431,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6432,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6433,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6434,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6435,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6436,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6437,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6438,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,#p' --recursive /usr/local \
6439,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6440,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6441,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6442,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6443,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/10/alpine/Dockerfile, # backwards compat
6444,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# vim:set ft=dockerfile:
6445,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# explicitly set user/group IDs
6446,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# grab gosu for easy step-down from root
6447,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6448,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6449,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6450,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6451,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# arches officialy built by upstream
6452,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6453,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6454,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6455,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6456,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6457,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6458,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6459,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6460,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6461,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6462,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6463,2cab5040341f46331367f8766b4d249a5b7a9366,/9.5/Dockerfile, # backwards compat
6464,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# vim:set ft=dockerfile:
6465,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# explicitly set user/group IDs
6466,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6467,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6468,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# grab gosu for easy step-down from root
6469,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6470,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6471,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6472,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6473,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6474,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# arches officialy built by upstream
6475,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6476,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6477,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6478,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6479,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6480,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6481,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6482,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6483,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6484,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6485,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6486,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6487,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6488,064113e0e481a1d0542846b81858e457fde02c90,/9.6/Dockerfile, # backwards compat
6489,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,# vim:set ft=dockerfile:
6490,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6491,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,# grab gosu for easy step-down from root
6492,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6493,a6d4922823aa8011513bb9c160c26c689301823a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6494,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# vim:set ft=dockerfile:
6495,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# explicitly set user/group IDs
6496,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,# grab gosu for easy step-down from root
6497,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6498,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6499,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6500,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6501,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6502,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6503,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.3/Dockerfile, # backwards compat
6504,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# vim:set ft=dockerfile:
6505,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# explicitly set user/group IDs
6506,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# grab gosu for easy step-down from root
6507,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6508,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6509,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# arches officialy built by upstream
6510,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6511,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6512,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6513,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6514,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6515,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6516,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6517,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6518,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6519,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6520,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6521,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.3/Dockerfile, # backwards compat
6522,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6523,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6524,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6525,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6526,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,#		krb5-dev \
6527,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,#		openldap-dev \
6528,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6529,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6530,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6531,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6532,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6533,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6534,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6535,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6536,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# vim:set ft=dockerfile:
6537,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# explicitly set user/group IDs
6538,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6539,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6540,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# grab gosu for easy step-down from root
6541,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6542,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6543,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6544,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6545,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6546,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# arches officialy built by upstream
6547,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6548,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6549,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6550,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6551,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6552,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6553,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6554,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6555,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6556,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6557,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6558,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6559,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6560,faf08dbfd0675d144cbdef39f4506425ec7cee26,/10/Dockerfile, # backwards compat
6561,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6562,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6563,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6564,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6565,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#		krb5-dev \
6566,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#		openldap-dev \
6567,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# configure: error: prove not found
6568,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6569,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6570,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6571,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6572,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6573,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6574,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6575,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6576,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6577,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6578,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6579,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6580,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6581,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6582,c6da877bba4184e5e112032f52e36bcabccc6ce8,/9.5/alpine/Dockerfile, # backwards compat
6583,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6584,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6585,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6586,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6587,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,#		krb5-dev \
6588,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,#		openldap-dev \
6589,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6590,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6591,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6592,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6593,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6594,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6595,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6596,d2b38544770a63fed430694a7aed33de3ad8b808,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6597,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
6598,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
6599,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6600,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6601,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#		krb5-dev \
6602,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#		openldap-dev \
6603,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# configure: error: prove not found
6604,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6605,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6606,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6607,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6608,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6609,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6610,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6611,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6612,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6613,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,#p' --recursive /usr/local \
6614,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6615,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6616,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6617,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6618,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,# vim:set ft=dockerfile:
6619,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,# explicitly set user/group IDs
6620,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,# grab gosu for easy step-down from root
6621,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6622,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6623,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6624,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6625,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6626,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6627,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# vim:set ft=dockerfile:
6628,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# explicitly set user/group IDs
6629,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6630,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6631,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
6632,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6633,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6634,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6635,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
6636,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6637,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# see note below about ""*.pyc"" files"
6638,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# arches officialy built by upstream
6639,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6640,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6641,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6642,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
6643,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6644,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6645,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6646,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6647,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6648,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6649,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6650,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6651,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6652,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6653,5e2746f8ff4b94d3b3aa56a6cd7bdbdcd88a1d64,/13/Dockerfile, # backwards compat
6654,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,# vim:set ft=dockerfile:
6655,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6656,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,# grab gosu for easy step-down from root
6657,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6658,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6659,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,# vim:set ft=dockerfile:
6660,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6661,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,# grab gosu for easy step-down from root
6662,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6663,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6664,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# vim:set ft=dockerfile:
6665,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# explicitly set user/group IDs
6666,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,# grab gosu for easy step-down from root
6667,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6668,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6669,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6670,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6671,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6672,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# vim:set ft=dockerfile:
6673,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# explicitly set user/group IDs
6674,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# grab gosu for easy step-down from root
6675,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6676,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6677,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6678,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# arches officialy built by upstream
6679,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6680,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6681,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6682,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6683,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6684,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6685,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6686,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6687,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6688,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6689,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6690,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.6/Dockerfile, # backwards compat
6691,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
6692,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6693,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6694,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6695,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,#		krb5-dev \
6696,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,#		openldap-dev \
6697,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# configure: error: prove not found
6698,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6699,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6700,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6701,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6702,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6703,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6704,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6705,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6706,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6707,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6708,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6709,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6710,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6711,9d16e9e237b271da39d05d95af24724e79181b19,/9.4/alpine/Dockerfile, # backwards compat
6712,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
6713,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6714,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6715,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6716,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,#		krb5-dev \
6717,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,#		openldap-dev \
6718,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6719,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6720,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6721,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6722,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6723,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6724,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6725,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6726,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6727,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
6728,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6729,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6730,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,#		krb5-dev \
6731,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,#		openldap-dev \
6732,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6733,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6734,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6735,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6736,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6737,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6738,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6739,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6740,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,# vim:set ft=dockerfile:
6741,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6742,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,# grab gosu for easy step-down from root
6743,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6744,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6745,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# vim:set ft=dockerfile:
6746,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# explicitly set user/group IDs
6747,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6748,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6749,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# grab gosu for easy step-down from root
6750,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6751,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6752,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6753,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6754,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
6755,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# arches officialy built by upstream
6756,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6757,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6758,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6759,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6760,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6761,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6762,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6763,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6764,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6765,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6766,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6767,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6768,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6769,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.5/Dockerfile, # backwards compat
6770,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
6771,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6772,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6773,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6774,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,#		krb5-dev \
6775,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,#		openldap-dev \
6776,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# configure: error: prove not found
6777,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6778,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6779,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
6780,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6781,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6782,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6783,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6784,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6785,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6786,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6787,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6788,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6789,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6790,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6791,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6792,f3146f857b42bd4c4cb2be6134149fddee546584,/9.3/alpine/Dockerfile, # backwards compat
6793,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
6794,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6795,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6796,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6797,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#		krb5-dev \
6798,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#		openldap-dev \
6799,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# configure: error: prove not found
6800,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6801,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6802,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6803,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6804,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6805,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6806,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6807,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6808,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6809,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
6810,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6811,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6812,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6813,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6814,eb1fa8058f1a0c3864713860392d73a1045f0778,/9.5/alpine/Dockerfile, # backwards compat
6815,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,# vim:set ft=dockerfile:
6816,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,# explicitly set user/group IDs
6817,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,# grab gosu for easy step-down from root
6818,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6819,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6820,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6821,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6822,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,# arches officialy built by upstream
6823,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6824,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6825,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6826,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6827,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6828,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6829,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6830,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6831,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6832,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6833,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6834,639f83fb14161c8be60119b97bb9f88796776058,/9.6/Dockerfile, # backwards compat
6835,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
6836,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
6837,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6838,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6839,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#		krb5-dev \
6840,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#		openldap-dev \
6841,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# configure: error: prove not found
6842,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6843,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6844,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6845,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6846,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6847,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6848,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6849,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6850,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6851,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
6852,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6853,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6854,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6855,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6856,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/10/alpine/Dockerfile, # backwards compat
6857,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# vim:set ft=dockerfile:
6858,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# explicitly set user/group IDs
6859,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# grab gosu for easy step-down from root
6860,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6861,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6862,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# arches officialy built by upstream
6863,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6864,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6865,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6866,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6867,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6868,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6869,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6870,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6871,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6872,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6873,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6874,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.4/Dockerfile, # backwards compat
6875,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# vim:set ft=dockerfile:
6876,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# explicitly set user/group IDs
6877,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6878,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6879,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
6880,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6881,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6882,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6883,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
6884,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6885,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
6886,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# arches officialy built by upstream
6887,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6888,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6889,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6890,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6891,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6892,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6893,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6894,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6895,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6896,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6897,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6898,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6899,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6900,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.6/Dockerfile, # backwards compat
6901,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# vim:set ft=dockerfile:
6902,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# explicitly set user/group IDs
6903,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# grab gosu for easy step-down from root
6904,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6905,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6906,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# arches officialy built by upstream
6907,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6908,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6909,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6910,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6911,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6912,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6913,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6914,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6915,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6916,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
6917,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6918,61e369ce3738e38386fa01ce4809c2304e76257c,/9.4/Dockerfile, # backwards compat
6919,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
6920,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
6921,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
6922,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
6923,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#		krb5-dev \
6924,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#		openldap-dev \
6925,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# configure: error: prove not found
6926,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
6927,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
6928,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
6929,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
6930,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
6931,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
6932,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
6933,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
6934,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
6935,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,#p' --recursive /usr/local \
6936,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
6937,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6938,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
6939,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6940,6dfdc0eacba0ae39b837df5eef63f89f13556e50,/11/alpine/Dockerfile, # backwards compat
6941,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# vim:set ft=dockerfile:
6942,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# explicitly set user/group IDs
6943,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6944,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6945,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# grab gosu for easy step-down from root
6946,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6947,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6948,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6949,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6950,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6951,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# arches officialy built by upstream
6952,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6953,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6954,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6955,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6956,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6957,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6958,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6959,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6960,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6961,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6962,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6963,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6964,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6965,59fd787a41ba4fd042f4d169556e70927c323cda,/10/Dockerfile, # backwards compat
6966,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# vim:set ft=dockerfile:
6967,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# explicitly set user/group IDs
6968,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
6969,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
6970,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# grab gosu for easy step-down from root
6971,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6972,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
6973,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
6974,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
6975,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# see note below about ""*.pyc"" files"
6976,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# arches officialy built by upstream
6977,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
6978,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
6979,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
6980,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
6981,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
6982,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
6983,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
6984,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
6985,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
6986,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
6987,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
6988,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
6989,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
6990,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/10/Dockerfile, # backwards compat
6991,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,# vim:set ft=dockerfile:
6992,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
6993,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,# grab gosu for easy step-down from root
6994,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
6995,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
6996,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# vim:set ft=dockerfile:
6997,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# explicitly set user/group IDs
6998,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,# grab gosu for easy step-down from root
6999,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7000,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7001,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7002,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7003,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7004,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7005,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# vim:set ft=dockerfile:
7006,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# explicitly set user/group IDs
7007,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,# grab gosu for easy step-down from root
7008,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7009,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7010,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7011,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7012,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7013,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# vim:set ft=dockerfile:
7014,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# explicitly set user/group IDs
7015,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,# grab gosu for easy step-down from root
7016,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7017,09b09edbea4339a008ef81f00475330172fe7630,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7018,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7019,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7020,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7021,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7022,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,#		krb5-dev \
7023,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,#		openldap-dev \
7024,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7025,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7026,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7027,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7028,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7029,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7030,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7031,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7032,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7033,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7034,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7035,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.4/alpine/Dockerfile, # backwards compat
7036,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,# vim:set ft=dockerfile:
7037,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,# explicitly set user/group IDs
7038,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7039,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7040,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,# grab gosu for easy step-down from root
7041,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7042,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7043,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7044,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7045,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# see note below about ""*.pyc"" files"
7046,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,# arches officialy built by upstream
7047,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7048,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7049,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7050,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7051,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7052,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7053,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7054,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7055,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7056,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7057,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7058,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7059,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7060,6d1f671dcd2c8d51484d19767a33c37110dd650f,/12/Dockerfile, # backwards compat
7061,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7062,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7063,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7064,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7065,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#		krb5-dev \
7066,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#		openldap-dev \
7067,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# configure: error: prove not found
7068,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7069,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7070,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7071,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7072,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7073,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7074,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7075,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7076,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7077,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7078,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7079,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7080,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7081,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7082,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.5/alpine/Dockerfile, # backwards compat
7083,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,# vim:set ft=dockerfile:
7084,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7085,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,# grab gosu for easy step-down from root
7086,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7087,63d966973d9593c0d9890b96f10ac73566913520,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7088,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7089,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7090,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7091,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7092,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#		krb5-dev \
7093,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#		openldap-dev \
7094,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# configure: error: prove not found
7095,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7096,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7097,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7098,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7099,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7100,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7101,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7102,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7103,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7104,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7105,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7106,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7107,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7108,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7109,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.5/alpine/Dockerfile, # backwards compat
7110,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7111,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7112,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7113,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7114,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#		krb5-dev \
7115,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#		openldap-dev \
7116,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# configure: error: prove not found
7117,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7118,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7119,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7120,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7121,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7122,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7123,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7124,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7125,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7126,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
7127,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7128,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7129,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7130,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7131,4b652bf95baee9cd7ef31300a4938ad72d09ad88,/9.4/alpine/Dockerfile, # backwards compat
7132,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,# vim:set ft=dockerfile:
7133,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7134,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,# grab gosu for easy step-down from root
7135,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7136,fbfc076af59e0f1ac47023da27b2a4b1e34a808b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7137,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,# vim:set ft=dockerfile:
7138,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7139,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,# grab gosu for easy step-down from root
7140,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7141,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7142,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
7143,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7144,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7145,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7146,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,#		krb5-dev \
7147,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,#		openldap-dev \
7148,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7149,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7150,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7151,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7152,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7153,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
7154,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7155,03f4064a045114f56fa445eb602339faaf79eeec,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7156,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# vim:set ft=dockerfile:
7157,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# explicitly set user/group IDs
7158,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7159,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7160,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
7161,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7162,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7163,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7164,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7165,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7166,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
7167,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# arches officialy built by upstream
7168,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7169,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7170,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7171,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7172,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7173,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7174,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7175,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7176,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7177,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7178,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7179,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7180,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7181,7ea20406a8b723e9766cd436b625356e04e33092,/9.5/Dockerfile, # backwards compat
7182,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,# vim:set ft=dockerfile:
7183,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7184,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,# grab gosu for easy step-down from root
7185,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7186,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7187,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
7188,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7189,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7190,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7191,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#		krb5-dev \
7192,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#		openldap-dev \
7193,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# configure: error: prove not found
7194,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7195,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7196,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
7197,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7198,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7199,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7200,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7201,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7202,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7203,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7204,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7205,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,#p' --recursive /usr/local \
7206,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7207,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7208,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7209,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7210,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.2/alpine/Dockerfile, # backwards compat
7211,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
7212,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7213,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7214,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7215,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,#		krb5-dev \
7216,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,#		openldap-dev \
7217,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7218,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
7219,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7220,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7221,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7222,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7223,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7224,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7225,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7226,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7227,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7228,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7229,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.3/alpine/Dockerfile, # backwards compat
7230,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7231,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7232,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7233,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7234,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,#		krb5-dev \
7235,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,#		openldap-dev \
7236,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,# configure: error: prove not found
7237,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7238,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7239,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7240,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7241,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7242,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7243,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7244,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7245,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7246,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7247,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7248,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7249,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7250,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7251,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/11/alpine/Dockerfile, # backwards compat
7252,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,# vim:set ft=dockerfile:
7253,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7254,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,# grab gosu for easy step-down from root
7255,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7256,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7257,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7258,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7259,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7260,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7261,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#		krb5-dev \
7262,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#		openldap-dev \
7263,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# configure: error: prove not found
7264,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7265,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7266,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7267,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7268,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7269,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7270,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7271,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7272,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7273,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
7274,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7275,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7276,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7277,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7278,122fb0bdcc8058166d7535d30724278efbe41e86,/9.6/alpine/Dockerfile, # backwards compat
7279,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,# vim:set ft=dockerfile:
7280,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,# explicitly set user/group IDs
7281,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,# grab gosu for easy step-down from root
7282,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7283,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7284,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7285,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7286,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7287,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7288,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# vim:set ft=dockerfile:
7289,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# explicitly set user/group IDs
7290,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# grab gosu for easy step-down from root
7291,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7292,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7293,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# arches officialy built by upstream
7294,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7295,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7296,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7297,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7298,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7299,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7300,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7301,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7302,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7303,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7304,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7305,f4aa86c49b4691ea2e23934a419538df187a7f57,/9.5/Dockerfile, # backwards compat
7306,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7307,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7308,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7309,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7310,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,#		krb5-dev \
7311,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,#		openldap-dev \
7312,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7313,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7314,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7315,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7316,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7317,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
7318,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7319,03f4064a045114f56fa445eb602339faaf79eeec,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7320,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7321,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7322,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7323,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7324,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#		krb5-dev \
7325,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#		openldap-dev \
7326,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# configure: error: prove not found
7327,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7328,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7329,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7330,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7331,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7332,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7333,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7334,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7335,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7336,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7337,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7338,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7339,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7340,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7341,0de8bbbcdcdd7783acb7ce2678c85d5aab977c55,/11/alpine/Dockerfile, # backwards compat
7342,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7343,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7344,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7345,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7346,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#		krb5-dev \
7347,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#		openldap-dev \
7348,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# configure: error: prove not found
7349,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7350,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7351,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7352,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7353,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7354,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7355,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7356,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7357,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7358,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
7359,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7360,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7361,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7362,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7363,5673b8988b3d411f0ba6b9e73e48cf6986cc959d,/9.6/alpine/Dockerfile, # backwards compat
7364,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# vim:set ft=dockerfile:
7365,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# explicitly set user/group IDs
7366,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,# grab gosu for easy step-down from root
7367,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7368,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7369,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7370,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7371,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7372,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7373,c6d76847c03ff9bc95ab11ebac769cf24e163ca6,/9.6/Dockerfile, # backwards compat
7374,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7375,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7376,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7377,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7378,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#		krb5-dev \
7379,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#		openldap-dev \
7380,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# configure: error: prove not found
7381,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7382,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7383,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7384,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7385,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7386,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7387,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7388,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7389,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7390,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7391,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7392,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7393,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7394,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7395,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/alpine/Dockerfile, # backwards compat
7396,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7397,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7398,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7399,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7400,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,#		krb5-dev \
7401,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,#		openldap-dev \
7402,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# configure: error: prove not found
7403,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7404,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7405,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7406,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7407,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7408,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7409,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7410,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7411,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7412,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7413,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7414,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7415,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7416,f3146f857b42bd4c4cb2be6134149fddee546584,/9.4/alpine/Dockerfile, # backwards compat
7417,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# vim:set ft=dockerfile:
7418,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# explicitly set user/group IDs
7419,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7420,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7421,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# grab gosu for easy step-down from root
7422,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7423,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7424,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7425,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
7426,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7427,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# see note below about ""*.pyc"" files"
7428,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# arches officialy built by upstream
7429,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7430,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7431,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7432,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7433,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7434,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7435,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7436,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7437,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7438,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7439,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7440,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7441,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7442,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/11/Dockerfile, # backwards compat
7443,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7444,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7445,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7446,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7447,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#		krb5-dev \
7448,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#		openldap-dev \
7449,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# configure: error: prove not found
7450,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7451,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7452,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7453,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7454,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7455,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7456,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7457,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7458,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7459,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7460,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7461,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7462,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7463,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7464,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/alpine/Dockerfile, # backwards compat
7465,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# vim:set ft=dockerfile:
7466,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# explicitly set user/group IDs
7467,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,# grab gosu for easy step-down from root
7468,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7469,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7470,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7471,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7472,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7473,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7474,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.5/Dockerfile, # backwards compat
7475,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# vim:set ft=dockerfile:
7476,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# explicitly set user/group IDs
7477,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,# grab gosu for easy step-down from root
7478,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7479,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7480,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7481,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7482,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7483,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7484,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7485,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7486,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#		krb5-dev \
7487,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#		openldap-dev \
7488,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# configure: error: prove not found
7489,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7490,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7491,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7492,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7493,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7494,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7495,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7496,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7497,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7498,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7499,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7500,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7501,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7502,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7503,639f83fb14161c8be60119b97bb9f88796776058,/10/alpine/Dockerfile, # backwards compat
7504,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,# vim:set ft=dockerfile:
7505,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,# explicitly set user/group IDs
7506,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,# grab gosu for easy step-down from root
7507,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7508,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7509,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7510,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7511,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,# arches officialy built by upstream
7512,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7513,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7514,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7515,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7516,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7517,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7518,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7519,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7520,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7521,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7522,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7523,639f83fb14161c8be60119b97bb9f88796776058,/10/Dockerfile, # backwards compat
7524,77b5f005d45f4b0747f5a719f329499b6ad454dc,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7525,77b5f005d45f4b0747f5a719f329499b6ad454dc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7526,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7527,ea490430aabd553f34656e8f0e846d2ed3c42930,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7528,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7529,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7530,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7531,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7532,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7533,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7534,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#		krb5-dev \
7535,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#		openldap-dev \
7536,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# configure: error: prove not found
7537,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7538,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7539,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7540,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7541,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7542,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7543,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7544,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7545,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7546,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7547,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7548,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7549,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7550,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7551,db452338a99764f0141aae60f7267a58f665e6b7,/9.5/alpine/Dockerfile, # backwards compat
7552,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# vim:set ft=dockerfile:
7553,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# explicitly set user/group IDs
7554,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,# grab gosu for easy step-down from root
7555,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7556,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7557,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7558,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7559,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7560,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7561,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# vim:set ft=dockerfile:
7562,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# explicitly set user/group IDs
7563,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,# grab gosu for easy step-down from root
7564,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7565,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7566,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7567,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7568,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7569,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
7570,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7571,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7572,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7573,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,#		krb5-dev \
7574,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,#		openldap-dev \
7575,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7576,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7577,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7578,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7579,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7580,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7581,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7582,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7583,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# vim:set ft=dockerfile:
7584,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# explicitly set user/group IDs
7585,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,# grab gosu for easy step-down from root
7586,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7587,09b09edbea4339a008ef81f00475330172fe7630,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7588,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7589,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7590,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7591,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7592,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#		krb5-dev \
7593,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#		openldap-dev \
7594,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# configure: error: prove not found
7595,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7596,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7597,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7598,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7599,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7600,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7601,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7602,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7603,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7604,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7605,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7606,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7607,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7608,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7609,60db3b9da9c3a83057daee618d47864ac271bebf,/10/alpine/Dockerfile, # backwards compat
7610,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7611,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7612,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7613,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7614,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#		krb5-dev \
7615,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#		openldap-dev \
7616,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# configure: error: prove not found
7617,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7618,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7619,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7620,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7621,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7622,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7623,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7624,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7625,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7626,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7627,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7628,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7629,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7630,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7631,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/10/alpine/Dockerfile, # backwards compat
7632,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# vim:set ft=dockerfile:
7633,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# explicitly set user/group IDs
7634,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# grab gosu for easy step-down from root
7635,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7636,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7637,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# arches officialy built by upstream
7638,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7639,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7640,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7641,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7642,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7643,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7644,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7645,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7646,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7647,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7648,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7649,4af033ebfe50d33214c32be78c52f2693769fb14,/9.3/Dockerfile, # backwards compat
7650,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# vim:set ft=dockerfile:
7651,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# explicitly set user/group IDs
7652,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# grab gosu for easy step-down from root
7653,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7654,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7655,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7656,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7657,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# arches officialy built by upstream
7658,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7659,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7660,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7661,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7662,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7663,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7664,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7665,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7666,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7667,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7668,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7669,635fd0bcb3ababc96871c9da52f10743fbae4742,/10/Dockerfile, # backwards compat
7670,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
7671,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7672,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7673,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7674,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#		krb5-dev \
7675,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#		openldap-dev \
7676,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# configure: error: prove not found
7677,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7678,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7679,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7680,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7681,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7682,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7683,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7684,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7685,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7686,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
7687,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7688,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7689,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7690,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7691,01058c1847400919de5282ca825a7806a9dafcda,/9.5/alpine/Dockerfile, # backwards compat
7692,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# vim:set ft=dockerfile:
7693,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# explicitly set user/group IDs
7694,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,# grab gosu for easy step-down from root
7695,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7696,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7697,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7698,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7699,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7700,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7701,54f46e57136635b484295b985acd6e422d0b9583,/9.3/Dockerfile, # backwards compat
7702,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# vim:set ft=dockerfile:
7703,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# explicitly set user/group IDs
7704,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,# grab gosu for easy step-down from root
7705,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7706,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7707,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7708,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7709,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7710,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7711,96498cc9b353adf67b8bada27b4aaf1fde858bd8,/9.4/Dockerfile, # backwards compat
7712,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7713,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
7714,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7715,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7716,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,#		krb5-dev \
7717,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,#		openldap-dev \
7718,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7719,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7720,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7721,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7722,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7723,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7724,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7725,d2b38544770a63fed430694a7aed33de3ad8b808,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7726,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7727,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7728,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7729,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7730,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#		krb5-dev \
7731,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#		openldap-dev \
7732,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# configure: error: prove not found
7733,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7734,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7735,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7736,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7737,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7738,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7739,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7740,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7741,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7742,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7743,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7744,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7745,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7746,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7747,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/11/alpine/Dockerfile, # backwards compat
7748,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
7749,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7750,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7751,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7752,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#		krb5-dev \
7753,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#		openldap-dev \
7754,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# configure: error: prove not found
7755,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7756,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7757,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7758,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7759,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7760,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7761,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7762,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7763,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7764,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,#p' --recursive /usr/local \
7765,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7766,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7767,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7768,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7769,01058c1847400919de5282ca825a7806a9dafcda,/10/alpine/Dockerfile, # backwards compat
7770,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7771,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7772,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7773,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7774,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#		krb5-dev \
7775,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#		openldap-dev \
7776,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# configure: error: prove not found
7777,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7778,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7779,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7780,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7781,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7782,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7783,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7784,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7785,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7786,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7787,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7788,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7789,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7790,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7791,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/11/alpine/Dockerfile, # backwards compat
7792,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# vim:set ft=dockerfile:
7793,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# explicitly set user/group IDs
7794,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# grab gosu for easy step-down from root
7795,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7796,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7797,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# arches officialy built by upstream
7798,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7799,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7800,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7801,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7802,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7803,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7804,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7805,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7806,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7807,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7808,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7809,f7dc5727b1d6b6a636350e11648845ae33477579,/10/Dockerfile, # backwards compat
7810,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# vim:set ft=dockerfile:
7811,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# explicitly set user/group IDs
7812,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,# grab gosu for easy step-down from root
7813,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7814,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7815,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7816,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7817,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
7818,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7819,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7820,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7821,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#		krb5-dev \
7822,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#		openldap-dev \
7823,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# configure: error: prove not found
7824,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7825,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7826,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7827,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7828,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7829,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7830,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7831,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7832,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7833,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,#p' --recursive /usr/local \
7834,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7835,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7836,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7837,4c4693ef1306a391785c7b73b2784d5634903467,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7838,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# vim:set ft=dockerfile:
7839,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# explicitly set user/group IDs
7840,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7841,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7842,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# grab gosu for easy step-down from root
7843,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7844,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7845,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7846,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7847,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
7848,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# arches officialy built by upstream
7849,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7850,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
7851,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7852,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7853,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7854,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7855,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7856,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7857,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7858,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
7859,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7860,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
7861,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7862,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.5/Dockerfile, # backwards compat
7863,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,# vim:set ft=dockerfile:
7864,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7865,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,# grab gosu for easy step-down from root
7866,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7867,e677b561722c7cc9fc8181bb29cebe5f7c96c6e8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7868,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,# vim:set ft=dockerfile:
7869,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
7870,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,# grab gosu for easy step-down from root
7871,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7872,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7873,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# vim:set ft=dockerfile:
7874,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# explicitly set user/group IDs
7875,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
7876,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
7877,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# grab gosu for easy step-down from root
7878,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7879,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7880,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
7881,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7882,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# arches officialy built by upstream
7883,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7884,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7885,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7886,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7887,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7888,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7889,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7890,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7891,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7892,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7893,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7894,726128b358cdc0efc1753475bbe502b07cbbb540,/11/Dockerfile, # backwards compat
7895,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# vim:set ft=dockerfile:
7896,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# explicitly set user/group IDs
7897,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,# grab gosu for easy step-down from root
7898,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7899,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
7900,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7901,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7902,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7903,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7904,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7905,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7906,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#		krb5-dev \
7907,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#		openldap-dev \
7908,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# configure: error: prove not found
7909,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7910,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7911,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7912,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7913,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7914,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7915,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7916,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7917,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7918,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
7919,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7920,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7921,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7922,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7923,bcfe8611162fb6b9a7190f85e9ae337eeb1057ad,/9.6/alpine/Dockerfile, # backwards compat
7924,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# vim:set ft=dockerfile:
7925,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# explicitly set user/group IDs
7926,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# grab gosu for easy step-down from root
7927,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
7928,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
7929,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
7930,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# arches officialy built by upstream
7931,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
7932,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
7933,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
7934,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
7935,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
7936,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
7937,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
7938,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
7939,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7940,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
7941,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7942,2534f4526aab1a378096e78a0052baeee88441b5,/9.4/Dockerfile, # backwards compat
7943,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
7944,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
7945,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7946,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7947,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#		krb5-dev \
7948,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#		openldap-dev \
7949,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# configure: error: prove not found
7950,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7951,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7952,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7953,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7954,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7955,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7956,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7957,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7958,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7959,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
7960,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7961,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7962,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7963,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7964,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.6/alpine/Dockerfile, # backwards compat
7965,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
7966,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7967,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7968,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7969,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#		krb5-dev \
7970,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#		openldap-dev \
7971,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# configure: error: prove not found
7972,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7973,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7974,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7975,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7976,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7977,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
7978,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
7979,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
7980,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
7981,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,#p' --recursive /usr/local \
7982,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
7983,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
7984,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
7985,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
7986,112bf5ee8455f930354bc90f32d6a1c830525ed9,/11/alpine/Dockerfile, # backwards compat
7987,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
7988,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
7989,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
7990,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
7991,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#		krb5-dev \
7992,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#		openldap-dev \
7993,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# configure: error: prove not found
7994,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
7995,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
7996,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
7997,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
7998,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
7999,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8000,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8001,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8002,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8003,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
8004,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8005,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8006,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8007,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8008,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.4/alpine/Dockerfile, # backwards compat
8009,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# vim:set ft=dockerfile:
8010,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# explicitly set user/group IDs
8011,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# grab gosu for easy step-down from root
8012,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8013,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8014,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8015,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8016,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# arches officialy built by upstream
8017,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8018,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8019,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8020,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8021,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8022,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8023,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8024,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8025,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8026,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8027,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8028,2cab5040341f46331367f8766b4d249a5b7a9366,/11/Dockerfile, # backwards compat
8029,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# vim:set ft=dockerfile:
8030,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# explicitly set user/group IDs
8031,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8032,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8033,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
8034,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8035,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8036,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8037,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
8038,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8039,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# see note below about ""*.pyc"" files"
8040,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# arches officialy built by upstream
8041,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8042,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8043,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8044,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8045,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8046,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8047,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8048,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8049,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8050,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8051,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8052,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8053,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8054,b96659493b841100dc75ed777bff01913d9fe9e1,/13/Dockerfile, # backwards compat
8055,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# vim:set ft=dockerfile:
8056,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# explicitly set user/group IDs
8057,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8058,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8059,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# grab gosu for easy step-down from root
8060,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8061,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8062,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8063,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8064,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
8065,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# arches officialy built by upstream
8066,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8067,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8068,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8069,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8070,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8071,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8072,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8073,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8074,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8075,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8076,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8077,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8078,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8079,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.5/Dockerfile, # backwards compat
8080,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# vim:set ft=dockerfile:
8081,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# explicitly set user/group IDs
8082,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# grab gosu for easy step-down from root
8083,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8084,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8085,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# arches officialy built by upstream
8086,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8087,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8088,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8089,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8090,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8091,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8092,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8093,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8094,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8095,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8096,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8097,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.4/Dockerfile, # backwards compat
8098,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8099,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8100,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8101,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8102,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,#		krb5-dev \
8103,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,#		openldap-dev \
8104,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# configure: error: prove not found
8105,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8106,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8107,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8108,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8109,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8110,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8111,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8112,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8113,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8114,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8115,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8116,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8117,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8118,26a1e84f0e95b43fa47e879e9fd000c9a68982e1,/10/alpine/Dockerfile, # backwards compat
8119,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8120,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8121,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8122,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8123,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,#		krb5-dev \
8124,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,#		openldap-dev \
8125,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8126,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8127,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8128,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8129,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8130,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# vim:set ft=dockerfile:
8131,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# explicitly set user/group IDs
8132,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# grab gosu for easy step-down from root
8133,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8134,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8135,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8136,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# arches officialy built by upstream
8137,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8138,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8139,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8140,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8141,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8142,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8143,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8144,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8145,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8146,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8147,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8148,de8ba87d50de466a1e05e111927d2bc30c2db36d,/10/Dockerfile, # backwards compat
8149,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# vim:set ft=dockerfile:
8150,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# explicitly set user/group IDs
8151,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,# grab gosu for easy step-down from root
8152,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8153,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8154,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8155,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8156,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
8157,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8158,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8159,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8160,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#		krb5-dev \
8161,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#		openldap-dev \
8162,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# configure: error: prove not found
8163,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8164,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8165,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8166,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
8167,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8168,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8169,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8170,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8171,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8172,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,#p' --recursive /usr/local \
8173,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8174,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8175,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8176,1bddd083582b0977075dda4258f2d9dfbc90482b,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8177,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8178,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8179,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8180,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8181,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,#		krb5-dev \
8182,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,#		openldap-dev \
8183,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8184,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8185,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8186,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8187,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8188,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8189,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8190,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8191,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8192,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8193,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8194,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.4/alpine/Dockerfile, # backwards compat
8195,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# vim:set ft=dockerfile:
8196,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# explicitly set user/group IDs
8197,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,# grab gosu for easy step-down from root
8198,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8199,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8200,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,# vim:set ft=dockerfile:
8201,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8202,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8203,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8204,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8205,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8206,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8207,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,#		krb5-dev \
8208,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,#		openldap-dev \
8209,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8210,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8211,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8212,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8213,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8214,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8215,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8216,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8217,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8218,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8219,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8220,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8221,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8222,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8223,9ff1e6fb304f67eb3b6d946000c69838324dc693,/9.3/alpine/Dockerfile, # backwards compat
8224,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8225,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8226,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8227,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8228,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,#		krb5-dev \
8229,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,#		openldap-dev \
8230,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8231,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8232,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8233,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8234,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8235,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8236,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8237,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8238,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8239,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8240,3706d4c4562c284ed070286b9fd516151167a40c,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8241,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# vim:set ft=dockerfile:
8242,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# explicitly set user/group IDs
8243,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,# grab gosu for easy step-down from root
8244,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8245,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8246,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8247,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8248,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8249,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,# vim:set ft=dockerfile:
8250,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8251,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,# grab gosu for easy step-down from root
8252,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8253,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8254,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# vim:set ft=dockerfile:
8255,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# explicitly set user/group IDs
8256,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# grab gosu for easy step-down from root
8257,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8258,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8259,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# arches officialy built by upstream
8260,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8261,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8262,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8263,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8264,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8265,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8266,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8267,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8268,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8269,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8270,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8271,3b022607bec233463a3d055731fb710837978747,/10/Dockerfile, # backwards compat
8272,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8273,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8274,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8275,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8276,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,#		krb5-dev \
8277,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,#		openldap-dev \
8278,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8279,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8280,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8281,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8282,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8283,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8284,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8285,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8286,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8287,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8288,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8289,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# vim:set ft=dockerfile:
8290,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# explicitly set user/group IDs
8291,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,# grab gosu for easy step-down from root
8292,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8293,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8294,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8295,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8296,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8297,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8298,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/Dockerfile, # backwards compat
8299,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,# vim:set ft=dockerfile:
8300,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,# explicitly set user/group IDs
8301,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,# grab gosu for easy step-down from root
8302,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8303,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8304,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8305,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8306,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8307,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8308,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8309,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8310,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,#		krb5-dev \
8311,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,#		openldap-dev \
8312,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# configure: error: prove not found
8313,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8314,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8315,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8316,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8317,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8318,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8319,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8320,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8321,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8322,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8323,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8324,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8325,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/alpine/Dockerfile, # backwards compat
8326,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8327,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8328,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8329,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8330,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#		krb5-dev \
8331,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#		openldap-dev \
8332,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# configure: error: prove not found
8333,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8334,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8335,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8336,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8337,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8338,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8339,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8340,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8341,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8342,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8343,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8344,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8345,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8346,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8347,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/11/alpine/Dockerfile, # backwards compat
8348,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# vim:set ft=dockerfile:
8349,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# explicitly set user/group IDs
8350,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# grab gosu for easy step-down from root
8351,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8352,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8353,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8354,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# arches officialy built by upstream
8355,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8356,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8357,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8358,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8359,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8360,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8361,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8362,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8363,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8364,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8365,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8366,d545428bfe50f634b4aa9114eff0c5efe1d72f94,/9.5/Dockerfile, # backwards compat
8367,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8368,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8369,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8370,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8371,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#		krb5-dev \
8372,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#		openldap-dev \
8373,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# configure: error: prove not found
8374,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8375,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8376,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8377,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8378,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8379,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8380,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8381,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8382,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8383,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8384,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8385,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8386,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8387,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8388,5104b38a3a159aad42014d69b3ba1a0c4d22ca4d,/9.5/alpine/Dockerfile, # backwards compat
8389,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# vim:set ft=dockerfile:
8390,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# explicitly set user/group IDs
8391,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,# grab gosu for easy step-down from root
8392,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8393,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8394,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# vim:set ft=dockerfile:
8395,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# explicitly set user/group IDs
8396,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# grab gosu for easy step-down from root
8397,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8398,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8399,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# arches officialy built by upstream
8400,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8401,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8402,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8403,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8404,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8405,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8406,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8407,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8408,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8409,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8410,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8411,674466e0d47517f4e05ec2025ae996e71b26cae9,/10/Dockerfile, # backwards compat
8412,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# vim:set ft=dockerfile:
8413,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# explicitly set user/group IDs
8414,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8415,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8416,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
8417,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8418,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8419,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8420,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
8421,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8422,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
8423,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# arches officialy built by upstream
8424,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8425,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8426,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8427,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8428,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8429,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8430,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8431,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8432,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8433,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8434,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8435,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8436,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8437,23fb6d25d168890aa4499b066306849e43936efa,/9.6/Dockerfile, # backwards compat
8438,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8439,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8440,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8441,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8442,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,#		krb5-dev \
8443,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,#		openldap-dev \
8444,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8445,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8446,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8447,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8448,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8449,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8450,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8451,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8452,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8453,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8454,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8455,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8456,123aedc09bc067740fb28921c500ded83c018bd4,/9.2/alpine/Dockerfile, # backwards compat
8457,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8458,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8459,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8460,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8461,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,#		krb5-dev \
8462,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,#		openldap-dev \
8463,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8464,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8465,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8466,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8467,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8468,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8469,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8470,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8471,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8472,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8473,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8474,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8475,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8476,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8477,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#		krb5-dev \
8478,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#		openldap-dev \
8479,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# configure: error: prove not found
8480,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8481,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8482,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8483,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
8484,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8485,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8486,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8487,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8488,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8489,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8490,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8491,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8492,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8493,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8494,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/11/alpine/Dockerfile, # backwards compat
8495,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8496,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8497,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8498,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8499,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,#		krb5-dev \
8500,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,#		openldap-dev \
8501,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# configure: error: prove not found
8502,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8503,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8504,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8505,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8506,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8507,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8508,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8509,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8510,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8511,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8512,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8513,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8514,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8515,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8516,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/alpine/Dockerfile, # backwards compat
8517,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# vim:set ft=dockerfile:
8518,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# explicitly set user/group IDs
8519,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8520,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8521,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# grab gosu for easy step-down from root
8522,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8523,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8524,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8525,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8526,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
8527,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# arches officialy built by upstream
8528,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8529,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8530,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8531,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8532,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8533,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8534,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8535,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8536,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8537,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8538,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8539,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8540,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8541,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.6/Dockerfile, # backwards compat
8542,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# vim:set ft=dockerfile:
8543,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# explicitly set user/group IDs
8544,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# grab gosu for easy step-down from root
8545,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8546,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8547,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# arches officialy built by upstream
8548,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8549,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8550,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8551,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8552,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8553,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8554,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8555,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8556,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8557,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8558,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8559,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/Dockerfile, # backwards compat
8560,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8561,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8562,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8563,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8564,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#		krb5-dev \
8565,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#		openldap-dev \
8566,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# configure: error: prove not found
8567,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8568,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8569,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8570,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8571,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8572,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8573,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8574,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8575,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8576,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8577,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8578,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8579,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8580,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8581,ad464b0375fc64e70e01305bf93183428a2ef0ec,/11/alpine/Dockerfile, # backwards compat
8582,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
8583,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8584,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8585,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8586,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,#		krb5-dev \
8587,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,#		openldap-dev \
8588,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8589,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8590,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8591,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8592,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8593,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
8594,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8595,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8596,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# vim:set ft=dockerfile:
8597,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# explicitly set user/group IDs
8598,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,# grab gosu for easy step-down from root
8599,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8600,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8601,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8602,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8603,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8604,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8605,972294a377463156c8d61297320c872fc7d370a9,/9.3/Dockerfile, # backwards compat
8606,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# vim:set ft=dockerfile:
8607,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# explicitly set user/group IDs
8608,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8609,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8610,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# grab gosu for easy step-down from root
8611,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8612,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8613,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8614,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8615,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
8616,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# arches officialy built by upstream
8617,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8618,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8619,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8620,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8621,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8622,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8623,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8624,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8625,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8626,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8627,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8628,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8629,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8630,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.6/Dockerfile, # backwards compat
8631,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8632,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8633,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8634,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8635,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,#		krb5-dev \
8636,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,#		openldap-dev \
8637,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8638,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8639,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8640,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8641,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8642,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8643,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8644,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8645,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8646,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8647,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8648,a3b8f2bf53b603713ad84344e0cfc79587507d4b,/9.3/alpine/Dockerfile, # backwards compat
8649,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
8650,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8651,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8652,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8653,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#		krb5-dev \
8654,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#		openldap-dev \
8655,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# configure: error: prove not found
8656,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8657,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8658,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8659,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8660,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8661,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8662,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8663,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8664,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8665,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,#p' --recursive /usr/local \
8666,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8667,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8668,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8669,c4b019526a25d1300de77b9699d53ad187cf0dcf,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8670,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8671,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8672,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8673,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8674,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#		krb5-dev \
8675,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#		openldap-dev \
8676,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# configure: error: prove not found
8677,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8678,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8679,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8680,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8681,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8682,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8683,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8684,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8685,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8686,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8687,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8688,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8689,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8690,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8691,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/alpine/Dockerfile, # backwards compat
8692,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
8693,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
8694,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8695,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8696,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#		krb5-dev \
8697,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#		openldap-dev \
8698,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# configure: error: prove not found
8699,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8700,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8701,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8702,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8703,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8704,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8705,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8706,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8707,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8708,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,#p' --recursive /usr/local \
8709,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8710,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8711,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8712,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8713,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8714,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8715,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8716,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8717,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#		krb5-dev \
8718,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#		openldap-dev \
8719,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# configure: error: prove not found
8720,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8721,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8722,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8723,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8724,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8725,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8726,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8727,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8728,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8729,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8730,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8731,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8732,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8733,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8734,33e66cdc27fb5558266b52658c081226d2272995,/9.5/alpine/Dockerfile, # backwards compat
8735,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
8736,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8737,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8738,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8739,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#		krb5-dev \
8740,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#		openldap-dev \
8741,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# configure: error: prove not found
8742,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8743,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8744,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
8745,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8746,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8747,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8748,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8749,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8750,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8751,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8752,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8753,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
8754,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8755,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8756,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8757,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8758,ea2860a21672636bed769e694f6af33f83270fda,/9.3/alpine/Dockerfile, # backwards compat
8759,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# vim:set ft=dockerfile:
8760,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# explicitly set user/group IDs
8761,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# grab gosu for easy step-down from root
8762,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8763,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8764,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8765,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8766,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# arches officialy built by upstream
8767,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8768,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8769,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8770,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8771,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8772,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8773,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8774,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8775,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8776,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8777,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8778,5d0b6adfd8c4b967d9fbbdc0fb96c869fcaba4f0,/11/Dockerfile, # backwards compat
8779,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8780,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8781,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8782,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8783,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#		krb5-dev \
8784,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#		openldap-dev \
8785,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# configure: error: prove not found
8786,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8787,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8788,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8789,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8790,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8791,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8792,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8793,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8794,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8795,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8796,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8797,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8798,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8799,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8800,1089a8971b43a675109ad886bf1f3b327c067fa1,/10/alpine/Dockerfile, # backwards compat
8801,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# vim:set ft=dockerfile:
8802,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# explicitly set user/group IDs
8803,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# grab gosu for easy step-down from root
8804,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8805,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8806,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# arches officialy built by upstream
8807,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8808,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8809,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8810,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8811,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8812,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8813,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8814,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8815,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8816,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8817,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8818,f34b7cb79c4209a67b573f3bc4bc7827d69800e1,/10/Dockerfile, # backwards compat
8819,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# vim:set ft=dockerfile:
8820,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# explicitly set user/group IDs
8821,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# grab gosu for easy step-down from root
8822,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8823,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8824,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# arches officialy built by upstream
8825,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8826,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8827,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8828,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8829,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8830,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8831,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8832,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8833,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8834,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8835,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8836,3b022607bec233463a3d055731fb710837978747,/9.5/Dockerfile, # backwards compat
8837,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
8838,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8839,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8840,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8841,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#		krb5-dev \
8842,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#		openldap-dev \
8843,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# configure: error: prove not found
8844,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8845,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8846,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8847,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8848,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8849,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8850,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8851,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8852,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8853,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,#p' --recursive /usr/local \
8854,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8855,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8856,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8857,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8858,52814abac491eca146620f921a44e2cb4217088e,/11/alpine/Dockerfile, # backwards compat
8859,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
8860,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
8861,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8862,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8863,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#		krb5-dev \
8864,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#		openldap-dev \
8865,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# configure: error: prove not found
8866,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8867,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8868,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8869,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8870,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8871,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8872,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8873,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8874,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8875,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
8876,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8877,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8878,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8879,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8880,57213ab012e6a38a27283eeac65c4726c069647a,/9.5/alpine/Dockerfile, # backwards compat
8881,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8882,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8883,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8884,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8885,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,#		krb5-dev \
8886,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,#		openldap-dev \
8887,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8888,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8889,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8890,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8891,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8892,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8893,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8894,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8895,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# vim:set ft=dockerfile:
8896,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# explicitly set user/group IDs
8897,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8898,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8899,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# grab gosu for easy step-down from root
8900,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8901,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8902,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8903,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8904,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# see note below about ""*.pyc"" files"
8905,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# arches officialy built by upstream
8906,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8907,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8908,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8909,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8910,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8911,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8912,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8913,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8914,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8915,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8916,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8917,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8918,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8919,10fe2ae44bfcc7e26d05e898f3baf3a019c82dd7,/12/Dockerfile, # backwards compat
8920,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# vim:set ft=dockerfile:
8921,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# explicitly set user/group IDs
8922,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,# grab gosu for easy step-down from root
8923,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8924,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8925,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8926,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8927,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
8928,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,# vim:set ft=dockerfile:
8929,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8930,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,# grab gosu for easy step-down from root
8931,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8932,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8933,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,# vim:set ft=dockerfile:
8934,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
8935,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,# grab gosu for easy step-down from root
8936,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8937,7fed4298db2dc8fb86844a1a41c86f4356f5f45b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
8938,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
8939,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
8940,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8941,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8942,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,#		krb5-dev \
8943,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,#		openldap-dev \
8944,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8945,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8946,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8947,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8948,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8949,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8950,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8951,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8952,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# vim:set ft=dockerfile:
8953,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# explicitly set user/group IDs
8954,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
8955,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
8956,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
8957,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
8958,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
8959,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
8960,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
8961,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
8962,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
8963,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# arches officialy built by upstream
8964,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
8965,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
8966,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
8967,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
8968,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
8969,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
8970,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
8971,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
8972,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
8973,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
8974,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8975,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
8976,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8977,fa4482cec89b300589c30fc5590995a31f569a06,/9.5/Dockerfile, # backwards compat
8978,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
8979,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
8980,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
8981,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
8982,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#		krb5-dev \
8983,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#		openldap-dev \
8984,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# configure: error: prove not found
8985,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
8986,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
8987,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
8988,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
8989,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
8990,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
8991,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
8992,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
8993,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
8994,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,#p' --recursive /usr/local \
8995,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
8996,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
8997,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
8998,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
8999,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/alpine/Dockerfile, # backwards compat
9000,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
9001,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
9002,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9003,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9004,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#		krb5-dev \
9005,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#		openldap-dev \
9006,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# configure: error: prove not found
9007,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9008,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9009,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9010,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
9011,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9012,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9013,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9014,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9015,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9016,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9017,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9018,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9019,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9020,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9021,a5a072f08ad5499961875b7dd441e1b8ee8b4600,/11/alpine/Dockerfile, # backwards compat
9022,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,# vim:set ft=dockerfile:
9023,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9024,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,# grab gosu for easy step-down from root
9025,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9026,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9027,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
9028,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9029,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9030,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9031,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,#		krb5-dev \
9032,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,#		openldap-dev \
9033,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9034,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9035,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9036,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9037,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9038,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9039,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9040,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9041,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9042,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9043,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9044,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9045,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.2/alpine/Dockerfile, # backwards compat
9046,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,# vim:set ft=dockerfile:
9047,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9048,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,# grab gosu for easy step-down from root
9049,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9050,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9051,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# vim:set ft=dockerfile:
9052,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# explicitly set user/group IDs
9053,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9054,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9055,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# grab gosu for easy step-down from root
9056,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9057,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9058,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9059,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
9060,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9061,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# see note below about ""*.pyc"" files"
9062,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# arches officialy built by upstream
9063,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9064,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9065,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9066,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9067,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9068,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9069,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9070,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9071,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9072,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9073,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9074,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9075,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9076,4f70bf2b811bcdb4ab1a015ef703373226452157,/11/Dockerfile, # backwards compat
9077,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9078,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9079,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9080,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9081,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,#		krb5-dev \
9082,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,#		openldap-dev \
9083,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# configure: error: prove not found
9084,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9085,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9086,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9087,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9088,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9089,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9090,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9091,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9092,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9093,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9094,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9095,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9096,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9097,9e862fa9b1d510c618d51e5d2c63f439d15381ff,/9.5/alpine/Dockerfile, # backwards compat
9098,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9099,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9100,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9101,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9102,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#		krb5-dev \
9103,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#		openldap-dev \
9104,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# configure: error: prove not found
9105,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9106,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9107,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9108,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9109,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9110,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9111,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9112,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9113,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9114,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
9115,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9116,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9117,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9118,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9119,d564da5142b2e5fa235707b05d8aa0fc76250418,/9.4/alpine/Dockerfile, # backwards compat
9120,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# vim:set ft=dockerfile:
9121,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# explicitly set user/group IDs
9122,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# grab gosu for easy step-down from root
9123,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9124,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9125,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9126,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# arches officialy built by upstream
9127,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9128,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9129,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9130,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9131,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9132,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9133,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9134,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9135,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9136,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9137,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9138,253471cd5c62c48867640bcb925ffad19a24d5d9,/9.3/Dockerfile, # backwards compat
9139,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
9140,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9141,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9142,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9143,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#		krb5-dev \
9144,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#		openldap-dev \
9145,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# configure: error: prove not found
9146,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9147,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9148,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9149,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9150,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9151,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9152,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9153,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9154,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9155,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,#p' --recursive /usr/local \
9156,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9157,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9158,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9159,662b2e6eb359221f132b5879e3cf65a4805ce428,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9160,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9161,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9162,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9163,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9164,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#		krb5-dev \
9165,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#		openldap-dev \
9166,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# configure: error: prove not found
9167,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9168,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9169,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9170,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9171,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9172,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9173,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9174,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9175,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9176,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9177,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9178,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9179,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9180,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9181,20c85c686ac1cc4424f3c690e0f971560efd240e,/10/alpine/Dockerfile, # backwards compat
9182,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
9183,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9184,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9185,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9186,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,#		krb5-dev \
9187,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,#		openldap-dev \
9188,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9189,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9190,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9191,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9192,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9193,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9194,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9195,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9196,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9197,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9198,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9199,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9200,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9201,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9202,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.2/alpine/Dockerfile, # backwards compat
9203,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9204,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9205,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9206,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9207,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,#		krb5-dev \
9208,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,#		openldap-dev \
9209,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9210,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9211,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9212,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9213,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9214,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9215,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9216,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9217,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9218,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9219,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9220,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9221,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/alpine/Dockerfile, # backwards compat
9222,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,# vim:set ft=dockerfile:
9223,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9224,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,# grab gosu for easy step-down from root
9225,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9226,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9227,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# vim:set ft=dockerfile:
9228,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# explicitly set user/group IDs
9229,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,# grab gosu for easy step-down from root
9230,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9231,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9232,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# vim:set ft=dockerfile:
9233,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# explicitly set user/group IDs
9234,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9235,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9236,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# grab gosu for easy step-down from root
9237,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9238,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9239,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9240,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9241,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# see note below about ""*.pyc"" files"
9242,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# arches officialy built by upstream
9243,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9244,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9245,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9246,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9247,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9248,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9249,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9250,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9251,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9252,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9253,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9254,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9255,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9256,b0251ccc21fa63851cb051458c669fbf37d26227,/12/Dockerfile, # backwards compat
9257,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9258,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9259,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9260,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9261,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#		krb5-dev \
9262,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#		openldap-dev \
9263,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# configure: error: prove not found
9264,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9265,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9266,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9267,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9268,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9269,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9270,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9271,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9272,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9273,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
9274,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9275,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9276,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9277,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9278,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.5/alpine/Dockerfile, # backwards compat
9279,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,# vim:set ft=dockerfile:
9280,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,# explicitly set user/group IDs
9281,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9282,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9283,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,# grab gosu for easy step-down from root
9284,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9285,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9286,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9287,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9288,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
9289,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,# arches officialy built by upstream
9290,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9291,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9292,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9293,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9294,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9295,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9296,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9297,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9298,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9299,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9300,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9301,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9302,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9303,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/Dockerfile, # backwards compat
9304,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
9305,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9306,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9307,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9308,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#		krb5-dev \
9309,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#		openldap-dev \
9310,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# configure: error: prove not found
9311,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9312,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9313,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9314,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9315,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9316,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9317,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9318,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9319,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9320,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9321,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9322,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9323,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9324,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9325,6c3b27f1433ad81675afb386a182098dc867e3e8,/11/alpine/Dockerfile, # backwards compat
9326,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9327,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9328,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9329,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9330,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,#		krb5-dev \
9331,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,#		openldap-dev \
9332,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9333,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9334,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9335,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9336,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9337,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9338,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9339,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9340,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9341,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9342,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9343,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9344,975f6a2705d981f865a2cb0536a86a46e5839534,/9.5/alpine/Dockerfile, # backwards compat
9345,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9346,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9347,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9348,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9349,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,#		krb5-dev \
9350,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,#		openldap-dev \
9351,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9352,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9353,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9354,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9355,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9356,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9357,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9358,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9359,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9360,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9361,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9362,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.4/alpine/Dockerfile, # backwards compat
9363,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# vim:set ft=dockerfile:
9364,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# explicitly set user/group IDs
9365,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# grab gosu for easy step-down from root
9366,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9367,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9368,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# arches officialy built by upstream
9369,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9370,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9371,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9372,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9373,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9374,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9375,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9376,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9377,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9378,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9379,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9380,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/10/Dockerfile, # backwards compat
9381,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,# vim:set ft=dockerfile:
9382,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9383,783906f551b9bc1472751200296f93bb2c55bc44,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9384,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9385,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9386,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# vim:set ft=dockerfile:
9387,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# explicitly set user/group IDs
9388,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,# grab gosu for easy step-down from root
9389,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9390,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9391,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9392,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9393,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9394,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9395,43f393cccec4b3c6066531fc5c3d594327825940,/10/Dockerfile, # backwards compat
9396,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# vim:set ft=dockerfile:
9397,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# explicitly set user/group IDs
9398,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# grab gosu for easy step-down from root
9399,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9400,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9401,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# arches officialy built by upstream
9402,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9403,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9404,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9405,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9406,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9407,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9408,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9409,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9410,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9411,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9412,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9413,e3c9133ac3bde0aca094b616654309f3377124f2,/9.3/Dockerfile, # backwards compat
9414,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9415,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
9416,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9417,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9418,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#		krb5-dev \
9419,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#		openldap-dev \
9420,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# configure: error: prove not found
9421,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9422,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9423,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9424,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
9425,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9426,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9427,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9428,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9429,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9430,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
9431,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9432,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9433,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9434,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9435,1bddd083582b0977075dda4258f2d9dfbc90482b,/9.5/alpine/Dockerfile, # backwards compat
9436,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9437,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9438,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9439,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9440,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,#		krb5-dev \
9441,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,#		openldap-dev \
9442,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9443,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9444,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9445,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9446,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9447,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9448,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9449,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9450,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9451,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9452,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9453,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9454,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.3/alpine/Dockerfile, # backwards compat
9455,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
9456,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
9457,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9458,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9459,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#		krb5-dev \
9460,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#		openldap-dev \
9461,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# configure: error: prove not found
9462,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9463,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9464,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9465,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9466,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9467,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9468,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9469,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9470,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9471,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,#p' --recursive /usr/local \
9472,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9473,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9474,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9475,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9476,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/alpine/Dockerfile, # backwards compat
9477,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,# vim:set ft=dockerfile:
9478,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9479,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,# grab gosu for easy step-down from root
9480,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9481,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9482,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# vim:set ft=dockerfile:
9483,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# explicitly set user/group IDs
9484,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,# grab gosu for easy step-down from root
9485,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9486,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9487,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9488,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9489,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# vim:set ft=dockerfile:
9490,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# explicitly set user/group IDs
9491,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9492,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9493,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# grab gosu for easy step-down from root
9494,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9495,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9496,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9497,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9498,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
9499,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# arches officialy built by upstream
9500,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9501,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9502,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9503,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9504,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9505,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9506,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9507,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9508,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9509,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9510,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9511,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9512,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9513,91939daa3f42d2796952f03353534cd87d181ccc,/9.6/Dockerfile, # backwards compat
9514,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# vim:set ft=dockerfile:
9515,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# explicitly set user/group IDs
9516,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,# grab gosu for easy step-down from root
9517,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9518,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9519,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9520,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9521,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9522,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9523,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9524,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9525,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#		krb5-dev \
9526,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#		openldap-dev \
9527,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# configure: error: prove not found
9528,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9529,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9530,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9531,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9532,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9533,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9534,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9535,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9536,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9537,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9538,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9539,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9540,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9541,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9542,0b0ca18dda787003f567e7e1a51efaf2348d34d7,/10/alpine/Dockerfile, # backwards compat
9543,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9544,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9545,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9546,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9547,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,#		krb5-dev \
9548,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,#		openldap-dev \
9549,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# configure: error: prove not found
9550,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9551,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9552,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9553,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9554,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9555,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9556,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9557,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9558,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9559,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9560,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9561,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9562,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9563,ee1bb1f51c9bae5be684a4797f934dbb943e3267,/10/alpine/Dockerfile, # backwards compat
9564,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,# vim:set ft=dockerfile:
9565,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9566,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,# grab gosu for easy step-down from root
9567,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9568,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9569,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
9570,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9571,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9572,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9573,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#		krb5-dev \
9574,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#		openldap-dev \
9575,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# configure: error: prove not found
9576,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9577,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9578,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9579,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9580,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9581,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9582,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9583,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9584,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9585,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
9586,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9587,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9588,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9589,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9590,86972e37db26753818b25e82ff3816ede9877e7b,/10/alpine/Dockerfile, # backwards compat
9591,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# vim:set ft=dockerfile:
9592,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# explicitly set user/group IDs
9593,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9594,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9595,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# grab gosu for easy step-down from root
9596,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9597,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9598,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9599,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9600,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
9601,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# arches officialy built by upstream
9602,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9603,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9604,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9605,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9606,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9607,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9608,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9609,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9610,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9611,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9612,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9613,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9614,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9615,ef7af1266db5b895a2981aeba25accf074d82a6b,/9.4/Dockerfile, # backwards compat
9616,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# vim:set ft=dockerfile:
9617,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# explicitly set user/group IDs
9618,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,# grab gosu for easy step-down from root
9619,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9620,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9621,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,# vim:set ft=dockerfile:
9622,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9623,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,# grab gosu for easy step-down from root
9624,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9625,51e5166d69320581cb707d6fb102d3ba04803400,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9626,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,# vim:set ft=dockerfile:
9627,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9628,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,# grab gosu for easy step-down from root
9629,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9630,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9631,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,# vim:set ft=dockerfile:
9632,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9633,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,# grab gosu for easy step-down from root
9634,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9635,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9636,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,# vim:set ft=dockerfile:
9637,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9638,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,# grab gosu for easy step-down from root
9639,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9640,09eabaadf53341f65f7c7036ac13bddf788fea65,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9641,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# vim:set ft=dockerfile:
9642,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# explicitly set user/group IDs
9643,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# grab gosu for easy step-down from root
9644,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9645,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9646,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# arches officialy built by upstream
9647,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9648,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9649,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9650,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9651,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9652,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9653,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9654,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9655,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9656,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9657,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9658,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.3/Dockerfile, # backwards compat
9659,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# vim:set ft=dockerfile:
9660,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# explicitly set user/group IDs
9661,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9662,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9663,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# grab gosu for easy step-down from root
9664,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9665,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9666,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9667,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9668,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# see note below about ""*.pyc"" files"
9669,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# arches officialy built by upstream
9670,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9671,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9672,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9673,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9674,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9675,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9676,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9677,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9678,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9679,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9680,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9681,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9682,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9683,4a82eb932030788572b637c8e138abb94401640c,/12/Dockerfile, # backwards compat
9684,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9685,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9686,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9687,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9688,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#		krb5-dev \
9689,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#		openldap-dev \
9690,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# configure: error: prove not found
9691,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9692,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9693,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9694,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9695,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9696,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9697,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9698,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9699,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9700,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
9701,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9702,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9703,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9704,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9705,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.4/alpine/Dockerfile, # backwards compat
9706,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
9707,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9708,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9709,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9710,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,#		krb5-dev \
9711,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,#		openldap-dev \
9712,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9713,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9714,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9715,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9716,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9717,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9718,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9719,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9720,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9721,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9722,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9723,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9724,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.6/alpine/Dockerfile, # backwards compat
9725,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# vim:set ft=dockerfile:
9726,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# explicitly set user/group IDs
9727,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,# grab gosu for easy step-down from root
9728,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9729,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9730,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9731,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9732,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9733,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9734,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.6/Dockerfile, # backwards compat
9735,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9736,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9737,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9738,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9739,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,#		krb5-dev \
9740,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,#		openldap-dev \
9741,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9742,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9743,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9744,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9745,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9746,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9747,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9748,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9749,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9750,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9751,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9752,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9753,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/alpine/Dockerfile, # backwards compat
9754,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# vim:set ft=dockerfile:
9755,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# explicitly set user/group IDs
9756,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9757,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9758,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# grab gosu for easy step-down from root
9759,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9760,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9761,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9762,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9763,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
9764,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# arches officialy built by upstream
9765,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9766,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9767,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9768,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9769,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9770,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9771,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9772,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9773,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9774,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9775,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9776,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9777,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9778,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.5/Dockerfile, # backwards compat
9779,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9780,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9781,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9782,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9783,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,#		krb5-dev \
9784,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,#		openldap-dev \
9785,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9786,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9787,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9788,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9789,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9790,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9791,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9792,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9793,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9794,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9795,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9796,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9797,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9798,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9799,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.3/alpine/Dockerfile, # backwards compat
9800,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# vim:set ft=dockerfile:
9801,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# explicitly set user/group IDs
9802,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,# grab gosu for easy step-down from root
9803,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9804,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9805,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9806,3cff98db82f2dd6c3647296335bbc37233e0b9bc,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9807,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# vim:set ft=dockerfile:
9808,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# explicitly set user/group IDs
9809,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9810,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9811,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# grab gosu for easy step-down from root
9812,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9813,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9814,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9815,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9816,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
9817,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# arches officialy built by upstream
9818,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9819,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9820,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9821,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9822,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9823,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9824,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9825,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9826,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9827,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9828,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9829,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9830,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9831,dff03e96967d204b4df297e03a90086506600590,/9.4/Dockerfile, # backwards compat
9832,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# vim:set ft=dockerfile:
9833,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# explicitly set user/group IDs
9834,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,# grab gosu for easy step-down from root
9835,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9836,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9837,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9838,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9839,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,# vim:set ft=dockerfile:
9840,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9841,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,# grab gosu for easy step-down from root
9842,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9843,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9844,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# vim:set ft=dockerfile:
9845,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# explicitly set user/group IDs
9846,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9847,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9848,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# grab gosu for easy step-down from root
9849,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9850,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9851,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9852,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9853,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# arches officialy built by upstream
9854,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9855,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9856,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9857,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9858,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9859,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9860,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9861,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9862,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9863,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9864,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9865,726128b358cdc0efc1753475bbe502b07cbbb540,/9.5/Dockerfile, # backwards compat
9866,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
9867,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9868,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9869,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9870,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#		krb5-dev \
9871,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#		openldap-dev \
9872,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# configure: error: prove not found
9873,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9874,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9875,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
9876,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9877,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9878,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9879,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9880,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9881,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9882,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9883,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9884,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
9885,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9886,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9887,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9888,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9889,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.3/alpine/Dockerfile, # backwards compat
9890,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,# vim:set ft=dockerfile:
9891,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9892,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,# grab gosu for easy step-down from root
9893,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9894,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9895,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,# vim:set ft=dockerfile:
9896,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
9897,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,# grab gosu for easy step-down from root
9898,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9899,595fb3798892feb36bc81f01317861ddcdc6521b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9900,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
9901,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9902,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9903,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9904,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,#		krb5-dev \
9905,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,#		openldap-dev \
9906,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9907,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9908,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9909,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
9910,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9911,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9912,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9913,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9914,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9915,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9916,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9917,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9918,975f6a2705d981f865a2cb0536a86a46e5839534,/9.4/alpine/Dockerfile, # backwards compat
9919,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# vim:set ft=dockerfile:
9920,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# explicitly set user/group IDs
9921,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,# grab gosu for easy step-down from root
9922,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9923,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9924,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
9925,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9926,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9927,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
9928,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9929,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9930,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9931,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,#		krb5-dev \
9932,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,#		openldap-dev \
9933,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9934,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9935,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
9936,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
9937,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
9938,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
9939,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
9940,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
9941,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9942,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
9943,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9944,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.5/alpine/Dockerfile, # backwards compat
9945,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# vim:set ft=dockerfile:
9946,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# explicitly set user/group IDs
9947,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# grab gosu for easy step-down from root
9948,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9949,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9950,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9951,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# arches officialy built by upstream
9952,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9953,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9954,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9955,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9956,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9957,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9958,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9959,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9960,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9961,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
9962,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9963,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.5/Dockerfile, # backwards compat
9964,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# vim:set ft=dockerfile:
9965,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# explicitly set user/group IDs
9966,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
9967,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
9968,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# grab gosu for easy step-down from root
9969,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
9970,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
9971,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
9972,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
9973,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# see note below about ""*.pyc"" files"
9974,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# arches officialy built by upstream
9975,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
9976,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
9977,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
9978,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
9979,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
9980,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
9981,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
9982,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
9983,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
9984,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
9985,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
9986,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
9987,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
9988,040949af1595f49f2242f6d1f9c42fb042b3eaed,/10/Dockerfile, # backwards compat
9989,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
9990,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
9991,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
9992,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
9993,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#		krb5-dev \
9994,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#		openldap-dev \
9995,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# configure: error: prove not found
9996,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
9997,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
9998,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
9999,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10000,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10001,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10002,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10003,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10004,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10005,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
10006,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10007,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10008,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10009,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10010,5992d8be755d8001474f737a44c73049c519cff3,/9.6/alpine/Dockerfile, # backwards compat
10011,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10012,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10013,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10014,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10015,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,#		krb5-dev \
10016,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,#		openldap-dev \
10017,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# configure: error: prove not found
10018,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10019,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10020,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10021,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10022,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10023,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10024,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10025,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10026,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10027,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10028,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10029,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10030,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/alpine/Dockerfile, # backwards compat
10031,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
10032,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
10033,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10034,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10035,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#		krb5-dev \
10036,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#		openldap-dev \
10037,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# configure: error: prove not found
10038,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10039,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10040,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10041,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10042,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10043,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10044,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10045,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10046,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10047,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,#p' --recursive /usr/local \
10048,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10049,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10050,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10051,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10052,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/10/alpine/Dockerfile, # backwards compat
10053,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10054,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10055,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10056,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10057,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,#		krb5-dev \
10058,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,#		openldap-dev \
10059,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10060,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10061,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10062,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10063,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10064,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10065,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10066,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10067,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10068,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10069,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10070,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,# vim:set ft=dockerfile:
10071,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,# explicitly set user/group IDs
10072,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,# grab gosu for easy step-down from root
10073,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10074,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10075,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10076,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10077,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10078,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10079,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,# vim:set ft=dockerfile:
10080,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10081,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,# grab gosu for easy step-down from root
10082,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10083,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10084,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
10085,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
10086,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10087,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10088,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#		krb5-dev \
10089,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#		openldap-dev \
10090,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# configure: error: prove not found
10091,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10092,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10093,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10094,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10095,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10096,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10097,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10098,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10099,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10100,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,#p' --recursive /usr/local \
10101,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10102,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10103,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10104,4edbda205c684c861e6fbf964de5d00845864d42,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10105,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# vim:set ft=dockerfile:
10106,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# explicitly set user/group IDs
10107,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,# grab gosu for easy step-down from root
10108,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10109,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10110,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10111,1b305a586eb552197fe96e3bf2fd95f3d5b81f79,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10112,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# vim:set ft=dockerfile:
10113,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# explicitly set user/group IDs
10114,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,# grab gosu for easy step-down from root
10115,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10116,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10117,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10118,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10119,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10120,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10121,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.2/Dockerfile, # backwards compat
10122,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# vim:set ft=dockerfile:
10123,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# explicitly set user/group IDs
10124,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10125,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10126,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# grab gosu for easy step-down from root
10127,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10128,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10129,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10130,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10131,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10132,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10133,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# arches officialy built by upstream
10134,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10135,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10136,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10137,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10138,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10139,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10140,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10141,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10142,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10143,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10144,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10145,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10146,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10147,7491dca61e0b72e48b5b0848ca026405208222f4,/12/Dockerfile, # backwards compat
10148,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10149,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10150,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10151,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10152,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,#		krb5-dev \
10153,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,#		openldap-dev \
10154,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# configure: error: prove not found
10155,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10156,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10157,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10158,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10159,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10160,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10161,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10162,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10163,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10164,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10165,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10166,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10167,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10168,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10169,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/alpine/Dockerfile, # backwards compat
10170,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# vim:set ft=dockerfile:
10171,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# explicitly set user/group IDs
10172,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# grab gosu for easy step-down from root
10173,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10174,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10175,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10176,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10177,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# arches officialy built by upstream
10178,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10179,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10180,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10181,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10182,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10183,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10184,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10185,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10186,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10187,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10188,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10189,fd76b238a51597fabb63d65191798d052e373636,/9.6/Dockerfile, # backwards compat
10190,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,# vim:set ft=dockerfile:
10191,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10192,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,# grab gosu for easy step-down from root
10193,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10194,a6d4922823aa8011513bb9c160c26c689301823a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10195,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10196,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10197,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10198,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10199,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,#		krb5-dev \
10200,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,#		openldap-dev \
10201,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10202,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10203,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10204,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10205,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10206,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10207,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10208,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10209,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10210,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10211,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10212,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10213,123aedc09bc067740fb28921c500ded83c018bd4,/9.3/alpine/Dockerfile, # backwards compat
10214,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
10215,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10216,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10217,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10218,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,#		krb5-dev \
10219,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,#		openldap-dev \
10220,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10221,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10222,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10223,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10224,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10225,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10226,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10227,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10228,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10229,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10230,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# vim:set ft=dockerfile:
10231,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# explicitly set user/group IDs
10232,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10233,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10234,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# grab gosu for easy step-down from root
10235,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10236,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10237,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10238,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10239,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10240,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# arches officialy built by upstream
10241,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10242,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10243,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10244,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10245,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10246,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10247,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10248,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10249,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10250,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10251,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10252,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10253,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10254,064113e0e481a1d0542846b81858e457fde02c90,/9.5/Dockerfile, # backwards compat
10255,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# vim:set ft=dockerfile:
10256,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# explicitly set user/group IDs
10257,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# grab gosu for easy step-down from root
10258,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10259,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10260,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10261,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10262,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# arches officialy built by upstream
10263,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10264,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10265,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10266,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10267,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10268,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10269,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10270,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10271,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10272,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10273,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10274,2cab5040341f46331367f8766b4d249a5b7a9366,/9.6/Dockerfile, # backwards compat
10275,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# vim:set ft=dockerfile:
10276,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# explicitly set user/group IDs
10277,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,# grab gosu for easy step-down from root
10278,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10279,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10280,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10281,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10282,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
10283,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
10284,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10285,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10286,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#		krb5-dev \
10287,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#		openldap-dev \
10288,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# configure: error: prove not found
10289,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10290,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10291,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10292,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
10293,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10294,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10295,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10296,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10297,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10298,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,#p' --recursive /usr/local \
10299,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10300,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10301,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10302,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10303,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/10/alpine/Dockerfile, # backwards compat
10304,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10305,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10306,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10307,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10308,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#		krb5-dev \
10309,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#		openldap-dev \
10310,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# configure: error: prove not found
10311,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10312,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10313,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10314,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10315,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10316,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10317,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10318,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10319,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10320,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
10321,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10322,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10323,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10324,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10325,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/alpine/Dockerfile, # backwards compat
10326,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10327,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10328,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10329,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10330,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,#		krb5-dev \
10331,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,#		openldap-dev \
10332,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# configure: error: prove not found
10333,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10334,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10335,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10336,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10337,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10338,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10339,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10340,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10341,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10342,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10343,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10344,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10345,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10346,58ed93931d38f96981fb3e971217e6619d23f75a,/9.6/alpine/Dockerfile, # backwards compat
10347,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# vim:set ft=dockerfile:
10348,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# explicitly set user/group IDs
10349,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10350,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10351,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# grab gosu for easy step-down from root
10352,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10353,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10354,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10355,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10356,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# see note below about ""*.pyc"" files"
10357,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# arches officialy built by upstream
10358,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10359,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10360,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10361,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10362,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10363,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10364,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10365,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10366,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10367,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10368,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10369,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10370,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10371,2addeda08bf3715a9181ad139e49b67b879110f9,/11/Dockerfile, # backwards compat
10372,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
10373,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10374,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10375,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10376,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#		krb5-dev \
10377,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#		openldap-dev \
10378,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# configure: error: prove not found
10379,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10380,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10381,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10382,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10383,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10384,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10385,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10386,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10387,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10388,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,#p' --recursive /usr/local \
10389,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10390,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10391,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10392,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10393,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/alpine/Dockerfile, # backwards compat
10394,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
10395,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
10396,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10397,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10398,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#		krb5-dev \
10399,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#		openldap-dev \
10400,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# configure: error: prove not found
10401,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10402,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10403,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10404,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10405,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10406,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10407,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10408,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10409,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10410,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,#p' --recursive /usr/local \
10411,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10412,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10413,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10414,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10415,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# vim:set ft=dockerfile:
10416,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# explicitly set user/group IDs
10417,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,# grab gosu for easy step-down from root
10418,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10419,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10420,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10421,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10422,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10423,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10424,a4b217591a4ad2d15ee42be23bcc51f872f5c153,/10/Dockerfile, # backwards compat
10425,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10426,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10427,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10428,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10429,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,#		krb5-dev \
10430,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,#		openldap-dev \
10431,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10432,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10433,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10434,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10435,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10436,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10437,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10438,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10439,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10440,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10441,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
10442,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10443,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10444,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10445,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#		krb5-dev \
10446,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#		openldap-dev \
10447,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# configure: error: prove not found
10448,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10449,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10450,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10451,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10452,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10453,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10454,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10455,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10456,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10457,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
10458,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10459,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10460,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10461,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10462,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,# vim:set ft=dockerfile:
10463,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10464,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,# grab gosu for easy step-down from root
10465,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10466,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10467,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10468,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10469,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10470,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10471,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#		krb5-dev \
10472,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#		openldap-dev \
10473,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# configure: error: prove not found
10474,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10475,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10476,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
10477,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10478,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10479,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10480,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10481,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10482,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10483,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10484,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10485,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
10486,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10487,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10488,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10489,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10490,f7dc5727b1d6b6a636350e11648845ae33477579,/9.3/alpine/Dockerfile, # backwards compat
10491,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# vim:set ft=dockerfile:
10492,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# explicitly set user/group IDs
10493,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,# grab gosu for easy step-down from root
10494,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10495,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10496,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10497,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10498,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10499,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10500,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,# vim:set ft=dockerfile:
10501,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10502,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,# grab gosu for easy step-down from root
10503,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10504,63d966973d9593c0d9890b96f10ac73566913520,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10505,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10506,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
10507,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10508,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10509,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#		krb5-dev \
10510,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#		openldap-dev \
10511,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# configure: error: prove not found
10512,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10513,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10514,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10515,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10516,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10517,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10518,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10519,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10520,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10521,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
10522,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10523,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10524,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10525,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10526,473b58e971e2eb0351af12288dc4976bd3c591ad,/9.4/alpine/Dockerfile, # backwards compat
10527,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,# vim:set ft=dockerfile:
10528,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,# explicitly set user/group IDs
10529,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10530,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10531,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,# grab gosu for easy step-down from root
10532,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10533,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10534,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10535,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10536,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# see note below about ""*.pyc"" files"
10537,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,# arches officialy built by upstream
10538,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10539,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10540,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10541,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10542,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10543,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10544,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10545,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10546,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10547,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10548,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10549,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10550,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10551,6d1f671dcd2c8d51484d19767a33c37110dd650f,/11/Dockerfile, # backwards compat
10552,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
10553,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10554,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10555,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10556,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,#		krb5-dev \
10557,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,#		openldap-dev \
10558,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10559,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10560,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10561,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10562,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10563,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
10564,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10565,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10566,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# vim:set ft=dockerfile:
10567,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# explicitly set user/group IDs
10568,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10569,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10570,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
10571,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10572,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10573,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10574,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10575,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10576,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10577,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# arches officialy built by upstream
10578,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10579,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10580,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10581,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10582,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10583,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10584,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10585,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10586,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10587,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10588,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10589,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10590,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10591,a1420dac644b8190df5e78e80bfa9610b2f077e2,/9.5/Dockerfile, # backwards compat
10592,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# vim:set ft=dockerfile:
10593,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# explicitly set user/group IDs
10594,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10595,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10596,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# grab gosu for easy step-down from root
10597,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10598,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10599,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10600,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10601,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10602,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# arches officialy built by upstream
10603,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10604,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10605,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10606,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10607,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10608,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10609,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10610,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10611,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10612,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10613,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10614,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10615,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10616,06a831c6f1117a856f3daccec35993ba4a265d08,/9.5/Dockerfile, # backwards compat
10617,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# vim:set ft=dockerfile:
10618,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# explicitly set user/group IDs
10619,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,# grab gosu for easy step-down from root
10620,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10621,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10622,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10623,1c018f151e703e594e85cbb5c1dc7f6c38b7d49f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10624,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10625,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10626,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10627,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10628,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,#		krb5-dev \
10629,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,#		openldap-dev \
10630,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10631,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10632,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10633,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10634,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10635,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10636,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10637,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10638,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10639,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10640,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10641,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10642,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#		krb5-dev \
10643,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#		openldap-dev \
10644,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# configure: error: prove not found
10645,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10646,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10647,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10648,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10649,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10650,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10651,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10652,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10653,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10654,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
10655,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10656,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10657,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10658,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10659,57213ab012e6a38a27283eeac65c4726c069647a,/9.4/alpine/Dockerfile, # backwards compat
10660,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# vim:set ft=dockerfile:
10661,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# explicitly set user/group IDs
10662,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,# grab gosu for easy step-down from root
10663,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10664,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10665,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10666,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10667,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10668,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10669,54f46e57136635b484295b985acd6e422d0b9583,/9.4/Dockerfile, # backwards compat
10670,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10671,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10672,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10673,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10674,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,#		krb5-dev \
10675,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,#		openldap-dev \
10676,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10677,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10678,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10679,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10680,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10681,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10682,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10683,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10684,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,# vim:set ft=dockerfile:
10685,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10686,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,# grab gosu for easy step-down from root
10687,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10688,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10689,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# vim:set ft=dockerfile:
10690,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# explicitly set user/group IDs
10691,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10692,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10693,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# grab gosu for easy step-down from root
10694,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10695,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10696,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10697,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10698,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
10699,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# arches officialy built by upstream
10700,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10701,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10702,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10703,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10704,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10705,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10706,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10707,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10708,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10709,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10710,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10711,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10712,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10713,f8bfec9c70f06c5fb9815653732c5d976f6f3c36,/9.6/Dockerfile, # backwards compat
10714,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
10715,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
10716,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10717,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10718,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,#		krb5-dev \
10719,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,#		openldap-dev \
10720,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10721,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10722,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10723,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10724,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10725,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10726,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10727,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10728,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10729,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10730,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10731,738ec9015ca92fa79e541514f51b37a8d69e4979,/9.5/alpine/Dockerfile, # backwards compat
10732,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
10733,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
10734,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10735,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10736,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#		krb5-dev \
10737,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#		openldap-dev \
10738,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# configure: error: prove not found
10739,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10740,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10741,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10742,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10743,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10744,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10745,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10746,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10747,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10748,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
10749,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10750,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10751,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10752,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10753,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/9.6/alpine/Dockerfile, # backwards compat
10754,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,# vim:set ft=dockerfile:
10755,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,# explicitly set user/group IDs
10756,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,# grab gosu for easy step-down from root
10757,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10758,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10759,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10760,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10761,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,# arches officialy built by upstream
10762,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10763,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10764,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10765,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10766,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10767,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10768,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10769,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10770,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10771,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10772,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10773,639f83fb14161c8be60119b97bb9f88796776058,/9.5/Dockerfile, # backwards compat
10774,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# vim:set ft=dockerfile:
10775,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# explicitly set user/group IDs
10776,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10777,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10778,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
10779,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10780,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10781,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10782,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10783,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10784,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10785,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# arches officialy built by upstream
10786,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10787,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10788,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10789,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10790,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10791,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10792,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10793,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10794,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10795,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10796,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10797,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10798,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10799,a1420dac644b8190df5e78e80bfa9610b2f077e2,/12/Dockerfile, # backwards compat
10800,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
10801,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
10802,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
10803,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
10804,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#		krb5-dev \
10805,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#		openldap-dev \
10806,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# configure: error: prove not found
10807,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
10808,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
10809,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
10810,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
10811,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
10812,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
10813,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
10814,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
10815,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
10816,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
10817,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
10818,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10819,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
10820,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10821,dcf1338d3a29d8244aecc12555e18267b8aaeed3,/9.4/alpine/Dockerfile, # backwards compat
10822,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# vim:set ft=dockerfile:
10823,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# explicitly set user/group IDs
10824,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10825,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10826,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# grab gosu for easy step-down from root
10827,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10828,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10829,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10830,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10831,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10832,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
10833,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# arches officialy built by upstream
10834,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10835,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10836,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10837,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10838,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10839,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10840,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10841,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10842,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10843,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10844,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10845,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10846,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10847,72d7408ad3b57ab1a5c371e11460811551811bf5,/9.5/Dockerfile, # backwards compat
10848,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# vim:set ft=dockerfile:
10849,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# explicitly set user/group IDs
10850,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10851,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10852,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# grab gosu for easy step-down from root
10853,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10854,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10855,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10856,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10857,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10858,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10859,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# arches officialy built by upstream
10860,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10861,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10862,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10863,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10864,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10865,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10866,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10867,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10868,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10869,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10870,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10871,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10872,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10873,4dc16e44d16480d9c8e5eb705c15468d65366e43,/12/Dockerfile, # backwards compat
10874,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# vim:set ft=dockerfile:
10875,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# explicitly set user/group IDs
10876,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# grab gosu for easy step-down from root
10877,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10878,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10879,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# arches officialy built by upstream
10880,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10881,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10882,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10883,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10884,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10885,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10886,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10887,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10888,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10889,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10890,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10891,0aaaf2094034647a552f0b1ec63b1b0ec0f6c2cc,/10/Dockerfile, # backwards compat
10892,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# vim:set ft=dockerfile:
10893,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# explicitly set user/group IDs
10894,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10895,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10896,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# grab gosu for easy step-down from root
10897,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10898,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10899,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10900,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10901,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# arches officialy built by upstream
10902,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10903,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10904,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10905,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10906,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10907,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10908,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10909,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10910,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10911,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10912,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10913,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.5/Dockerfile, # backwards compat
10914,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# vim:set ft=dockerfile:
10915,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# explicitly set user/group IDs
10916,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10917,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10918,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# grab gosu for easy step-down from root
10919,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10920,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10921,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10922,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10923,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# see note below about ""*.pyc"" files"
10924,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# arches officialy built by upstream
10925,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10926,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10927,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10928,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10929,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10930,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10931,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10932,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10933,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10934,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10935,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10936,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10937,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10938,1acd5e225abead13b3f264e9e5a7c68598a33c67,/11/Dockerfile, # backwards compat
10939,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,# vim:set ft=dockerfile:
10940,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
10941,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,# grab gosu for easy step-down from root
10942,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10943,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
10944,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# vim:set ft=dockerfile:
10945,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# explicitly set user/group IDs
10946,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# grab gosu for easy step-down from root
10947,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10948,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10949,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10950,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10951,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# arches officialy built by upstream
10952,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10953,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10954,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10955,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10956,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10957,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10958,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10959,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10960,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10961,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
10962,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10963,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.5/Dockerfile, # backwards compat
10964,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# vim:set ft=dockerfile:
10965,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# explicitly set user/group IDs
10966,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10967,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10968,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# grab gosu for easy step-down from root
10969,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10970,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10971,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10972,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
10973,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10974,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# see note below about ""*.pyc"" files"
10975,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# arches officialy built by upstream
10976,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
10977,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
10978,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
10979,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
10980,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
10981,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
10982,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
10983,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
10984,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
10985,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
10986,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
10987,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
10988,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
10989,71d4ab5d4192bfb04f3dcc919fd99f66326078c9,/12/Dockerfile, # backwards compat
10990,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# vim:set ft=dockerfile:
10991,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# explicitly set user/group IDs
10992,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
10993,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
10994,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# grab gosu for easy step-down from root
10995,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
10996,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
10997,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
10998,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
10999,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# see note below about ""*.pyc"" files"
11000,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# arches officialy built by upstream
11001,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11002,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11003,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11004,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11005,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11006,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11007,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11008,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11009,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11010,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11011,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11012,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11013,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11014,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/10/Dockerfile, # backwards compat
11015,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11016,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11017,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11018,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11019,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#		krb5-dev \
11020,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#		openldap-dev \
11021,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# configure: error: prove not found
11022,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11023,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11024,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11025,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11026,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11027,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11028,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11029,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11030,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11031,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
11032,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11033,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11034,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11035,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11036,81a7cf454df3564035f66936839c7c3b29ae26ea,/9.5/alpine/Dockerfile, # backwards compat
11037,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# vim:set ft=dockerfile:
11038,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# explicitly set user/group IDs
11039,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,# grab gosu for easy step-down from root
11040,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11041,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11042,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11043,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11044,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11045,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11046,972294a377463156c8d61297320c872fc7d370a9,/10/Dockerfile, # backwards compat
11047,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# vim:set ft=dockerfile:
11048,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# explicitly set user/group IDs
11049,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,# grab gosu for easy step-down from root
11050,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11051,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11052,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11053,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11054,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11055,3706d4c4562c284ed070286b9fd516151167a40c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11056,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11057,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11058,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11059,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11060,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#		krb5-dev \
11061,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#		openldap-dev \
11062,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# configure: error: prove not found
11063,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11064,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11065,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11066,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11067,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11068,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11069,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11070,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11071,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11072,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
11073,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11074,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11075,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11076,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11077,930806fc31d4ae6359cbf89bf9d0cf32b18a6522,/9.6/alpine/Dockerfile, # backwards compat
11078,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,# vim:set ft=dockerfile:
11079,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11080,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,# grab gosu for easy step-down from root
11081,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11082,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11083,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
11084,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11085,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11086,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11087,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,#		krb5-dev \
11088,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,#		openldap-dev \
11089,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11090,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11091,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11092,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11093,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11094,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11095,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11096,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11097,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11098,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#		krb5-dev \
11099,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#		openldap-dev \
11100,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# configure: error: prove not found
11101,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11102,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11103,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11104,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11105,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11106,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11107,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11108,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11109,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11110,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11111,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11112,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11113,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11114,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11115,25f99f10cb564f0a8b5c1de8a9a00a8095a587fb,/11/alpine/Dockerfile, # backwards compat
11116,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11117,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11118,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11119,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11120,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,#		krb5-dev \
11121,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,#		openldap-dev \
11122,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,# configure: error: prove not found
11123,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11124,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11125,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11126,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11127,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11128,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11129,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11130,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11131,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11132,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
11133,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11134,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11135,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11136,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11137,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.6/alpine/Dockerfile, # backwards compat
11138,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# vim:set ft=dockerfile:
11139,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# explicitly set user/group IDs
11140,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,# grab gosu for easy step-down from root
11141,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11142,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11143,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# vim:set ft=dockerfile:
11144,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# explicitly set user/group IDs
11145,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# grab gosu for easy step-down from root
11146,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11147,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11148,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11149,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11150,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# arches officialy built by upstream
11151,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11152,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11153,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11154,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11155,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11156,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11157,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11158,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11159,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11160,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11161,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11162,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/10/Dockerfile, # backwards compat
11163,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# vim:set ft=dockerfile:
11164,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# explicitly set user/group IDs
11165,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# grab gosu for easy step-down from root
11166,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11167,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11168,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# arches officialy built by upstream
11169,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11170,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11171,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11172,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11173,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11174,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11175,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11176,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11177,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11178,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11179,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11180,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/Dockerfile, # backwards compat
11181,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11182,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11183,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11184,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11185,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,#		krb5-dev \
11186,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,#		openldap-dev \
11187,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11188,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11189,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11190,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11191,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11192,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11193,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11194,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11195,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11196,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11197,3706d4c4562c284ed070286b9fd516151167a40c,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11198,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11199,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11200,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11201,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11202,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,#		krb5-dev \
11203,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,#		openldap-dev \
11204,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11205,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11206,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11207,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11208,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11209,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11210,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11211,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11212,6abeb8590f35c5251b9f100a667024febaeee06b,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11213,6abeb8590f35c5251b9f100a667024febaeee06b,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11214,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# vim:set ft=dockerfile:
11215,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# explicitly set user/group IDs
11216,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11217,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11218,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# grab gosu for easy step-down from root
11219,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11220,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11221,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11222,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11223,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
11224,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# arches officialy built by upstream
11225,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11226,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11227,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11228,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11229,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11230,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11231,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11232,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11233,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11234,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11235,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11236,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11237,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11238,87b15b6c65ba985ac958e7b35ba787422113066e,/9.6/Dockerfile, # backwards compat
11239,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
11240,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
11241,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11242,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11243,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#		krb5-dev \
11244,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#		openldap-dev \
11245,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# configure: error: prove not found
11246,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11247,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11248,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11249,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
11250,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11251,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11252,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11253,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11254,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11255,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,#p' --recursive /usr/local \
11256,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11257,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11258,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11259,1bddd083582b0977075dda4258f2d9dfbc90482b,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11260,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11261,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11262,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11263,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11264,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,#		krb5-dev \
11265,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,#		openldap-dev \
11266,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11267,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11268,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11269,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11270,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11271,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11272,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11273,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11274,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11275,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11276,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11277,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.5/alpine/Dockerfile, # backwards compat
11278,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11279,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11280,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11281,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11282,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,#		krb5-dev \
11283,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,#		openldap-dev \
11284,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11285,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11286,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11287,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11288,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11289,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
11290,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11291,03f4064a045114f56fa445eb602339faaf79eeec,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11292,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# vim:set ft=dockerfile:
11293,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# explicitly set user/group IDs
11294,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,# grab gosu for easy step-down from root
11295,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11296,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11297,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11298,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11299,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11300,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11301,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.5/Dockerfile, # backwards compat
11302,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
11303,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11304,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11305,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11306,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,#		krb5-dev \
11307,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,#		openldap-dev \
11308,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11309,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
11310,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11311,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11312,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11313,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11314,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11315,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11316,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11317,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11318,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11319,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11320,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.2/alpine/Dockerfile, # backwards compat
11321,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
11322,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
11323,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11324,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11325,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,#		krb5-dev \
11326,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,#		openldap-dev \
11327,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,# configure: error: prove not found
11328,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11329,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11330,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11331,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11332,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11333,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11334,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11335,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11336,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11337,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,#p' --recursive /usr/local \
11338,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11339,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11340,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11341,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11342,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/10/alpine/Dockerfile, # backwards compat
11343,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
11344,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11345,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11346,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11347,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#		krb5-dev \
11348,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#		openldap-dev \
11349,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# configure: error: prove not found
11350,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11351,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11352,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11353,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11354,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11355,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11356,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11357,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11358,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11359,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
11360,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11361,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11362,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11363,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11364,7c287e7800dc08743da8d6372ab752e5438f662b,/10/alpine/Dockerfile, # backwards compat
11365,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11366,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11367,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11368,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11369,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,#		krb5-dev \
11370,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,#		openldap-dev \
11371,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# configure: error: prove not found
11372,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11373,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11374,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11375,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11376,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11377,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11378,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11379,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11380,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11381,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11382,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11383,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11384,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11385,a1b76e5704e4d8f40c736454eccba863a7be75e4,/9.5/alpine/Dockerfile, # backwards compat
11386,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
11387,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11388,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11389,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11390,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#		krb5-dev \
11391,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#		openldap-dev \
11392,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# configure: error: prove not found
11393,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11394,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11395,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
11396,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11397,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11398,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11399,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11400,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11401,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11402,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11403,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11404,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
11405,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11406,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11407,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11408,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11409,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.3/alpine/Dockerfile, # backwards compat
11410,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# vim:set ft=dockerfile:
11411,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# explicitly set user/group IDs
11412,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,# grab gosu for easy step-down from root
11413,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11414,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11415,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11416,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11417,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11418,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11419,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#		krb5-dev \
11420,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#		openldap-dev \
11421,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# configure: error: prove not found
11422,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11423,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11424,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11425,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11426,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11427,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11428,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11429,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11430,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11431,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11432,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11433,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11434,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11435,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11436,639f83fb14161c8be60119b97bb9f88796776058,/11/alpine/Dockerfile, # backwards compat
11437,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
11438,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
11439,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11440,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11441,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#		krb5-dev \
11442,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#		openldap-dev \
11443,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# configure: error: prove not found
11444,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11445,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11446,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11447,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
11448,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11449,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11450,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11451,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11452,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11453,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,#p' --recursive /usr/local \
11454,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11455,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11456,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11457,06321b0cd97dc7e6523b1faed69b7a0d8fd3d2cc,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11458,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# vim:set ft=dockerfile:
11459,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# explicitly set user/group IDs
11460,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11461,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11462,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# grab gosu for easy step-down from root
11463,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11464,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11465,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11466,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11467,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# see note below about ""*.pyc"" files"
11468,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# arches officialy built by upstream
11469,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11470,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11471,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11472,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11473,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11474,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11475,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11476,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11477,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11478,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11479,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11480,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11481,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11482,064113e0e481a1d0542846b81858e457fde02c90,/11/Dockerfile, # backwards compat
11483,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# vim:set ft=dockerfile:
11484,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# explicitly set user/group IDs
11485,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11486,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11487,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# grab gosu for easy step-down from root
11488,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11489,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11490,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11491,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11492,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
11493,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# arches officialy built by upstream
11494,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11495,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11496,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11497,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11498,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11499,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11500,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11501,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11502,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11503,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11504,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11505,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11506,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11507,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.6/Dockerfile, # backwards compat
11508,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11509,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11510,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11511,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11512,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#		krb5-dev \
11513,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#		openldap-dev \
11514,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# configure: error: prove not found
11515,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11516,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11517,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11518,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11519,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11520,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11521,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11522,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11523,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11524,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11525,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11526,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11527,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11528,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11529,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/alpine/Dockerfile, # backwards compat
11530,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# vim:set ft=dockerfile:
11531,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# explicitly set user/group IDs
11532,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11533,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11534,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# grab gosu for easy step-down from root
11535,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11536,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11537,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11538,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11539,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# see note below about ""*.pyc"" files"
11540,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# arches officialy built by upstream
11541,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11542,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11543,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11544,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11545,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11546,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11547,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11548,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11549,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11550,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11551,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11552,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11553,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11554,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/10/Dockerfile, # backwards compat
11555,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11556,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11557,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11558,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11559,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,#		krb5-dev \
11560,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,#		openldap-dev \
11561,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11562,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11563,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11564,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11565,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11566,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11567,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11568,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11569,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11570,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11571,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11572,54f46e57136635b484295b985acd6e422d0b9583,/9.6/alpine/Dockerfile, # backwards compat
11573,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# vim:set ft=dockerfile:
11574,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# explicitly set user/group IDs
11575,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11576,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11577,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# grab gosu for easy step-down from root
11578,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11579,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11580,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11581,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11582,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# see note below about ""*.pyc"" files"
11583,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# arches officialy built by upstream
11584,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11585,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11586,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11587,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11588,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11589,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11590,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11591,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11592,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11593,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11594,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11595,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11596,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11597,87b15b6c65ba985ac958e7b35ba787422113066e,/12/Dockerfile, # backwards compat
11598,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11599,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11600,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11601,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11602,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,#		krb5-dev \
11603,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,#		openldap-dev \
11604,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# configure: error: prove not found
11605,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11606,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11607,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11608,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11609,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11610,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11611,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11612,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11613,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11614,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11615,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11616,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11617,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11618,f3146f857b42bd4c4cb2be6134149fddee546584,/9.5/alpine/Dockerfile, # backwards compat
11619,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# vim:set ft=dockerfile:
11620,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# explicitly set user/group IDs
11621,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,# grab gosu for easy step-down from root
11622,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11623,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11624,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11625,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11626,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# vim:set ft=dockerfile:
11627,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# explicitly set user/group IDs
11628,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,# grab gosu for easy step-down from root
11629,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11630,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11631,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11632,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11633,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11634,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11635,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#		krb5-dev \
11636,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#		openldap-dev \
11637,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# configure: error: prove not found
11638,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11639,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11640,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11641,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11642,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11643,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11644,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11645,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11646,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11647,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11648,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11649,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11650,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11651,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11652,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.4/alpine/Dockerfile, # backwards compat
11653,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
11654,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11655,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11656,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11657,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,#		krb5-dev \
11658,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,#		openldap-dev \
11659,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11660,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11661,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11662,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11663,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11664,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11665,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11666,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11667,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11668,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11669,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11670,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11671,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11672,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11673,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11674,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#		krb5-dev \
11675,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#		openldap-dev \
11676,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# configure: error: prove not found
11677,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11678,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11679,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11680,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11681,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11682,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11683,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11684,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11685,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11686,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11687,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11688,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11689,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11690,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11691,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/11/alpine/Dockerfile, # backwards compat
11692,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# vim:set ft=dockerfile:
11693,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# explicitly set user/group IDs
11694,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11695,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11696,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# grab gosu for easy step-down from root
11697,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11698,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11699,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11700,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
11701,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11702,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# see note below about ""*.pyc"" files"
11703,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# arches officialy built by upstream
11704,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11705,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11706,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11707,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11708,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11709,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11710,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11711,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11712,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11713,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11714,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11715,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11716,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11717,06cc08b44b4dc879e0c948ba64d2d0a00596ed50,/11/Dockerfile, # backwards compat
11718,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# vim:set ft=dockerfile:
11719,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# explicitly set user/group IDs
11720,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,# grab gosu for easy step-down from root
11721,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11722,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11723,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11724,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11725,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11726,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11727,972294a377463156c8d61297320c872fc7d370a9,/9.4/Dockerfile, # backwards compat
11728,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
11729,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11730,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11731,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11732,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,#		krb5-dev \
11733,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,#		openldap-dev \
11734,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11735,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11736,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11737,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11738,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11739,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11740,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11741,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11742,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,# vim:set ft=dockerfile:
11743,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11744,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,# grab gosu for easy step-down from root
11745,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11746,904b4637237bf17657674bafe3ca42d241e3e745,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11747,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# vim:set ft=dockerfile:
11748,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# explicitly set user/group IDs
11749,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11750,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11751,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# grab gosu for easy step-down from root
11752,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11753,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11754,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11755,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11756,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# see note below about ""*.pyc"" files"
11757,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# arches officialy built by upstream
11758,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11759,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11760,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11761,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11762,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11763,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11764,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11765,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11766,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11767,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11768,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11769,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11770,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11771,2d40c8a89bfc888fb99463e919ac748cd54c0fcc,/11/Dockerfile, # backwards compat
11772,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
11773,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11774,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11775,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11776,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#		krb5-dev \
11777,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#		openldap-dev \
11778,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# configure: error: prove not found
11779,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11780,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11781,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11782,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11783,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11784,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11785,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11786,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11787,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11788,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,#p' --recursive /usr/local \
11789,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11790,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11791,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11792,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11793,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/10/alpine/Dockerfile, # backwards compat
11794,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# vim:set ft=dockerfile:
11795,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# explicitly set user/group IDs
11796,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# grab gosu for easy step-down from root
11797,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11798,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11799,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11800,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11801,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# arches officialy built by upstream
11802,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11803,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11804,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11805,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11806,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11807,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11808,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11809,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11810,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11811,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11812,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11813,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/Dockerfile, # backwards compat
11814,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
11815,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11816,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11817,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11818,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#		krb5-dev \
11819,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#		openldap-dev \
11820,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# configure: error: prove not found
11821,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11822,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11823,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11824,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11825,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11826,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11827,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11828,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11829,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11830,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,#p' --recursive /usr/local \
11831,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11832,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11833,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11834,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11835,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/10/alpine/Dockerfile, # backwards compat
11836,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
11837,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11838,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11839,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11840,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#		krb5-dev \
11841,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#		openldap-dev \
11842,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# configure: error: prove not found
11843,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11844,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11845,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11846,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11847,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11848,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11849,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11850,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11851,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11852,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,#p' --recursive /usr/local \
11853,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11854,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11855,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11856,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11857,01058c1847400919de5282ca825a7806a9dafcda,/11/alpine/Dockerfile, # backwards compat
11858,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,# vim:set ft=dockerfile:
11859,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11860,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,# grab gosu for easy step-down from root
11861,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11862,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11863,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
11864,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11865,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11866,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11867,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,#		krb5-dev \
11868,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,#		openldap-dev \
11869,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11870,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11871,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11872,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11873,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11874,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11875,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11876,d2b38544770a63fed430694a7aed33de3ad8b808,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11877,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,# vim:set ft=dockerfile:
11878,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,# explicitly set user/group IDs
11879,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11880,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11881,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,# grab gosu for easy step-down from root
11882,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11883,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11884,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11885,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11886,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
11887,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,# arches officialy built by upstream
11888,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11889,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11890,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11891,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11892,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11893,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11894,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11895,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11896,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11897,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11898,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11899,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11900,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11901,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.6/Dockerfile, # backwards compat
11902,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# vim:set ft=dockerfile:
11903,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# explicitly set user/group IDs
11904,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,# grab gosu for easy step-down from root
11905,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11906,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11907,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11908,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11909,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11910,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
11911,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
11912,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11913,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11914,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#		krb5-dev \
11915,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#		openldap-dev \
11916,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# configure: error: prove not found
11917,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
11918,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11919,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
11920,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
11921,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
11922,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11923,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11924,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11925,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11926,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
11927,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11928,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11929,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11930,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11931,01058c1847400919de5282ca825a7806a9dafcda,/9.4/alpine/Dockerfile, # backwards compat
11932,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
11933,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
11934,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
11935,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
11936,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,#		krb5-dev \
11937,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,#		openldap-dev \
11938,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
11939,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
11940,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
11941,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
11942,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
11943,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
11944,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11945,d2b38544770a63fed430694a7aed33de3ad8b808,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
11946,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# vim:set ft=dockerfile:
11947,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# explicitly set user/group IDs
11948,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,# grab gosu for easy step-down from root
11949,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11950,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11951,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# vim:set ft=dockerfile:
11952,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# explicitly set user/group IDs
11953,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,# grab gosu for easy step-down from root
11954,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11955,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11956,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11957,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
11958,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,# vim:set ft=dockerfile:
11959,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
11960,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,# grab gosu for easy step-down from root
11961,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11962,546985f5cdd006c26cad6a5ee9c3e7ee666dc08c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
11963,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# vim:set ft=dockerfile:
11964,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# explicitly set user/group IDs
11965,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11966,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11967,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# grab gosu for easy step-down from root
11968,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11969,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11970,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11971,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11972,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
11973,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# arches officialy built by upstream
11974,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
11975,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
11976,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
11977,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
11978,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
11979,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
11980,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
11981,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
11982,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
11983,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
11984,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
11985,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
11986,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
11987,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.5/Dockerfile, # backwards compat
11988,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# vim:set ft=dockerfile:
11989,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# explicitly set user/group IDs
11990,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
11991,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
11992,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# grab gosu for easy step-down from root
11993,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
11994,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
11995,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
11996,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
11997,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
11998,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# arches officialy built by upstream
11999,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12000,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12001,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12002,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12003,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12004,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12005,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12006,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12007,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12008,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12009,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12010,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12011,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12012,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.3/Dockerfile, # backwards compat
12013,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12014,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12015,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12016,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12017,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#		krb5-dev \
12018,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#		openldap-dev \
12019,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# configure: error: prove not found
12020,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12021,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12022,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12023,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
12024,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12025,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12026,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12027,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12028,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12029,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12030,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12031,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12032,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12033,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12034,0f4abf741b320d7ac53207c03867c4ac24aad6b5,/9.6/alpine/Dockerfile, # backwards compat
12035,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# vim:set ft=dockerfile:
12036,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# explicitly set user/group IDs
12037,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12038,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12039,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# grab gosu for easy step-down from root
12040,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12041,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12042,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12043,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12044,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# see note below about ""*.pyc"" files"
12045,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# arches officialy built by upstream
12046,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12047,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12048,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12049,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12050,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12051,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12052,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12053,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12054,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12055,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12056,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12057,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12058,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12059,4b94743e2ef5ead3ce8c66f96e43f6dc9d877025,/11/Dockerfile, # backwards compat
12060,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12061,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12062,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12063,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12064,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,#		krb5-dev \
12065,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,#		openldap-dev \
12066,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12067,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12068,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12069,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12070,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12071,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12072,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12073,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12074,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# vim:set ft=dockerfile:
12075,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# explicitly set user/group IDs
12076,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12077,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12078,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# grab gosu for easy step-down from root
12079,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12080,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12081,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12082,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12083,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# see note below about ""*.pyc"" files"
12084,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# arches officialy built by upstream
12085,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12086,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12087,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12088,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12089,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12090,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12091,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12092,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12093,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12094,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12095,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12096,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12097,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12098,6f6968e4a2ee82cc7893e12414cbb221044ed3bd,/10/Dockerfile, # backwards compat
12099,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# vim:set ft=dockerfile:
12100,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# explicitly set user/group IDs
12101,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,# grab gosu for easy step-down from root
12102,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12103,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12104,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,# vim:set ft=dockerfile:
12105,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,# explicitly set user/group IDs
12106,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,# grab gosu for easy step-down from root
12107,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12108,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12109,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12110,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12111,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# vim:set ft=dockerfile:
12112,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# explicitly set user/group IDs
12113,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# grab gosu for easy step-down from root
12114,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12115,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12116,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12117,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12118,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# arches officialy built by upstream
12119,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12120,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12121,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12122,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12123,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12124,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12125,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12126,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12127,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12128,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12129,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12130,a0335993e11a1fba4dfea0665189dfa4423709cf,/9.3/Dockerfile, # backwards compat
12131,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12132,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12133,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12134,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12135,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#		krb5-dev \
12136,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#		openldap-dev \
12137,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# configure: error: prove not found
12138,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12139,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12140,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12141,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12142,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12143,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12144,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12145,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12146,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12147,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12148,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12149,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12150,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12151,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12152,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/11/alpine/Dockerfile, # backwards compat
12153,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,# vim:set ft=dockerfile:
12154,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12155,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,# grab gosu for easy step-down from root
12156,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12157,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12158,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,# vim:set ft=dockerfile:
12159,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12160,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,# grab gosu for easy step-down from root
12161,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12162,5f401753715311752f2346cdbd32bd55e7251ddd,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12163,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12164,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12165,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12166,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12167,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,#		krb5-dev \
12168,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,#		openldap-dev \
12169,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# configure: error: prove not found
12170,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12171,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12172,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12173,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12174,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12175,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12176,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12177,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12178,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12179,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12180,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12181,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12182,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12183,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12184,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12185,f3146f857b42bd4c4cb2be6134149fddee546584,/9.2/alpine/Dockerfile, # backwards compat
12186,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
12187,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# explicitly set user/group IDs
#RUN adduser -S -G postgres -u 999 postgres"
12188,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12189,688e034f8363083cc2b1b8f8c93236c4b4445e0f,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12190,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# vim:set ft=dockerfile:
12191,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# explicitly set user/group IDs
12192,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12193,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12194,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# grab gosu for easy step-down from root
12195,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12196,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12197,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12198,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12199,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
12200,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# arches officialy built by upstream
12201,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12202,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12203,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12204,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12205,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12206,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12207,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12208,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12209,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12210,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12211,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12212,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12213,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12214,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.4/Dockerfile, # backwards compat
12215,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# vim:set ft=dockerfile:
12216,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# explicitly set user/group IDs
12217,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# grab gosu for easy step-down from root
12218,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12219,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12220,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# arches officialy built by upstream
12221,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12222,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12223,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12224,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12225,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12226,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12227,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12228,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12229,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12230,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12231,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12232,3b022607bec233463a3d055731fb710837978747,/9.6/Dockerfile, # backwards compat
12233,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# vim:set ft=dockerfile:
12234,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# explicitly set user/group IDs
12235,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,# grab gosu for easy step-down from root
12236,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12237,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12238,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12239,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12240,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12241,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12242,466a61bac6997c368be02dff5eb43673c4ce3fa9,/10/Dockerfile, # backwards compat
12243,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12244,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12245,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12246,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12247,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#		krb5-dev \
12248,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#		openldap-dev \
12249,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# configure: error: prove not found
12250,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12251,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12252,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12253,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12254,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12255,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12256,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12257,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12258,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12259,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12260,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12261,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12262,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12263,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12264,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/alpine/Dockerfile, # backwards compat
12265,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
12266,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12267,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12268,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12269,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#		krb5-dev \
12270,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#		openldap-dev \
12271,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# configure: error: prove not found
12272,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12273,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12274,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12275,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12276,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12277,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12278,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12279,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12280,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12281,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,#p' --recursive /usr/local \
12282,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12283,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12284,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12285,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12286,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12287,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12288,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12289,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12290,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,#		krb5-dev \
12291,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,#		openldap-dev \
12292,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12293,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12294,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12295,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12296,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12297,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
12298,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12299,03f4064a045114f56fa445eb602339faaf79eeec,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12300,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# vim:set ft=dockerfile:
12301,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# explicitly set user/group IDs
12302,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# grab gosu for easy step-down from root
12303,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12304,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12305,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# arches officialy built by upstream
12306,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12307,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12308,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12309,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12310,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12311,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12312,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12313,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12314,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12315,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12316,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12317,f7dc5727b1d6b6a636350e11648845ae33477579,/9.5/Dockerfile, # backwards compat
12318,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12319,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12320,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12321,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12322,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#		krb5-dev \
12323,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#		openldap-dev \
12324,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# configure: error: prove not found
12325,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12326,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12327,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12328,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12329,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12330,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12331,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12332,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12333,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12334,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12335,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12336,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12337,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12338,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12339,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.4/alpine/Dockerfile, # backwards compat
12340,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12341,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12342,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12343,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12344,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#		krb5-dev \
12345,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#		openldap-dev \
12346,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# configure: error: prove not found
12347,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12348,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12349,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12350,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12351,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12352,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12353,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12354,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12355,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12356,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12357,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12358,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12359,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12360,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12361,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.4/alpine/Dockerfile, # backwards compat
12362,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# vim:set ft=dockerfile:
12363,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# explicitly set user/group IDs
12364,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# grab gosu for easy step-down from root
12365,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12366,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12367,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12368,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# arches officialy built by upstream
12369,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12370,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12371,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12372,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12373,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12374,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12375,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12376,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12377,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12378,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12379,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12380,46bc23cd0dbb7935e3d2baaddfefaed42ac65ce2,/9.6/Dockerfile, # backwards compat
12381,6fabe2e39c165dd1e2e32f8b758f2c02ded20d8f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12382,6fabe2e39c165dd1e2e32f8b758f2c02ded20d8f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12383,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# vim:set ft=dockerfile:
12384,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# explicitly set user/group IDs
12385,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12386,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12387,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# grab gosu for easy step-down from root
12388,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12389,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12390,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12391,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12392,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# arches officialy built by upstream
12393,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12394,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12395,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12396,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12397,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12398,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12399,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12400,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12401,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12402,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12403,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12404,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/11/Dockerfile, # backwards compat
12405,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# vim:set ft=dockerfile:
12406,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# explicitly set user/group IDs
12407,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12408,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12409,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# grab gosu for easy step-down from root
12410,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12411,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12412,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12413,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12414,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
12415,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# arches officialy built by upstream
12416,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12417,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12418,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12419,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12420,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12421,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12422,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12423,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12424,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12425,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12426,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12427,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12428,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12429,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.5/Dockerfile, # backwards compat
12430,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
12431,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12432,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12433,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12434,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,#		krb5-dev \
12435,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,#		openldap-dev \
12436,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12437,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12438,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12439,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12440,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12441,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12442,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12443,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12444,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12445,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12446,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12447,64e333ff1fd67c1d37ee99343d64770f41d3bfc6,/9.5/alpine/Dockerfile, # backwards compat
12448,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12449,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12450,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12451,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12452,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,#		krb5-dev \
12453,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,#		openldap-dev \
12454,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12455,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12456,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12457,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12458,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12459,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12460,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12461,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12462,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12463,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12464,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12465,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12466,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12467,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12468,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12469,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,#		krb5-dev \
12470,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,#		openldap-dev \
12471,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# configure: error: prove not found
12472,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12473,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12474,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12475,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12476,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12477,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12478,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12479,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12480,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12481,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12482,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12483,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12484,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12485,b2649f97aee8bca9f4e65a2c050f66fe255ec9f3,/9.4/alpine/Dockerfile, # backwards compat
12486,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12487,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12488,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12489,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12490,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#		krb5-dev \
12491,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#		openldap-dev \
12492,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# configure: error: prove not found
12493,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12494,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12495,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12496,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12497,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12498,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12499,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12500,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12501,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12502,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12503,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12504,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12505,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12506,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12507,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/9.6/alpine/Dockerfile, # backwards compat
12508,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# vim:set ft=dockerfile:
12509,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# explicitly set user/group IDs
12510,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,# grab gosu for easy step-down from root
12511,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12512,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12513,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# vim:set ft=dockerfile:
12514,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# explicitly set user/group IDs
12515,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,# grab gosu for easy step-down from root
12516,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12517,8a9fbcb40f13ccc7762f278b9df611cabe22d300,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12518,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12519,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12520,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12521,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12522,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,#		krb5-dev \
12523,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,#		openldap-dev \
12524,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12525,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12526,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12527,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12528,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12529,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12530,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12531,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12532,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12533,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12534,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12535,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/alpine/Dockerfile, # backwards compat
12536,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12537,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12538,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12539,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12540,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,#		krb5-dev \
12541,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,#		openldap-dev \
12542,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# configure: error: prove not found
12543,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12544,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12545,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12546,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12547,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12548,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12549,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12550,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12551,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12552,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12553,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12554,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12555,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12556,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12557,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12558,b3cb99032a600a27dcb8f3c52f14c72fd22d477f,/9.2/alpine/Dockerfile, # backwards compat
12559,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,# vim:set ft=dockerfile:
12560,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12561,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,# grab gosu for easy step-down from root
12562,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12563,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12564,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# vim:set ft=dockerfile:
12565,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# explicitly set user/group IDs
12566,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# grab gosu for easy step-down from root
12567,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12568,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12569,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# arches officialy built by upstream
12570,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12571,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12572,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12573,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12574,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12575,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12576,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12577,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12578,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12579,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12580,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12581,57213ab012e6a38a27283eeac65c4726c069647a,/10/Dockerfile, # backwards compat
12582,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# vim:set ft=dockerfile:
12583,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# explicitly set user/group IDs
12584,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# grab gosu for easy step-down from root
12585,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12586,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12587,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12588,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# arches officialy built by upstream
12589,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12590,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12591,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12592,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12593,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12594,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12595,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12596,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12597,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12598,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12599,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12600,54bfbc5fbef9f33d678e87470e4b7ab5ce6dd12b,/9.5/Dockerfile, # backwards compat
12601,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# vim:set ft=dockerfile:
12602,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# explicitly set user/group IDs
12603,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12604,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12605,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# grab gosu for easy step-down from root
12606,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12607,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12608,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12609,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
12610,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12611,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# see note below about ""*.pyc"" files"
12612,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# arches officialy built by upstream
12613,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12614,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12615,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12616,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12617,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12618,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12619,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12620,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12621,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12622,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12623,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12624,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12625,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12626,4f70bf2b811bcdb4ab1a015ef703373226452157,/12/Dockerfile, # backwards compat
12627,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# vim:set ft=dockerfile:
12628,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# explicitly set user/group IDs
12629,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# grab gosu for easy step-down from root
12630,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12631,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12632,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12633,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12634,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# arches officialy built by upstream
12635,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12636,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12637,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12638,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12639,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12640,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12641,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12642,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12643,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12644,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12645,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12646,686aae6553981d5254649841bb89677dc33f1aeb,/11/Dockerfile, # backwards compat
12647,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# vim:set ft=dockerfile:
12648,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# explicitly set user/group IDs
12649,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,# grab gosu for easy step-down from root
12650,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12651,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12652,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12653,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12654,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12655,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12656,e7222bf98572eec2a7b8875c13825015a163091c,/9.6/Dockerfile, # backwards compat
12657,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12658,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12659,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12660,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12661,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,#		krb5-dev \
12662,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,#		openldap-dev \
12663,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12664,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12665,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12666,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12667,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12668,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,# vim:set ft=dockerfile:
12669,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12670,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,# grab gosu for easy step-down from root
12671,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12672,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12673,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,# vim:set ft=dockerfile:
12674,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12675,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,# grab gosu for easy step-down from root
12676,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12677,b36f03d03593858497e1dda862c732cd1eb2ce86,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12678,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# vim:set ft=dockerfile:
12679,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# explicitly set user/group IDs
12680,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12681,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12682,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# grab gosu for easy step-down from root
12683,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12684,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12685,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12686,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12687,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
12688,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# arches officialy built by upstream
12689,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12690,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12691,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12692,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12693,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12694,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12695,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12696,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12697,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12698,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12699,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12700,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12701,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12702,0e8afe8b6a5db91d575ea8fcd2b57920d178f215,/9.4/Dockerfile, # backwards compat
12703,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,# vim:set ft=dockerfile:
12704,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12705,783906f551b9bc1472751200296f93bb2c55bc44,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12706,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12707,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12708,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12709,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12710,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#		krb5-dev \
12711,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#		openldap-dev \
12712,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# configure: error: prove not found
12713,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12714,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12715,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12716,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12717,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12718,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12719,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12720,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12721,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12722,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12723,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12724,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12725,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12726,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12727,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.6/alpine/Dockerfile, # backwards compat
12728,6abeb8590f35c5251b9f100a667024febaeee06b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12729,6abeb8590f35c5251b9f100a667024febaeee06b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12730,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12731,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12732,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12733,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12734,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,#		krb5-dev \
12735,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,#		openldap-dev \
12736,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# configure: error: prove not found
12737,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12738,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12739,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12740,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12741,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12742,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12743,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12744,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12745,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12746,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12747,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12748,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12749,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12750,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12751,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12752,b1fc9b6f7506ea7357f48fb0125e8b7a3c1d96e9,/9.3/alpine/Dockerfile, # backwards compat
12753,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12754,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12755,7c8e945a80097e80fa1c8d69d2a027145177b701,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12756,7c8e945a80097e80fa1c8d69d2a027145177b701,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12757,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
12758,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
12759,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12760,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12761,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#		krb5-dev \
12762,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#		openldap-dev \
12763,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# configure: error: prove not found
12764,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12765,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12766,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12767,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12768,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12769,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12770,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12771,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12772,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12773,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
12774,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12775,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12776,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12777,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12778,7675803cba8dbf4aca2c1064b044b03cd0db6c2d,/9.6/alpine/Dockerfile, # backwards compat
12779,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12780,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
12781,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12782,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12783,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#		krb5-dev \
12784,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#		openldap-dev \
12785,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# configure: error: prove not found
12786,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12787,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12788,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12789,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12790,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12791,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12792,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12793,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12794,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12795,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12796,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12797,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12798,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12799,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12800,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/11/alpine/Dockerfile, # backwards compat
12801,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12802,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12803,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12804,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12805,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#		krb5-dev \
12806,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#		openldap-dev \
12807,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# configure: error: prove not found
12808,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12809,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12810,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12811,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12812,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12813,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12814,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12815,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12816,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12817,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12818,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12819,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
12820,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12821,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12822,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12823,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12824,35d59a4ae2e0b0ab25d305b7e59bef15cd732432,/9.3/alpine/Dockerfile, # backwards compat
12825,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
12826,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12827,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12828,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12829,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#		krb5-dev \
12830,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#		openldap-dev \
12831,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# configure: error: prove not found
12832,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12833,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12834,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12835,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12836,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12837,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12838,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12839,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12840,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12841,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,#p' --recursive /usr/local \
12842,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12843,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12844,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12845,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12846,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/11/alpine/Dockerfile, # backwards compat
12847,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
12848,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
12849,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12850,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12851,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#		krb5-dev \
12852,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#		openldap-dev \
12853,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# configure: error: prove not found
12854,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12855,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12856,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12857,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12858,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12859,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12860,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12861,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12862,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12863,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
12864,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12865,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12866,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12867,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12868,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.4/alpine/Dockerfile, # backwards compat
12869,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# vim:set ft=dockerfile:
12870,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# explicitly set user/group IDs
12871,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,# grab gosu for easy step-down from root
12872,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12873,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12874,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12875,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12876,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12877,3706d4c4562c284ed070286b9fd516151167a40c,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12878,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# vim:set ft=dockerfile:
12879,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# explicitly set user/group IDs
12880,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12881,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12882,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# grab gosu for easy step-down from root
12883,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12884,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12885,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12886,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12887,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# see note below about ""*.pyc"" files"
12888,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# arches officialy built by upstream
12889,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12890,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12891,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12892,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12893,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12894,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12895,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12896,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12897,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12898,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12899,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12900,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12901,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12902,f2596e6889a595e8b890010277d46b24f6a89904,/10/Dockerfile, # backwards compat
12903,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,# vim:set ft=dockerfile:
12904,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
12905,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,# grab gosu for easy step-down from root
12906,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12907,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12908,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# vim:set ft=dockerfile:
12909,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# explicitly set user/group IDs
12910,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# grab gosu for easy step-down from root
12911,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12912,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12913,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12914,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12915,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# arches officialy built by upstream
12916,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12917,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12918,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12919,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12920,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12921,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12922,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12923,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12924,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12925,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12926,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12927,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.4/Dockerfile, # backwards compat
12928,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# vim:set ft=dockerfile:
12929,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# explicitly set user/group IDs
12930,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
12931,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
12932,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# grab gosu for easy step-down from root
12933,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12934,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
12935,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
12936,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12937,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# see note below about ""*.pyc"" files"
12938,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# arches officialy built by upstream
12939,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
12940,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
12941,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
12942,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
12943,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
12944,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
12945,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
12946,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
12947,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
12948,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
12949,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12950,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
12951,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12952,59e5a640e9d4896f5d35261fc69402f2f174833b,/11/Dockerfile, # backwards compat
12953,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
12954,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
12955,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12956,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12957,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,#		krb5-dev \
12958,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,#		openldap-dev \
12959,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12960,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12961,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12962,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12963,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12964,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12965,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12966,12462bdfdf7d7f1f1d1f42cb09db579977a75d0b,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12967,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# vim:set ft=dockerfile:
12968,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# explicitly set user/group IDs
12969,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,# grab gosu for easy step-down from root
12970,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
12971,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
12972,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
12973,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12974,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
12975,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
12976,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.4/Dockerfile, # backwards compat
12977,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
12978,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
12979,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
12980,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
12981,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#		krb5-dev \
12982,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#		openldap-dev \
12983,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# configure: error: prove not found
12984,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
12985,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
12986,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
12987,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12988,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
12989,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
12990,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
12991,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
12992,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
12993,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
12994,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
12995,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
12996,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
12997,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
12998,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
12999,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13000,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/alpine/Dockerfile, # backwards compat
13001,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13002,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13003,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13004,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13005,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,#		krb5-dev \
13006,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,#		openldap-dev \
13007,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13008,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13009,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13010,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13011,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13012,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13013,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13014,9c9887539c87214bf86e76cafef52bf8c7e4d22f,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13015,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13016,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13017,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13018,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13019,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#		krb5-dev \
13020,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#		openldap-dev \
13021,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# configure: error: prove not found
13022,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13023,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13024,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13025,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13026,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13027,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13028,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13029,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13030,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13031,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13032,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13033,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13034,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13035,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13036,c552b2bcd8dd5ef822463343b461fe0e31445b9d,/9.6/alpine/Dockerfile, # backwards compat
13037,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# vim:set ft=dockerfile:
13038,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# explicitly set user/group IDs
13039,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# grab gosu for easy step-down from root
13040,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13041,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13042,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# arches officialy built by upstream
13043,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13044,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13045,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13046,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13047,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13048,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13049,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13050,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13051,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13052,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13053,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13054,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.4/Dockerfile, # backwards compat
13055,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# vim:set ft=dockerfile:
13056,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# explicitly set user/group IDs
13057,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13058,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13059,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# grab gosu for easy step-down from root
13060,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13061,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13062,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13063,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
13064,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13065,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# see note below about ""*.pyc"" files"
13066,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# arches officialy built by upstream
13067,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13068,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13069,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13070,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13071,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13072,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13073,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13074,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13075,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13076,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13077,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13078,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13079,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13080,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/12/Dockerfile, # backwards compat
13081,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# vim:set ft=dockerfile:
13082,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# explicitly set user/group IDs
13083,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,# grab gosu for easy step-down from root
13084,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13085,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13086,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13087,db63c8c4eff2aa81c3f2c9e42f1ede447c7cf99c,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13088,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# vim:set ft=dockerfile:
13089,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# explicitly set user/group IDs
13090,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,# grab gosu for easy step-down from root
13091,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13092,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13093,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13094,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13095,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13096,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13097,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/Dockerfile, # backwards compat
13098,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,# vim:set ft=dockerfile:
13099,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13100,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,# grab gosu for easy step-down from root
13101,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13102,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13103,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,# vim:set ft=dockerfile:
13104,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13105,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,# grab gosu for easy step-down from root
13106,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13107,486194c97f07875c5d0912da911c719671747d0c,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13108,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13109,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13110,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13111,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13112,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#		krb5-dev \
13113,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#		openldap-dev \
13114,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# configure: error: prove not found
13115,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13116,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13117,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13118,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13119,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13120,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13121,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13122,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13123,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13124,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13125,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13126,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13127,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13128,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13129,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/alpine/Dockerfile, # backwards compat
13130,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# vim:set ft=dockerfile:
13131,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# explicitly set user/group IDs
13132,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,# grab gosu for easy step-down from root
13133,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13134,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13135,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13136,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13137,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13138,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# vim:set ft=dockerfile:
13139,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# explicitly set user/group IDs
13140,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13141,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13142,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# grab gosu for easy step-down from root
13143,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13144,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13145,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13146,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
13147,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13148,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# see note below about ""*.pyc"" files"
13149,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# arches officialy built by upstream
13150,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13151,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13152,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13153,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13154,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13155,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13156,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13157,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13158,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13159,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13160,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13161,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13162,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13163,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/10/Dockerfile, # backwards compat
13164,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13165,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13166,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13167,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13168,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,#		krb5-dev \
13169,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,#		openldap-dev \
13170,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13171,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13172,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13173,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13174,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13175,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
13176,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13177,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13178,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
13179,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
13180,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13181,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13182,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#		krb5-dev \
13183,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#		openldap-dev \
13184,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# configure: error: prove not found
13185,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13186,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13187,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13188,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13189,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13190,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13191,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13192,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13193,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13194,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,#p' --recursive /usr/local \
13195,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13196,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13197,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13198,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13199,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,# vim:set ft=dockerfile:
13200,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13201,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,# grab gosu for easy step-down from root
13202,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13203,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13204,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,# vim:set ft=dockerfile:
13205,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13206,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,# grab gosu for easy step-down from root
13207,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13208,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13209,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13210,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13211,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13212,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13213,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#		krb5-dev \
13214,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#		openldap-dev \
13215,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# configure: error: prove not found
13216,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13217,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13218,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13219,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13220,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13221,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13222,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13223,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13224,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13225,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13226,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13227,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13228,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13229,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13230,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/alpine/Dockerfile, # backwards compat
13231,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# vim:set ft=dockerfile:
13232,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# explicitly set user/group IDs
13233,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# grab gosu for easy step-down from root
13234,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13235,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13236,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# arches officialy built by upstream
13237,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13238,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13239,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13240,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13241,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13242,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13243,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13244,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13245,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13246,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13247,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13248,7da010d82077944ce39211cc610ce58c11366360,/9.6/Dockerfile, # backwards compat
13249,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13250,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13251,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13252,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13253,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,#		krb5-dev \
13254,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,#		openldap-dev \
13255,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# configure: error: prove not found
13256,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13257,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13258,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13259,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13260,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13261,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13262,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13263,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13264,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13265,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13266,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13267,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13268,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.4/alpine/Dockerfile, # backwards compat
13269,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
13270,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
13271,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13272,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13273,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#		krb5-dev \
13274,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#		openldap-dev \
13275,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# configure: error: prove not found
13276,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13277,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13278,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13279,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13280,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13281,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13282,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13283,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13284,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13285,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,#p' --recursive /usr/local \
13286,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13287,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13288,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13289,bb0d97951918e6d281f510adb3896da433a52bc4,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13290,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
13291,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13292,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13293,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13294,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#		krb5-dev \
13295,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#		openldap-dev \
13296,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# configure: error: prove not found
13297,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13298,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13299,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13300,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13301,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13302,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13303,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13304,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13305,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13306,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,#p' --recursive /usr/local \
13307,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13308,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13309,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13310,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13311,e294fd35ca6243af9e35baa58724cfb432599248,/10/alpine/Dockerfile, # backwards compat
13312,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# vim:set ft=dockerfile:
13313,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# explicitly set user/group IDs
13314,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13315,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13316,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
13317,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13318,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13319,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13320,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
13321,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13322,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
13323,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# arches officialy built by upstream
13324,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13325,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13326,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13327,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13328,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13329,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13330,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13331,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13332,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13333,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13334,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13335,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13336,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13337,95f4307ac7547094b5392d2a2a5aa7471301ffcb,/9.6/Dockerfile, # backwards compat
13338,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# vim:set ft=dockerfile:
13339,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# explicitly set user/group IDs
13340,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# grab gosu for easy step-down from root
13341,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13342,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13343,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# arches officialy built by upstream
13344,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13345,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13346,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13347,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13348,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13349,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13350,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13351,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13352,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13353,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13354,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13355,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.3/Dockerfile, # backwards compat
13356,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
13357,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13358,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13359,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13360,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,#		krb5-dev \
13361,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,#		openldap-dev \
13362,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13363,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13364,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13365,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13366,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13367,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13368,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13369,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13370,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13371,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13372,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13373,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13374,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13375,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13376,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,#		krb5-dev \
13377,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,#		openldap-dev \
13378,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13379,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13380,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13381,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13382,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13383,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13384,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13385,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13386,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13387,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13388,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13389,123aedc09bc067740fb28921c500ded83c018bd4,/9.4/alpine/Dockerfile, # backwards compat
13390,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
13391,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13392,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13393,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13394,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#		krb5-dev \
13395,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#		openldap-dev \
13396,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# configure: error: prove not found
13397,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13398,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13399,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13400,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13401,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13402,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13403,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13404,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13405,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13406,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,#p' --recursive /usr/local \
13407,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13408,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13409,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13410,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13411,7ea5efa503c6ec5d5ee2ebe52acd5eaa50ac75ca,/11/alpine/Dockerfile, # backwards compat
13412,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
13413,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13414,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13415,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13416,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#		krb5-dev \
13417,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#		openldap-dev \
13418,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# configure: error: prove not found
13419,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13420,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13421,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13422,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13423,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13424,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13425,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13426,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13427,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13428,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,#p' --recursive /usr/local \
13429,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13430,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13431,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13432,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13433,2035bd0d2a3d155af981340bb9a21eb4a107c7af,/10/alpine/Dockerfile, # backwards compat
13434,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
13435,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13436,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13437,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13438,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#		krb5-dev \
13439,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#		openldap-dev \
13440,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# configure: error: prove not found
13441,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13442,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13443,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13444,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13445,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13446,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13447,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13448,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13449,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13450,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,#p' --recursive /usr/local \
13451,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13452,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13453,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13454,5992d8be755d8001474f737a44c73049c519cff3,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13455,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13456,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13457,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13458,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13459,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,#		krb5-dev \
13460,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,#		openldap-dev \
13461,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13462,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13463,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13464,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13465,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13466,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
13467,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13468,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13469,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# vim:set ft=dockerfile:
13470,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# explicitly set user/group IDs
13471,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,# grab gosu for easy step-down from root
13472,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13473,09b09edbea4339a008ef81f00475330172fe7630,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13474,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# vim:set ft=dockerfile:
13475,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# explicitly set user/group IDs
13476,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13477,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13478,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# grab gosu for easy step-down from root
13479,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13480,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13481,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13482,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13483,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# see note below about ""*.pyc"" files"
13484,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# arches officialy built by upstream
13485,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13486,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13487,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13488,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13489,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13490,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13491,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13492,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13493,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13494,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13495,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13496,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13497,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13498,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/11/Dockerfile, # backwards compat
13499,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# vim:set ft=dockerfile:
13500,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# explicitly set user/group IDs
13501,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,# grab gosu for easy step-down from root
13502,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13503,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13504,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13505,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13506,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13507,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
13508,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13509,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13510,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13511,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#		krb5-dev \
13512,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#		openldap-dev \
13513,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# configure: error: prove not found
13514,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13515,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13516,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13517,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13518,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13519,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13520,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13521,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13522,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13523,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
13524,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13525,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13526,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13527,691a785b0bcb7aea28225a17e794a1edeedf531e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13528,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13529,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13530,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13531,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13532,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,#		krb5-dev \
13533,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,#		openldap-dev \
13534,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# configure: error: prove not found
13535,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13536,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13537,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13538,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13539,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13540,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13541,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13542,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13543,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13544,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13545,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13546,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13547,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13548,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13549,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.2/alpine/Dockerfile, # backwards compat
13550,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,# vim:set ft=dockerfile:
13551,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13552,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,# grab gosu for easy step-down from root
13553,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13554,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13555,ea490430aabd553f34656e8f0e846d2ed3c42930,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13556,ea490430aabd553f34656e8f0e846d2ed3c42930,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13557,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,# vim:set ft=dockerfile:
13558,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13559,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,# grab gosu for easy step-down from root
13560,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13561,63d966973d9593c0d9890b96f10ac73566913520,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13562,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# vim:set ft=dockerfile:
13563,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# explicitly set user/group IDs
13564,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13565,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13566,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# grab gosu for easy step-down from root
13567,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13568,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13569,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13570,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13571,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
13572,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# arches officialy built by upstream
13573,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13574,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13575,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13576,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13577,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13578,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13579,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13580,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13581,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13582,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13583,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13584,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13585,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13586,95aa37a2b5e53c434a8bc056212ff6ac828bfad7,/9.6/Dockerfile, # backwards compat
13587,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
13588,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13589,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13590,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13591,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,#		krb5-dev \
13592,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,#		openldap-dev \
13593,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# configure: error: prove not found
13594,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13595,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13596,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13597,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13598,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13599,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13600,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13601,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13602,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13603,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13604,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13605,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13606,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/alpine/Dockerfile, # backwards compat
13607,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13608,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13609,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13610,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13611,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13612,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13613,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#		krb5-dev \
13614,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#		openldap-dev \
13615,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# configure: error: prove not found
13616,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13617,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13618,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13619,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13620,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13621,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13622,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13623,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13624,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13625,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13626,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13627,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13628,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13629,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13630,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.4/alpine/Dockerfile, # backwards compat
13631,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13632,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13633,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13634,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13635,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#		krb5-dev \
13636,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#		openldap-dev \
13637,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# configure: error: prove not found
13638,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13639,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13640,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13641,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13642,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13643,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13644,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13645,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13646,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13647,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13648,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13649,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13650,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13651,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13652,d8e907ea048f0f0138769ca91de1a779bf297aca,/9.4/alpine/Dockerfile, # backwards compat
13653,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13654,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
13655,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13656,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13657,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,#		krb5-dev \
13658,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,#		openldap-dev \
13659,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13660,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13661,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13662,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13663,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13664,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13665,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13666,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13667,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13668,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13669,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13670,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13671,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13672,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13673,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13674,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#		krb5-dev \
13675,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#		openldap-dev \
13676,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# configure: error: prove not found
13677,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13678,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13679,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13680,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13681,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13682,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13683,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13684,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13685,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13686,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13687,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13688,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13689,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13690,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13691,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.4/alpine/Dockerfile, # backwards compat
13692,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
13693,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13694,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13695,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13696,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,#		krb5-dev \
13697,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,#		openldap-dev \
13698,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,# configure: error: prove not found
13699,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13700,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13701,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13702,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13703,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13704,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13705,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13706,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13707,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13708,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
13709,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13710,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13711,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13712,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13713,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.6/alpine/Dockerfile, # backwards compat
13714,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,# vim:set ft=dockerfile:
13715,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,# explicitly set user/group IDs
13716,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13717,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13718,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,# grab gosu for easy step-down from root
13719,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13720,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13721,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13722,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13723,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# see note below about ""*.pyc"" files"
13724,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,# arches officialy built by upstream
13725,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13726,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13727,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13728,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13729,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13730,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13731,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13732,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13733,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13734,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13735,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13736,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13737,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13738,ba24350aa02996f75cf5b44eea0af082775cc8ec,/10/Dockerfile, # backwards compat
13739,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13740,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13741,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13742,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13743,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#		krb5-dev \
13744,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#		openldap-dev \
13745,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# configure: error: prove not found
13746,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13747,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13748,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13749,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13750,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13751,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13752,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13753,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13754,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13755,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13756,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13757,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13758,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13759,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13760,dc36bbe68fb7f8c2a8b421944cb80aa73681e093,/9.4/alpine/Dockerfile, # backwards compat
13761,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,# vim:set ft=dockerfile:
13762,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13763,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,# grab gosu for easy step-down from root
13764,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13765,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13766,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# vim:set ft=dockerfile:
13767,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# explicitly set user/group IDs
13768,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13769,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13770,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# grab gosu for easy step-down from root
13771,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13772,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13773,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13774,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13775,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# see note below about ""*.pyc"" files"
13776,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# arches officialy built by upstream
13777,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13778,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13779,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13780,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13781,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13782,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13783,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13784,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13785,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13786,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13787,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13788,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13789,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13790,91939daa3f42d2796952f03353534cd87d181ccc,/10/Dockerfile, # backwards compat
13791,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# vim:set ft=dockerfile:
13792,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# explicitly set user/group IDs
13793,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13794,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13795,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# grab gosu for easy step-down from root
13796,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13797,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13798,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13799,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13800,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
13801,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# arches officialy built by upstream
13802,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13803,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13804,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13805,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13806,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13807,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13808,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13809,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13810,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13811,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13812,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13813,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13814,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13815,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/Dockerfile, # backwards compat
13816,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
13817,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13818,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13819,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13820,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#		krb5-dev \
13821,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#		openldap-dev \
13822,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# configure: error: prove not found
13823,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13824,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13825,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13826,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13827,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13828,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13829,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13830,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13831,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13832,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,#p' --recursive /usr/local \
13833,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13834,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13835,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13836,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13837,a78bff54b531d6ef106e43b020712086fff6a67f,/10/alpine/Dockerfile, # backwards compat
13838,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
13839,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13840,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13841,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13842,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,#		krb5-dev \
13843,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,#		openldap-dev \
13844,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13845,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13846,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13847,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13848,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13849,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13850,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13851,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13852,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13853,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13854,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13855,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13856,ee20f10a40f8893d5f67d593ddd44ba05d0c9df9,/9.2/alpine/Dockerfile, # backwards compat
13857,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,# vim:set ft=dockerfile:
13858,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13859,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,# grab gosu for easy step-down from root
13860,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13861,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13862,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
13863,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
13864,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13865,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13866,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,#		krb5-dev \
13867,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,#		openldap-dev \
13868,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13869,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
13870,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13871,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13872,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13873,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13874,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13875,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13876,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13877,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13878,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13879,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13880,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13881,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13882,975f6a2705d981f865a2cb0536a86a46e5839534,/9.3/alpine/Dockerfile, # backwards compat
13883,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,# vim:set ft=dockerfile:
13884,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13885,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,# grab gosu for easy step-down from root
13886,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13887,51e5166d69320581cb707d6fb102d3ba04803400,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13888,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# vim:set ft=dockerfile:
13889,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# explicitly set user/group IDs
13890,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,# grab gosu for easy step-down from root
13891,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13892,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13893,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# vim:set ft=dockerfile:
13894,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# explicitly set user/group IDs
13895,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
13896,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
13897,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# grab gosu for easy step-down from root
13898,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13899,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13900,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13901,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13902,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
13903,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# arches officialy built by upstream
13904,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13905,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
13906,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13907,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13908,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13909,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13910,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13911,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13912,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13913,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
13914,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13915,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
13916,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13917,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.6/Dockerfile, # backwards compat
13918,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# vim:set ft=dockerfile:
13919,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# explicitly set user/group IDs
13920,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# grab gosu for easy step-down from root
13921,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13922,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13923,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13924,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13925,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# arches officialy built by upstream
13926,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13927,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13928,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13929,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13930,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
13931,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
13932,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
13933,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
13934,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13935,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
13936,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13937,927a8525cf80896f2bd146a1b0eff7d6ef2cb7bf,/11/Dockerfile, # backwards compat
13938,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
13939,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
13940,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13941,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13942,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#		krb5-dev \
13943,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#		openldap-dev \
13944,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# configure: error: prove not found
13945,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13946,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13947,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13948,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
13949,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13950,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13951,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13952,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13953,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13954,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
13955,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13956,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13957,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13958,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13959,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/9.5/alpine/Dockerfile, # backwards compat
13960,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
13961,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
13962,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
13963,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
13964,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#		krb5-dev \
13965,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#		openldap-dev \
13966,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# configure: error: prove not found
13967,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
13968,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
13969,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
13970,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
13971,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
13972,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
13973,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
13974,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
13975,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
13976,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
13977,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
13978,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
13979,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
13980,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
13981,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.4/alpine/Dockerfile, # backwards compat
13982,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,# vim:set ft=dockerfile:
13983,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
13984,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,# grab gosu for easy step-down from root
13985,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13986,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
13987,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# vim:set ft=dockerfile:
13988,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# explicitly set user/group IDs
13989,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# grab gosu for easy step-down from root
13990,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
13991,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
13992,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
13993,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
13994,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# arches officialy built by upstream
13995,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
13996,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
13997,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
13998,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
13999,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14000,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14001,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14002,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14003,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14004,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14005,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14006,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.4/Dockerfile, # backwards compat
14007,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,# vim:set ft=dockerfile:
14008,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14009,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,# grab gosu for easy step-down from root
14010,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14011,73d73760957c7038dd3c07212b5b9daf86a2cb38,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14012,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14013,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14014,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14015,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14016,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,#		krb5-dev \
14017,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,#		openldap-dev \
14018,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14019,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14020,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14021,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14022,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14023,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14024,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14025,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14026,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14027,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14028,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14029,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14030,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.4/alpine/Dockerfile, # backwards compat
14031,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14032,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14033,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14034,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14035,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,#		krb5-dev \
14036,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,#		openldap-dev \
14037,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14038,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14039,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14040,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14041,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14042,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14043,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14044,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14045,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14046,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14047,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14048,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14049,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14050,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14051,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.2/alpine/Dockerfile, # backwards compat
14052,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# vim:set ft=dockerfile:
14053,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# explicitly set user/group IDs
14054,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# grab gosu for easy step-down from root
14055,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14056,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14057,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14058,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# arches officialy built by upstream
14059,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14060,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14061,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14062,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14063,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14064,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14065,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14066,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14067,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14068,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14069,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14070,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/Dockerfile, # backwards compat
14071,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,# vim:set ft=dockerfile:
14072,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14073,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14074,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# vim:set ft=dockerfile:
14075,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# explicitly set user/group IDs
14076,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14077,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14078,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# grab gosu for easy step-down from root
14079,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14080,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14081,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14082,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14083,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# see note below about ""*.pyc"" files"
14084,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# arches officialy built by upstream
14085,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14086,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14087,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14088,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14089,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14090,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14091,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14092,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14093,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14094,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14095,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14096,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14097,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14098,505eda129119afc4cfc86fcacd407a31e9ab22c0,/11/Dockerfile, # backwards compat
14099,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# vim:set ft=dockerfile:
14100,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# explicitly set user/group IDs
14101,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,# grab gosu for easy step-down from root
14102,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14103,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14104,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,# vim:set ft=dockerfile:
14105,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14106,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14107,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# vim:set ft=dockerfile:
14108,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# explicitly set user/group IDs
14109,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,# grab gosu for easy step-down from root
14110,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14111,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14112,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14113,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14114,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14115,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14116,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,#		krb5-dev \
14117,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,#		openldap-dev \
14118,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14119,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14120,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14121,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14122,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14123,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14124,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14125,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14126,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14127,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14128,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14129,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.6/alpine/Dockerfile, # backwards compat
14130,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# vim:set ft=dockerfile:
14131,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# explicitly set user/group IDs
14132,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,# grab gosu for easy step-down from root
14133,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14134,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14135,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14136,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14137,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14138,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14139,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/Dockerfile, # backwards compat
14140,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# vim:set ft=dockerfile:
14141,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# explicitly set user/group IDs
14142,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,# grab gosu for easy step-down from root
14143,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14144,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14145,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14146,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14147,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14148,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14149,8c03e6aed7046c4bacbc1b7c356edd81bd72c6d5,/9.2/Dockerfile, # backwards compat
14150,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14151,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14152,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14153,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14154,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,#		krb5-dev \
14155,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,#		openldap-dev \
14156,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14157,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14158,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14159,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14160,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14161,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14162,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14163,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14164,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14165,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14166,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14167,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.4/alpine/Dockerfile, # backwards compat
14168,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# vim:set ft=dockerfile:
14169,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# explicitly set user/group IDs
14170,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14171,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14172,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# grab gosu for easy step-down from root
14173,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14174,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14175,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14176,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14177,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
14178,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# arches officialy built by upstream
14179,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14180,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14181,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14182,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14183,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14184,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14185,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14186,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14187,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14188,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14189,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14190,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14191,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14192,34af727d7b54676c48c2f4c5f144cd395f9f93da,/9.5/Dockerfile, # backwards compat
14193,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# vim:set ft=dockerfile:
14194,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# explicitly set user/group IDs
14195,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,# grab gosu for easy step-down from root
14196,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14197,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14198,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14199,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14200,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14201,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14202,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.3/Dockerfile, # backwards compat
14203,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# vim:set ft=dockerfile:
14204,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# explicitly set user/group IDs
14205,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,# grab gosu for easy step-down from root
14206,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14207,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14208,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14209,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14210,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14211,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14212,bef7a7e02643bb0f104ba346395d3cdb78db1480,/9.6/Dockerfile, # backwards compat
14213,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14214,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14215,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14216,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14217,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,#		krb5-dev \
14218,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,#		openldap-dev \
14219,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# configure: error: prove not found
14220,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14221,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14222,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14223,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14224,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14225,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14226,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14227,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14228,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14229,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14230,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14231,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14232,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14233,d1725ffa8ba29ed7649bd453065eb392f63a3113,/9.6/alpine/Dockerfile, # backwards compat
14234,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,# vim:set ft=dockerfile:
14235,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14236,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,# grab gosu for easy step-down from root
14237,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14238,d74b69598c835fe15eac39a26b5c61058f99c3db,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14239,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# vim:set ft=dockerfile:
14240,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# explicitly set user/group IDs
14241,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,# grab gosu for easy step-down from root
14242,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14243,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14244,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14245,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14246,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14247,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14248,54f46e57136635b484295b985acd6e422d0b9583,/9.5/Dockerfile, # backwards compat
14249,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# vim:set ft=dockerfile:
14250,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# explicitly set user/group IDs
14251,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,# grab gosu for easy step-down from root
14252,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14253,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14254,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14255,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14256,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14257,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14258,6870d3db740a321699ef49c8068c3d812b9681e1,/9.3/Dockerfile, # backwards compat
14259,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# vim:set ft=dockerfile:
14260,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# explicitly set user/group IDs
14261,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# grab gosu for easy step-down from root
14262,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14263,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14264,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# arches officialy built by upstream
14265,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14266,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14267,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14268,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14269,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14270,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14271,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14272,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14273,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14274,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14275,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14276,4566cb036dd021c42c252f7a41797d5d3907c0d2,/9.6/Dockerfile, # backwards compat
14277,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14278,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14279,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14280,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14281,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,#		krb5-dev \
14282,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,#		openldap-dev \
14283,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# configure: error: prove not found
14284,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14285,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14286,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14287,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14288,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14289,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14290,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14291,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14292,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14293,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14294,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14295,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14296,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14297,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14298,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14299,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.2/alpine/Dockerfile, # backwards compat
14300,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# vim:set ft=dockerfile:
14301,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# explicitly set user/group IDs
14302,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# grab gosu for easy step-down from root
14303,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14304,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14305,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# arches officialy built by upstream
14306,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14307,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14308,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14309,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14310,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14311,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14312,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14313,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14314,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14315,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14316,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14317,3001d13fcac68cf9f8b0217eafdad8e83c41907c,/9.4/Dockerfile, # backwards compat
14318,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# vim:set ft=dockerfile:
14319,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# explicitly set user/group IDs
14320,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14321,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14322,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# grab gosu for easy step-down from root
14323,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14324,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14325,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14326,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14327,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
14328,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# arches officialy built by upstream
14329,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14330,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14331,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14332,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14333,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14334,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14335,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14336,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14337,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14338,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14339,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14340,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14341,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14342,f45fb749594bfe5ea893fe8b3340757600f03f7e,/9.5/Dockerfile, # backwards compat
14343,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,# vim:set ft=dockerfile:
14344,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,# explicitly set user/group IDs
14345,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,# grab gosu for easy step-down from root
14346,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14347,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14348,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14349,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14350,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,# arches officialy built by upstream
14351,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14352,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14353,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14354,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14355,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14356,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14357,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14358,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14359,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14360,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14361,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14362,639f83fb14161c8be60119b97bb9f88796776058,/9.4/Dockerfile, # backwards compat
14363,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# vim:set ft=dockerfile:
14364,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# explicitly set user/group IDs
14365,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14366,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14367,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
14368,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14369,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14370,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14371,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14372,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14373,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# see note below about ""*.pyc"" files"
14374,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# arches officialy built by upstream
14375,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14376,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14377,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14378,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14379,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14380,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14381,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14382,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14383,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14384,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14385,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14386,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14387,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14388,8787b168802a629ec12be1e7fed98b940baf90d7,/12/Dockerfile, # backwards compat
14389,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,# vim:set ft=dockerfile:
14390,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14391,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,# grab gosu for easy step-down from root
14392,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14393,d74b69598c835fe15eac39a26b5c61058f99c3db,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14394,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
14395,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14396,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14397,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14398,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,#		krb5-dev \
14399,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,#		openldap-dev \
14400,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14401,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14402,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14403,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14404,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14405,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14406,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14407,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14408,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14409,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14410,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14411,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14412,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.3/alpine/Dockerfile, # backwards compat
14413,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14414,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14415,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# vim:set ft=dockerfile:
14416,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# explicitly set user/group IDs
14417,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,# grab gosu for easy step-down from root
14418,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14419,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14420,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14421,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14422,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14423,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14424,937cc2b25a6db9dafb60241185d492917dc842b0,/9.2/Dockerfile, # backwards compat
14425,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,# vim:set ft=dockerfile:
14426,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,# explicitly set user/group IDs
14427,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14428,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14429,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,# grab gosu for easy step-down from root
14430,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14431,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14432,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14433,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14434,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# see note below about ""*.pyc"" files"
14435,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,# arches officialy built by upstream
14436,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14437,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14438,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14439,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14440,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14441,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14442,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14443,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14444,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14445,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14446,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14447,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14448,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14449,6d1f671dcd2c8d51484d19767a33c37110dd650f,/10/Dockerfile, # backwards compat
14450,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,# vim:set ft=dockerfile:
14451,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14452,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,# grab gosu for easy step-down from root
14453,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14454,63d966973d9593c0d9890b96f10ac73566913520,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14455,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
14456,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14457,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14458,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14459,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#		krb5-dev \
14460,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#		openldap-dev \
14461,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# configure: error: prove not found
14462,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14463,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14464,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14465,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14466,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14467,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14468,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14469,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14470,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14471,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,#p' --recursive /usr/local \
14472,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14473,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14474,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14475,f08b03f05b690748660ff738975a104c19fc5500,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14476,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14477,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14478,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14479,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14480,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#		krb5-dev \
14481,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#		openldap-dev \
14482,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# configure: error: prove not found
14483,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14484,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14485,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14486,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14487,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14488,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14489,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14490,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14491,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14492,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
14493,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14494,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14495,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14496,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14497,cac7a604117456de7dcb0cfaf7ff7c11fb4b0520,/9.6/alpine/Dockerfile, # backwards compat
14498,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# vim:set ft=dockerfile:
14499,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# explicitly set user/group IDs
14500,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14501,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14502,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# grab gosu for easy step-down from root
14503,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14504,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14505,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14506,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14507,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# see note below about ""*.pyc"" files"
14508,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# arches officialy built by upstream
14509,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14510,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14511,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14512,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14513,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14514,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14515,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14516,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14517,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14518,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14519,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14520,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14521,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14522,9d8e2448436b2af1ea715822c2d209d493760007,/11/Dockerfile, # backwards compat
14523,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# vim:set ft=dockerfile:
14524,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# explicitly set user/group IDs
14525,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14526,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14527,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# grab gosu for easy step-down from root
14528,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14529,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14530,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14531,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14532,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14533,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# see note below about ""*.pyc"" files"
14534,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# arches officialy built by upstream
14535,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14536,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14537,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14538,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14539,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14540,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14541,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14542,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14543,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14544,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14545,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14546,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14547,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14548,f08d426f2e1554d82259389dcc981c71527dd44d,/12/Dockerfile, # backwards compat
14549,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,# vim:set ft=dockerfile:
14550,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14551,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,# grab gosu for easy step-down from root
14552,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14553,77438cd8e1c2b780b4f859c5efd904ae3c6c508a,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14554,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# vim:set ft=dockerfile:
14555,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# explicitly set user/group IDs
14556,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,# grab gosu for easy step-down from root
14557,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14558,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14559,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14560,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14561,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14562,00706ec7c2f2893aa753225074c5c1bff3b93cfc,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14563,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# vim:set ft=dockerfile:
14564,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# explicitly set user/group IDs
14565,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,# grab gosu for easy step-down from root
14566,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14567,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14568,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14569,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14570,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14571,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14572,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.3/Dockerfile, # backwards compat
14573,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14574,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14575,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14576,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14577,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#		krb5-dev \
14578,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#		openldap-dev \
14579,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# configure: error: prove not found
14580,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14581,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14582,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
14583,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14584,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14585,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14586,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14587,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14588,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14589,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14590,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14591,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,#p' --recursive /usr/local \
14592,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14593,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14594,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14595,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14596,6750eda25a2f0856b3997309ef393475f008d6a3,/9.2/alpine/Dockerfile, # backwards compat
14597,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# vim:set ft=dockerfile:
14598,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# explicitly set user/group IDs
14599,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14600,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14601,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# grab gosu for easy step-down from root
14602,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14603,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14604,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14605,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14606,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# see note below about ""*.pyc"" files"
14607,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# arches officialy built by upstream
14608,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14609,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14610,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14611,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14612,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14613,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14614,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14615,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14616,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14617,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14618,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14619,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14620,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14621,faf08dbfd0675d144cbdef39f4506425ec7cee26,/12/Dockerfile, # backwards compat
14622,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,# vim:set ft=dockerfile:
14623,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14624,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,# grab gosu for easy step-down from root
14625,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14626,69a30d9e6f12c57296b11d3511127210466f0197,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14627,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14628,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14629,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14630,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14631,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,#		krb5-dev \
14632,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,#		openldap-dev \
14633,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14634,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14635,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14636,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14637,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14638,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14639,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14640,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14641,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14642,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14643,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14644,6e1d6d682519cabd49e33f720f3cdeda426745c6,/9.2/alpine/Dockerfile, # backwards compat
14645,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14646,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14647,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14648,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14649,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,#		krb5-dev \
14650,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,#		openldap-dev \
14651,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14652,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14653,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14654,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14655,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14656,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14657,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14658,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14659,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14660,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14661,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14662,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14663,975f6a2705d981f865a2cb0536a86a46e5839534,/9.6/alpine/Dockerfile, # backwards compat
14664,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# vim:set ft=dockerfile:
14665,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# explicitly set user/group IDs
14666,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14667,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14668,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# grab gosu for easy step-down from root
14669,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14670,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14671,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14672,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14673,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# see note below about ""*.pyc"" files"
14674,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# arches officialy built by upstream
14675,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14676,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14677,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14678,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14679,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14680,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14681,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14682,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14683,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14684,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14685,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14686,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14687,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14688,75ebadd71bd54836de126f851f5edbc2bdee4201,/12/Dockerfile, # backwards compat
14689,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# vim:set ft=dockerfile:
14690,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# explicitly set user/group IDs
14691,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14692,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14693,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# grab gosu for easy step-down from root
14694,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14695,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14696,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14697,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14698,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
14699,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# arches officialy built by upstream
14700,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14701,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14702,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14703,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14704,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14705,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14706,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14707,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14708,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14709,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14710,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14711,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14712,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14713,064113e0e481a1d0542846b81858e457fde02c90,/9.4/Dockerfile, # backwards compat
14714,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# vim:set ft=dockerfile:
14715,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# explicitly set user/group IDs
14716,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,# grab gosu for easy step-down from root
14717,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14718,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14719,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14720,2184bbc2d7e9daba786e15b19d4baace047deeba,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14721,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,# vim:set ft=dockerfile:
14722,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14723,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,# grab gosu for easy step-down from root
14724,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14725,a6d4922823aa8011513bb9c160c26c689301823a,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14726,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14727,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14728,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14729,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14730,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#		krb5-dev \
14731,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#		openldap-dev \
14732,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# configure: error: prove not found
14733,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14734,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14735,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14736,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14737,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14738,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14739,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14740,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14741,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14742,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
14743,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14744,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14745,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14746,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14747,a06a9377438d8e0805e49ce65bbcb810a711df52,/9.6/alpine/Dockerfile, # backwards compat
14748,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
14749,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14750,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14751,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14752,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#		krb5-dev \
14753,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#		openldap-dev \
14754,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# configure: error: prove not found
14755,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14756,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14757,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14758,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14759,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14760,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14761,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14762,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14763,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14764,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
14765,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14766,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14767,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14768,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14769,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/9.6/alpine/Dockerfile, # backwards compat
14770,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# vim:set ft=dockerfile:
14771,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# explicitly set user/group IDs
14772,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14773,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14774,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# grab gosu for easy step-down from root
14775,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14776,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14777,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14778,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14779,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# see note below about ""*.pyc"" files"
14780,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# arches officialy built by upstream
14781,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14782,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14783,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14784,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14785,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14786,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14787,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14788,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14789,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14790,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14791,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14792,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14793,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14794,040949af1595f49f2242f6d1f9c42fb042b3eaed,/11/Dockerfile, # backwards compat
14795,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
14796,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
14797,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14798,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14799,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,#		krb5-dev \
14800,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,#		openldap-dev \
14801,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14802,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14803,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14804,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14805,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14806,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14807,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14808,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14809,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14810,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14811,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14812,86ef6fa873cdc310e9f23a127ae2865b1d8745ba,/9.2/alpine/Dockerfile, # backwards compat
14813,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,# vim:set ft=dockerfile:
14814,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14815,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,# grab gosu for easy step-down from root
14816,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14817,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14818,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# vim:set ft=dockerfile:
14819,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# explicitly set user/group IDs
14820,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# grab gosu for easy step-down from root
14821,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14822,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14823,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14824,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# arches officialy built by upstream
14825,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14826,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14827,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14828,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14829,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14830,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14831,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14832,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14833,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14834,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14835,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14836,ef4545c07bd97e5585bb9e7f2680a4859b9ccf3c,/9.4/Dockerfile, # backwards compat
14837,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,# vim:set ft=dockerfile:
14838,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14839,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,# grab gosu for easy step-down from root
14840,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14841,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14842,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# vim:set ft=dockerfile:
14843,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# explicitly set user/group IDs
14844,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14845,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14846,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# grab gosu for easy step-down from root
14847,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14848,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14849,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14850,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
14851,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14852,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
14853,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# arches officialy built by upstream
14854,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14855,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14856,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14857,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14858,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14859,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14860,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14861,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14862,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14863,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14864,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14865,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14866,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14867,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/9.5/Dockerfile, # backwards compat
14868,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# vim:set ft=dockerfile:
14869,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# explicitly set user/group IDs
14870,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# grab gosu for easy step-down from root
14871,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14872,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14873,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# arches officialy built by upstream
14874,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14875,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14876,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14877,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14878,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14879,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14880,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14881,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14882,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14883,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14884,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14885,07ae979980f889e83ee8f4afc1fee09fdb663ab3,/9.5/Dockerfile, # backwards compat
14886,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,# vim:set ft=dockerfile:
14887,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,# explicitly set user/group IDs
14888,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,# grab gosu for easy step-down from root
14889,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14890,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14891,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14892,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14893,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14894,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14895,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,# vim:set ft=dockerfile:
14896,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14897,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,# grab gosu for easy step-down from root
14898,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14899,c9d9f4c1a0d33a161fefda666f041ef0dc4dc9f8,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14900,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
14901,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14902,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14903,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14904,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,#		krb5-dev \
14905,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,#		openldap-dev \
14906,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14907,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14908,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14909,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14910,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14911,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14912,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14913,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14914,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14915,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14916,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14917,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14918,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.4/alpine/Dockerfile, # backwards compat
14919,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# vim:set ft=dockerfile:
14920,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# explicitly set user/group IDs
14921,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14922,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14923,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# grab gosu for easy step-down from root
14924,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14925,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14926,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14927,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14928,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
14929,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# arches officialy built by upstream
14930,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14931,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
14932,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14933,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14934,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14935,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14936,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14937,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14938,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14939,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
14940,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14941,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
14942,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14943,58793919b63a1e0b2a9797b857bf435276e28436,/9.5/Dockerfile, # backwards compat
14944,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# vim:set ft=dockerfile:
14945,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# explicitly set user/group IDs
14946,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
14947,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
14948,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# grab gosu for easy step-down from root
14949,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14950,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14951,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14952,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14953,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# arches officialy built by upstream
14954,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
14955,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
14956,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
14957,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
14958,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
14959,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
14960,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
14961,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
14962,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14963,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
14964,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14965,726128b358cdc0efc1753475bbe502b07cbbb540,/9.4/Dockerfile, # backwards compat
14966,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
14967,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
14968,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
14969,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
14970,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#		krb5-dev \
14971,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#		openldap-dev \
14972,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# configure: error: prove not found
14973,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
14974,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
14975,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
14976,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
14977,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
14978,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
14979,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
14980,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
14981,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
14982,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,#p' --recursive /usr/local \
14983,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
14984,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
14985,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
14986,1d43a9d52107cef3a2ae8293e738bce754d4c4e6,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
14987,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,# vim:set ft=dockerfile:
14988,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
14989,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,# grab gosu for easy step-down from root
14990,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14991,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
14992,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# vim:set ft=dockerfile:
14993,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# explicitly set user/group IDs
14994,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# grab gosu for easy step-down from root
14995,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
14996,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
14997,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
14998,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
14999,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# arches officialy built by upstream
15000,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15001,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15002,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15003,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15004,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15005,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15006,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15007,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15008,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15009,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15010,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15011,6192edf44a557a7467d8f491899a9ac8f953d82c,/9.4/Dockerfile, # backwards compat
15012,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# vim:set ft=dockerfile:
15013,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# explicitly set user/group IDs
15014,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,# grab gosu for easy step-down from root
15015,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15016,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15017,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15018,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15019,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# vim:set ft=dockerfile:
15020,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# explicitly set user/group IDs
15021,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,# grab gosu for easy step-down from root
15022,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15023,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15024,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15025,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15026,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15027,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,# vim:set ft=dockerfile:
15028,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15029,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,# grab gosu for easy step-down from root
15030,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15031,574a975e1977357477a0e80d6c5b1d7425c84f9a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15032,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15033,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15034,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15035,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15036,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#		krb5-dev \
15037,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#		openldap-dev \
15038,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# configure: error: prove not found
15039,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15040,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15041,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15042,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15043,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15044,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15045,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15046,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15047,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15048,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
15049,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15050,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15051,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15052,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15053,ba24350aa02996f75cf5b44eea0af082775cc8ec,/9.4/alpine/Dockerfile, # backwards compat
15054,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
15055,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
15056,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15057,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15058,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#		krb5-dev \
15059,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#		openldap-dev \
15060,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# configure: error: prove not found
15061,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15062,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15063,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15064,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
15065,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15066,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15067,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15068,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15069,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15070,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,#p' --recursive /usr/local \
15071,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15072,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15073,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15074,aa3a2436d092ee63729b75ec8ad1441a148c94d4,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15075,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15076,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15077,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15078,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15079,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,#		krb5-dev \
15080,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,#		openldap-dev \
15081,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15082,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15083,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15084,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15085,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15086,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15087,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15088,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15089,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15090,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15091,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15092,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15093,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15094,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15095,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.2/alpine/Dockerfile, # backwards compat
15096,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
15097,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15098,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15099,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15100,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,#		krb5-dev \
15101,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,#		openldap-dev \
15102,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15103,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15104,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15105,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15106,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15107,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
15108,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15109,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15110,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15111,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15112,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15113,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15114,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#		krb5-dev \
15115,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#		openldap-dev \
15116,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# configure: error: prove not found
15117,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15118,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15119,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15120,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15121,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15122,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15123,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15124,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15125,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15126,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
15127,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15128,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15129,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15130,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15131,5992d8be755d8001474f737a44c73049c519cff3,/9.4/alpine/Dockerfile, # backwards compat
15132,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# vim:set ft=dockerfile:
15133,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# explicitly set user/group IDs
15134,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# grab gosu for easy step-down from root
15135,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15136,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15137,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# arches officialy built by upstream
15138,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15139,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15140,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15141,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15142,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15143,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15144,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15145,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15146,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15147,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15148,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15149,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/Dockerfile, # backwards compat
15150,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15151,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15152,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15153,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15154,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#		krb5-dev \
15155,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#		openldap-dev \
15156,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# configure: error: prove not found
15157,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15158,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15159,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15160,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15161,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15162,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15163,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15164,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15165,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15166,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
15167,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15168,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15169,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15170,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15171,cd2cafec4e998847fd2b10f08cc3444a2116e6d5,/9.4/alpine/Dockerfile, # backwards compat
15172,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# vim:set ft=dockerfile:
15173,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# explicitly set user/group IDs
15174,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,# grab gosu for easy step-down from root
15175,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15176,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15177,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15178,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15179,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15180,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15181,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.6/Dockerfile, # backwards compat
15182,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# vim:set ft=dockerfile:
15183,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# explicitly set user/group IDs
15184,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15185,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15186,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# grab gosu for easy step-down from root
15187,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15188,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15189,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15190,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15191,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
15192,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# arches officialy built by upstream
15193,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15194,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15195,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15196,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15197,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15198,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15199,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15200,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15201,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15202,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15203,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15204,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15205,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15206,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.4/Dockerfile, # backwards compat
15207,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
15208,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
15209,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15210,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15211,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#		krb5-dev \
15212,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#		openldap-dev \
15213,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# configure: error: prove not found
15214,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15215,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15216,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15217,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15218,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15219,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15220,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15221,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15222,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15223,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,#p' --recursive /usr/local \
15224,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15225,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15226,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15227,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15228,245058ccb66fd6cb34fc512323f20ed676f1af15,/10/alpine/Dockerfile, # backwards compat
15229,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# vim:set ft=dockerfile:
15230,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# explicitly set user/group IDs
15231,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15232,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15233,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
15234,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15235,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15236,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15237,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
15238,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15239,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# see note below about ""*.pyc"" files"
15240,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# arches officialy built by upstream
15241,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15242,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15243,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15244,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
15245,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15246,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15247,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15248,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15249,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15250,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15251,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15252,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15253,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15254,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15255,4c2e78c234a8e4293a5d6bb6a4d20421236d98d8,/13/Dockerfile, # backwards compat
15256,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
15257,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15258,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15259,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15260,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#		krb5-dev \
15261,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#		openldap-dev \
15262,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# configure: error: prove not found
15263,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15264,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15265,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15266,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15267,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15268,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15269,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15270,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15271,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15272,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
15273,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15274,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15275,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15276,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15277,57213ab012e6a38a27283eeac65c4726c069647a,/9.6/alpine/Dockerfile, # backwards compat
15278,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
15279,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
15280,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15281,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15282,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#		krb5-dev \
15283,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#		openldap-dev \
15284,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# configure: error: prove not found
15285,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15286,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15287,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15288,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15289,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15290,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15291,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15292,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15293,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15294,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,#p' --recursive /usr/local \
15295,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15296,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15297,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15298,52814abac491eca146620f921a44e2cb4217088e,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15299,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15300,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15301,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15302,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15303,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#		krb5-dev \
15304,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#		openldap-dev \
15305,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# configure: error: prove not found
15306,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15307,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15308,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15309,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15310,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15311,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15312,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15313,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15314,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15315,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
15316,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15317,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15318,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15319,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15320,fd5c083fcfb276b9cc2299057a8c6c8431bc3b0a,/9.4/alpine/Dockerfile, # backwards compat
15321,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# vim:set ft=dockerfile:
15322,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# explicitly set user/group IDs
15323,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,# grab gosu for easy step-down from root
15324,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15325,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15326,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15327,2df7c179897a4a0c5dbb5a68543e46fb77215067,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15328,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# vim:set ft=dockerfile:
15329,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# explicitly set user/group IDs
15330,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,# grab gosu for easy step-down from root
15331,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15332,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15333,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# vim:set ft=dockerfile:
15334,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# explicitly set user/group IDs
15335,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,# grab gosu for easy step-down from root
15336,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15337,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15338,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15339,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15340,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15341,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15342,f3146f857b42bd4c4cb2be6134149fddee546584,/10/Dockerfile, # backwards compat
15343,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,# vim:set ft=dockerfile:
15344,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15345,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,# grab gosu for easy step-down from root
15346,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15347,51e5166d69320581cb707d6fb102d3ba04803400,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15348,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,# vim:set ft=dockerfile:
15349,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15350,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,# grab gosu for easy step-down from root
15351,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15352,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15353,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# vim:set ft=dockerfile:
15354,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# explicitly set user/group IDs
15355,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15356,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15357,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# grab gosu for easy step-down from root
15358,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15359,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15360,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15361,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
15362,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15363,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
15364,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# arches officialy built by upstream
15365,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15366,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15367,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15368,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15369,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15370,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15371,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15372,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15373,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15374,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15375,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15376,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15377,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15378,4dc16e44d16480d9c8e5eb705c15468d65366e43,/9.5/Dockerfile, # backwards compat
15379,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,# vim:set ft=dockerfile:
15380,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15381,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,# grab gosu for easy step-down from root
15382,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15383,5036e92f87fa8f3d559996e50e91596127bcc2c1,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15384,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,# vim:set ft=dockerfile:
15385,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15386,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,# grab gosu for easy step-down from root
15387,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15388,bfca9b8a92a99ccfc8f04933b7ecc29a108c7f49,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15389,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
15390,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15391,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15392,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15393,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,#		krb5-dev \
15394,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,#		openldap-dev \
15395,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# configure: error: prove not found
15396,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15397,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15398,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15399,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15400,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15401,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15402,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15403,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15404,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15405,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15406,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15407,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15408,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15409,f3146f857b42bd4c4cb2be6134149fddee546584,/10/alpine/Dockerfile, # backwards compat
15410,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,# vim:set ft=dockerfile:
15411,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15412,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,# grab gosu for easy step-down from root
15413,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15414,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15415,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15416,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15417,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15418,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15419,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,#		krb5-dev \
15420,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,#		openldap-dev \
15421,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15422,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15423,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15424,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15425,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15426,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15427,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15428,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15429,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15430,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15431,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
15432,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
15433,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15434,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15435,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#		krb5-dev \
15436,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#		openldap-dev \
15437,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# configure: error: prove not found
15438,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15439,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15440,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15441,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15442,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15443,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15444,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15445,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15446,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15447,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,#p' --recursive /usr/local \
15448,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15449,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15450,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15451,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15452,b1f60bd4f88fa2f82aaaa304dc1476a26938cb38,/11/alpine/Dockerfile, # backwards compat
15453,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# vim:set ft=dockerfile:
15454,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# explicitly set user/group IDs
15455,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,# grab gosu for easy step-down from root
15456,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15457,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15458,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15459,c82348f8f18a59c6830b98150cb879c1f8613f7b,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15460,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# vim:set ft=dockerfile:
15461,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# explicitly set user/group IDs
15462,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,# grab gosu for easy step-down from root
15463,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15464,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15465,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15466,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15467,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
15468,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
15469,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15470,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15471,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#		krb5-dev \
15472,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#		openldap-dev \
15473,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# configure: error: prove not found
15474,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15475,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15476,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15477,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15478,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15479,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15480,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15481,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15482,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15483,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,#p' --recursive /usr/local \
15484,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15485,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15486,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15487,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15488,c4b019526a25d1300de77b9699d53ad187cf0dcf,/11/alpine/Dockerfile, # backwards compat
15489,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,# vim:set ft=dockerfile:
15490,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15491,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,# grab gosu for easy step-down from root
15492,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15493,33b8046b5f68b465a3c04fcc428e8923bcb7cd12,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15494,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# vim:set ft=dockerfile:
15495,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# explicitly set user/group IDs
15496,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15497,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15498,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# grab gosu for easy step-down from root
15499,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15500,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15501,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15502,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15503,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
15504,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# arches officialy built by upstream
15505,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15506,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15507,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15508,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15509,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15510,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15511,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15512,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15513,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15514,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15515,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15516,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15517,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15518,040949af1595f49f2242f6d1f9c42fb042b3eaed,/9.3/Dockerfile, # backwards compat
15519,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# vim:set ft=dockerfile:
15520,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# explicitly set user/group IDs
15521,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# grab gosu for easy step-down from root
15522,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15523,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15524,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15525,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15526,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# arches officialy built by upstream
15527,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15528,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15529,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15530,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15531,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15532,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15533,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15534,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15535,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15536,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15537,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15538,9986244c45efe383456aa4116c6dfd5f5083871e,/11/Dockerfile, # backwards compat
15539,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
15540,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15541,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15542,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15543,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#		krb5-dev \
15544,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#		openldap-dev \
15545,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# configure: error: prove not found
15546,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15547,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15548,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15549,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15550,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15551,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15552,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15553,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15554,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15555,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,#p' --recursive /usr/local \
15556,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15557,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15558,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15559,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15560,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/10/alpine/Dockerfile, # backwards compat
15561,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# vim:set ft=dockerfile:
15562,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# explicitly set user/group IDs
15563,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# grab gosu for easy step-down from root
15564,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15565,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15566,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# arches officialy built by upstream
15567,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15568,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15569,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15570,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15571,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15572,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15573,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15574,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15575,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15576,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15577,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15578,3b022607bec233463a3d055731fb710837978747,/9.3/Dockerfile, # backwards compat
15579,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
15580,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15581,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15582,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15583,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#		krb5-dev \
15584,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#		openldap-dev \
15585,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# configure: error: prove not found
15586,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15587,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15588,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15589,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15590,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15591,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15592,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15593,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15594,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15595,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,#p' --recursive /usr/local \
15596,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15597,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15598,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15599,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15600,cad3d8b1f7ee31f3592c2911e014e81b9b2a1c8d,/10/alpine/Dockerfile, # backwards compat
15601,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,# vim:set ft=dockerfile:
15602,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15603,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,# grab gosu for easy step-down from root
15604,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15605,4b132fa76a50598aa422f9cf5b5b52d9d4fc5802,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15606,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# vim:set ft=dockerfile:
15607,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# explicitly set user/group IDs
15608,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15609,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15610,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# grab gosu for easy step-down from root
15611,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15612,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15613,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15614,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15615,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# see note below about ""*.pyc"" files"
15616,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# arches officialy built by upstream
15617,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15618,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15619,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15620,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15621,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15622,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15623,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15624,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15625,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15626,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15627,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15628,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15629,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15630,ef04f3055bab11b10d3d5c41a659acfacf2c850b,/10/Dockerfile, # backwards compat
15631,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
15632,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
15633,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15634,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15635,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#		krb5-dev \
15636,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#		openldap-dev \
15637,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# configure: error: prove not found
15638,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15639,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15640,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15641,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15642,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15643,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15644,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15645,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15646,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15647,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
15648,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15649,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15650,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15651,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15652,c4b019526a25d1300de77b9699d53ad187cf0dcf,/9.5/alpine/Dockerfile, # backwards compat
15653,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# vim:set ft=dockerfile:
15654,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# explicitly set user/group IDs
15655,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,# grab gosu for easy step-down from root
15656,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15657,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15658,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15659,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15660,a7a6cdf9d4c3e540447509327d1ba89053b07170,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15661,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# vim:set ft=dockerfile:
15662,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# explicitly set user/group IDs
15663,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15664,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15665,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# grab gosu for easy step-down from root
15666,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15667,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15668,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15669,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15670,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# see note below about ""*.pyc"" files"
15671,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# arches officialy built by upstream
15672,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15673,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15674,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15675,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15676,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15677,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15678,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15679,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15680,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15681,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15682,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15683,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15684,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15685,88341a435106ea0c9a805ff305bf486f81f56e0c,/11/Dockerfile, # backwards compat
15686,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# vim:set ft=dockerfile:
15687,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# explicitly set user/group IDs
15688,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,# grab gosu for easy step-down from root
15689,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15690,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15691,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15692,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15693,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15694,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15695,972294a377463156c8d61297320c872fc7d370a9,/9.5/Dockerfile, # backwards compat
15696,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
15697,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15698,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15699,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15700,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#		krb5-dev \
15701,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#		openldap-dev \
15702,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# configure: error: prove not found
15703,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15704,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15705,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15706,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15707,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15708,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15709,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15710,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15711,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15712,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,#p' --recursive /usr/local \
15713,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15714,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15715,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15716,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15717,4c4693ef1306a391785c7b73b2784d5634903467,/11/alpine/Dockerfile, # backwards compat
15718,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# vim:set ft=dockerfile:
15719,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# explicitly set user/group IDs
15720,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15721,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15722,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# grab gosu for easy step-down from root
15723,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15724,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15725,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15726,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15727,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# see note below about ""*.pyc"" files"
15728,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# arches officialy built by upstream
15729,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15730,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15731,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15732,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15733,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15734,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15735,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15736,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15737,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15738,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15739,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15740,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15741,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15742,5992d8be755d8001474f737a44c73049c519cff3,/12/Dockerfile, # backwards compat
15743,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,# vim:set ft=dockerfile:
15744,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
15745,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,# grab gosu for easy step-down from root
15746,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15747,904b4637237bf17657674bafe3ca42d241e3e745,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15748,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
15749,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15750,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15751,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15752,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#		krb5-dev \
15753,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#		openldap-dev \
15754,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# configure: error: prove not found
15755,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15756,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15757,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15758,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15759,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15760,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15761,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15762,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15763,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15764,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,#p' --recursive /usr/local \
15765,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15766,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15767,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15768,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15769,f7f1e59c55bcce36cfbe7ab4604f439eb8721611,/10/alpine/Dockerfile, # backwards compat
15770,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# vim:set ft=dockerfile:
15771,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# explicitly set user/group IDs
15772,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# grab gosu for easy step-down from root
15773,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15774,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15775,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# arches officialy built by upstream
15776,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15777,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15778,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15779,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15780,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15781,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15782,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15783,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15784,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15785,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15786,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15787,4566cb036dd021c42c252f7a41797d5d3907c0d2,/10/Dockerfile, # backwards compat
15788,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# vim:set ft=dockerfile:
15789,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# explicitly set user/group IDs
15790,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15791,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15792,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# grab gosu for easy step-down from root
15793,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15794,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15795,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15796,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15797,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# see note below about ""*.pyc"" files"
15798,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# arches officialy built by upstream
15799,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15800,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15801,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15802,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15803,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15804,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15805,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15806,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15807,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15808,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15809,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15810,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15811,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15812,064113e0e481a1d0542846b81858e457fde02c90,/10/Dockerfile, # backwards compat
15813,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15814,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15815,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15816,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15817,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,#		krb5-dev \
15818,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,#		openldap-dev \
15819,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# configure: error: prove not found
15820,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15821,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15822,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15823,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15824,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15825,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15826,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15827,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15828,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15829,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15830,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15831,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15832,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15833,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15834,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15835,49a7e2bf209f8344e8240ddbc3a1368c6b72129e,/9.2/alpine/Dockerfile, # backwards compat
15836,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# vim:set ft=dockerfile:
15837,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# explicitly set user/group IDs
15838,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15839,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15840,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# grab gosu for easy step-down from root
15841,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15842,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15843,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15844,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15845,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
15846,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# arches officialy built by upstream
15847,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15848,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15849,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15850,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15851,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15852,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15853,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15854,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15855,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15856,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15857,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15858,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15859,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15860,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/9.6/Dockerfile, # backwards compat
15861,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
15862,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15863,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15864,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15865,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#		krb5-dev \
15866,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#		openldap-dev \
15867,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# configure: error: prove not found
15868,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15869,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15870,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15871,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15872,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15873,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15874,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15875,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15876,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15877,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
15878,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15879,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15880,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15881,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15882,7063c608f7845a56d343e71540f92b5cdd2a543b,/9.5/alpine/Dockerfile, # backwards compat
15883,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# vim:set ft=dockerfile:
15884,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# explicitly set user/group IDs
15885,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,# grab gosu for easy step-down from root
15886,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15887,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15888,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# vim:set ft=dockerfile:
15889,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# explicitly set user/group IDs
15890,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
15891,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
15892,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# grab gosu for easy step-down from root
15893,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15894,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
15895,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
15896,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15897,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# see note below about ""*.pyc"" files"
15898,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# arches officialy built by upstream
15899,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
15900,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
15901,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
15902,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
15903,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
15904,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
15905,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
15906,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
15907,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
15908,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
15909,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15910,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
15911,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15912,ebd0118d908b4a089950dc84f3a1d78edc7f771d,/11/Dockerfile, # backwards compat
15913,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
15914,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
15915,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15916,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15917,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#		krb5-dev \
15918,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#		openldap-dev \
15919,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# configure: error: prove not found
15920,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15921,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15922,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15923,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new; \"
15924,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15925,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15926,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15927,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15928,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15929,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,#p' --recursive /usr/local \
15930,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15931,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15932,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15933,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15934,1bddd083582b0977075dda4258f2d9dfbc90482b,/10/alpine/Dockerfile, # backwards compat
15935,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15936,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15937,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15938,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15939,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#		krb5-dev \
15940,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#		openldap-dev \
15941,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# configure: error: prove not found
15942,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
15943,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15944,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15945,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15946,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
15947,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15948,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15949,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15950,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15951,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
15952,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15953,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15954,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15955,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15956,34b633b01ddcb6473e543a2e3a1ff0e2978670cb,/9.4/alpine/Dockerfile, # backwards compat
15957,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
15958,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
15959,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15960,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15961,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,#		krb5-dev \
15962,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,#		openldap-dev \
15963,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15964,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15965,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15966,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15967,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15968,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15969,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15970,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15971,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# vim:set ft=dockerfile:
15972,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# explicitly set user/group IDs
15973,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,# grab gosu for easy step-down from root
15974,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
15975,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
15976,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
15977,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15978,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
15979,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15980,6d589780e4e2b275b2c5efe22a56c2c6b64196e9,/9.4/Dockerfile, # backwards compat
15981,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
15982,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
15983,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
15984,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
15985,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,#		krb5-dev \
15986,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,#		openldap-dev \
15987,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
15988,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
15989,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
15990,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
15991,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
15992,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
15993,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
15994,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
15995,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
15996,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
15997,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
15998,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
15999,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.2/alpine/Dockerfile, # backwards compat
16000,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# vim:set ft=dockerfile:
16001,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# explicitly set user/group IDs
16002,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16003,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16004,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# grab gosu for easy step-down from root
16005,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16006,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16007,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16008,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16009,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
16010,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# arches officialy built by upstream
16011,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16012,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16013,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16014,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16015,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16016,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16017,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16018,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16019,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16020,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16021,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16022,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16023,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16024,3610f1e45365fb09c0fea29fa387b35f0efdb3a1,/9.6/Dockerfile, # backwards compat
16025,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
16026,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16027,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16028,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16029,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,#		krb5-dev \
16030,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,#		openldap-dev \
16031,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,# configure: error: prove not found
16032,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16033,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16034,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
16035,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16036,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16037,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16038,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16039,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16040,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16041,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16042,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16043,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16044,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16045,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16046,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16047,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.2/alpine/Dockerfile, # backwards compat
16048,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# vim:set ft=dockerfile:
16049,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# explicitly set user/group IDs
16050,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,# grab gosu for easy step-down from root
16051,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16052,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16053,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16054,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16055,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16056,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16057,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,#		krb5-dev \
16058,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,#		openldap-dev \
16059,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16060,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16061,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16062,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16063,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16064,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16065,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16066,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16067,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16068,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16069,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16070,dd88d2f02ad0f9852a7b33a8b542e14f5867b0c1,/9.6/alpine/Dockerfile, # backwards compat
16071,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16072,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16073,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16074,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16075,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#		krb5-dev \
16076,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#		openldap-dev \
16077,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# configure: error: prove not found
16078,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16079,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16080,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16081,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16082,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16083,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16084,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16085,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16086,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16087,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16088,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16089,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16090,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16091,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16092,cb8d873277a533b2f1140a3f3624321a0c53f45d,/9.6/alpine/Dockerfile, # backwards compat
16093,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16094,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16095,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16096,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16097,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,#		krb5-dev \
16098,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,#		openldap-dev \
16099,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,# configure: error: prove not found
16100,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16101,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16102,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16103,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16104,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16105,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16106,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16107,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16108,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16109,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
16110,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16111,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16112,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16113,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16114,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.4/alpine/Dockerfile, # backwards compat
16115,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# vim:set ft=dockerfile:
16116,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# explicitly set user/group IDs
16117,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16118,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16119,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# grab gosu for easy step-down from root
16120,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16121,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16122,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16123,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16124,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# see note below about ""*.pyc"" files"
16125,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# arches officialy built by upstream
16126,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16127,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16128,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16129,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16130,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16131,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16132,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16133,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16134,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16135,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16136,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16137,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16138,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16139,f5a7e06b42aa14cad6edfaeefa676a5312d27618,/10/Dockerfile, # backwards compat
16140,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16141,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16142,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16143,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16144,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#		krb5-dev \
16145,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#		openldap-dev \
16146,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# configure: error: prove not found
16147,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16148,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16149,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16150,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16151,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16152,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16153,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16154,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16155,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16156,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16157,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16158,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16159,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16160,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16161,59e5a640e9d4896f5d35261fc69402f2f174833b,/9.6/alpine/Dockerfile, # backwards compat
16162,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16163,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16164,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16165,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16166,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#		krb5-dev \
16167,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#		openldap-dev \
16168,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# configure: error: prove not found
16169,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16170,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16171,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16172,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16173,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16174,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16175,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16176,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16177,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16178,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16179,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16180,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16181,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16182,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16183,85aadc08c347cd20f199902c4b8b4f736341c3b8,/9.6/alpine/Dockerfile, # backwards compat
16184,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16185,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16186,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16187,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16188,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,#		krb5-dev \
16189,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,#		openldap-dev \
16190,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16191,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16192,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16193,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16194,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16195,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16196,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16197,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16198,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16199,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16200,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16201,54f46e57136635b484295b985acd6e422d0b9583,/9.4/alpine/Dockerfile, # backwards compat
16202,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16203,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16204,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16205,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16206,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#		krb5-dev \
16207,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#		openldap-dev \
16208,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# configure: error: prove not found
16209,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16210,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16211,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16212,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16213,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16214,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16215,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16216,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16217,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16218,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
16219,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16220,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16221,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16222,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16223,1cf0f1b313b7dc14bfd9331efc45e96b8603f7d2,/9.4/alpine/Dockerfile, # backwards compat
16224,6abeb8590f35c5251b9f100a667024febaeee06b,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16225,6abeb8590f35c5251b9f100a667024febaeee06b,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16226,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,# vim:set ft=dockerfile:
16227,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16228,783906f551b9bc1472751200296f93bb2c55bc44,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16229,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16230,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16231,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16232,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16233,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,#		krb5-dev \
16234,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,#		openldap-dev \
16235,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16236,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16237,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16238,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16239,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16240,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
16241,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16242,03f4064a045114f56fa445eb602339faaf79eeec,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16243,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
16244,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16245,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16246,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16247,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#		krb5-dev \
16248,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#		openldap-dev \
16249,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# configure: error: prove not found
16250,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16251,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16252,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16253,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16254,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16255,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16256,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16257,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16258,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16259,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,#p' --recursive /usr/local \
16260,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16261,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16262,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16263,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16264,d3908b054de55e0f6bdcd2ec01a20a278022d5b1,/11/alpine/Dockerfile, # backwards compat
16265,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
16266,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16267,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16268,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16269,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#		krb5-dev \
16270,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#		openldap-dev \
16271,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# configure: error: prove not found
16272,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16273,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16274,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16275,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16276,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16277,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16278,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16279,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16280,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16281,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
16282,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16283,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16284,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16285,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16286,85aadc08c347cd20f199902c4b8b4f736341c3b8,/11/alpine/Dockerfile, # backwards compat
16287,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16288,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16289,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16290,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16291,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#		krb5-dev \
16292,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#		openldap-dev \
16293,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# configure: error: prove not found
16294,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16295,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16296,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16297,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16298,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16299,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16300,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16301,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16302,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16303,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
16304,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16305,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16306,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16307,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16308,d48c7ca3c7b8c573a33b9f0598839aa7a06318ff,/9.5/alpine/Dockerfile, # backwards compat
16309,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16310,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16311,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16312,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16313,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#		krb5-dev \
16314,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#		openldap-dev \
16315,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# configure: error: prove not found
16316,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16317,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16318,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16319,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16320,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16321,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16322,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16323,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16324,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16325,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
16326,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16327,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16328,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16329,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16330,06d27216309504eb0ed1415c0ef9afdaf9c24465,/9.5/alpine/Dockerfile, # backwards compat
16331,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# vim:set ft=dockerfile:
16332,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# explicitly set user/group IDs
16333,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,# grab gosu for easy step-down from root
16334,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16335,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16336,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16337,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16338,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16339,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16340,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#		krb5-dev \
16341,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#		openldap-dev \
16342,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# configure: error: prove not found
16343,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16344,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16345,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16346,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16347,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16348,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16349,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16350,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16351,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16352,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16353,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16354,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16355,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16356,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16357,6b2d9f0d5dde36d634d1bbcbd27a0b2ed7054f3c,/10/alpine/Dockerfile, # backwards compat
16358,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
16359,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16360,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16361,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16362,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,#		krb5-dev \
16363,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,#		openldap-dev \
16364,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,# configure: error: prove not found
16365,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16366,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16367,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16368,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16369,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16370,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16371,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16372,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16373,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16374,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,#p' --recursive /usr/local \
16375,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16376,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16377,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16378,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16379,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# vim:set ft=dockerfile:
16380,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# explicitly set user/group IDs
16381,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16382,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16383,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# grab gosu for easy step-down from root
16384,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16385,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16386,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16387,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
16388,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16389,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# see note below about ""*.pyc"" files"
16390,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# arches officialy built by upstream
16391,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16392,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16393,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16394,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16395,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16396,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16397,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16398,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16399,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16400,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16401,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16402,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16403,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16404,72d7408ad3b57ab1a5c371e11460811551811bf5,/12/Dockerfile, # backwards compat
16405,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# vim:set ft=dockerfile:
16406,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# explicitly set user/group IDs
16407,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# grab gosu for easy step-down from root
16408,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16409,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16410,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16411,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16412,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# arches officialy built by upstream
16413,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16414,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16415,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16416,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16417,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16418,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16419,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16420,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16421,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16422,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16423,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16424,fe89a60c9bda1f1e1627f6732fdfd90f4d410bd6,/9.4/Dockerfile, # backwards compat
16425,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,# vim:set ft=dockerfile:
16426,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16427,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,# grab gosu for easy step-down from root
16428,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16429,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16430,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
16431,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16432,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16433,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16434,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,#		krb5-dev \
16435,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,#		openldap-dev \
16436,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16437,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16438,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16439,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16440,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16441,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16442,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16443,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16444,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# vim:set ft=dockerfile:
16445,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# explicitly set user/group IDs
16446,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,# grab gosu for easy step-down from root
16447,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16448,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16449,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
16450,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16451,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16452,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16453,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#		krb5-dev \
16454,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#		openldap-dev \
16455,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# configure: error: prove not found
16456,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16457,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16458,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16459,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16460,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16461,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16462,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16463,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16464,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16465,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,#p' --recursive /usr/local \
16466,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16467,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16468,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16469,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16470,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16471,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16472,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16473,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16474,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#		krb5-dev \
16475,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#		openldap-dev \
16476,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# configure: error: prove not found
16477,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16478,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16479,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16480,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16481,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16482,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16483,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16484,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16485,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16486,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16487,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16488,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16489,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16490,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16491,01058c1847400919de5282ca825a7806a9dafcda,/9.6/alpine/Dockerfile, # backwards compat
16492,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# vim:set ft=dockerfile:
16493,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# explicitly set user/group IDs
16494,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,# grab gosu for easy step-down from root
16495,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16496,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16497,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16498,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16499,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16500,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16501,a42e1249e16d8eb0c164104410f78f3dcebe6406,/10/Dockerfile, # backwards compat
16502,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# vim:set ft=dockerfile:
16503,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# explicitly set user/group IDs
16504,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16505,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16506,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# grab gosu for easy step-down from root
16507,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16508,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16509,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16510,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16511,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# see note below about ""*.pyc"" files"
16512,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# arches officialy built by upstream
16513,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16514,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16515,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16516,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16517,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16518,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16519,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16520,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16521,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16522,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16523,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16524,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16525,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16526,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/11/Dockerfile, # backwards compat
16527,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# vim:set ft=dockerfile:
16528,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# explicitly set user/group IDs
16529,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,# grab gosu for easy step-down from root
16530,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16531,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16532,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16533,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16534,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16535,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16536,347593c5d25935dc1480adc6079400c2faf7ae5f,/9.3/Dockerfile, # backwards compat
16537,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
16538,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16539,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16540,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16541,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,#		krb5-dev \
16542,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,#		openldap-dev \
16543,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# configure: error: prove not found
16544,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16545,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16546,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
16547,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16548,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16549,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16550,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16551,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16552,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16553,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16554,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16555,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16556,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16557,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16558,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16559,ce13cadcb81160cf57bce87b4131cffe36359fcd,/9.3/alpine/Dockerfile, # backwards compat
16560,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# vim:set ft=dockerfile:
16561,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# explicitly set user/group IDs
16562,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,# grab gosu for easy step-down from root
16563,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16564,2c72165e4f9dc66a61998111f69b5eba0b6b71f4,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16565,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,# vim:set ft=dockerfile:
16566,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16567,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16568,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16569,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,#		krb5-dev \
16570,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,#		openldap-dev \
16571,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16572,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16573,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16574,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16575,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16576,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16577,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16578,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.2/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16579,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
16580,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16581,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16582,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16583,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,#		krb5-dev \
16584,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,#		openldap-dev \
16585,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16586,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16587,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16588,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16589,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16590,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16591,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16592,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16593,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16594,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16595,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16596,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# vim:set ft=dockerfile:
16597,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# explicitly set user/group IDs
16598,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16599,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16600,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# grab gosu for easy step-down from root
16601,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16602,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16603,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16604,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16605,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# see note below about ""*.pyc"" files"
16606,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# arches officialy built by upstream
16607,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16608,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16609,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16610,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16611,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16612,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16613,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16614,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16615,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16616,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16617,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16618,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16619,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16620,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/12/Dockerfile, # backwards compat
16621,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# vim:set ft=dockerfile:
16622,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# explicitly set user/group IDs
16623,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16624,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16625,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# grab gosu for easy step-down from root
16626,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16627,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16628,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16629,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16630,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# arches officialy built by upstream
16631,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16632,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16633,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16634,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16635,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16636,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16637,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16638,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16639,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16640,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16641,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16642,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/9.4/Dockerfile, # backwards compat
16643,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,# vim:set ft=dockerfile:
16644,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,# explicitly set user/group IDs
16645,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16646,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16647,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,# grab gosu for easy step-down from root
16648,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16649,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16650,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16651,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16652,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
16653,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,# arches officialy built by upstream
16654,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16655,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16656,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16657,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16658,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16659,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16660,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16661,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16662,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16663,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16664,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16665,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16666,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16667,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.6/Dockerfile, # backwards compat
16668,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
16669,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16670,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16671,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16672,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,#		krb5-dev \
16673,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,#		openldap-dev \
16674,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16675,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16676,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16677,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16678,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16679,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16680,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16681,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16682,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16683,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16684,e43016225fea0cdf47ae1df0888885ae02a8a7f4,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16685,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16686,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16687,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16688,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16689,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,#		krb5-dev \
16690,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,#		openldap-dev \
16691,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16692,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16693,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16694,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16695,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16696,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16697,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16698,bcf8da33d85f2a558ae1611cb310d27fe8359fea,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16699,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# vim:set ft=dockerfile:
16700,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# explicitly set user/group IDs
16701,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16702,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16703,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
16704,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16705,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16706,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16707,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
16708,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16709,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# see note below about ""*.pyc"" files"
16710,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# arches officialy built by upstream
16711,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16712,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16713,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16714,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16715,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16716,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16717,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16718,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16719,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16720,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16721,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16722,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16723,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16724,88173efa530f1a174a7ea311c5b6ee5e383f68bd,/12/Dockerfile, # backwards compat
16725,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# vim:set ft=dockerfile:
16726,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# explicitly set user/group IDs
16727,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,# grab gosu for easy step-down from root
16728,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16729,35a09c34b04019c3942d13d78b99eab66bc4b3ad,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16730,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16731,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16732,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16733,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16734,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,#		krb5-dev \
16735,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,#		openldap-dev \
16736,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16737,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16738,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16739,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16740,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16741,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16742,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16743,a7ba7f2b2de177069e185e748adaa76ff444d921,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16744,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# vim:set ft=dockerfile:
16745,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# explicitly set user/group IDs
16746,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
16747,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
16748,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# grab gosu for easy step-down from root
16749,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16750,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16751,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16752,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16753,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# see note below about ""*.pyc"" files"
16754,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# arches officialy built by upstream
16755,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16756,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
16757,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16758,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16759,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16760,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16761,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16762,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16763,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16764,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
16765,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16766,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
16767,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16768,59e5a640e9d4896f5d35261fc69402f2f174833b,/10/Dockerfile, # backwards compat
16769,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# vim:set ft=dockerfile:
16770,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# explicitly set user/group IDs
16771,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# grab gosu for easy step-down from root
16772,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16773,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16774,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
16775,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16776,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# arches officialy built by upstream
16777,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16778,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16779,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16780,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16781,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16782,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16783,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16784,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16785,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16786,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16787,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16788,635fd0bcb3ababc96871c9da52f10743fbae4742,/9.5/Dockerfile, # backwards compat
16789,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
16790,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16791,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16792,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16793,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#		krb5-dev \
16794,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#		openldap-dev \
16795,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# configure: error: prove not found
16796,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16797,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16798,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16799,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16800,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16801,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16802,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16803,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16804,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16805,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,#p' --recursive /usr/local \
16806,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16807,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16808,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16809,b96659493b841100dc75ed777bff01913d9fe9e1,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16810,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
16811,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
16812,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16813,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16814,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#		krb5-dev \
16815,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#		openldap-dev \
16816,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# configure: error: prove not found
16817,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16818,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16819,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16820,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16821,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16822,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16823,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16824,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16825,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16826,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,#p' --recursive /usr/local \
16827,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16828,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16829,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16830,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16831,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/11/alpine/Dockerfile, # backwards compat
16832,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,# vim:set ft=dockerfile:
16833,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16834,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,# grab gosu for easy step-down from root
16835,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16836,baf80692b5ddd6a5b96876aed7d4b3046ced62ab,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16837,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# vim:set ft=dockerfile:
16838,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# explicitly set user/group IDs
16839,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,# grab gosu for easy step-down from root
16840,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16841,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16842,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16843,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16844,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16845,3706d4c4562c284ed070286b9fd516151167a40c,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16846,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16847,7c8e945a80097e80fa1c8d69d2a027145177b701,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16848,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
16849,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
16850,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16851,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16852,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,#		krb5-dev \
16853,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,#		openldap-dev \
16854,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16855,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16856,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16857,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16858,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16859,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16860,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16861,069acf6f69adb67e956ceb374fff4cfe50c6180d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16862,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,# vim:set ft=dockerfile:
16863,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16864,783906f551b9bc1472751200296f93bb2c55bc44,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16865,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# vim:set ft=dockerfile:
16866,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# explicitly set user/group IDs
16867,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# grab gosu for easy step-down from root
16868,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16869,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16870,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# arches officialy built by upstream
16871,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16872,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16873,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16874,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16875,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16876,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16877,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16878,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16879,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16880,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16881,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16882,57213ab012e6a38a27283eeac65c4726c069647a,/9.3/Dockerfile, # backwards compat
16883,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,# vim:set ft=dockerfile:
16884,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16885,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,# grab gosu for easy step-down from root
16886,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16887,b36f03d03593858497e1dda862c732cd1eb2ce86,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16888,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# vim:set ft=dockerfile:
16889,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# explicitly set user/group IDs
16890,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# grab gosu for easy step-down from root
16891,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
16892,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
16893,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
16894,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# arches officialy built by upstream
16895,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
16896,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
16897,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
16898,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
16899,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
16900,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
16901,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
16902,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
16903,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16904,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
16905,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16906,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/10/Dockerfile, # backwards compat
16907,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
16908,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16909,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16910,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16911,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#		krb5-dev \
16912,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#		openldap-dev \
16913,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# configure: error: prove not found
16914,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16915,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16916,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16917,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16918,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16919,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16920,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16921,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16922,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16923,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,#p' --recursive /usr/local \
16924,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16925,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16926,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16927,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16928,6274e4c4c61c29a2b3d9fec61e40486254dbc859,/10/alpine/Dockerfile, # backwards compat
16929,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16930,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16931,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16932,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16933,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#		krb5-dev \
16934,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#		openldap-dev \
16935,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# configure: error: prove not found
16936,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16937,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16938,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16939,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16940,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16941,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16942,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16943,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16944,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16945,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16946,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16947,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16948,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16949,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16950,1089a8971b43a675109ad886bf1f3b327c067fa1,/9.6/alpine/Dockerfile, # backwards compat
16951,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
16952,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
16953,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16954,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16955,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#		krb5-dev \
16956,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#		openldap-dev \
16957,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# configure: error: prove not found
16958,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16959,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16960,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16961,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16962,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16963,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16964,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16965,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16966,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16967,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
16968,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16969,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16970,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16971,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16972,cfac232e3cccb8f3b499b7a286ccdf6eafbde808,/9.6/alpine/Dockerfile, # backwards compat
16973,2bfa44dab27b6be46333ac7bf86f2517c1479090,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
16974,2bfa44dab27b6be46333ac7bf86f2517c1479090,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
16975,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
16976,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
16977,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
16978,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
16979,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#		krb5-dev \
16980,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#		openldap-dev \
16981,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# configure: error: prove not found
16982,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
16983,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
16984,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
16985,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
16986,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
16987,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
16988,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
16989,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
16990,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
16991,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,#p' --recursive /usr/local \
16992,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
16993,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
16994,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
16995,9586595a9bded3c7cde8682d95db9d79dc0d9ca3,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
16996,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# vim:set ft=dockerfile:
16997,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# explicitly set user/group IDs
16998,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# grab gosu for easy step-down from root
16999,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17000,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17001,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# arches officialy built by upstream
17002,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17003,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17004,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17005,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17006,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17007,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17008,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17009,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17010,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17011,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17012,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17013,3d0487a6caf77a2f0a66262158ff2719d1c22c94,/10/Dockerfile, # backwards compat
17014,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,# vim:set ft=dockerfile:
17015,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17016,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,# grab gosu for easy step-down from root
17017,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17018,403dc53653e3a98517dbcb425ee61db0a2fe7a95,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17019,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
17020,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17021,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17022,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17023,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,#		krb5-dev \
17024,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,#		openldap-dev \
17025,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17026,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17027,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17028,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17029,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17030,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17031,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17032,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17033,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17034,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17035,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17036,54f46e57136635b484295b985acd6e422d0b9583,/9.3/alpine/Dockerfile, # backwards compat
17037,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# vim:set ft=dockerfile:
17038,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# explicitly set user/group IDs
17039,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,# grab gosu for easy step-down from root
17040,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17041,ec5ce80ca914e02c2d5eb9fde424039d4cee032e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17042,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# vim:set ft=dockerfile:
17043,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# explicitly set user/group IDs
17044,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,# grab gosu for easy step-down from root
17045,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17046,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17047,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17048,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17049,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17050,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17051,8904bffa5e197cd016e0d6349d1db8b480fa28a9,/9.5/Dockerfile, # backwards compat
17052,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17053,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17054,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17055,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17056,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#		krb5-dev \
17057,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#		openldap-dev \
17058,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# configure: error: prove not found
17059,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17060,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17061,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17062,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17063,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17064,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17065,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17066,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17067,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17068,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
17069,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17070,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17071,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17072,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17073,c66fc738ed2eb957881a855eda7f921f785ec7a3,/9.5/alpine/Dockerfile, # backwards compat
17074,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17075,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17076,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17077,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17078,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,#		krb5-dev \
17079,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,#		openldap-dev \
17080,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,# configure: error: prove not found
17081,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17082,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17083,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17084,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17085,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17086,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17087,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17088,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17089,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17090,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17091,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17092,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17093,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17094,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.5/alpine/Dockerfile, # backwards compat
17095,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17096,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
17097,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17098,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17099,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#		krb5-dev \
17100,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#		openldap-dev \
17101,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# configure: error: prove not found
17102,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17103,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17104,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17105,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17106,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17107,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17108,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17109,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17110,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17111,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17112,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17113,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17114,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17115,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17116,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/9.6/alpine/Dockerfile, # backwards compat
17117,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
17118,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17119,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17120,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17121,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#		krb5-dev \
17122,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#		openldap-dev \
17123,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# configure: error: prove not found
17124,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17125,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17126,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17127,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17128,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17129,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17130,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17131,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17132,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17133,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,#p' --recursive /usr/local \
17134,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17135,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17136,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17137,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17138,c8bf23b75fa75a99eef9f5ff794c557057e5d8c5,/11/alpine/Dockerfile, # backwards compat
17139,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17140,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17141,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17142,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17143,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,#		krb5-dev \
17144,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,#		openldap-dev \
17145,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17146,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17147,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17148,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17149,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17150,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17151,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17152,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17153,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17154,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17155,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17156,bc44222ff8a2cc66d2060129ecdf228bdb9e0ee8,/9.5/alpine/Dockerfile, # backwards compat
17157,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17158,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17159,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17160,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17161,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,#		krb5-dev \
17162,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,#		openldap-dev \
17163,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17164,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17165,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17166,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17167,a9c1b15a7adf7cb2bc42fac776656aff7dd7994e,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17168,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
17169,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17170,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17171,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17172,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,#		krb5-dev \
17173,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,#		openldap-dev \
17174,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,# configure: error: prove not found
17175,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17176,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17177,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
17178,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17179,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17180,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17181,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17182,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17183,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17184,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17185,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17186,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,#p' --recursive /usr/local \
17187,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17188,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17189,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17190,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17191,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.3/alpine/Dockerfile, # backwards compat
17192,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# vim:set ft=dockerfile:
17193,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# explicitly set user/group IDs
17194,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17195,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17196,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# grab gosu for easy step-down from root
17197,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17198,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17199,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17200,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17201,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
17202,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# arches officialy built by upstream
17203,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17204,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17205,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17206,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17207,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17208,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17209,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17210,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17211,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17212,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17213,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17214,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17215,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17216,73f9262456e4efac9ccfa453b3bcd5d27c6b9112,/9.4/Dockerfile, # backwards compat
17217,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
17218,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17219,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17220,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17221,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#		krb5-dev \
17222,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#		openldap-dev \
17223,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# configure: error: prove not found
17224,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17225,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17226,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17227,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17228,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17229,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17230,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17231,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17232,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17233,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,#p' --recursive /usr/local \
17234,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17235,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17236,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17237,d188180c630836a2ef5bc22f9d5ba4a250e838dd,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17238,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# vim:set ft=dockerfile:
17239,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# explicitly set user/group IDs
17240,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17241,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17242,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# grab gosu for easy step-down from root
17243,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17244,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17245,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17246,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17247,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# arches officialy built by upstream
17248,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17249,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17250,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17251,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17252,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17253,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17254,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17255,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17256,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17257,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17258,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17259,35d6f4b68399cf2ffcb1c13c27003b92f53b9bc8,/10/Dockerfile, # backwards compat
17260,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# vim:set ft=dockerfile:
17261,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# explicitly set user/group IDs
17262,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# grab gosu for easy step-down from root
17263,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17264,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17265,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# arches officialy built by upstream
17266,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17267,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17268,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17269,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17270,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17271,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17272,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17273,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17274,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17275,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17276,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17277,f7dc5727b1d6b6a636350e11648845ae33477579,/9.4/Dockerfile, # backwards compat
17278,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,# vim:set ft=dockerfile:
17279,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17280,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,# grab gosu for easy step-down from root
17281,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17282,a82c28e1c407ef5ddfc2a6014dac87bcc4955a26,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17283,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# vim:set ft=dockerfile:
17284,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# explicitly set user/group IDs
17285,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17286,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17287,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# grab gosu for easy step-down from root
17288,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17289,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17290,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17291,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17292,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# see note below about ""*.pyc"" files"
17293,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# arches officialy built by upstream
17294,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17295,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17296,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17297,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17298,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17299,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17300,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17301,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17302,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17303,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17304,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17305,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17306,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17307,d21499fa3f55639c6751423e55ff630516bf34e3,/10/Dockerfile, # backwards compat
17308,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# vim:set ft=dockerfile:
17309,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# explicitly set user/group IDs
17310,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17311,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17312,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# grab gosu for easy step-down from root
17313,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17314,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17315,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17316,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
17317,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17318,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# see note below about ""*.pyc"" files"
17319,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# arches officialy built by upstream
17320,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17321,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17322,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17323,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17324,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17325,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17326,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17327,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17328,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17329,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17330,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17331,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17332,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17333,137fccea0cda789cdc32945c0dcc3177ba951a36,/12/Dockerfile, # backwards compat
17334,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
17335,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17336,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17337,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17338,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,#		krb5-dev \
17339,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,#		openldap-dev \
17340,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17341,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17342,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17343,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17344,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17345,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17346,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17347,106e9e56fea3ad34a8bf3e66d3a041d491788552,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17348,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# vim:set ft=dockerfile:
17349,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# explicitly set user/group IDs
17350,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17351,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17352,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# grab gosu for easy step-down from root
17353,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17354,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17355,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17356,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17357,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
17358,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# arches officialy built by upstream
17359,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17360,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17361,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17362,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17363,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17364,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17365,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17366,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17367,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17368,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17369,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17370,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17371,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17372,faf08dbfd0675d144cbdef39f4506425ec7cee26,/9.5/Dockerfile, # backwards compat
17373,e2971da001b64a54b4a971ecc83ad9a86ad25387,/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17374,e2971da001b64a54b4a971ecc83ad9a86ad25387,/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17375,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17376,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17377,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17378,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17379,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#		krb5-dev \
17380,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#		openldap-dev \
17381,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# configure: error: prove not found
17382,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17383,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17384,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17385,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17386,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17387,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17388,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17389,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17390,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17391,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17392,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17393,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17394,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17395,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17396,55e3dc038075e4cf1c30ec4f675d633ff849c0ef,/9.6/alpine/Dockerfile, # backwards compat
17397,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# vim:set ft=dockerfile:
17398,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# explicitly set user/group IDs
17399,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,# grab gosu for easy step-down from root
17400,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17401,9737ce4eeb7d580de8bd6831d8144ba08c316197,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17402,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# vim:set ft=dockerfile:
17403,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# explicitly set user/group IDs
17404,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# grab gosu for easy step-down from root
17405,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17406,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17407,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17408,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# arches officialy built by upstream
17409,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17410,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17411,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17412,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17413,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17414,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17415,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17416,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17417,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17418,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17419,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17420,e348a2fe235d28692344de64c05640c38361554d,/9.4/Dockerfile, # backwards compat
17421,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# vim:set ft=dockerfile:
17422,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# explicitly set user/group IDs
17423,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17424,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17425,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# grab gosu for easy step-down from root
17426,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17427,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17428,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17429,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
17430,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17431,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
17432,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# arches officialy built by upstream
17433,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17434,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17435,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17436,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17437,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17438,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17439,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17440,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17441,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17442,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17443,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17444,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17445,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17446,0a0f6444f52b3bf5067a94eda9b009cc0aede651,/9.5/Dockerfile, # backwards compat
17447,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,# vim:set ft=dockerfile:
17448,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,# explicitly set user/group IDs
17449,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,# grab gosu for easy step-down from root
17450,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17451,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17452,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17453,48d6cd0f57ea3f7de4a3d02d7b0ca8f2f9d6e991,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17454,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# vim:set ft=dockerfile:
17455,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# explicitly set user/group IDs
17456,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,# grab gosu for easy step-down from root
17457,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17458,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17459,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17460,8e867c8ba0fc8fd347e43ae53ddeba8e67242a53,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17461,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# vim:set ft=dockerfile:
17462,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# explicitly set user/group IDs
17463,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,# grab gosu for easy step-down from root
17464,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17465,a7551affea985b86e5119ff36c9eae2f430e38ee,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17466,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# vim:set ft=dockerfile:
17467,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# explicitly set user/group IDs
17468,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17469,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17470,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# grab gosu for easy step-down from root
17471,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17472,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17473,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17474,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17475,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# see note below about ""*.pyc"" files"
17476,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# arches officialy built by upstream
17477,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17478,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17479,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17480,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17481,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17482,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17483,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17484,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17485,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17486,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17487,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17488,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17489,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17490,a9610d18de51c189c9d4b0197c408e2e3bfb7917,/9.6/Dockerfile, # backwards compat
17491,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# vim:set ft=dockerfile:
17492,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# explicitly set user/group IDs
17493,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17494,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17495,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# grab gosu for easy step-down from root
17496,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17497,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17498,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17499,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17500,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# see note below about ""*.pyc"" files"
17501,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# arches officialy built by upstream
17502,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17503,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17504,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17505,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17506,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17507,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17508,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17509,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17510,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17511,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17512,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17513,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
17514,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17515,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/9.4/Dockerfile, # backwards compat
17516,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# vim:set ft=dockerfile:
17517,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# explicitly set user/group IDs
17518,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,# grab gosu for easy step-down from root
17519,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17520,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17521,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17522,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17523,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17524,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17525,d8abce4e82533aa2673da9ba9a5a8385589ed693,/10/Dockerfile, # backwards compat
17526,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# vim:set ft=dockerfile:
17527,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# explicitly set user/group IDs
17528,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17529,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17530,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# grab gosu for easy step-down from root
17531,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17532,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17533,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17534,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17535,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
17536,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# arches officialy built by upstream
17537,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17538,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17539,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17540,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17541,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17542,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17543,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17544,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17545,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17546,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17547,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17548,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17549,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17550,d61fd19b699b2c380da08c3a95f7272137a182bb,/9.3/Dockerfile, # backwards compat
17551,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17552,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17553,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17554,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17555,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#		krb5-dev \
17556,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#		openldap-dev \
17557,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# configure: error: prove not found
17558,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17559,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17560,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17561,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17562,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17563,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17564,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17565,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17566,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17567,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
17568,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17569,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17570,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17571,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17572,1cbd3a1666e6294cc28fa41c24983494dfcfc680,/9.4/alpine/Dockerfile, # backwards compat
17573,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# vim:set ft=dockerfile:
17574,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# explicitly set user/group IDs
17575,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# grab gosu for easy step-down from root
17576,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17577,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17578,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17579,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17580,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# arches officialy built by upstream
17581,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17582,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17583,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17584,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17585,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17586,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17587,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17588,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17589,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17590,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17591,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17592,740fb98439e66c7a0e39a67880ee971c6d49e514,/10/Dockerfile, # backwards compat
17593,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# vim:set ft=dockerfile:
17594,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
17595,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17596,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17597,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#		krb5-dev \
17598,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#		openldap-dev \
17599,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# configure: error: prove not found
17600,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17601,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17602,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17603,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17604,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17605,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17606,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17607,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17608,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17609,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,#p' --recursive /usr/local \
17610,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17611,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17612,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17613,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/13/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17614,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
17615,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17616,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17617,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17618,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#		krb5-dev \
17619,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#		openldap-dev \
17620,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# configure: error: prove not found
17621,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17622,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17623,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17624,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17625,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17626,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17627,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17628,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17629,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17630,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,#p' --recursive /usr/local \
17631,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17632,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17633,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17634,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17635,3f8d33c06e25295260a6d30defa6dce40aea8ad8,/11/alpine/Dockerfile, # backwards compat
17636,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# vim:set ft=dockerfile:
17637,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# explicitly set user/group IDs
17638,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,# grab gosu for easy step-down from root
17639,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17640,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17641,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17642,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17643,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17644,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17645,fc676766b4c4b1a7afb857342b9adef78b09f28b,/9.2/Dockerfile, # backwards compat
17646,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17647,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17648,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17649,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17650,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#		krb5-dev \
17651,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#		openldap-dev \
17652,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# configure: error: prove not found
17653,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17654,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17655,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17656,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17657,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17658,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17659,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17660,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17661,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17662,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
17663,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17664,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17665,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17666,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17667,6d1f671dcd2c8d51484d19767a33c37110dd650f,/9.4/alpine/Dockerfile, # backwards compat
17668,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17669,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17670,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17671,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17672,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#		krb5-dev \
17673,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#		openldap-dev \
17674,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# configure: error: prove not found
17675,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17676,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17677,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17678,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17679,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17680,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17681,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17682,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17683,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17684,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
17685,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17686,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17687,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17688,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17689,34689e2a5ba1841fb09fd5a9c29ef47a022d48dc,/9.5/alpine/Dockerfile, # backwards compat
17690,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
17691,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17692,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17693,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17694,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,#		krb5-dev \
17695,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,#		openldap-dev \
17696,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17697,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17698,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17699,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17700,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17701,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17702,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17703,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17704,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17705,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17706,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# vim:set ft=dockerfile:
17707,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# explicitly set user/group IDs
17708,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,# grab gosu for easy step-down from root
17709,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17710,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17711,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17712,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17713,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17714,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17715,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.3/Dockerfile, # backwards compat
17716,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
17717,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
17718,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17719,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17720,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#		krb5-dev \
17721,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#		openldap-dev \
17722,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# configure: error: prove not found
17723,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17724,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17725,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17726,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17727,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17728,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17729,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17730,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17731,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17732,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
17733,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17734,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17735,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17736,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17737,1d140375b6830c65cfeaac3642c7fda6d3e1b29a,/9.5/alpine/Dockerfile, # backwards compat
17738,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17739,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17740,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17741,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17742,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#		krb5-dev \
17743,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#		openldap-dev \
17744,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# configure: error: prove not found
17745,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17746,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17747,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17748,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17749,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17750,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17751,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17752,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17753,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17754,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
17755,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17756,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17757,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17758,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17759,f7dc5727b1d6b6a636350e11648845ae33477579,/9.6/alpine/Dockerfile, # backwards compat
17760,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# vim:set ft=dockerfile:
17761,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# explicitly set user/group IDs
17762,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,# grab gosu for easy step-down from root
17763,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17764,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17765,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17766,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17767,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17768,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17769,ef1e190d84d5ef8c763cb96aeec3356916444efc,/9.3/Dockerfile, # backwards compat
17770,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# vim:set ft=dockerfile:
17771,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# explicitly set user/group IDs
17772,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# grab gosu for easy step-down from root
17773,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17774,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17775,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# arches officialy built by upstream
17776,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17777,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17778,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17779,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17780,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17781,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17782,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17783,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17784,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17785,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17786,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17787,bef8f02d1fe2bb4547280ba609f19abd20230180,/9.6/Dockerfile, # backwards compat
17788,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
17789,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17790,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17791,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17792,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,#		krb5-dev \
17793,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,#		openldap-dev \
17794,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17795,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17796,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17797,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17798,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17799,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# tzdata adds around 1Mb to image size, but it is suggested by Django documentation that timezone should be set for performance reasons: http://bit.ly/2fMYhh1"
17800,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17801,b031aa800308c595624b8d2e43707dbb2861d2f1,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17802,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
17803,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.12-stable"
17804,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17805,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17806,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#		krb5-dev \
17807,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#		openldap-dev \
17808,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# configure: error: prove not found
17809,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17810,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17811,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17812,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17813,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17814,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17815,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17816,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17817,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17818,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,#p' --recursive /usr/local \
17819,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17820,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17821,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17822,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17823,441533ac6cf0c4de3f5225c20e8a9810c29b5a50,/10/alpine/Dockerfile, # backwards compat
17824,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# vim:set ft=dockerfile:
17825,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# explicitly set user/group IDs
17826,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,# grab gosu for easy step-down from root
17827,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17828,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17829,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17830,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17831,03a6cb67dfd3045996c024e5569d938b25bd41b6,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17832,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,# vim:set ft=dockerfile:
17833,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17834,c6484bf22f5a0f72a49658ae9e5569bc01785eff,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17835,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# vim:set ft=dockerfile:
17836,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# explicitly set user/group IDs
17837,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# grab gosu for easy step-down from root
17838,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17839,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17840,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17841,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# arches officialy built by upstream
17842,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17843,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17844,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17845,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17846,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17847,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17848,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17849,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17850,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17851,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17852,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17853,5876d4b88ac59d56115a7f02b7a7556b4b3f9a9d,/9.5/Dockerfile, # backwards compat
17854,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# vim:set ft=dockerfile:
17855,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# explicitly set user/group IDs
17856,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# grab gosu for easy step-down from root
17857,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17858,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17859,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17860,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# arches officialy built by upstream
17861,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17862,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17863,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17864,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17865,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17866,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17867,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17868,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17869,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17870,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17871,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17872,c4cb816b3deccc29393b8278d1a5f144d2be26f1,/9.6/Dockerfile, # backwards compat
17873,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# vim:set ft=dockerfile:
17874,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# explicitly set user/group IDs
17875,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,# grab gosu for easy step-down from root
17876,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17877,8f8c0bbc5236e0deedd35595c504e5fd380b1233,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17878,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,# vim:set ft=dockerfile:
17879,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17880,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,# grab gosu for easy step-down from root
17881,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17882,80ebeda0a68be6a8b10ce0de1846a49228af0795,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17883,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# vim:set ft=dockerfile:
17884,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# explicitly set user/group IDs
17885,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,# grab gosu for easy step-down from root
17886,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17887,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17888,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17889,04b1d366d51a942b88fff6c62943f92c7c38d9b6,/9.1/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17890,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
17891,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
17892,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17893,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17894,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#		krb5-dev \
17895,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#		openldap-dev \
17896,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# configure: error: prove not found
17897,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17898,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17899,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17900,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17901,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17902,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17903,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17904,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17905,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17906,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
17907,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17908,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17909,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17910,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17911,6750eda25a2f0856b3997309ef393475f008d6a3,/10/alpine/Dockerfile, # backwards compat
17912,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# vim:set ft=dockerfile:
17913,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# explicitly set user/group IDs
17914,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,# grab gosu for easy step-down from root
17915,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17916,443c7947d548b1c607e06f7a75ca475de7ff3284,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17917,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,# vim:set ft=dockerfile:
17918,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
17919,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,# grab gosu for easy step-down from root
17920,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17921,73d73760957c7038dd3c07212b5b9daf86a2cb38,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17922,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
17923,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
17924,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17925,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17926,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#		krb5-dev \
17927,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#		openldap-dev \
17928,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# configure: error: prove not found
17929,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
17930,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17931,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
17932,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
17933,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
17934,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17935,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17936,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17937,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17938,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,#p' --recursive /usr/local \
17939,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
17940,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17941,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17942,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17943,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/11/alpine/Dockerfile, # backwards compat
17944,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# vim:set ft=dockerfile:
17945,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# explicitly set user/group IDs
17946,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17947,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17948,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# grab gosu for easy step-down from root
17949,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17950,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17951,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17952,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17953,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
17954,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# arches officialy built by upstream
17955,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
17956,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
17957,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
17958,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
17959,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
17960,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
17961,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
17962,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
17963,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
17964,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
17965,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17966,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17967,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
17968,91939daa3f42d2796952f03353534cd87d181ccc,/9.3/Dockerfile, # backwards compat
17969,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# vim:set ft=dockerfile:
17970,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# explicitly set user/group IDs
17971,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,# grab gosu for easy step-down from root
17972,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17973,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
17974,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17975,fc36c25f8ac352f1fea6d0e7cf8d9bd92a4e720f,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
17976,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
17977,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
17978,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
17979,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
17980,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,#		krb5-dev \
17981,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,#		openldap-dev \
17982,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
17983,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
17984,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
17985,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
17986,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
17987,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# tzdata loading functionality is optional, and fails gracefully
#		tzdata \"
17988,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
17989,797fadcad2239919ea98aa7a3d14d32b4e8fc525,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
17990,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# vim:set ft=dockerfile:
17991,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# explicitly set user/group IDs
17992,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
17993,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
17994,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# grab gosu for easy step-down from root
17995,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
17996,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
17997,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
17998,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
17999,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# see note below about ""*.pyc"" files"
18000,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# arches officialy built by upstream
18001,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18002,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18003,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18004,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18005,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18006,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18007,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18008,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18009,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18010,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18011,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18012,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18013,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18014,64bec4b1617291e3646e4e7dbbae1174404c3fd9,/9.3/Dockerfile, # backwards compat
18015,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18016,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18017,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18018,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18019,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#		krb5-dev \
18020,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#		openldap-dev \
18021,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# configure: error: prove not found
18022,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18023,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18024,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18025,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18026,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18027,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18028,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18029,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18030,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18031,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18032,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18033,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18034,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18035,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18036,65ed6d7deebc81377154f1c841b1b156c63dfb19,/9.6/alpine/Dockerfile, # backwards compat
18037,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18038,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
18039,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18040,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18041,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#		krb5-dev \
18042,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#		openldap-dev \
18043,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# configure: error: prove not found
18044,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18045,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18046,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18047,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18048,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18049,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18050,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18051,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18052,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18053,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18054,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18055,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18056,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18057,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18058,f0edc5c30ec992e4ef3ffae125adae0bb9cd2582,/9.6/alpine/Dockerfile, # backwards compat
18059,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# vim:set ft=dockerfile:
18060,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# explicitly set user/group IDs
18061,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# grab gosu for easy step-down from root
18062,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18063,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18064,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18065,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18066,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# arches officialy built by upstream
18067,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18068,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18069,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18070,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18071,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18072,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18073,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18074,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18075,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18076,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18077,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18078,c372e3b28062d4e0b7aea58e51e6b91741d839a6,/9.5/Dockerfile, # backwards compat
18079,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# vim:set ft=dockerfile:
18080,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# explicitly set user/group IDs
18081,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# grab gosu for easy step-down from root
18082,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18083,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18084,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# arches officialy built by upstream
18085,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18086,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18087,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18088,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18089,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18090,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18091,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18092,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18093,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18094,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18095,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18096,2100e76efe6b41e001ac13d248e7af206cc022ae,/9.5/Dockerfile, # backwards compat
18097,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# vim:set ft=dockerfile:
18098,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# explicitly set user/group IDs
18099,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18100,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18101,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# grab gosu for easy step-down from root
18102,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18103,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18104,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18105,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18106,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# see note below about ""*.pyc"" files"
18107,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# arches officialy built by upstream
18108,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18109,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18110,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18111,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18112,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18113,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18114,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18115,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18116,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18117,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18118,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18119,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18120,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18121,91939daa3f42d2796952f03353534cd87d181ccc,/11/Dockerfile, # backwards compat
18122,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18123,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18124,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18125,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18126,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,#		krb5-dev \
18127,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,#		openldap-dev \
18128,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# configure: error: prove not found
18129,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18130,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18131,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18132,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18133,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18134,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18135,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18136,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18137,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18138,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18139,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18140,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18141,0f55625d25faf7ad6adf821e91612d7df53d9a11,/9.6/alpine/Dockerfile, # backwards compat
18142,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,# vim:set ft=dockerfile:
18143,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,# explicitly set user/group IDs
18144,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18145,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18146,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,# grab gosu for easy step-down from root
18147,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18148,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18149,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18150,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18151,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# see note below about ""*.pyc"" files"
18152,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,# arches officialy built by upstream
18153,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18154,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18155,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18156,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18157,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18158,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18159,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18160,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18161,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18162,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18163,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18164,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18165,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18166,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/Dockerfile, # backwards compat
18167,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
18168,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
18169,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18170,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18171,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#		krb5-dev \
18172,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#		openldap-dev \
18173,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# configure: error: prove not found
18174,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18175,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18176,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18177,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18178,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18179,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18180,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18181,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18182,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18183,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,#p' --recursive /usr/local \
18184,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18185,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18186,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18187,f582075c1ccf252793f6f47f7b60bdd7fbf2cdb0,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18188,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# vim:set ft=dockerfile:
18189,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18190,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18191,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18192,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#		krb5-dev \
18193,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#		openldap-dev \
18194,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# configure: error: prove not found
18195,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18196,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18197,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18198,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18199,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18200,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18201,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18202,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18203,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18204,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,#p' --recursive /usr/local \
18205,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18206,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18207,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18208,d6e8fe3240b3d2c5d1a03f005360710812714163,/12/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18209,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# vim:set ft=dockerfile:
18210,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# explicitly set user/group IDs
18211,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18212,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18213,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# grab gosu for easy step-down from root
18214,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18215,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18216,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18217,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18218,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# see note below about ""*.pyc"" files"
18219,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# arches officialy built by upstream
18220,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18221,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18222,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18223,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18224,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18225,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18226,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18227,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18228,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18229,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18230,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18231,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18232,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18233,90ba599a267562442a1b3e2e058c620ede70624b,/12/Dockerfile, # backwards compat
18234,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18235,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18236,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18237,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18238,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,#		krb5-dev \
18239,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,#		openldap-dev \
18240,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18241,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18242,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18243,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18244,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18245,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18246,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18247,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18248,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18249,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18250,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18251,123aedc09bc067740fb28921c500ded83c018bd4,/9.6/alpine/Dockerfile, # backwards compat
18252,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
18253,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18254,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18255,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18256,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#		krb5-dev \
18257,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#		openldap-dev \
18258,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# configure: error: prove not found
18259,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18260,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18261,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18262,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18263,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18264,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18265,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18266,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18267,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18268,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,#p' --recursive /usr/local \
18269,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18270,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18271,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18272,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18273,5992d8be755d8001474f737a44c73049c519cff3,/10/alpine/Dockerfile, # backwards compat
18274,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
18275,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18276,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18277,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18278,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,#		krb5-dev \
18279,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,#		openldap-dev \
18280,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18281,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18282,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18283,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18284,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18285,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18286,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18287,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18288,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18289,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18290,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18291,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18292,54053ad27ac099abff3d4964bf7460fb9c541d5d,/9.5/alpine/Dockerfile, # backwards compat
18293,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# vim:set ft=dockerfile:
18294,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# explicitly set user/group IDs
18295,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,# grab gosu for easy step-down from root
18296,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18297,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18298,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18299,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18300,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18301,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18302,548a270a6c16913a82d77503aba5814601ed4f58,/9.4/Dockerfile, # backwards compat
18303,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# vim:set ft=dockerfile:
18304,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# explicitly set user/group IDs
18305,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,# grab gosu for easy step-down from root
18306,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18307,ed23320582f4ec5b0e5e35c99d98966dacbc6ed8,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18308,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,# vim:set ft=dockerfile:
18309,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18310,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,# grab gosu for easy step-down from root
18311,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18312,cb70a79c1a8248d7e0db89d79dfbd08dd481be7f,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18313,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,# vim:set ft=dockerfile:
18314,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18315,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,# grab gosu for easy step-down from root
18316,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18317,63d966973d9593c0d9890b96f10ac73566913520,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18318,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18319,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
18320,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18321,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18322,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#		krb5-dev \
18323,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#		openldap-dev \
18324,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# configure: error: prove not found
18325,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18326,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18327,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18328,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18329,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18330,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18331,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18332,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18333,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18334,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18335,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18336,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18337,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18338,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18339,ada31ea8dc1dd01a613eebd8f0d12ad1fc2f1757,/9.6/alpine/Dockerfile, # backwards compat
18340,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
18341,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18342,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18343,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18344,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#		krb5-dev \
18345,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#		openldap-dev \
18346,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# configure: error: prove not found
18347,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18348,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18349,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18350,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18351,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18352,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18353,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18354,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18355,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18356,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,#p' --recursive /usr/local \
18357,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18358,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18359,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18360,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18361,e5f137ce4eb3c2fd1190b7ff2db842ebafaa3a6d,/10/alpine/Dockerfile, # backwards compat
18362,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# vim:set ft=dockerfile:
18363,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# explicitly set user/group IDs
18364,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18365,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18366,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# grab gosu for easy step-down from root
18367,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18368,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18369,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18370,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18371,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# see note below about ""*.pyc"" files"
18372,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# arches officialy built by upstream
18373,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18374,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18375,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18376,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18377,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18378,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18379,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18380,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18381,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18382,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18383,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18384,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18385,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18386,0d9c944be57617f493b4800c0489ce9d3d09f2ec,/10/Dockerfile, # backwards compat
18387,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# vim:set ft=dockerfile:
18388,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# explicitly set user/group IDs
18389,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,# grab gosu for easy step-down from root
18390,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18391,09b09edbea4339a008ef81f00475330172fe7630,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18392,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# vim:set ft=dockerfile:
18393,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18394,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18395,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18396,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#		krb5-dev \
18397,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#		openldap-dev \
18398,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# configure: error: prove not found
18399,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18400,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18401,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18402,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18403,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18404,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18405,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18406,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18407,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18408,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,#p' --recursive /usr/local \
18409,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18410,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18411,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18412,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18413,57213ab012e6a38a27283eeac65c4726c069647a,/10/alpine/Dockerfile, # backwards compat
18414,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# vim:set ft=dockerfile:
18415,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# explicitly set user/group IDs
18416,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,# grab gosu for easy step-down from root
18417,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18418,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18419,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18420,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18421,b68154ed7975480d26e65344dcda09cce0ac1ac9,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18422,415b445c37de1d70cf6a669bd48b915952561f7d,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18423,415b445c37de1d70cf6a669bd48b915952561f7d,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18424,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
18425,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18426,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18427,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18428,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#		krb5-dev \
18429,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#		openldap-dev \
18430,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# configure: error: prove not found
18431,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18432,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18433,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18434,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18435,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18436,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18437,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18438,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18439,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18440,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
18441,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18442,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18443,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18444,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18445,138e95956f10be942c43b6beb889716a1640fc62,/9.4/alpine/Dockerfile, # backwards compat
18446,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# vim:set ft=dockerfile:
18447,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18448,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18449,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18450,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,#		krb5-dev \
18451,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,#		openldap-dev \
18452,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18453,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# install OSSP uuid (http://www.ossp.org/pkg/lib/uuid/)
# see https://github.com/docker-library/postgres/pull/255 for more details"
18454,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18455,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18456,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18457,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18458,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18459,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18460,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18461,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18462,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18463,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18464,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18465,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18466,76858f0957b5f9e1a871770cf4b984d44edc80c7,/9.3/alpine/Dockerfile, # backwards compat
18467,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18468,dc0a59178fc9e87ebfa3c0a2ba8c2634ce35bf7b,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18469,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18470,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18471,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18472,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18473,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,#		krb5-dev \
18474,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,#		openldap-dev \
18475,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18476,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18477,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18478,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18479,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18480,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18481,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18482,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18483,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18484,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18485,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18486,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18487,2b0f642834a9ab4bad3155ff4a2a0e3ee457b75b,/9.6/alpine/Dockerfile, # backwards compat
18488,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
18489,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18490,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18491,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18492,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#		krb5-dev \
18493,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#		openldap-dev \
18494,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# configure: error: prove not found
18495,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18496,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18497,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18498,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18499,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18500,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18501,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18502,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18503,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18504,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
18505,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18506,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18507,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18508,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18509,6750eda25a2f0856b3997309ef393475f008d6a3,/9.5/alpine/Dockerfile, # backwards compat
18510,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# vim:set ft=dockerfile:
18511,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# explicitly set user/group IDs
18512,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18513,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18514,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# grab gosu for easy step-down from root
# https://github.com/tianon/gosu/releases"
18515,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18516,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18517,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18518,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
18519,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18520,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# see note below about ""*.pyc"" files"
18521,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# arches officialy built by upstream
18522,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18523,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18524,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18525,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# we need DEBIAN_FRONTEND on postgresql-13 for slapd (""Please enter the password for the admin entry in your LDAP directory.""); see https://bugs.debian.org/929417"
18526,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18527,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18528,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18529,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18530,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18531,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18532,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18533,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18534,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18535,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18536,682ff83c5c83f1b6f2b02caf7aa3e17a491b403a,/13/Dockerfile, # backwards compat
18537,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18538,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18539,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18540,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18541,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#		krb5-dev \
18542,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#		openldap-dev \
18543,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# configure: error: prove not found
18544,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18545,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18546,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18547,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18548,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18549,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18550,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18551,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18552,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18553,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18554,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18555,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18556,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18557,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18558,165ffaab649aea0797ad61739cb5c9ac69466929,/9.6/alpine/Dockerfile, # backwards compat
18559,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
18560,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# 70 is the standard uid/gid for ""postgres"" in Alpine
# https://git.alpinelinux.org/aports/tree/main/postgresql/postgresql.pre-install?h=3.11-stable"
18561,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18562,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18563,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,#		krb5-dev \
18564,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,#		openldap-dev \
18565,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,# configure: error: prove not found
18566,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18567,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18568,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18569,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18570,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18571,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18572,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18573,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18574,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18575,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,#p' --recursive /usr/local \
18576,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18577,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18578,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18579,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18580,16dd8dbf87af47f280cf784aac8f2afb7a24c383,/9.4/alpine/Dockerfile, # backwards compat
18581,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18582,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18583,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18584,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18585,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#		krb5-dev \
18586,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#		openldap-dev \
18587,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# configure: error: prove not found
18588,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18589,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18590,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18591,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18592,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18593,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18594,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18595,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18596,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18597,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18598,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18599,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18600,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18601,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18602,cd5e2ba99930a3b2a940a9ce1786767da7d36119,/9.6/alpine/Dockerfile, # backwards compat
18603,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# vim:set ft=dockerfile:
18604,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# explicitly set user/group IDs
18605,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18606,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18607,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# grab gosu for easy step-down from root
18608,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18609,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18610,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18611,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
18612,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18613,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
18614,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# arches officialy built by upstream
18615,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18616,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18617,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18618,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18619,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18620,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18621,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18622,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18623,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18624,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18625,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18626,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18627,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18628,4f70bf2b811bcdb4ab1a015ef703373226452157,/9.5/Dockerfile, # backwards compat
18629,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18630,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18631,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18632,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18633,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,#		krb5-dev \
18634,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,#		openldap-dev \
18635,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18636,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18637,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18638,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18639,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18640,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18641,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18642,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18643,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18644,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18645,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18646,5fddf91c236f23f750ac573d142b5b2cb94a1bca,/9.6/alpine/Dockerfile, # backwards compat
18647,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# vim:set ft=dockerfile:
18648,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# explicitly set user/group IDs
18649,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18650,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18651,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# grab gosu for easy step-down from root
18652,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18653,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18654,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18655,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# install ""xz-utils"" for .sql.xz docker-entrypoint-initdb.d files"
18656,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18657,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# see note below about ""*.pyc"" files"
18658,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# arches officialy built by upstream
18659,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18660,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18661,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18662,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18663,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18664,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18665,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18666,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18667,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18668,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18669,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18670,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18671,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18672,17c71aef1940ef0d2cc8bdc8bf7fb0a2856c8326,/11/Dockerfile, # backwards compat
18673,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# vim:set ft=dockerfile:
18674,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# explicitly set user/group IDs
18675,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,# grab gosu for easy step-down from root
18676,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18677,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18678,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18679,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18680,ea6f466b258ad42a87a753a10dc84272d56ab699,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18681,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,# vim:set ft=dockerfile:
18682,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18683,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,# grab gosu for easy step-down from root
18684,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18685,e5cd70b504ed958911d2ae495d0d39c26f82557f,/8.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18686,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,# vim:set ft=dockerfile:
18687,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
# /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
# /etc/group:34:postgres:x:70:"
18688,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18689,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18690,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,#		krb5-dev \
18691,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,#		openldap-dev \
18692,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18693,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18694,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18695,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18696,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18697,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18698,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18699,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18700,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18701,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18702,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18703,439c4976afbc9cb8c1fbc9c9783c84f62856a3c4,/9.4/alpine/Dockerfile, # backwards compat
18704,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# vim:set ft=dockerfile:
18705,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# explicitly set user/group IDs
18706,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,# grab gosu for easy step-down from root
18707,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18708,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18709,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18710,b1831ce069d10b14be05b9ddf6823e3d18c62cee,/9.6/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18711,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,# vim:set ft=dockerfile:
18712,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18713,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,# grab gosu for easy step-down from root
18714,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18715,b9ea5d40cbedf35606ac638950a824f3e97aae5b,/9.2/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18716,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# vim:set ft=dockerfile:
18717,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# explicitly set user/group IDs
18718,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,# grab gosu for easy step-down from root
18719,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18720,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18721,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18722,56b1a0c47ae8361eca133e41c6ddd68ad492ac2d,/9.4/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18723,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,# vim:set ft=dockerfile:
18724,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18725,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,# grab gosu for easy step-down from root
18726,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18727,e5cd70b504ed958911d2ae495d0d39c26f82557f,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18728,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,# vim:set ft=dockerfile:
18729,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18730,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,# grab gosu for easy step-down from root
18731,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18732,981ac750a3ef6160aab69509a9e8a56304366eb2,/9.0/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18733,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# vim:set ft=dockerfile:
18734,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18735,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18736,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18737,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#		krb5-dev \
18738,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#		openldap-dev \
18739,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# configure: error: prove not found
18740,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18741,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18742,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18743,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18744,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18745,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18746,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18747,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18748,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18749,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,#p' --recursive /usr/local \
18750,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18751,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18752,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18753,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18754,ba24350aa02996f75cf5b44eea0af082775cc8ec,/11/alpine/Dockerfile, # backwards compat
18755,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# vim:set ft=dockerfile:
18756,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18757,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18758,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18759,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#		krb5-dev \
18760,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#		openldap-dev \
18761,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# configure: error: prove not found
18762,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18763,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18764,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18765,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18766,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18767,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18768,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18769,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18770,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18771,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,#p' --recursive /usr/local \
18772,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18773,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18774,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18775,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18776,3d152d1a0d08cf52a1392b58243ff3c423588ccc,/9.6/alpine/Dockerfile, # backwards compat
18777,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
18778,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18779,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18780,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18781,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,#		krb5-dev \
18782,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,#		openldap-dev \
18783,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# configure: error: prove not found
18784,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18785,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18786,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18787,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18788,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18789,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18790,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18791,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18792,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18793,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18794,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18795,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18796,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18797,466a61bac6997c368be02dff5eb43673c4ce3fa9,/9.5/alpine/Dockerfile, # backwards compat
18798,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# vim:set ft=dockerfile:
18799,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# explicitly set user/group IDs
18800,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# grab gosu for easy step-down from root
18801,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18802,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18803,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# arches officialy built by upstream
18804,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18805,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18806,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18807,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18808,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18809,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18810,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18811,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18812,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18813,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18814,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18815,cd3f3b1c483e17a0c174d2bfa80d61a5b0f72d2e,/9.5/Dockerfile, # backwards compat
18816,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# vim:set ft=dockerfile:
18817,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# alpine includes ""postgres"" user/group in base install
#   /etc/passwd:22:postgres:x:70:70::/var/lib/postgresql:/bin/sh
#   /etc/group:34:postgres:x:70:
# the home directory for the postgres user, however, is not created by default
# see https://github.com/docker-library/postgres/issues/274"
18818,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# su-exec (gosu-compatible) is installed further down
18819,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default
# alpine doesn't require explicit locale-file generation"
18820,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#		krb5-dev \
18821,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#		openldap-dev \
18822,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# configure: error: prove not found
18823,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# configure: error: Perl module IPC::Run is required to run TAP tests
18824,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#		perl-dev \
#		python-dev \
#		python3-dev \
#		tcl-dev \"
18825,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# update ""DEFAULT_PGSOCKET_DIR"" to ""/var/run/postgresql"" (matching Debian)
# see https://anonscm.debian.org/git/pkg-postgresql/postgresql.git/tree/debian/patches/51-default-sockets-in-var.patch?id=8b539fcb3e093a521c095e70bdfa76887217b89f"
18826,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#define"" && $2 == ""DEFAULT_PGSOCKET_DIR"" && $3 == ""\""/tmp\"""" { $3 = ""\""/var/run/postgresql\""""; print; next } { print }' src/include/pg_config_manual.h > src/include/pg_config_manual.h.new \"
18827,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,# explicitly update autoconf config.guess and config.sub so they support more arches/libcs
18828,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# configure options taken from:
# https://anonscm.debian.org/cgit/pkg-postgresql/postgresql.git/tree/debian/rules?h=9.5"
18829,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# ""/usr/src/postgresql/src/backend/access/common/tupconvert.c:105: undefined reference to `libintl_gettext'""
#		--enable-nls \"
18830,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# skip debugging info -- we want tiny size instead
#		--enable-debug \"
18831,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# these make our image abnormally large (at least 100MB larger), which seems uncouth for an ""Alpine"" (ie, ""small"") variant :)
#		--with-krb5 \
#		--with-gssapi \
#		--with-ldap \
#		--with-tcl \
#		--with-perl \
#		--with-python \
#		--with-pam \"
18832,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,#p' --recursive /usr/local \
18833,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# tzdata is optional, but only adds around 1Mb to image size and is recommended by Django documentation:
# https://docs.djangoproject.com/en/1.10/ref/databases/#optimizing-postgresql-s-configuration"
18834,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18835,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/local/share/postgresql/postgresql.conf.sample"
18836,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18837,f8e61ad42f6b1704700769c511fe1bb4e75fba1e,/9.5/alpine/Dockerfile, # backwards compat
18838,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# vim:set ft=dockerfile:
18839,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# explicitly set user/group IDs
18840,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# grab gosu for easy step-down from root
18841,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18842,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18843,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18844,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18845,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# arches officialy built by upstream
18846,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18847,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18848,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18849,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18850,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18851,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18852,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18853,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18854,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18855,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18856,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18857,2cab5040341f46331367f8766b4d249a5b7a9366,/9.3/Dockerfile, # backwards compat
18858,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# vim:set ft=dockerfile:
18859,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# explicitly set user/group IDs
18860,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,# grab gosu for easy step-down from root
18861,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18862,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18863,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18864,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18865,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample"
18866,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile," # this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18867,d8abce4e82533aa2673da9ba9a5a8385589ed693,/9.5/Dockerfile, # backwards compat
18868,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,# vim:set ft=dockerfile:
18869,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added"
18870,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,# grab gosu for easy step-down from root
18871,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18872,a6d4922823aa8011513bb9c160c26c689301823a,/9.4/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf \
18873,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# vim:set ft=dockerfile:
18874,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# explicitly set user/group IDs
18875,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# https://salsa.debian.org/postgresql/postgresql-common/blob/997d842ee744687d99a2b2d95c1083a2615c79e8/debian/postgresql-common.postinst#L32-35
18876,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# also create the postgres user's home directory with appropriate permissions
# see https://github.com/docker-library/postgres/issues/274"
18877,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# grab gosu for easy step-down from root
18878,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# make the ""en_US.UTF-8"" locale so postgres will be utf-8 enabled by default"
18879,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# if this file exists, we're likely in ""debian:xxx-slim"", and locales are thus being excluded so we need to remove that exclusion (since we need locales)"
18880,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# install ""nss_wrapper"" in case we need to fake ""/etc/passwd"" and ""/etc/group"" (especially for OpenShift)
# https://github.com/docker-library/postgres/issues/359
# https://cwrap.org/nss_wrapper.html"
18881,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# pub   4096R/ACCC4CF8 2011-10-13 [expires: 2019-07-02]
#       Key fingerprint = B97B 0AFC AA1A 47F0 44F2  44A0 7FCC 7D46 ACCC 4CF8
# uid                  PostgreSQL Debian Repository"
18882,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# see note below about ""*.pyc"" files"
18883,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# arches officialy built by upstream
18884,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# we're on an architecture upstream doesn't officially build for
# let's build binaries from their published source packages"
18885,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# https://github.com/docker-library/postgres/issues/484 (clang-6.0 required, only available in stretch-backports)
# TODO remove this once we hit buster+"
18886,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# build .deb files from upstream's source packages (which are verified by apt-get)
18887,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,# we don't remove APT lists here because they get re-downloaded and removed later
18888,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# reset apt-mark's ""manual"" list so that ""purge --auto-remove"" will remove all build dependencies
# (which is done after we install the built packages so we don't have to redownload any overlapping dependencies)"
18889,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# create a temporary local APT repo to install from (so that dependency resolution can be handled by APT, as it should be)"
18890,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# work around the following APT issue by using ""Acquire::GzipIndexes=false"" (overriding ""/etc/apt/apt.conf.d/docker-gzip-indexes"")
#   Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)
#   ...
#   E: Failed to fetch store:/var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages  Could not open file /var/lib/apt/lists/partial/_tmp_tmp.ODWljpQfkE_._Packages - open (13: Permission denied)"
18891,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,#(create_main_cluster) .*$/\1 = false/' /etc/postgresql-common/createcluster.conf; \
18892,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# if we have leftovers from building, let's purge them (including extra, unnecessary build deps)"
18893,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# some of the steps above generate a lot of ""*.pyc"" files (and setting ""PYTHONDONTWRITEBYTECODE"" beforehand doesn't propagate properly for some reason), so we clean them up manually (as long as they aren't owned by a package)"
18894,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# make the sample config easier to munge (and ""correct by default"")"
18895,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"#?(listen_addresses)\s*=\s*\S+.*!\1 = '*'!"" /usr/share/postgresql/postgresql.conf.sample; \"
18896,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile,"# this 777 will be replaced by 700 at runtime (allows semi-arbitrary ""--user"" values)"
18897,04626521017c8f1daa3839e3e5d36a606ec98f80,/9.5/Dockerfile, # backwards compat
